/**
 * id: MY3w
 * path: ./ui-components/log-panel
 */

(function(require,module,exports) {
"use strict";var e,t,r,a,i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},n=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var s=require("@bilibili-live/web-player-common"),l=o(require("./log-panel.less")),c="web-player-show-log",h=function(){function o(n){e.set(this,(0,s.createElement)("div",{classname:l.default.webPlayerLogPanel})),t.set(this,(0,s.createElement)("pre")),r.set(this,!1),a.set(this,null),this.initPanel(),n.appendChild(i(this,e,"f")),"1"===localStorage.getItem(c)&&this.show()}return o.prototype.show=function(){i(this,e,"f").style.display="block",i(this,r,"f")||n(this,a,this.syncLogger(),"f"),localStorage.setItem(c,"1")},o.prototype.destroy=function(){var t;null===(t=i(this,a,"f"))||void 0===t||t.call(this),i(this,e,"f").remove()},o.prototype.initPanel=function(){var t=this.createCloseBtn();i(this,e,"f").appendChild(t)},o.prototype.createCloseBtn=function(){var t=this,r=(0,s.createElement)("div",{text:"[x]",classname:l.default.closeBtn});return r.addEventListener("click",function(r){r.stopPropagation(),i(t,e,"f").style.display="none",localStorage.setItem(c,"0")}),r},o.prototype.syncLogger=function(){var a=this;n(this,r,!0,"f");var o=document.createDocumentFragment();return s.logger.history().forEach(function(e){o.appendChild(c(e))}),i(this,t,"f").appendChild(o),i(this,e,"f").appendChild(i(this,t,"f")),s.logger.watch(function(e){i(a,t,"f").appendChild(c(e))});function c(e){var t=document.createElement("code");return t.classList.add(l.default["log".concat(e.level)]),t.textContent="".concat(s.logger.stringify(e,{tag:!1,time:!1}),"\n"),t}},o}();e=new WeakMap,t=new WeakMap,r=new WeakMap,a=new WeakMap,exports.default=h;
})()