(()=>{var e,t,n,i,r={5674:e=>{var t;self,t=()=>{return e={958:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=n(754),l=n(954),c=n(380),u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],h=[44100,48e3,32e3,-1],d=function(e,t){return 1===t&&(t=2),"mp4a."+e.toString(16)+(t?"."+t.toString():"")},f=o((function e(t,n,i,r,o){a(this,e),this.profile=n,this.rate=i,this.channel=r,this.frame=o,this.codecs=d(t,n)})),p=o((function e(t,n,i,r){a(this,e),this.width=t,this.height=n,this.nalu=i,this.codecs=r}));e.exports={audioTypeAAC:64,audioTypeMP3:107,getAacCodec:d,parseAudioInfo:function(e,t){if(64===t){if(e.length<2)return null;var n=e[0]>>>3&31,i=(7&e[0])<<1|e[1]>>>7&1,r=e[1]>>3&15;return new f(t,n,u[i],r,1024)}if(107===t){if(e.length<4)return null;var o=e[1]>>>3&3,a=e[1]>>>1&3;if(a<1||a>3)return null;var s,l,c=e[2]>>>2&3,d=3==(e[3]>>>6&3)?1:2;switch(o){case 3:s=h[c];break;case 2:s=h[c]>>>1;break;default:s=h[c]>>>2}switch(a){case 3:l=3===o?1152:576;break;case 2:l=1152;break;default:l=384}return new f(t,0,s,d,l)}return null},parseVideoInfo:function(e,t){var n;if(-7===t)n=new l.AvcParser;else if(-12===t)n=new c.HevcParser;else{if(-14!==t)return null;n=new s.Av1Parser}if(0!==n.parse(e))return null;var i=n.displaySize;return new p(i.width,i.height,n.nalu,n.codecs)}}},754:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n(757),l=n(819).BitStream,c=function(){function e(){r(this,e),this.max_frame_width_minus_1=0,this.max_frame_height_minus_1=0}return a(e,[{key:"parse",value:function(e){var t,n,i,r,o=[],a=0,s=0,l=0,c=0,u=[],h=[],d=[],f=[],p=[],v=[],m=[],y=[],g=function(e,t){var n=s+1;f[t]=e.readBits(n),p[t]=e.readBits(n),v[t]=e.readBits(1)};if(r=e.readBits(3),e.readBits(1),0!=(t=e.readBits(1)))o[0]=e.readBits(5);else{0!=e.readBits(1)?(function(e){e.readBits(32),e.readBits(32),0!=e.readBits(1)&&function(e){for(var t=0;1!=e.readBits(1);)t++;if(t>=32)return 4294967295;var n=(1<<t)-1;n<0&&(n+=4294967296),t>0&&e.readBits(t)}(e)}(e),0!=(a=e.readBits(1))&&function(e){s=e.readBits(5),e.readBits(32),e.readBits(5),e.readBits(5)}(e)):a=0,l=e.readBits(1),c=e.readBits(5);for(var w=0;w<=c;w++)u[w]=e.readBits(12),o[w]=e.readBits(5),o[w]>7?h[w]=e.readBits(1):h[w]=0,0!=a?(d[w]=e.readBits(1),0!=d[w]&&g(e,w)):d[w]=0,0!=l&&(m[w]=e.readBits(1),0!=m[w]&&(y[w]=e.readBits(4)))}n=e.readBits(4),i=e.readBits(4),this.max_frame_width_minus_1=e.readBits(n+1),this.max_frame_height_minus_1=e.readBits(i+1),0!=(0!=t?0:e.readBits(1))&&(e.readBits(4),e.readBits(3)),e.readBits(1),e.readBits(1),e.readBits(1);var b=0;return 0!=t?b=0:(e.readBits(1),e.readBits(1),e.readBits(1),e.readBits(1),0!=(b=e.readBits(1))&&(e.readBits(1),e.readBits(1)),(0!=e.readBits(1)?0:e.readBits(1))>0&&(0!=e.readBits(1)||e.readBits(1)),0!=b&&e.readBits(3)),e.readBits(1),e.readBits(1),e.readBits(1),function(e){var t,n=e.readBits(1),i=0;2==r&&0!=n?i=e.readBits(1)?12:10:r<=2&&(i=n?10:8),t=1==r?0:e.readBits(1);var o=0,a=0,s=0;0!=e.readBits(1)?(o=e.readBits(8),a=e.readBits(8),s=e.readBits(8)):(o=2,a=2,s=2);var l=0,c=0;if(t)return e.readBits(1),l=1,void(c=1);1==o&&13==a&&0==s?(l=0,c=0):(e.readBits(1),0==r?(l=1,c=1):1==r?(l=0,c=0):12==i?c=(l=e.readBits(1))?e.readBits(1):0:(l=1,c=0),l&&c&&e.readBits(2)),e.readBits(1)}(e),e.readBits(1),e.getOffset()}},{key:"displaySize",get:function(){return{width:this.max_frame_width_minus_1+1,height:this.max_frame_height_minus_1+1}}}]),e}(),u=function(){function e(){r(this,e),this.seq_profile=0,this.seq_level_idx_0=0,this.seq_tier_0=0,this.high_bitdepth=0,this.twelve_bit=0,this.nalu=1,this.config_obus=[],this.onCustomData=void 0}return a(e,[{key:"onMetadataUserData",value:function(t){for(var n=new l(t);n.getOffset().bytes<t.length&&!(n.getOffset().bytes+1>=t.length);){var i=e.parseLeb128(n),r=n.getOffset().bytes,o=t.subarray(r,r+i);o.length>=16&&this.onCustomData&&this.onCustomData(o.slice(0,16),o.slice(16)),n.setOffset(r+i,0)}}},{key:"parse",value:function(e){this.seq_profile=e[1]>>>5,this.seq_level_idx_0=31&e[1],this.seq_tier_0=e[2]>>>7,this.high_bitdepth=e[2]>>>6&1,this.twelve_bit=e[2]>>>5&1;var t=e.subarray(4,e.length);return this.parseObus(t),0}},{key:"parseObus",value:function(t){for(var n=new l(t);n.getOffset().bytes<t.length;){var i=e.parseObuHeader(n),r=void 0;0!==i.obu_has_size_field&&(r=e.parseLeb128(n));var o=n.getOffset().bytes,a=8*n.getOffset().bytes+n.getOffset().bits;switch(0===i.obu_has_size_field&&(r=t.length-o),i.obu_type){case 1:var s=new c;s.parse(n),this.config_obus.push(s);break;case 5:var u=e.parseLeb128(n),h=n.getOffset().bytes,d=t.subarray(h,o+r);7==u&&this.onMetadataUserData(d)}var f=8*n.getOffset().bytes+n.getOffset().bits-a;r>0&&4!=i.obu_type&&8!=i.obu_type&&6!=i.obu_type&&e.trailingBits(n,8*r-f),n.setOffset(o+r,0)}}},{key:"codecs",get:function(){var e;return e=2===this.seq_profile&&this.high_bitdepth?this.twelve_bit?12:10:this.high_bitdepth?10:8,"av01."+this.seq_profile+"."+s.to02uString(this.seq_level_idx_0)+(this.seq_tier_0?"H":"M")+"."+s.to02uString(e)}},{key:"displaySize",get:function(){var e=this.config_obus.length?this.config_obus[0].displaySize:null;return e||(e={width:1280,height:720}),e}}],[{key:"parseLeb128",value:function(e){for(var t=0,n=0;n<8;n++){var i=e.readBits(8);if(t|=(127&i)<<7*n,!(128&i))break}return t<0&&(t+=4294967296),t}},{key:"obuExtensionHeader",value:function(e){var t={};return t.temporal_id=e.readBits(3),t.spatial_id=e.readBits(2),t.extension_header_reserved_3bits=e.readBits(3),t}},{key:"parseObuHeader",value:function(t){var n={};return n.obu_forbidden_bit=t.readBits(1),n.obu_type=t.readBits(4),n.obu_extension_flag=t.readBits(1),n.obu_has_size_field=t.readBits(1),n.obu_reserved_1bit=t.readBits(1),1==n.obu_extension_flag&&(n.obu_ext_header=e.obuExtensionHeader(t)),n}},{key:"trailingBits",value:function(e,t){for(e.readBit(),t--;t>0;)e.readBit(),t--}}]),e}();e.exports={Av1Parser:u}},954:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n(819).BitStream,l=n(757),c=function(){function e(){r(this,e),this.width=0,this.height=0}return a(e,[{key:"parse",value:function(e){var t=new s(e),n=1,i=this.profile_idc=t.readBits(8),r=t.readBits(8),o=(this.compatibility=r,this.level_idc=t.readBits(8),t.readUe(),0);if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||139===i||134===i||135===i)&&(3===(n=t.readUe())&&(o=t.readBit()),t.readUe(),t.readUe(),t.readBit(),0!==t.readBit()))for(var a=0;a<(3!==n?8:12);a++)t.readBit();t.readUe();var l=t.readUe();if(0===l)t.readUe();else if(1===l){t.readBit(),t.readSe(),t.readSe();var c=t.readUe();for(a=0;a<c;a++)t.readSe()}t.readUe(),t.readBit();var u=t.readUe(),h=t.readUe(),d=t.readBit();0===d&&t.readBit(),t.readBit();var f=t.readBit(),p=0,v=0,m=0,y=0;0!==f&&(p=t.readUe(),v=t.readUe(),m=t.readUe(),y=t.readUe()),t.readBit();var g,w=u+1,b=(h+1)*(2-(0!==d?1:0)),_=0!==d?1:0,k=0!==o?0:n;g=k>3?null:0===k?{dx:1,dy:2-_}:{dx:[0,2,2,1][k],dy:[0,2,1,1][k]*(2-_)};var C=0!==f,x=C?p*g.dx:0,S=C?m*g.dy:0,E=C?v*g.dx:0,M=C?y*g.dy:0;this.width=16*w-E-x,this.height=16*b-M-S}},{key:"displaySize",get:function(){return{width:this.width,height:this.height}}}]),e}(),u=function(){function e(){r(this,e),this.verison=0,this.profile=0,this.compatibility=0,this.level=0,this.nalu=4,this.sps=[]}return a(e,[{key:"parse",value:function(e){var t=e.length;if(t<7)return-1;this.version=e[0],this.profile=e[1],this.compatibility=e[2],this.level=e[3],this.nalu=1+(3&e[4]);var n=31&e[5];if(0===n)return-1;for(var i=6,r=0;r<n&&i+2<t;++r){var o=e[i]<<8|e[i+1];if(o+i+2+1>=t)return-1;try{var a=e.subarray(i+2+1,i+2+o-1),s=new c;s.parse(a),this.sps.push(s),0===r&&(this.profile=s.profile_idc,this.compatibility=-4&s.compatibility,this.level=s.level_idc)}catch(e){console.warn("parse avc-sps error")}i+=o+2}return 0}},{key:"codecs",get:function(){return"avc1."+l.to02xString(this.profile)+l.to02xString(this.compatibility)+l.to02xString(this.level)}},{key:"displaySize",get:function(){var e=this.sps.length?this.sps[0].displaySize:null;return e||(e={width:1280,height:720}),e}}]),e}();e.exports.AvcParser=u},819:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}var i=[0,16,1,2,4,8,32,3,5,10,12,15,47,7,11,13,14,6,9,31,35,37,42,44,33,34,36,40,39,43,45,46,17,18,20,24,19,21,26,28,23,27,29,30,22,25,38,41],r=[47,31,15,0,23,27,29,30,7,11,13,14,39,43,45,46,16,3,5,10,12,19,21,26,28,35,37,42,44,1,2,4,8,17,18,20,24,6,9,22,25,32,33,34,36,40,38,41],o=[15,0,7,11,13,14,3,5,10,12,1,2,4,8,6,9],a=[0,1,2,4,8,3,5,10,12,15,7,11,13,14,6,9],s=function(e){!1===e&&console.warn(e)},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._bytes=t.length,this._offsetBits=0,this._offsetBytes=0}var t,l;return t=e,(l=[{key:"moveNextBit",value:function(){++this._offsetBits,this._offsetBits>=8&&(this._offsetBits%=8,this._offsetBytes+1<=this._bytes&&(++this._offsetBytes,this._offsetBytes<this._bytes&&3===this._data[this._offsetBytes]&&this._offsetBytes>1&&0===this._data[this._offsetBytes-1]&&0===this._data[this._offsetBytes-2]&&++this._offsetBytes))}},{key:"getOffset",value:function(){return{bytes:this._offsetBytes,bits:this._offsetBits}}},{key:"setOffset",value:function(e,t){return e>this._bytes||t>8?-1:(this._offsetBits=t,this._offsetBytes=e,0)}},{key:"nextBit",value:function(){return s(this._data&&this._bytes>0),this._offsetBytes>=this._bytes?-1:this._data[this._offsetBytes]>>>7-this._offsetBits&1}},{key:"nextBits",value:function(t){var n=new e(this._data);return n._offsetBits=this._offsetBits,n._offsetBytes=this._offsetBytes,n.readBits(t)}},{key:"readBit",value:function(){if(s(this._data&&this._bytes>0),this._offsetBytes>=this._bytes)return-1;var e=this._data[this._offsetBytes]>>>7-this._offsetBits&1;return this.moveNextBit(),s(0===e||1===e),e}},{key:"readBits",value:function(e){s(e>0&&e<=32);for(var t=0,n=0,i=0;n<e&&-1!==i;n++)i=this.readBit(),s(0===i||1===i),t=t<<1|i;return t}},{key:"readBool",value:function(){return 1===this.readBit()}},{key:"readUe",value:function(){var e,t=-1;for(e=0;!e&&-1!==e;++t)e=this.readBit(),s(0===e||1===e);return e=0,t>0&&(s(t<32),e=this.readBits(t)),(1<<t)-1+e}},{key:"readSe",value:function(){var e=this.readUe();return(e+1)/2*(0==e%2?-1:1)}},{key:"readMe",value:function(e,t){var n=this.readUe();return e?(s(n>=0&&n<48),0!==t?i[n]:r[n]):(s(n>=0&&n<16),0!==t?o[n]:a[n])}},{key:"readTe",value:function(){var e=this.readUe();return 1!==e?e:0!==this.readBit()?0:1}}])&&n(t.prototype,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports.BitStream=l},380:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n(819).BitStream,l=function(){function e(){r(this,e),this.pic_width_in_luma_samples=0,this.pic_height_in_luma_samples=0}return a(e,[{key:"parse",value:function(e){var t=new s(e);t.readBits(16),t.readBits(4);var n=t.readBits(3);t.readBool(),this.general_profile_space=t.readBits(2),this.general_tier_flag=t.readBool(),this.general_profile_idc=t.readBits(5),this.general_profile_compatibility_flags=t.readBits(32),t.readBool(),t.readBool(),t.readBool(),t.readBool(),t.readBits(32),t.readBits(12),this.general_level_idc=t.readBits(8);for(var i=[],r=[],o=0;o<n;++o)i.push(t.readBool()),r.push(t.readBool());if(n>0)for(o=n;o<8;++o)t.readBits(2);for(o=0;o<n;++o)i[o]&&t.readBits(88),r[o]&&t.readBits(8);t.readUe(),3===t.readUe()&&t.readBool(),this.pic_width_in_luma_samples=t.readUe(),this.pic_height_in_luma_samples=t.readUe()}},{key:"displaySize",get:function(){return{width:this.pic_width_in_luma_samples,height:this.pic_height_in_luma_samples}}}]),e}(),c=function(){function e(){r(this,e),this.general_profile_space=0,this.general_profile_idc=0,this.general_level_idc=0,this.general_tier_flag=0,this.general_profile_compatibility_flags=0,this.nalu=4,this.sps=[]}return a(e,[{key:"parse",value:function(e){var t=e.length;if(t<23)return-1;if(1!==e[0])return-1;this.general_profile_space=e[1]>>6&3,this.general_tier_flag=e[1]>>5&1,this.general_profile_idc=31&e[1],this.general_profile_compatibility_flags=e[2]<<24|e[3]<<16|e[4]<<8|e[5];var n=e[6]<<24|e[7]<<16|e[8]<<8|e[9];n=n<<16|e[10]<<8|e[11],this.general_level_idc=e[12],this.nalu=1+(3&e[21]);for(var i=e[22],r=23,o=0;o<i;o++){if(r+3>e+t)return-1;var a=e[r],s=e[r+1]<<8|e[r+2];r+=3;for(var c=0;c<s;c++){if(r+2>t)return-1;var u=e[r]<<8|e[r+1];if(r+2+u>t)return-1;if(33==(63&a))try{var h=e.subarray(r+2,r+2+u),d=new l;d.parse(h),this.sps.push(d),0==c&&(this.general_profile_compatibility_flags=d.general_profile_compatibility_flags,this.general_profile_space=d.general_profile_space,this.general_profile_idc=d.general_profile_idc,this.general_tier_flag=d.general_tier_flag?1:0,this.general_level_idc=d.general_level_idc)}catch(e){console.warn("parse hevc-sps error")}r+=2+u}}return 0}},{key:"codecs",get:function(){var e=this.general_profile_compatibility_flags;return e=(e=(e=(e=(e=e>>1&1431655765|(1431655765&e)<<1)>>2&858993459|(858993459&e)<<2)>>4&252645135|(252645135&e)<<4)>>8&16711935|(16711935&e)<<8)>>16|e<<16,"hvc1."+["","A","B","C"][this.general_profile_space%4]+this.general_profile_idc.toString()+"."+e.toString(16).toLowerCase()+"."+["L","H"][this.general_tier_flag%2]+this.general_level_idc.toString()}},{key:"displaySize",get:function(){var e=this.sps.length?this.sps[0].displaySize:null;return e||(e={width:1280,height:720}),e}}]),e}();e.exports.HevcParser=c},757:e=>{var t=[[0,200,0,128,35,128],[33,0,73,144,2,25,0,35,128],[0,200,0,128,32,132,1,38,64,8,100,0,142],[0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56],[0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56],[0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]],n=[[1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90],[1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10],[1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10]],i=[90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94];function r(e,t,n){for(;t<n;)if(3!==e[t]&&0!==e[t])t+=3;else{if(0===e[t-2]&&0===e[t-1]&&3===e[t])return t-2;t+=1}return null}e.exports={getSilentFrame:function(e,r){if(2===e){if(r>=1&&r<=6)return new Uint8Array(t[r-1])}else if(r>=1&&r<=3)return new Uint8Array(n[r-1].concat(i));return null},ebsp2rbsp:function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),o=0,a=0;;){var s=r(t,a,n);if(null===s)break;i.set(t.subarray(a,s+2),o),o+=s-a+2,a=s+3}return i.set(t.subarray(a,t.length),o),o+=t.length-a,i.subarray(0,o)},to02uString:function(e){var t=e.toString(10);return t.length<2&&(t="0"+t),t},to02xString:function(e){var t=e.toString(16);return t.length<2&&(t="0"+t),t},equalsUuid:function(e,t){if(16!==e.length||16!==t.length)return!1;for(var n=0;n<16;++n)if(e[n]!==t[n])return!1;return!0}}},319:e=>{e.exports={SomeError:function(e,t){this.name=e,this.message=t,this.stack=(new Error).stack},errorAudioInfo:10001,errorVideoInfo:10002,errorAudioTrack:10003,errorVideoTrack:10004,errorUnknownCodec:10005,errorFlvPacket:10006,errorFlvDts:10007,errorNetworkTimeout:11e3,errorNetworkFetch:11001,errorNetworkRead:11002,errorMseOpen:11003,errorMseAppend:11004,errorM3u8Data:11010,errorMp4Data:11011,errorMp4Dts:11012,errorM3u8NotUpdate:11013,errorSwitchCrash:11020,errorSwitchTimeNotMatch:11021,errorSwitchCancel:11022}},809:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},r.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=n(319),c=n(690),u=n(118),h=n(15).e,d=n(97).StreamFetcher,f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(v,e);var t,n,c,f,p=(c=v,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(c);if(f){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}(this,e)});function v(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),n=p.call(this,e,t),console.log("fMp4Player ".concat(n.version)),n.maxDuration=30,n.minDuration=10,n.startTime=0,n._contentLength=void 0,n._loader=null,n._readDone=!1,n._readPaused=!1,n._readPosition=0,n._fmp4Muxer=null,n._checkBufferInterval=void 0,n._onCheckBufferBinder=n._onCheckBuffer.bind(a(n)),n._onResponseBinder=n._onResponse.bind(a(n)),n._onDataFetchedBinder=n._onDataFetched.bind(a(n)),n._onDataConvertedBinder=n._onDataConverted.bind(a(n)),n._onMetaDataBinder=n._onMetaDataParsed.bind(a(n)),n._onConvertErrorBinder=n._onConvertError.bind(a(n)),n._onReadErrorBinder=n._onReadError.bind(a(n)),n}return t=v,n=[{key:"version",get:function(){return"v1.43"}},{key:"destroy",value:function(){r(s(v.prototype),"destroy",this).call(this),void 0!==this._checkBufferInterval&&(window.clearInterval(this._checkBufferInterval),this._checkBufferInterval=void 0),this._firstPacketNotified=!1,this._readPaused=!1,this._readDone=!0,this._loader&&(this._loader.destroy(),this._loader=null),this._fmp4Muxer&&(this._fmp4Muxer.destroy(),this._fmp4Muxer=null),this._contentLength=void 0}},{key:"src",set:function(e){this.destroy(),this._setup(e),this._fetchUrl()}},{key:"createFetcher",value:function(e,t,n){return new d(e,t,n)}},{key:"_fetchUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._contentLength=void 0,this._receivedBytes=0,this._readDone=!1,this._readPaused=!1,this._readPosition=e,this._loader=this.createFetcher(this._onResponseBinder,this._onDataFetchedBinder,this._onReadErrorBinder),this._loader.fetchAsStream(this._url,!1,e,-1,this._timeout)}},{key:"_onDataConverted",value:function(e,t){this._ensureMse(this._mimeType),this._pushBuffer(e,t)}},{key:"_onMetaDataParsed",value:function(e){var t=this;if(this._mimeType=this._fmp4Muxer.mimeType,this.onMetaData&&this.onMetaData(e),this._contentLength&&this.startTime>0){var n=e.keyframes;if(n&&n.times&&n.filepositions){var i=h(n.times,this.startTime);if(i>=0&&i<n.filepositions.length){var r=n.filepositions[i];n.times[i]>this.startTime&&i>0&&(r=n.filepositions[--i]),this._fmp4Muxer&&this._fmp4Muxer.reset(),console.log("seek to: ".concat(n.times[i],"/").concat(e.duration,"s, pos=").concat(r));var o=function(){t._seekToPosition(r)};window.Promise?Promise.resolve().then(o):window.setTimeout(o,0)}else console.warn("seek failed: ".concat(this.startTime,"/").concat(e.duration,"s"))}this.startTime=0}}},{key:"_onConvertError",value:function(e,t){this._notifyParserError(e,{url:this._url,info:t})}},{key:"_onReadError",value:function(e,t){this._notifyNetworkError(e,{url:this._url,info:t})}},{key:"_processFetchedData",value:function(e){this._fmp4Muxer?this._fmp4Muxer.input(e):this._onDataConverted(e,void 0)}},{key:"_seekToPosition",value:function(e){this._fmp4Muxer&&this._fmp4Muxer.reset(),this._loader&&(this._loader.destroy(),this._loader=null),this._fetchUrl(e)}},{key:"_onDataFetched",value:function(e){return!(this._isDestroied||(!this._firstPacketNotified&&this.onFirstPacket&&(this._firstPacketNotified=!0,this.onFirstPacket()),e?(this._removeOutdated(),this._processFetchedData(e),this._receivedBytes+=e.length,this._readPosition+=e.length):e||(this._readDone=void 0===this._contentLength||this._receivedBytes>=this._contentLength,this._readDone&&this._pushEnd()),this._readDone||this._readPaused))}},{key:"_onResponse",value:function(e){if(this._isDestroied)return!1;if(!e.ok)return this._notifyNetworkError(l.errorNetworkFetch,{url:this._url,status:e.status}),!1;!this._firstResponseNotified&&this.onFirstResponse&&(this._firstResponseNotified=!0,this.onFirstResponse(e));var t=e.headers.get("Content-Length"),n=t?parseInt(t):void 0;void 0===this._contentLength&&(this._contentLength=n),this._contentLength&&void 0===this._checkBufferInterval&&(this._checkBufferInterval=window.setInterval(this._onCheckBufferBinder,500));var i=e.headers.get("Content-Type");return i&&-1!==i.indexOf("video/mp4")?(this._mimeType=i,this._fmp4Muxer=null):null===this._fmp4Muxer&&(this._mimeType=null,this._fmp4Muxer=new u.fMp4Muxer(250,this._onDataConvertedBinder,this._onMetaDataBinder,this.onSeiData,this._onConvertErrorBinder)),!0}},{key:"_onCheckBuffer",value:function(){var e=this.buffered;e<=this.minDuration&&this._readPaused&&this._receivedBytes<this._contentLength?(this._readPaused=!1,this._loader.fetchAsStream(this._url,!1,this._readPosition,-1,this._timeout)):e>=this.maxDuration&&!this._readPaused&&(this._readPaused=!0)}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),v}(c.LivePlayer);e.exports.R=f},521:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},r.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=n(319),c=n(690),u=n(97).Fetcher,h=n(909).t,d=n(615),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(v,e);var t,n,c,f,p=(c=v,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(c);if(f){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}(this,e)});function v(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),n=p.call(this,e,t),console.log("Hls7Player ".concat(n.version)),n._playlist=null,n._updateMasterPlaylistHandler=null,n._fetchM3u8Timer=void 0,n._fetchM3u8Binder=n._fetchM3u8.bind(a(n)),n._onM3u8ResponsedBinder=n._onM3u8Responsed.bind(a(n)),n._onM3u8FetchedBinder=n._onM3u8Fetched.bind(a(n)),n._onM3u8FetchErrorBinder=n._onM3u8FetchError.bind(a(n)),n._fetchedM4sCount=0,n._lastFetchM4sBegin=null,n._lastFetchM4sEnd=null,n._lastFetchM4sUrl=null,n._lastFetchInitM4sBegin=null,n._lastFetchM3u8Begin=null,n._lastFetchM3u8End=null,n._lastFetchMasterM3u8Begin=null,n._lastFetchM3u8=0,n._lastM3u8Sequence=0,n._lastM3u8Updated=0,n._initDone=!1,n._lastDuration=0,n._totalDuration=0,n._tryM3u8Times=0,n._pendingBuffers=[],n._onM4sResponsedBinder=n._onM4sResponsed.bind(a(n)),n._onM4sFetchedBinder=n._onM4sFetched.bind(a(n)),n._onM4sFetchErrorBinder=n._onM4sFetchError.bind(a(n)),n._mp4Parser=null,n._onM4sParsedBinder=n._onM4sParsed.bind(a(n)),n._m3u8Fetcher=new u(n._onM3u8ResponsedBinder,n._onM3u8FetchedBinder,n._onM3u8FetchErrorBinder),n._m4sFetcher=new u(n._onM4sResponsedBinder,n._onM4sFetchedBinder,n._onM4sFetchErrorBinder),n._savedFetchAsStream=n._m4sFetcher.fetchAsStream,n._onPlaylistUpdate=function(e,t){},n._masterPlaylistProcessor=n._defaultMasterPlaylistProcessor.bind(a(n)),n._fetchSwitchPlaylistTimer=void 0,n._paddingSwitchPlaylistResolve=null,n._targetSwitchPlaylistUrl=null,n._trySwitchPlaylistCount=0,n._trySwitchPlaylistMaxCount=5,n._trimStartKeepTimeMs=0,n}return t=v,n=[{key:"version",get:function(){return"v1.92"}},{key:"destroy",value:function(){r(s(v.prototype),"destroy",this).call(this),void 0!==this._fetchM3u8Timer&&(window.clearTimeout(this._fetchM3u8Timer),this._fetchM3u8Timer=void 0),this._fetchedM4sCount=0,this._mp4Parser=null,this._playlist=null,this._initDone=!1,this._lastDuration=0,this._lastM3u8Sequence=0,this._totalDuration=0,this._tryM3u8Times=0,this._pendingBuffers=[],this.cancelSwitchPlaylistUrl()}},{key:"setP2PContext",value:function(e){this._isDestroied||(e?(null!=e.P2PBufferLength&&(this._minBufferLength=e.P2PBufferLength),null!=e.P2PFetchAsStream&&(this._m4sFetcher.fetchAsStream=e.P2PFetchAsStream),null!=e.onPlaylistUpdate&&(this._onPlaylistUpdate=e.onPlaylistUpdate)):(this._minBufferLength=0,this._m4sFetcher.fetchAsStream=this._savedFetchAsStream,this._onPlaylistUpdate=function(e,t){}),this._playlist&&(this._playlist.onPlaylistUpdate=this._onPlaylistUpdate))}},{key:"getAudioTracks",value:function(){return this._mp4Parser?this._mp4Parser.getAudioTracks():[]}},{key:"switchAudioTrack",value:function(e){return!!this._mp4Parser&&this._mp4Parser.switchAudioTrack(e)}},{key:"cancelSwitchPlaylistUrl",value:function(){void 0!==this._fetchSwitchPlaylistTimer&&(window.clearTimeout(this._fetchSwitchPlaylistTimer),this._fetchSwitchPlaylistTimer=void 0),this._notifySwitchPlaylistResolve(l.errorSwitchCancel),this._targetSwitchPlaylistUrl=null,this._trySwitchPlaylistCount=0}},{key:"switchPlaylistUrl",value:function(e){var t=this;return new Promise((function(n){t.cancelSwitchPlaylistUrl(),t._paddingSwitchPlaylistResolve=n,t._targetSwitchPlaylistUrl=e}))}},{key:"setMasterPlaylistProcessor",value:function(e){return"function"==typeof e?(this._masterPlaylistProcessor=e.bind(this),!0):(this._masterPlaylistProcessor=this._defaultMasterPlaylistProcessor.bind(this),!1)}},{key:"getHLSNetworkState",value:function(){var e=performance.now();return{m3u8LastUpdated:Math.round(e-this._lastM3u8Updated),m3u8LastSeq:this._lastM3u8Sequence,m3u8LastEnd:null==this._lastFetchM3u8End?null:Math.round(e-this._lastFetchM3u8End),m3u8LastStarted:null==this._lastFetchM3u8Begin?null:Math.round(e-this._lastFetchM3u8Begin),m4sLastStarted:null==this._lastFetchM4sBegin?null:Math.round(e-this._lastFetchM4sBegin),m4sLastEnd:null==this._lastFetchM4sEnd?null:Math.round(e-this._lastFetchM4sEnd),m4sPath:this._lastFetchM4sUrl}}},{key:"_defaultMasterPlaylistProcessor",value:function(e,t){return e[0]}},{key:"_notifySwitchPlaylistResolve",value:function(e){this._paddingSwitchPlaylistResolve&&(this._paddingSwitchPlaylistResolve(e),this._paddingSwitchPlaylistResolve=null)}},{key:"_updateTargetPlaylist",value:function(e){var t=this;this._prefetchM3u8(e,(function(e,n,i){var r=t._playlist;n&&r&&r.switchToNewPlaylist(e,n)}),(function(e,t,n){console.warn("prefetch error: ".concat(n," (").concat(t,", ").concat(e,")"))}),2e3,3)}},{key:"fetchedM4sCount",get:function(){return this._fetchedM4sCount}},{key:"minBufferLength",get:function(){return this._minBufferLength},set:function(e){this._minBufferLength=e}},{key:"trimStartKeepTimeMs",set:function(e){this._trimStartKeepTimeMs=e}},{key:"src",set:function(e){this.destroy(),this._setup(e),this._playlist=new d.M3u8Context(this._trimStartKeepTimeMs),this._playlist.onSwitchToNextPlaylist=this._onSwitchToNextPlaylist.bind(this),this._playlist.setUrl(this._url),this._playlist.onPlaylistUpdate=this._onPlaylistUpdate,this._mp4Parser=new h(this._onM4sParsedBinder,this.onSeiData),this._fetchM3u8()}},{key:"_onSwitchToNextPlaylist",value:function(e){e?(this._url=this._targetSwitchPlaylistUrl,this._paddingSwitchPlaylistResolve(0)):this._paddingSwitchPlaylistResolve(l.errorSwitchCrash),this.cancelSwitchPlaylistUrl()}},{key:"_initMasterPlaylistUpdater",value:function(e){var t=this;null!==this._updateMasterPlaylistHandler&&clearTimeout(this._updateMasterPlaylistHandler);var n=function(e,n,i){var r=performance.now()-t._lastFetchMasterM3u8Begin;t._lastFetchMasterM3u8Begin=null;var o=t._playlist;if(n&&o&&!t._isDestroied&&t.onMasterPlaylistUpdate){var a=new d.BasicM3u8Parser;a.parse(n)===d.parsedOk&&a.streams.length>0&&t.onMasterPlaylistUpdate(a.streams,a.streamInfMaps,a.steering),t._onUrlFetchDone(e,r)}},i=function(e,t,n){console.warn("update msater prefetch error: ".concat(n," (").concat(t,", ").concat(e,")"))};!function r(){t._updateMasterPlaylistHandler=setTimeout((function(){t._isDestroied||(t._lastFetchMasterM3u8Begin=performance.now(),t._prefetchM3u8(e,n,i,2e3,3),r())}),t._masterPlaylistUpdateInterval)}()}},{key:"_doNextFetch",value:function(){var e=this,t=this._playlist,n=t.count,i=t.endOfStream;if(0===n&&i)this._pushEnd();else if(n>0&&(i||this._totalDuration<4e3||t.remainDuration>this._minBufferLength))this._fetchNextM4s();else{void 0!==this._fetchM3u8Timer&&(window.clearTimeout(this._fetchM3u8Timer),this._fetchM3u8Timer=void 0);var r=performance.now()-this._lastFetchM3u8,o=Math.round(this._lastDuration-r);this._tryM3u8Times=0,(o<0||o<100)&&(o=0),this._fetchM3u8Timer=window.setTimeout(this._fetchM3u8Binder,o),this._targetSwitchPlaylistUrl&&(this._trySwitchPlaylistCount<this._trySwitchPlaylistMaxCount?(this._trySwitchPlaylistCount++,void 0!==this._fetchSwitchPlaylistTimer&&window.clearTimeout(this._fetchSwitchPlaylistTimer),this._fetchSwitchPlaylistTimer=window.setTimeout((function(){e._fetchSwitchPlaylistTimer=void 0,e._updateTargetPlaylist(e._targetSwitchPlaylistUrl)}),o/2)):(this._targetSwitchPlaylistUrl=null,this._paddingSwitchPlaylistResolve(l.errorSwitchTimeNotMatch)))}}},{key:"_prefetchM3u8",value:function(e,t,n,i,r){var o=this,a=0,s=new u((function(e,t){return!o._isDestroied&&!!t.ok}),t,(function(e,t,i){t===l.errorNetworkTimeout&&!o._isDestroied&&++a<r?(console.warn("prefetch ".concat(a,": ").concat(e," after 2s timeout")),c()):n(e,t,i)})),c=function(){try{s.fetchAsText(e,!1,i)}catch(t){n(e,l.errorNetworkFetch,t)}};c()}},{key:"_fetchM3u8",value:function(){try{this._lastFetchM3u8Begin=this._lastFetchM3u8=performance.now(),this._lastFetchM3u8End=null,this._m3u8Fetcher.fetchAsText(this._url,!1,2e3)}catch(e){this._notifyNetworkError(l.errorNetworkFetch,{url:this._url,info:e})}}},{key:"_fetchNextM4s",value:function(){var e=null;try{var t=this._playlist.shift();t&&(e=t.uri,this._lastDuration=Math.floor(1e3*t.duration),this._lastFetchM4sUrl=e,this._lastFetchM4sBegin=performance.now(),this._lastFetchM4sEnd=null,this._m4sFetcher.fetchAsStream(e,!1,this._timeout))}catch(t){this._notifyNetworkError(l.errorNetworkFetch,{url:e,info:t})}this._removeOutdated()}},{key:"_onM3u8Responsed",value:function(e,t){return!(this._isDestroied||(304===t.status?(this._isDestroied||this._doNextFetch(),1):t.ok?(!this._firstResponseNotified&&this.onFirstResponse&&(this._firstResponseNotified=!0,this.onFirstResponse(t)),0):(this._playlist&&(this._playlist.endOfStream=!0),this._notifyNetworkError(l.errorNetworkFetch,{url:e,status:t.status}),1)))}},{key:"_onM3u8Fetched",value:function(e,t,n){var i=performance.now(),r=i-this._lastFetchM3u8Begin;this._lastFetchM3u8Begin=null,this._lastFetchM3u8End=i;var o=this._playlist;if(t&&o){if(e!=this._url)return void this._fetchM3u8();var a=o.parse(t);if(a==d.parsedAsMaster)return this._url=this._masterPlaylistProcessor(o.streamUrls,o.streamInfMaps,o.steering),console.log("stream url: ".concat(this._url)),o.setUrl(this._url),this._fetchM3u8(),void this._initMasterPlaylistUpdater(e);if(a<0&&0===o.count)return void this._notifyParserError(l.errorM3u8Data,{url:e,info:a});if(this._lastM3u8Sequence!==o.lastSequence)this._lastM3u8Sequence=o.lastSequence,this._lastM3u8Updated=i;else if(i>=this._lastM3u8Updated+this._timeout)return void this._notifyParserError(l.errorM3u8NotUpdate,{url:e,info:Math.round(i-this._lastM3u8Updated)})}if(o&&o.count>0&&!this._initDone){var s=o.shift();try{this._lastFetchInitM4sBegin=performance.now(),new u(this._onM4sResponsedBinder,this._onInitM4sFetched.bind(this),this._onM4sFetchErrorBinder).fetchAsBuffer(s.uri)}catch(e){this._notifyNetworkError(l.errorNetworkFetch,{url:s?s.uri:null,info:e})}}this._isDestroied||(this._doNextFetch(),this._onUrlFetchDone(e,r))}},{key:"_onM3u8FetchError",value:function(e,t,n){t===l.errorNetworkTimeout&&!this._isDestroied&&++this._tryM3u8Times<3?(console.warn("fetch ".concat(this._tryM3u8Times,": ").concat(e," after 1s timeout")),this._fetchM3u8()):this._notifyNetworkError(t,{url:e,info:n})}},{key:"_onM4sResponsed",value:function(e,t){return!(this._isDestroied||!t.ok&&(this._notifyNetworkError(l.errorNetworkFetch,{url:e,status:t.status}),1))}},{key:"_onInitM4sFetched",value:function(e,t,n){var i=performance.now()-this._lastFetchInitM4sBegin;this._lastFetchInitM4sBegin=null,t&&(this._parseM4s(e,t,n),this._receivedBytes+=t.byteLength),n&&(this._initDone=!0,this._fetchedM4sCount++,this._onUrlFetchDone(e,i))}},{key:"_onM4sFetched",value:function(e,t,n){if(!this._isDestroied){!this._firstPacketNotified&&this.onFirstPacket&&(this._firstPacketNotified=!0,this.onFirstPacket());var i=performance.now(),r=i-this._lastFetchM4sBegin;if(n&&(this._lastFetchM4sBegin=null,this._lastFetchM4sEnd=i,this._totalDuration+=this._lastDuration,this._doNextFetch()),t){var o=this._pendingBuffers;if(this._initDone){for(;o.length>0;){var a=o.shift();this._parseM4s(a.url,a.buffer,a.done)}this._parseM4s(e,t,n)}else o.push({url:e,buffer:t,done:n});this._receivedBytes+=t.byteLength}n&&(this._fetchedM4sCount++,this._onUrlFetchDone(e,r,this._lastDuration))}}},{key:"_onM4sFetchError",value:function(e,t,n){this._notifyNetworkError(t,{url:e,info:n})}},{key:"_onM4sParsed",value:function(e,t,n){var i=this._mp4Parser;1836019574===t&&i&&i.metaData&&(this._mimeType=i.mimeType,this.onMetaData&&this.onMetaData(i.metaData)),i&&this._ensureMse(i.mimeType),this._pushBuffer(e,n)}},{key:"_onUrlFetchDone",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.onFileFetched&&this.onFileFetched(e,{used:Math.round(t),duration:n})}},{key:"_parseM4s",value:function(e,t,n){try{this._mp4Parser&&this._mp4Parser.parse(t,n)}catch(t){var i="DtsError"===t.name?l.errorMp4Dts:l.errorMp4Data;this._notifyParserError(i,{url:e,info:t.message})}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),v}(c.LivePlayer);e.exports.m=f},690:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var o=n(483).E,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mediaSource=t,this._player=n,this._url=null,this._isOpened=!1,this._isDestroied=!1,this._mimeType=null,this._mseController=null,this._keepUsedBuffer=10,this._timeout=0,this._masterPlaylistUpdateInterval=1e4,this._lastRemovedPos=0,this._firstResponseNotified=!1,this._firstPacketNotified=!1,this._receivedBytes=0,this._minBufferLength=0,this._latencyBuffer=new Array,this.latencySec=0,this.startTime=0,this.onFirstResponse=null,this.onFirstPacket=null,this.onMetaData=null,this.onSeiData=null,this.onEndOfStream=null,this.onFileFetched=null,this.onNetworkError=null,this.onParserError=null,this.onMasterPlaylistUpdate=null}var t,n;return t=e,(n=[{key:"_latencySec",get:function(){return this._minBufferLength<this.latencySec?this.latencySec-this._minBufferLength:0}},{key:"destroy",value:function(){this._isDestroied||(this._isDestroied=!0,this._player.src&&URL.revokeObjectURL(this._player.src)),this._mseController&&(this._mseController.destroy(),this._mseController=null),this._isOpened=!1,this._lastRemovedPos=0,this._mimeType=null,this._firstResponseNotified=!1,this._firstPacketNotified=!1,this._receivedBytes=0}},{key:"version",get:function(){}},{key:"buffered",get:function(){var e=this._player.buffered;return e&&e.length>0?e.end(e.length-1)-this._player.currentTime:0}},{key:"mimeType",get:function(){return this._mimeType}},{key:"receivedBytes",get:function(){return this._receivedBytes}},{key:"keepUsedBuffer",set:function(e){this._keepUsedBuffer=e}},{key:"timeout",set:function(e){this._timeout=e}},{key:"masterPlaylistUpdateInterval",set:function(e){this._masterPlaylistUpdateInterval=e}},{key:"_notifyNetworkError",value:function(e,t){this.onNetworkError&&!this._isDestroied&&this.onNetworkError(e,t)}},{key:"_notifyParserError",value:function(e,t){this.onParserError&&!this._isDestroied&&this.onParserError(e,t)}},{key:"_onMseError",value:function(e,t){this._notifyParserError(e,{url:this._url,info:t})}},{key:"_setup",value:function(e){this._mseController&&this._mseController.destroy(),this._mseController=new o(this._mediaSource,this.onEndOfStream,this._onMseError.bind(this)),this._lastRemovedPos=0,this._receivedBytes=0,this._isDestroied=!1,this._url=e,this._mediaSource&&(this._mediaSource.createObjectURL?this._player.src=this._mediaSource.createObjectURL(this._player):this._player.src=URL.createObjectURL(this._mediaSource))}},{key:"_ensureMse",value:function(e){this._mimeType=e,e&&!this._isOpened&&this._mseController&&(this._isOpened=this._mseController.addSource(e))}},{key:"_pushBuffer",value:function(e,t){var n,i=0,o=0,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(this._latencyBuffer);try{for(a.s();!(n=a.n()).done;){var s=n.value;(o>=this._latencySec||0==this._latencySec)&&i++,o+=s.duration}}catch(e){a.e(e)}finally{a.f()}for(var l=0;l<i;l++){var c=this._latencyBuffer.shift();this._mseController.pushBuffer(c.buffer)}if(this._latencySec>0){if(void 0===t)throw new Error("latencySec not support in fMp4Player without FLV");this._latencyBuffer.push({buffer:e,duration:t})}else this._mseController&&this._mseController.pushBuffer(e)}},{key:"_pushEnd",value:function(){this._mseController&&this._mseController.pushEnd()}},{key:"_removeOutdated",value:function(){var e=this._player.currentTime;if(e>this._lastRemovedPos+this._keepUsedBuffer+10){var t=this._lastRemovedPos>10?this._lastRemovedPos-10:0,n=Math.floor(e-this._keepUsedBuffer);this._mseController&&this._mseController.removeBuffer(t,n)&&(this._lastRemovedPos=n)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports.LivePlayer=a},35:(e,t,n)=>{var i=n(221).checkChromeVer,r=n(221).Utils,o=n(704)._,a=n(809).R,s=n(521).m,l=n(313).V;e.exports={checkChromeVer:i,Utils:r,BufferDetector:o,fMp4Player:a,Hls7Player:s,NativePlayer:l}},118:(e,t,n)=>{function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===o(r)?r:String(r)),i)}var r}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var c=n(958),u=n(319),h=n(541),d=n(274),f=n(221),p=n(757),v=n(497).$,m=n(754).Av1Parser,y=9e4,g=function(){function e(t,n,i){a(this,e),this.type=t,this.id=n,this.tag=i,this.baseMediaDecodeTime=0,this.extraData=null,this.dataOffset=0,this.duration=0,this.samples=[],this.sequenceDts=null,this.timestampOffset=0,this.totalDuration=0,this.totalSampleCount=0,this.audioInfo=null,this.objectType=0,this.defaultDuration=0,this.maxGapDuration=0,this.videoInfo=null,this.averageDuration=0}return l(e,[{key:"timeScale",get:function(){return null!==this.audioInfo?this.audioInfo.rate:y}},{key:"channelCount",get:function(){return null!==this.audioInfo?this.audioInfo.channel:null}},{key:"sampleRate",get:function(){return null!==this.audioInfo?this.audioInfo.rate:null}},{key:"sampleBits",get:function(){return 16}},{key:"width",get:function(){return null!==this.videoInfo?this.videoInfo.width:null}},{key:"height",get:function(){return null!==this.videoInfo?this.videoInfo.height:null}}]),e}(),w=function(){function e(t,n,i,r,o){a(this,e);var s=f.checkChromeVer();this._chrome4x=s>0&&s<=49,this._audioTrackIndex=-1,this._videoTrackIndex=-1,this._lastSegmentDts=0,this._mdatSize=0,this._metaChanged=0,this._metaData={},this._nextTrackId=1,this._onMetaData=i,this._onSegment=n,this._onSeiData=r,this._onError=o,this._parser=new h.FlvParser(this._onSampleReceived.bind(this),this._onMetaDataReceived.bind(this)),this._segmentIsGop=!0,this._segmentDuration=t,this._sequenceNumber=1,this._tracks=[],this._unknownTypes=new Set}return l(e,[{key:"destroy",value:function(){}},{key:"reset",value:function(){this._parser.clear(),this._lastSegmentDts=0,this._mdatSize=0,this._segmentIsGop=!0;var e,t=i(this._tracks);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.samples.length=0,n.dataOffset=0,n.sequenceDts=null,n.timestampOffset=0,n.totalDuration=0,n.totalSampleCount=0}}catch(e){t.e(e)}finally{t.f()}}},{key:"input",value:function(e){try{this._parser.input(e)}catch(e){if(this._onError){var t="DtsError"===e.name?u.errorFlvDts:u.errorFlvPacket;this._onError(t,e.message)}}}},{key:"mimeType",get:function(){var e,t="",n=i(this._tracks);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!==r.audioInfo?t+=r.audioInfo.codecs+",":null!==r.videoInfo&&(t+=r.videoInfo.codecs+",")}}catch(e){n.e(e)}finally{n.f()}for(;t.length>1&&","===t[t.length-1];)t=t.substring(0,t.length-1);return'video/mp4; codecs="'+t+'"'}},{key:"_addSample",value:function(e,t){e.samples.push(t),e.totalSampleCount++,this._mdatSize+=t.size}},{key:"_onAudioSample",value:function(t){var n=t.dts;if(-1===this._videoTrackIndex&&this._timeToOutput(!1,n)&&this._outputDataSegment(n),this._audioTrackIndex>=0&&this._audioTrackIndex<this._tracks.length){var i=this._tracks[this._audioTrackIndex];if(null===i.sequenceDts&&(i.sequenceDts=n),i.objectType===c.audioTypeAAC){var r=i.audioInfo.rate,o=e._millisecToAudioTs(n,i)-i.totalDuration;if(o>=i.maxGapDuration){var a=o/r;if(a>=30)throw new u.SomeError("DtsError","too large ".concat(a," underflow"));var s=Math.floor(o/i.defaultDuration);for(console.log("insert ".concat(s," frames due to ").concat(a," underflow"));s--;){var l=e._getSilentAacFrame(i,t.data);l.duration=i.defaultDuration,i.totalDuration+=l.duration,this._addSample(i,l)}}else if(o<=-i.maxGapDuration)return void console.log("skip 1 frame due to ".concat(-o/r," overflow"))}t.dts=i.totalDuration,t.duration=i.defaultDuration,i.totalDuration+=t.duration,this._addSample(i,t)}else console.warn("invalid audio track: ".concat(this._audioTrackIndex))}},{key:"_onVideoSample",value:function(t){var n=this,i=t.dts,r=1===t.flags;if(this._timeToOutput(r,i)&&(this._outputDataSegment(i),this._segmentIsGop=r),this._videoTrackIndex>=0&&this._videoTrackIndex<this._tracks.length){var o=this._tracks[this._videoTrackIndex];if(null===o.sequenceDts&&(o.sequenceDts=i,0===o.totalSampleCount&&(t.cts=0),t.flags=1),t.cts=Math.floor(90*t.cts),t.dts=e._millisecToVideoTs(i,o),o.samples.length>0){var a=o.samples[o.samples.length-1];a.duration=t.dts>a.dts?t.dts-a.dts:0}o.totalDuration=t.dts,o.totalSampleCount>0&&(o.averageDuration=Math.floor(o.totalDuration/o.totalSampleCount));var s=t.dts/y,l=t.cts/y;if(t.type===h.typeVideoH264||t.type===h.typeVideoH265)this._parseSeiData(t.data,t.size,s,l,o.videoInfo.nalu,t.type===h.typeVideoH265);else if(t.type===h.typeVideoAv1){var c=new m;c.onCustomData=function(e,t){n._onSeiData&&n._onSeiData(s,s+l,e,t)},c.parseObus(t.data)}this._addSample(o,t)}else console.warn("invalid video track: ".concat(this._videoTrackIndex))}},{key:"_onAudioTrack",value:function(t){var n=t.type===h.trackAudioAAC,i=n?c.audioTypeAAC:c.audioTypeMP3,r=c.parseAudioInfo(t.data,i);if(r){if(this._audioTrackIndex>=0&&this._audioTrackIndex<this._tracks.length){var o=this._tracks[this._audioTrackIndex];if(e._same_array(o.extraData,t.data))return;this._outputNow(),o.extraData=t.data,o.audioInfo=r,o.objectType=i,o.defaultDuration=r.frame,o.maxGapDuration=2*o.defaultDuration,e._resetTrackTimestamps(o)}else{var a=d.types.mp4a,s=new g("audio",this._nextTrackId++,a);s.extraData=n?t.data:null,s.audioInfo=r,s.objectType=i,s.defaultDuration=r.frame,s.maxGapDuration=2*s.defaultDuration,this._audioTrackIndex=this._tracks.length,this._tracks.push(s),this._outputNow()}this._metaData.audiosamplerate=r.rate,this._metaData.audiochannel=r.channel,this._metaChanged|=1}else this._onError&&this._onError(u.errorAudioInfo,"parse audio track failed")}},{key:"_onVideoTrack",value:function(t){var n=c.parseVideoInfo(t.data,t.type);if(n){if(this._videoTrackIndex>=0&&this._videoTrackIndex<this._tracks.length){var i=this._tracks[this._videoTrackIndex];if(e._same_array(i.extraData,t.data))return;this._outputNow(),i.extraData=t.data,i.videoInfo=n,e._fixLastVideoDuration(i,0),e._resetTrackTimestamps(i)}else{var r=void 0;switch(t.type){case h.trackVideoH264:r=d.types.avc1;break;case h.trackVideoH265:r=d.types.hvc1;break;case h.trackVideoAv1:r=d.types.av01}var o=new g("video",this._nextTrackId++,r);o.extraData=t.data,o.videoInfo=n,this._videoTrackIndex=this._tracks.length,this._tracks.push(o),this._outputNow()}this._metaData.width=n.width,this._metaData.height=n.height,this._metaData.fps||(this._metaData.fps=this._metaData.framerate),this._metaChanged|=2}else this._onError&&this._onError(u.errorVideoInfo,"parse video track failed")}},{key:"_onMetaDataReceived",value:function(e){if(e)for(var t in e)this._metaData[t]=e[t]}},{key:"_onSampleReceived",value:function(e){switch(e.type){case h.typeAudioAAC:this._onAudioSample(e);break;case h.typeVideoH264:case h.typeVideoH265:case h.typeVideoAv1:this._onVideoSample(e);break;case h.trackAudioAAC:case h.trackAudioMP3:this._onAudioTrack(e);break;case h.trackVideoH264:case h.trackVideoH265:case h.trackVideoAv1:this._onVideoTrack(e);break;default:this._unknownTypes.has(e.type)||(this._unknownTypes.add(e.type),this._onError&&this._onError(u.errorUnknownCodec,"unknown codec: ".concat(e.type)))}return!0}},{key:"_outputDataSegment",value:function(t){if(this._mdatSize&&this._metaChanged){this._onMetaData&&this._onMetaData(this._metaData),this._metaChanged=0;var n=d.initSegment(this._tracks);this._onSegment(n,0)}var r=this._tracks;if(this._mdatSize){var o=d.moofSize(r),a=8+this._mdatSize,s=new Uint8Array(o+a);s[o+0]=a>>>24&255,s[o+1]=a>>>16&255,s[o+2]=a>>>8&255,s[o+3]=255&a,s.set(d.types.mdat,o+4);var l,c=o+8,u=i(r);try{for(u.s();!(l=u.n()).done;){var h=l.value;h.samples.length>0&&("video"===h.type&&e._fixLastVideoDuration(h,t),this._chrome4x&&(h.samples[0].flags=1),h.baseMediaDecodeTime=h.samples[0].dts),h.dataOffset=c,c=e._concatenateSamplesData(h,s,c)}}catch(e){u.e(e)}finally{u.f()}var f=d.moof(this._sequenceNumber++,r);s.set(f);var p=(t-this._lastSegmentDts)/1e3;this._onSegment(s,p)}this._lastSegmentDts=t,this._mdatSize=0;var v,m=i(r);try{for(m.s();!(v=m.n()).done;){var y=v.value;y.samples.length=0,y.dataOffset=0}}catch(e){m.e(e)}finally{m.f()}}},{key:"_outputNow",value:function(){this._mdatSize>0&&this._outputDataSegment(this._lastSegmentDts)}},{key:"_parseSeiData",value:function(e,t,n,i,r,o){this._onSeiData&&v.parse(e,0,t,n,n+i,r,o,this._onSeiData)}},{key:"_timeToOutput",value:function(e,t){return!(!e||this._segmentIsGop)||t<this._lastSegmentDts||t>=this._lastSegmentDts+this._segmentDuration}}],[{key:"_same_array",value:function(e,t){var n=e?e.length:0;if(n!==(t?t.length:0))return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}},{key:"_concatenateSamplesData",value:function(e,t,n){var r,o=i(e.samples);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.set(a.data,n),n+=a.size}}catch(e){o.e(e)}finally{o.f()}return n}},{key:"_fixLastVideoDuration",value:function(t,n){if(t.samples.length>0){var i=t.samples[t.samples.length-1];0===i.duration&&(n=e._millisecToVideoTs(n,t),i.duration=n>i.dts?n-i.dts:t.averageDuration>0?t.averageDuration:1500,t.totalDuration+=i.duration)}}},{key:"_getSilentAacFrame",value:function(e,t){var n=p.getSilentFrame(e.audioInfo.profile,e.audioInfo.channel),i=e.totalDuration;return new h.Sample(h.typeAudioAAC,n||t,0,i,0)}},{key:"_millisecToAudioTs",value:function(e,t){return Math.floor((e-t.sequenceDts)*t.audioInfo.rate/1e3)+t.timestampOffset}},{key:"_millisecToVideoTs",value:function(e,t){return 90*(e-t.sequenceDts)+t.timestampOffset}},{key:"_resetTrackTimestamps",value:function(e){e.timestampOffset=e.totalDuration,e.sequenceDts=null}}]),e}();e.exports={fMp4Muxer:w}},274:e=>{function t(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S,E,M,T,P,L,I,A,D,O,B,R,$,V,F,j,H,U,N,W=Math.pow(2,32)-1;!function(){for(var e in C={avc1:[97,118,99,49],avcC:[97,118,99,67],av01:[97,118,48,49],av1C:[97,118,49,67],btrt:[98,116,114,116],dinf:[100,105,110,102],dref:[100,114,101,102],esds:[101,115,100,115],ftyp:[102,116,121,112],hdlr:[104,100,108,114],hvc1:[104,118,99,49],hvcC:[104,118,99,67],mdat:[109,100,97,116],mdhd:[109,100,104,100],mdia:[109,100,105,97],mfhd:[109,102,104,100],minf:[109,105,110,102],moof:[109,111,111,102],moov:[109,111,111,118],mp4a:[109,112,52,97],mvex:[109,118,101,120],mvhd:[109,118,104,100],pasp:[112,97,115,112],sdtp:[115,100,116,112],smhd:[115,109,104,100],stbl:[115,116,98,108],stco:[115,116,99,111],stsc:[115,116,115,99],stsd:[115,116,115,100],stss:[115,116,115,115],stsz:[115,116,115,122],stts:[115,116,116,115],styp:[115,116,121,112],tfdt:[116,102,100,116],tfhd:[116,102,104,100],traf:[116,114,97,102],trak:[116,114,97,107],trun:[116,114,117,110],trex:[116,114,101,120],tkhd:[116,107,104,100],vmhd:[118,109,104,100]})C[e]=new Uint8Array(C[e]);x=new Uint8Array([105,115,111,109]),E=new Uint8Array([97,118,99,49]),M=new Uint8Array([109,112,52,50]),T=new Uint8Array([100,97,115,104]),S=new Uint8Array([0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:P,audio:L},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),B=new Uint8Array([0,0,0,0,0,0,0,0]),R=B,$=B,V=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),F=B,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}(),i=function(e){var t,n,i=Array.prototype.slice.call(arguments,1),r=0;for(t=0;t<i.length;t++)r+=i[t].byteLength;for((n=new Uint8Array(r+8))[0]=n.byteLength>>>24&255,n[1]=n.byteLength>>>16&255,n[2]=n.byteLength>>>8&255,n[3]=255&n.byteLength,n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},r=function(){return i(C.dinf,i(C.dref,O))},o=function(e){var t=e.extraData?e.extraData.length:0,n=13+(t>0?t+5:0),r=8+n+5+1,o=new Uint8Array([0,0,0,0,3,128|r>>>21,128|r>>>14,128|r>>>7,127&r,0,1,0,4,128|n>>>21,128|n>>>14,128|n>>>7,127&n,e.objectType,21,0,0,0,0,1,89,40,0,1,89,40]),a=0===t?null:new Uint8Array([5,128|t>>>21,128|t>>>14,128|t>>>7,127&t]),s=new Uint8Array([6,128,128,128,1,2]);return t>0?i(C.esds,o,a,e.extraData,s):i(C.esds,o,s)},a=function(){return i(C.ftyp,x,S,x,M,E,T)},y=function(e){return i(C.hdlr,I[e])},m=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.sampleRate&&(t[12]=e.sampleRate>>>24&255,t[13]=e.sampleRate>>>16&255,t[14]=e.sampleRate>>>8&255,t[15]=255&e.sampleRate),i(C.mdhd,t)},v=function(e){return i(C.mdia,m(e),y(e.type),l(e))},s=function(e){return i(C.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return i(C.minf,"video"===e.type?i(C.vmhd,A):i(C.smhd,D),r(),g(e))},H=function(e){var n=8;n+=16;var i,r=t(e);try{for(r.s();!(i=r.n()).done;){var o=i.value,a=o.samples.length;a>0&&(n+=8,n+=8+(o.defaultDuration?4:0)+16,n+=20,n+=24+a*(o.defaultDuration?4:12))}}catch(e){r.e(e)}finally{r.f()}return n},c=function(e,n){var r=[C.moof];r.push(s(e));var o,a=t(n);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.samples.length>0&&r.push(b(l,0))}}catch(e){a.e(e)}finally{a.f()}return i.apply(null,r)},u=function(e){var n=[C.moov];n.push(d(e.length+1,0));var r,o=t(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.push(f(a))}}catch(e){o.e(e)}finally{o.f()}return n.push(h(e)),i.apply(null,n)},h=function(e){var n,r=[C.mvex],o=t(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;r.push(_(a))}}catch(e){o.e(e)}finally{o.f()}return i.apply(null,r)},d=function(e,t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]);return i(C.mvhd,n)},g=function(e){return"video"===e.type?i(C.stbl,w(e),i(C.stts,F),i(C.stss,$),i(C.stsc,R),i(C.stsz,V),i(C.stco,B)):i(C.stbl,w(e),i(C.stts,F),i(C.stsc,R),i(C.stsz,V),i(C.stco,B))},w=function(e){return i(C.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):N(e))},U=function(e){var t=C.avcC;switch(e.tag){case C.avc1:t=C.avcC;break;case C.hvc1:t=C.hvcC;break;case C.av01:t=C.av1C}var n=[e.tag,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),i(t,e.extraData)];if(e.sarRatio){var r=e.sarRatio[0],o=e.sarRatio[1];n.push(i(C.pasp,new Uint8Array([(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r,(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o])))}return i.apply(null,n)},N=function(e){return i(e.tag,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelCount)>>8,255&e.channelCount,(65280&e.sampleBits)>>8,255&e.sampleBits,0,0,0,0,(65280&e.sampleRate)>>8,255&e.sampleRate,0,0]),o(e))},p=function(e){var t=new Uint8Array([0,0,0,3,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,"audio"===e.type?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(C.tkhd,t)},b=function(e,t){var n,r,o,a,s,l=e.defaultDuration,c=l?131114:131106,u="audio"===e.type?33554432:16842752;return n=i(C.tfhd,new Uint8Array(l?[0,(16711680&c)>>16,(65280&c)>>8,255&c,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u]:[0,(16711680&c)>>16,(65280&c)>>8,255&c,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),a=Math.floor(e.baseMediaDecodeTime/(W+1)),s=Math.floor(e.baseMediaDecodeTime%(W+1)),r=i(C.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),o=k(e,t),i(C.traf,n,r,o)},f=function(e){return i(C.trak,p(e),v(e))},_=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]);return i(C.trex,t)},k=function(e,t){var n=t+e.dataOffset,r=e.samples,o=r.length,a=e.defaultDuration,s=o>0&&1===r[0].flags,l=new Uint8Array(16+o*(a?4:12)),c=517;a||(c|=2304),l.set([1,(16711680&c)>>16,(65280&c)>>8,255&c,(4278190080&o)>>>24,(16711680&o)>>>16,(65280&o)>>>8,255&o,(4278190080&n)>>>24,(16711680&n)>>>16,(65280&n)>>>8,255&n],0);var u=12;if(l.set(s?[2,0,0,0]:[1,1,0,0],u),u+=4,a)for(var h=0;h<o;h++){var d=r[h].size;l.set([(4278190080&d)>>>24,(16711680&d)>>>16,(65280&d)>>>8,255&d],u),u+=4}else for(h=0;h<o;h++){var f=r[h],p=f.duration,v=f.size,m=f.cts;l.set([(4278190080&p)>>>24,(16711680&p)>>>16,(65280&p)>>>8,255&p,(4278190080&v)>>>24,(16711680&v)>>>16,(65280&v)>>>8,255&v,(4278190080&m)>>>24,(16711680&m)>>>16,(65280&m)>>>8,255&m],u),u+=12}return i(C.trun,l)},j=function(e){var t,n=a(),i=u(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t},e.exports={moof:c,moov:u,types:C,initSegment:j,moofSize:H}},313:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},r.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,n,s,l,c=(s=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(s);if(l){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=c.call(this,e,t),console.log("NativePlayer ".concat(n.version)),n}return t=u,(n=[{key:"version",get:function(){return"v1.0"}},{key:"destroy",value:function(){r(a(u.prototype),"destroy",this).call(this)}},{key:"src",set:function(e){this.destroy(),this._player.src=e,0!==this.startTime&&(this._player.currentTime=this.startTime)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n(690).LivePlayer);e.exports.V=s},443:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=i((function e(t,n,i,o){r(this,e),this.name=t,this.value=n,this.offset=i,this.end=o})),a=function(){function e(){r(this,e);try{this._textDecoder=new TextDecoder}catch(e){this._textDecoder=null,this._fromChar=String.fromCodePoint?String.fromCodePoint:String.fromCharCode}}return i(e,[{key:"decodeUtf8",value:function(e){if(this._textDecoder){var t=e.indexOf(0);return-1!==t&&(e=e.subarray(0,t)),this._textDecoder.decode(e)}for(var n=e.length,i="",r=0;r<n;){var o=e[r++];if(0===o)break;var a=0;switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=o;break;case 12:case 13:a=(31&o)<<6|63&e[r++];break;case 14:a=(15&o)<<12|(63&e[r++])<<6|(63&e[r++])<<0;break;case 15:a=(7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]}0!==a&&(i+=this._fromChar(a))}return i}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(n||(n=e.byteLength-1);t<n;)try{var i=this._parseValue(e,null,t),r=this._parseValue(e,i,i.offset);if(t=r.offset,"onMetaData"===i.value)return r.value}catch(e){console.warn("parse failed",e);break}return null}},{key:"_parseValue",value:function(e,t,n){var i,r=e.getUint8(n++),a=!1;switch(r){case 0:i=e.getFloat64(n),n+=8;break;case 1:i=!!e.getUint8(n),n+=1;break;case 2:case 12:var s=this._parseArray(e,n,12===r);n+=2+s.length,i=this.decodeUtf8(s);break;case 3:i={},n=this._parseObjects(e,n,65535,i);break;case 8:var l=e.getUint32(n);n+=4,i={},n=this._parseObjects(e,n,l,i);break;case 9:i=null,a=!0;break;case 10:var c=e.byteLength-1,u=e.getUint32(n);for(n+=4,i=[];u-- >0&&n<c;){var h=this._parseValue(e,null,n);n=h.offset,i.push(h.value)}break;case 11:i=this._parseDate(e,n),n+=10}return new o(t,i,n,a)}},{key:"_parseArray",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?e.getUint32(t):e.getUint16(t);return new Uint8Array(e.buffer,e.byteOffset+t+(n?4:2),i)}},{key:"_parseDate",value:function(e,t){var n=e.getFloat64(t),i=e.getInt16(t+8);return new Date(n+=60*i*1e3)}},{key:"_parseObject",value:function(e,t){var n=this._parseArray(e,t);t+=2+n.length;var i=this.decodeUtf8(n);return this._parseValue(e,i,t)}},{key:"_parseObjects",value:function(e,t,n,i){for(var r=e.byteLength-1;n-- >0&&t<r;){var o=this._parseObject(e,t);if(t=o.offset,o.end)break;i[o.name]=o.value}return t}}]),e}();e.exports.l=a},541:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=n(443).l,l=o((function e(t,n,i,r,o){a(this,e),this.type=t,this.data=n,this.cts=i,this.dts=r,this.duration=0,this.size=n.length,this.flags=o})),c=function(){function e(t,n){a(this,e),this._buffer=new Uint8Array(2097152),this._readPos=0,this._writePos=0,this._onSampleParsed=t,this._onMetaDataParsed=n}return o(e,[{key:"clear",value:function(){this._readPos=0,this._writePos=0}},{key:"input",value:function(e){for(this._writeToBuffer(e);this._parsePacket(););}},{key:"_parseHeader",value:function(){var t=this._writePos-this._readPos;if(t<9)return!1;var n=e._readUint32(this._buffer,this._readPos+5)+4;return!(t<n||(this._readPos+=n,0))}},{key:"_parsePacket",value:function(){var e=this._readPos,t=this._writePos-e;if(t<11)return!1;var n=this._buffer,i=n[e],r=n[e+1]<<16|n[e+2]<<8|n[e+3];if(5002753===r&&70===i)return this._parseHeader();if(r<=0||r>=12582912)throw new RangeError("invalid data size: ".concat(r));var o=11+r+4;if(t<o)return!1;this._readPos+=o;var a=n[e+4]<<16|n[e+5]<<8|n[e+6]|n[e+7]<<24,s=e+11,l=!0;switch(31&i){case 8:l=this._parseAudio(s,r,a);break;case 9:l=this._parseVideo(s,r,a);break;case 18:l=this._parseScript(s,r)}return l}},{key:"_parseAudio",value:function(e,t,n){var i=this._buffer,r=(240&i[e])>>>4;if(10===r){var o=0===i[e+1]?-r:r,a=new l(o,i.subarray(e+2,e+t),0,n,0);return this._onSampleParsed(a)}var s=new l(r,i.subarray(e+1,e+t),0,n,0);return this._onSampleParsed(s)}},{key:"_parseVideo",value:function(e,t,n){var i=this._buffer,r=(240&i[e])>>>4,o=15&i[e];if(7===o||12===o||14===o){var a=0===i[e+1]?-o:o,s=i[e+2]<<16|i[e+3]<<8|i[e+4];s=s<<8>>8;var c=new l(a,i.subarray(e+5,e+t),s,n,r);return this._onSampleParsed(c)}var u=new l(o,i.subarray(e+1,e+t),0,n,r);return this._onSampleParsed(u)}},{key:"_parseScript",value:function(e,t){var n=new DataView(this._buffer.buffer,e,t),i=(new s).parse(n);return this._onMetaDataParsed(i),!0}},{key:"_writeToBuffer",value:function(e){var t=e.length;if(this._writePos+t>this._buffer.length){var n=this._writePos-this._readPos,i=Math.max(this._buffer.length,n+2*t),r=new Uint8Array(i);r.set(this._buffer.subarray(this._readPos,this._writePos)),this._buffer=r,this._readPos=0,this._writePos=n}this._buffer.set(e,this._writePos),this._writePos+=t}}],[{key:"_readUint32",value:function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}}]),e}();e.exports={typeAudioAAC:10,typeAudioMP3:2,typeVideoH264:7,typeVideoH265:12,typeVideoAv1:14,trackAudioAAC:-10,trackAudioMP3:-2,trackVideoH264:-7,trackVideoH265:-12,trackVideoAv1:-14},e.exports.Sample=l,e.exports.FlvParser=c},909:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var o=n(443).l,a=n(958),s=n(319),l=n(221),c=n(757),u=n(497).$,h=n(754).Av1Parser,d=n(41),f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=l.checkChromeVer();this._chrome4x=i>0&&i<=49,this.uint32_max=Math.pow(2,32),this.mimeType=null,this.metaData={},this._audioChannel=void 0,this._audioRate=void 0,this._audioCodec=null,this._videoWidth=void 0,this._videoHeight=void 0,this._videoCodec=null,this._videoTag=0,this._videoBaseDts=0,this._videoCtsFixed=!1,this._videoTrackId=void 0,this._videoFrames=[],this._duration=0,this._lastDts=0,this._lastMoofSize=void 0,this._lastTrackId=void 0,this._findingStartDts=!1,this._minStartDts=void 0,this._timeScaleMap=new Map,this._buffer=null,this._bytesInBuffer=0,this._onParsed=t,this._onSeiParsed=n,this._parseMoofBoxsBinder=this._parseMoofBoxs.bind(this),this._parseMoovBoxsBinder=this._parseMoovBoxs.bind(this),this._lastFmp4Track=null,this._lastFmp4TrackFragment=null,this._tracks=new Map,this._trackInfos=new Map,this._trackFragments=new Map,this._selectedAudioTrackId=void 0,this._defaultAudioTrackId=void 0,this._segContext=void 0,this._prevSegContext=void 0}var t,n,i;return t=e,i=[{key:"parseEncoder",value:function(e,t){var n=t,i=t+32;e.getUint8(t)<32&&(n++,i--);var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).subarray(n,i);return(new o).decodeUtf8(r)}},{key:"parseH264Codec",value:function(e,t){t+=8;var n=e.getUint8(t+1),i=e.getUint8(t+2),r=e.getUint8(t+3);return"avc1."+c.to02xString(n)+c.to02xString(i)+c.to02xString(r)}},{key:"parseH265Codec",value:function(e,t){t+=8;var n=e.getUint8(t+1),i=n>>6&3,r=n>>5&1,o=31&n,a=e.getUint32(t+2),s=e.getUint8(t+12),l=a;return l=(l=(l=(l=(l=l>>>1&1431655765|(1431655765&l)<<1)>>>2&858993459|(858993459&l)<<2)>>>4&252645135|(252645135&l)<<4)>>>8&16711935|(16711935&l)<<8)>>>16|l<<16,"hvc1."+["","A","B","C"][i%4]+o.toString()+"."+l.toString(16).toLowerCase()+"."+["L","H"][r%2]+s.toString()}},{key:"parseAV1Codec",value:function(e,t){t+=8;var n,i=e.getUint8(t+1),r=e.getUint8(t+2),o=i>>>5,a=31&i,s=r>>>7,l=r>>>6&1;return n=2===o&&l?r>>>5&1?12:10:l?10:8,"av01."+o+"."+c.to02uString(a)+(s?"H":"M")+"."+c.to02uString(n)}}],(n=[{key:"getAudioTracks",value:function(){var e=this,t=[];return this._tracks.forEach((function(n,i){"soun"===n.handler&&t.push({enabled:e._selectedAudioTrackId===n.trackId,id:n.trackId,kind:n.isDefault?"main":"",label:n.label,language:n.language,default:e._defaultAudioTrackId===n.trackId})})),t}},{key:"switchAudioTrack",value:function(e){var t;return"soun"===(null===(t=this._tracks.get(e))||void 0===t?void 0:t.handler)&&(this._selectedAudioTrackId=e,!0)}},{key:"clear",value:function(){this._buffer=null,this._bytesInBuffer=0}},{key:"parse",value:function(e,t){var n=this,i=0!==this._bytesInBuffer;i&&(this._appendBuffer(new Uint8Array(e)),e=this._buffer.subarray(0,this._bytesInBuffer));for(var r=new Uint8Array(e),o=new DataView(r.buffer),a=r.byteLength,s=0;s+8<=a;){var l=o.getUint32(s),c=s+l;if(c>a)break;var u=o.getUint32(s+4),h=r.subarray(s,c);switch(u){case 1836019558:if(this._prevSegContext=this._segContext,this._segContext={},this._lastMoofSize=l,void 0===this._minStartDts&&(this._findingStartDts=!0,this._parseBox(o,s,c,this._parseMoofBoxsBinder),this._findingStartDts=!1),this._lastTrackId=void 0,this._videoFrames.length=0,i)this._parseBox(o,s,c,this._parseMoofBoxsBinder);else{var d=new Uint8Array(h);this._parseBox(new DataView(d.buffer),0,l,this._parseMoofBoxsBinder),h=d}break;case 1836019574:if(this.metaData={},this._lastTrackId=void 0,this._parseBox(o,s,c,this._parseMoovBoxsBinder)){var f=void 0,p=void 0;this._tracks.forEach((function(e,t){"soun"===e.handler&&(void 0===f&&(f=e.trackId),void 0===p&&!0===e.isDefault&&(p=e.trackId))}));var v=f;void 0!==p&&(v=p),this._defaultAudioTrackId=v,this._selectedAudioTrackId=v,this._tracks.forEach((function(e,t){"soun"===e.handler&&n._defaultAudioTrackId!==e.trackId&&n._changeBoxTag(o,e.trakBoxOffset,1718773093)})),this._updateMediaInfo(),this._updateMimeType()}break;case 1835295092:this._videoFrames.length&&(this._parseMdatBox(h,l),this._videoFrames.length=0)}this._onParsed(h,u,this._duration),s=c}i&&0===s||(s>=a?this._bytesInBuffer=0:(this._bytesInBuffer=0,!t&&s<a&&this._appendBuffer(r.subarray(s))))}},{key:"_changeBoxTag",value:function(e,t,n){e.setUint32(t+4,n)}},{key:"_appendBuffer",value:function(e){var t=this._bytesInBuffer+e.length,n=new Uint8Array(t);this._buffer&&this._bytesInBuffer&&n.set(this._buffer.subarray(0,this._bytesInBuffer),0),this._buffer=n,this._buffer.set(e,this._bytesInBuffer),this._bytesInBuffer=t}},{key:"_parseMoovBoxs",value:function(e,t,n,i){switch(n){case 1836019574:case 1953653099:case 1835297121:case 1835626086:case 1937007212:return 1953653099===n&&(this._lastFmp4Track=new d.fMp4Track(t)),this._parseBox(e,t+8,t+i,this._parseMoovBoxsBinder);case 1937011556:this._parseStsdBox(e,t,i);break;case 1835296868:this._parseMdhdBox(e,t,i);break;case 1751411826:this._parseHdlrBox(e,t,i);break;case 1953196132:this._parseTkhdBox(e,t,i);break;case 1970628964:this._parseUuidBox(e,t,i)}return!0}},{key:"_parseMoofBoxs",value:function(e,t,n,i){switch(n){case 1836019558:case 1953653094:return 1953653094===n&&(this._lastFmp4TrackFragment=new d.fMp4TrackFragment(t)),this._parseBox(e,t+8,t+i,this._parseMoofBoxsBinder);case 1952868452:var r,o=16777215&e.getUint32(t+8),a=t+8+4;this._lastTrackId=e.getUint32(a);var s={default_sample_duration:null,default_sample_size:null};t=a+4,1&o&&(t+=8),2&o&&(t+=4),8&o&&(s.default_sample_duration=e.getUint32(t),t+=4),16&o&&(s.default_sample_size=e.getUint32(t),t+=4),this._lastFmp4TrackFragment.trackId=this._lastTrackId,this._trackFragments.set(this._lastTrackId,this._lastFmp4TrackFragment),this._trackInfos.set(this._lastTrackId,s),"soun"===(null===(r=this._tracks.get(this._lastTrackId))||void 0===r?void 0:r.handler)&&(this._selectedAudioTrackId!==this._lastTrackId?this._changeBoxTag(e,this._lastFmp4TrackFragment.trafBoxOffset,1718773093):e.setUint32(a,this._defaultAudioTrackId));break;case 1952867444:this._parseTfdtBox(e,t,i);break;case 1953658222:this._parseTrunBox(e,t,i)}return!0}},{key:"_parseMdhdBox",value:function(e,t,n){t+=12,t+=8,this._timeScaleMap[this._lastTrackId]=e.getUint32(t),t+=8;var i=e.getUint16(t),r=String.fromCharCode(96+(i>>10),96+(i>>5&31),96+(31&i));this._lastFmp4Track.language=r}},{key:"_parseHdlrBox",value:function(e,t,n){var i=12;i+=4;var r=new Uint8Array(e.buffer,t+i,4),a=(new o).decodeUtf8(r),s="";if(n-(i+=16)>0){var l=new Uint8Array(e.buffer,t+i,n-i);s=(new o).decodeUtf8(l)}this._lastFmp4Track.handler=a,this._lastFmp4Track.label=s,this._tracks.has(this._lastTrackId)&&(this._tracks.clear(),this._defaultAudioTrackId=void 0,this._selectedAudioTrackId=void 0),this._tracks.set(this._lastFmp4Track.trackId,this._lastFmp4Track)}},{key:"_parseTkhdBox",value:function(e,t,n){var i=8,r=e.getUint32(t+i);this._lastFmp4Track.isDefault=0!=(1&r),i+=4,i+=8,this._lastTrackId=e.getUint32(t+i),this._lastFmp4Track.trackId=this._lastTrackId}},{key:"_parseUuidBox",value:function(e,t,n){var i=8,r=new Uint8Array(e.buffer,t+i,16),a=n-(i+=16),s=new Uint8Array(e.buffer,t+i,a),l=new Uint8Array([255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221]);if(c.equalsUuid(r,l)){var u=(new o).decodeUtf8(s);this.metaData.googlesphericalvideodata=u}}},{key:"_parseStsdBox",value:function(t,n,i){n+=12;var r=t.getUint32(n);if(n+=4,0!==r){t.getUint32(n),n+=4;var o=t.getUint32(n);n+=4;var a=0;switch(o){case 1635148593:case 1752589105:case 1635135537:this.metaData.fps=t.getUint32(n+16)/100,this.metaData.videodatarate=t.getUint32(n+20)/1e3,this._videoWidth=t.getUint16(n+24),this._videoHeight=t.getUint16(n+26),this.metaData.encoder=e.parseEncoder(t,n+42),n+=78,(a=t.getUint32(n))>=12?1635148593===o?this._videoCodec=e.parseH264Codec(t,n):1752589105===o?this._videoCodec=e.parseH265Codec(t,n):1635135537===o&&(this._videoCodec=e.parseAV1Codec(t,n)):1635148593===o?this._videoCodec="avc1.64002a":1752589105===o?this._videoCodec="hvc1.1.6.L93.90":1635135537===o&&(this._videoCodec="av01.0.09M.08"),this._videoTag=o,this._videoTrackId=this._lastTrackId;break;case 1836069985:this._audioChannel=t.getUint16(n+16),this._audioRate=t.getUint32(n+24)>>>16,n+=28,a=t.getUint32(n),this._audioCodec=a>=10?this._parseAudioCodec(t,n):"mp4a.40.2";break;case 1700998451:this._audioChannel=t.getUint16(n+16),this._audioRate=t.getUint32(n+24)>>>16,this._audioCodec="ec-3"}}}},{key:"_parseTfdtBox",value:function(e,t,n){t+=8;var i=e.getUint8(t);t+=4;var r=1===i?this.getUint64(e,t):e.getUint32(t);if(void 0!==this._lastTrackId){var o=this._timeScaleMap[this._lastTrackId];if(this._findingStartDts){var a=r/this._timeScaleMap[this._lastTrackId];return void((this._minStartDts>a||void 0===this._minStartDts)&&(this._minStartDts=a,console.log("track ".concat(this._lastTrackId," start dts: ").concat(a))))}var l=Math.floor(this._minStartDts*o),c=r-l;if(c<0)throw new s.SomeError("DtsError","wrong dts: ".concat(r,"<").concat(l," in track ").concat(this._lastTrackId));1===i?this.setUint64(e,t,c):e.setUint32(t,c),this._lastTrackId===this._videoTrackId&&(this._videoBaseDts=c)}}},{key:"_parseTrunBox",value:function(e,t,n){if(this._lastTrackId===this._videoTrackId){t+=8;var i=16777215&e.getUint32(t);this._chrome4x&&4&i&&e.setUint32(t+12,33554432),t+=4;var r=e.getUint32(t);if(t+=4,0!==r){if(!this._videoCtsFixed&&2048&i){var o=t;1&i&&(t+=4),4&i&&(t+=4),256&i&&(t+=4),512&i&&(t+=4),1024&i&&(t+=4),0!==e.getInt32(t)&&e.setInt32(t,0),this._videoCtsFixed=!0,t=o}var a=this._trackInfos.get(this._lastTrackId),s=0;if(1&i){s=e.getUint32(t)-this._lastMoofSize,t+=4,4&i&&(t+=4);for(var l=this._videoBaseDts,c=0;c<r;c++){var u=null!=a&&null!=a.default_sample_duration?a.default_sample_duration:null;256&i&&(u=e.getUint32(t),t+=4);var h=null!=a&&null!=a.default_sample_size?a.default_sample_size:null;if(512&i&&(h=e.getUint32(t),t+=4),null==u||null==h)break;1024&i&&(t+=4);var d=l;2048&i&&(d=e.getInt32(t),t+=4),this._videoFrames.push({duration:u,dts:l,cts:d,offset:s,size:h}),l+=u,s+=h}}}}}},{key:"_parseMdatBox",value:function(e,t){var n=this,i=this._timeScaleMap[this._videoTrackId];i=1/(i||9e4);for(var r=function(){var r=n._videoFrames[o],a=r.dts*i,s=a+r.cts*i;if(o==n._videoFrames.length-1&&(n._duration=a-n._lastDts,n._lastDts=a),!n._onSeiParsed||r.offset+r.size>t)return"continue";if(1635135537===n._videoTag){var l=new h;l.onCustomData=function(e,t){n._onSeiParsed&&n._onSeiParsed(a,s,e,t)},l.parseObus(e.subarray(r.offset,r.offset+r.size))}else u.parse(e,r.offset,r.size,a,s,4,1752589105===n._videoTag,n._onSeiParsed)},o=0;o<this._videoFrames.length;o++)r()}},{key:"_parseAudioCodec",value:function(e,t){t+=8,t+=4,t+=8,t+=5;var n=e.getUint8(t);if(107==n||105==n)return"mp3";t+=9,this.metaData.audiodatarate=e.getUint32(t)/1e3,t+=4,t+=5;var i=e.getUint8(t)>>>3&31;return a.getAacCodec(n,i)}},{key:"_parseBox",value:function(e,t,n,i){for(;t+8<=n;){var r=e.getUint32(t),o=e.getUint32(t+4);if(t+r>n||!i(e,t,o,r))return!1;t+=r}return t<=n}},{key:"_updateMediaInfo",value:function(){void 0!==this._audioRate&&(this.metaData.audiosamplerate=this._audioRate),void 0!==this._audioChannel&&(this.metaData.audiochannel=this._audioChannel),void 0!==this._videoWidth&&(this.metaData.width=this._videoWidth),void 0!==this._videoHeight&&(this.metaData.height=this._videoHeight)}},{key:"_updateMimeType",value:function(){var e='video/mp4; codecs="';if(this._audioCodec&&this._videoCodec)e+=this._videoCodec+","+this._audioCodec;else if(this._audioCodec)e+=this._audioCodec;else{if(!this._videoCodec)return;e+=this._videoCodec}this.mimeType=e+'"'}},{key:"getUint64",value:function(e,t){var n=e.getUint32(t),i=e.getUint32(t+4);return n*this.uint32_max+i}},{key:"setUint64",value:function(e,t,n){e.setUint32(t,n>=this.uint32_max?Math.floor(n/this.uint32_max):0),e.setUint32(t+4,4294967295&n)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports.t=f},615:e=>{function t(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=function(){function e(){r(this,e),this.version=void 0,this.sequence=void 0,this.nextSequence=void 0,this.endOfStream=void 0,this.steering=null,this.files=[],this.streams=[],this.streamInfMaps=[]}return a(e,[{key:"parse",value:function(e,t){for(var n=null,i=null,r=0,o=null,a=null,s=null,l=e.length,c=0;c<l;){var u=e.indexOf("\n",c);-1===u&&(u=l);var h=e.substring(c,u);if(c=u+1,0!==h.length)if("#"===h[0]){var d=h.indexOf(":");if(d>0){var f=h.substring(0,d),p=h.substring(d+1);if("#EXTINF"===f){var v=p.lastIndexOf(",");n=-1!==v?p.substring(0,v):p.substring(0),i=-1!==v?p.substring(v+1,p.length):null,r=1}else if("#EXT-BILI-AUX"===f)o=this._parseBiliAux(p);else if("#EXT-X-VERSION"===f)this.version=parseInt(p.trim());else if("#EXT-X-MEDIA-SEQUENCE"===f)this.sequence=parseInt(p.trim()),this.nextSequence=this.sequence;else if("#EXT-X-MAP"===f){var m=p.trim();if(m.length<=5||'URI="'!==m.substring(0,5))return console.warn("wrong #EXT-X-MAP: ".concat(p)),-2;var y=(m=m.substring(5)).lastIndexOf('"');m=-1!==y?m.substring(0,y):m.substring(0),this.files.push({uri:m,duration:void 0,title:"",biliAux:void 0,seq:void 0,src:t})}else"#EXT-X-STREAM-INF"===f?(a=this._parseMultiKV(p),r=2):"#EXT-X-CONTENT-STEERING"===f&&(s=this._parseMultiKV(p))}else"#EXT-X-ENDLIST"===h&&(this.endOfStream=!0)}else 1===r?(this._lastSeq=this.nextSequence++,this._lastUri=h.trim(),this.files.push({uri:this._lastUri,duration:n.trim(),title:i,biliAux:o,seq:this._lastSeq,src:t}),n=null,i=null,r=0,o=null):2===r&&(this.streams.push(h),this.streamInfMaps.push(a),this.steering=s,r=0,a=null)}return 0}},{key:"trimStart",value:function(e){if(this.files.length>0)for(var t=e/1e3,n=0,i=null,r=null,o=this.files.length-1;o>=0;o--){var a=this.files[o];if(void 0!==a.seq)n+=parseFloat(a.duration),null===r&&a.biliAux&&n>=t&&"K"===a.biliAux.firstFrameType&&(r=o);else if(null===i&&null!==r){i=a;var s=this.files.slice(r,this.files.length);s.unshift(i),this.files=s;break}}}},{key:"_parseMultiKV",value:function(e){for(var t,n=new Map,i=new RegExp('(\\w+?)\\=(([^"]|("[^"]+"))+?)(,|$)',"gm");null!==(t=i.exec(e));)if(t.index===i.lastIndex&&i.lastIndex++,t.length>=3){var r=t[1],o=t[2];o.startsWith('"')&&o.endsWith('"')&&(o=o.substring(1,o.length-1)),n.set(r,o)}return n}},{key:"_parseBiliAux",value:function(e){var t=e.split("|");return{pts:t.length>0?Number.parseInt(t[0],16):void 0,firstFrameType:t.length>1?t[1]:void 0,size:t.length>2?Number.parseInt(t[2],16):void 0,crc:t.length>3?Number.parseInt(t[3],16):void 0}}}]),e}(),l=function(){function e(t){r(this,e),this.onPlaylistUpdate=function(e,t){},this.endOfStream=!1,this.mimeType=null,this.steering=null,this.streamUrls=[],this.streamInfMaps=[],this._initUris=new Set,this._lastSeq=0,this._lastUri=null,this._nextSequence=void 0,this._remainDuration=0,this._totalCount=0,this._totalDuration=0,this._dataUrls=[],this._url=null,this._trimStartKeepTimeMs=t,this._needTrimStart=t>0,this._nextPlaylist=null,this.onSwitchToNextPlaylist=null}return a(e,[{key:"setUrl",value:function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");this._relativePath=e.substring(0,t+1),this._queryParams=n>0?e.substring(n):null,this._url=e,this._initUris.clear(),this._lastSeq=0,this._lastUri=null,this._nextSequence=void 0,this._nextPlaylist=null}},{key:"switchToNewPlaylist",value:function(e,t){if(e){if(!t)return!1;var n=new s;return 0==n.parse(t,e)&&(this._nextPlaylist={url:e,parser:n},!0)}return this._nextPlaylist=null,!0}},{key:"count",get:function(){return this._dataUrls.length}},{key:"averageDuration",get:function(){return this._totalCount>0?this._totalDuration/this._totalCount:0}},{key:"lastSequence",get:function(){return this._nextSequence>0?this._nextSequence-1:0}},{key:"remainDuration",get:function(){return this._remainDuration}},{key:"parse",value:function(e){var t=new s,n=t.parse(e,this._url);if(0!=n)return n;if(this.streamUrls=t.streams,this.streamInfMaps=t.streamInfMaps,this.steering=t.steering,this.streamUrls.length>0)return 1;if(void 0===t.version||t.version<6)return console.warn("wrong #EXT-X-VERSION: ".concat(t.version)),-1;this._needTrimStart&&(this._needTrimStart=!1,t.trimStart(this._trimStartKeepTimeMs));var i=this._mergeNextList(t);return 0!=i||this._doPlaylistSwitch(),i}},{key:"_mergeNextList",value:function(e){void 0!==e.endOfStream&&(this.endOfStream=e.endOfStream);var n,i=!1,r=!1,o=t(e.files);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(void 0===a.seq&&(i=!0,!this._initUris.has(a.uri))){r=!0;break}}}catch(e){o.e(e)}finally{o.f()}if(0==i&&!e.endOfStream)return console.warn("missing #EXT-X-MAP URI"),-2;if(this._nextSequence!==e.nextSequence||r){if(void 0===this._nextSequence&&(this._nextSequence=e.sequence),this._nextSequence<e.sequence&&this._nextSequence+30>=e.sequence&&this._lastUri){console.warn("lost sequence: ".concat(this._nextSequence," -> ").concat(e.sequence));for(var s=this.averageDuration,l=this._lastSeq.toString(),c=e.sequence-1;c>=this._nextSequence;c--){var u=this._lastUri.replace(l,c.toString());e.files.unshift({uri:u,duration:s})}}var h,d=t(e.files);try{for(d.s();!(h=d.n()).done;){var f=h.value;if(f.seq>=this._nextSequence||void 0===f.seq){if(void 0===f.seq){if(this._initUris.has(f.uri))continue;this._initUris.add(f.uri)}f.duration=parseFloat(f.duration),isNaN(f.duration)&&(f.duration=this.averageDuration),this._appendEntry(f)}}}catch(e){d.e(e)}finally{d.f()}this._nextSequence<e.nextSequence&&(this._nextSequence=e.nextSequence)}return 0}},{key:"_doPlaylistSwitch",value:function(){if(this._nextPlaylist){var e=this._nextPlaylist.parser,t=this._nextPlaylist.url,n=this.onSwitchToNextPlaylist,i=0,r=0;for(i=0;i<e.files.length;++i){var o=e.files[i];if(null!=o.seq&&null!=o.biliAux&&"K"==o.biliAux.firstFrameType&&null!=o.biliAux.pts){for(r=0;r<this._dataUrls.length;++r){var a=this._dataUrls[r];if(null!=a.biliAux&&null!=a.biliAux.pts&&a.biliAux.pts==o.biliAux.pts)break}if(r<this._dataUrls.length)break}}if(i==e.files.length)return!1;this._removeEntries(r),this.setUrl(t),this._nextSequence=e.files[i].seq,n(0==this._mergeNextList(e)),this._nextPlaylist=null}return!0}},{key:"shift",value:function(){var e=this._dataUrls.length>0?this._dataUrls.shift():null;return e&&(this._remainDuration-=e.duration),e}},{key:"_appendEntry",value:function(e){e.uri=this._buildM4sUrl(e.uri),this._dataUrls.push(e),this.onPlaylistUpdate(!1,e),this._remainDuration+=e.duration,this._totalCount++,this._totalDuration+=e.duration}},{key:"_removeEntries",value:function(e){if(e>this._dataUrls.length)return!1;for(var t=this._dataUrls.length,n=t-e,i=e;i<t;++i){var r=this._dataUrls[i];this._remainDuration-=r.duration,this._totalCount--,this._totalDuration-=r.duration}this._nextSequence-=n,this._lastSeq-=n,this._dataUrls.splice(e,n)}},{key:"_buildM4sUrl",value:function(e){var t=-1!==e.indexOf("://")?e:this._relativePath+e;return null!==this._queryParams&&(-1!==e.indexOf("?")?t+="&"+this._queryParams.substring(1):t+=this._queryParams),t}}]),e}();e.exports={M3u8Context:l,BasicM3u8Parser:s,parsedOk:0,parsedAsMaster:1,parsedErrorVer:-1,parsedErrorInit:-2}},497:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=n(757),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"_readSeiNumber",value:function(e,t){for(var n=0;t.offset<e.byteLength;){var i=e[t.offset];if(t.offset+=1,255!==i)return n+i;n+=255}return null}},{key:"_isEndOfSei",value:function(e,t){return t.offset>=e.byteLength||128===e[t.offset]&&(t.offset+=1,!0)}},{key:"_readSeiMessage",value:function(e,t){var n=this._readSeiNumber(e,t),i=this._readSeiNumber(e,t);if(null!==n&&null!==i){var r=t.offset+i;if(r<e.byteLength){var o={payloadType:n,payloadData:e.subarray(t.offset,r)};return t.offset+=i,o}}return null}},{key:"readSeiMessages",value:function(e){for(var t=[],n={offset:0};!this._isEndOfSei(e,n);){var i=this._readSeiMessage(e,n);if(null===i)break;t.push(i)}return t}},{key:"parse",value:function(t,n,i,o,s,l,c,u){for(var h=n+i,d=n;d+l<h;){for(var f=0,p=0;p<l;p++)f=f<<8|t[d++];var v=d+f;if(v>h||v<=d)break;if((c?t[d++]>>1:31&t[d])==(c?39:6)){var m,y=a.ebsp2rbsp(t.subarray(d+1,v)),g=r(e.readSeiMessages(y));try{for(g.s();!(m=g.n()).done;){var w=m.value;5===w.payloadType&&w.payloadData.length>=16&&u(o,s,w.payloadData.slice(0,16),w.payloadData.slice(16))}}catch(e){g.e(e)}finally{g.f()}}d=v}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports.$=s},41:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=i((function e(t){r(this,e),this.trakBoxOffset=t,this.handler=void 0,this.trackId=void 0,this.language=void 0,this.isDefault=void 0,this.label=void 0})),a=i((function e(t){r(this,e),this.trafBoxOffset=t,this.trackId=void 0}));e.exports={fMp4Track:o,fMp4TrackFragment:a}},15:e=>{e.exports.e=function(e,t){for(var n=0,i=e.length;0!=i;){var r=i>>1,o=n+r;e[o]<t?(n=++o,i-=r+1):i=r}return n}},221:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(){"use strict";n=function(){return e};var e={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function h(e,t,n,i){var r=t&&t.prototype instanceof p?t:p,a=Object.create(r.prototype),s=new M(i||[]);return o(a,"_invoke",{value:C(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var f={};function p(){}function v(){}function m(){}var y={};u(y,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(T([])));w&&w!==i&&r.call(w,s)&&(y=w);var b=m.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,n){function i(o,a,s,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==t(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):n.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return i("throw",e,s,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,t){function r(){return new n((function(n,r){i(e,t,n,r)}))}return a=a?a.then(r,r):r()}})}function C(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=d(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function x(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=m,o(b,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:v,configurable:!0}),v.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,l,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new k(h(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(b),u(b,c,"Generator"),u(b,s,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function i(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,l,"next",e)}function l(e){i(a,r,o,s,l,"throw",e)}s(void 0)}))}}function o(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}function a(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}var s=void 0,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s,l;return t=e,i=[{key:"reorderCodecs",value:(l=r(n().mark((function t(i){var r,o,s,l,u,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new Array,o=new Array,s=new Array,l=0;case 4:if(!(l<i.length)){t.next=13;break}return u=i[l],t.next=8,a(this,e,c).call(this,u);case 8:(h=t.sent).supported&&(h.smooth?h.powerEfficient?r.push(u):o.push(u):s.push(u));case 10:l++,t.next=4;break;case 13:return t.abrupt("return",r.concat(o,s));case 14:case"end":return t.stop()}}),t,this)}))),function(e){return l.apply(this,arguments)})},{key:"isTypeHardwareSupported",value:(s=r(n().mark((function t(i){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(this,e,c).call(this,i);case 2:return r=t.sent,t.abrupt("return",r.powerEfficient);case 4:case"end":return t.stop()}}),t,this)}))),function(e){return s.apply(this,arguments)})}],i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return u.apply(this,arguments)}function u(){return(u=r(n().mark((function e(t){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={type:"media-source",video:{contentType:t,width:1920,height:1080,bitrate:5e4,framerate:60}},e.next=3,navigator.mediaCapabilities.decodingInfo(i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports.checkChromeVer=function(){if(void 0!==s)return s;try{var e=navigator.userAgent,t=e.indexOf("Chrome/");if(t>0){t+=7;var n=e.indexOf(".",t);return-1===n&&(n=e.length),s=parseInt(e.substring(t,n)),console.log("Chrome verion: ".concat(s)),s}}catch(e){console.warn("parse Chrome version failed",e)}return s=0},e.exports.Utils=l},704:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}var i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._player=t,this._minBufferMs=n,this._loaded=!1,this._waitCount=0,this._waitDuration=0,this._waiting=!1,this._beginWaitTime=0,this._savedPaused=void 0,this._timer=void 0,this.minWaitMs=100,this._onLoadedDataBinder=this._onLoadedData.bind(this),this._onPlayingBinder=this._onPlaying.bind(this),this._onWaitingBinder=this._onWaiting.bind(this),t.addEventListener("loadeddata",this._onLoadedDataBinder),t.addEventListener("playing",this._onPlayingBinder),t.addEventListener("waiting",this._onWaitingBinder)}var t,i;return t=e,(i=[{key:"destroy",value:function(){this._clearTimer(),this._player.removeEventListener("waiting",this._onWaitingBinder),this._player.removeEventListener("playing",this._onPlayingBinder),this._player.removeEventListener("loadeddata",this._onLoadedDataBinder),this._waitCount=0,this._waitDuration=0}},{key:"buffered",get:function(){var e=this._player.buffered;return e&&e.length>0?e.end(e.length-1)-this._player.currentTime:0}},{key:"waitedCount",get:function(){return this._waitCount}},{key:"waitedDuration",get:function(){return Math.round(this._waitDuration)}},{key:"waitingDuration",get:function(){return this._waiting?performance.now()-this._beginWaitTime:0}},{key:"_onLoadedData",value:function(e){this._loaded=!0}},{key:"_onPlaying",value:function(e){if(this._waiting){var t=performance.now()-this._beginWaitTime;t>this.minWaitMs&&(this._waitCount++,this._waitDuration+=t),this._waiting=!1}}},{key:"_onWaiting",value:function(e){var t=this;if(this._loaded&&!this._player.seeking){var n=this._player.readyState;if(!(n===HTMLMediaElement.HAVE_ENOUGH_DATA||n===HTMLMediaElement.HAVE_CURRENT_DATA&&this.buffered>=2)&&(this._waiting=!0,this._beginWaitTime=performance.now(),this._savedPaused=void 0,this._clearTimer(),this._minBufferMs>this.minWaitMs)){var i=this._minBufferMs/1e3,r=this._beginWaitTime+this._minBufferMs+1e3;this._timer=window.setInterval((function(){!t._waiting||t.buffered>=i||performance.now()>=r?(t._clearTimer(),!t._savedPaused&&t._player.paused&&t._player.play().then((function(){})).catch((function(e){}))):void 0===t._savedPaused&&(t._savedPaused=!!t._player.paused,t._player.pause())}),2*this.minWaitMs)}}}},{key:"_clearTimer",value:function(){void 0!==this._timer&&(window.clearInterval(this._timer),this._timer=void 0)}}])&&n(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports._=i},97:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=n(319),l=!!window.fetch,c=!!window.ReadableStream,u=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,e),this._callbackMap=new Map,this._onResponse=t,this._onResult=n,this._onError=i}return a(e,[{key:"fetchAsBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._setTimeout(e,n);l?this._doFetch(e,t,"arrayBuffer",i):this._doRequest(e,"arraybuffer",i)}},{key:"fetchAsJson",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._setTimeout(e,n);l?this._doFetch(e,t,"json",i):this._doRequest(e,"json",i)}},{key:"fetchAsText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._setTimeout(e,n);l?this._doFetch(e,t,"text",i):this._doRequest(e,"text",i)}},{key:"fetchAsStream",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(c){var r=this._setTimeout(e,i);fetch(e,n?{}:{cache:"no-store"}).then((function(n){if(void 0===r||t._clearTimeout(r))if(t._onResponse(e,n)&&n.ok){var i=n.body.getReader(),o=[],a=function(n){!n.done&&o[0]?o[0]():o[0]=null,t._onResult(e,n.value,n.done)};o[0]=function(){i.read().then(a).catch((function(n){t._onError(e,s.errorNetworkRead,n)}))},o[0]()}else n.body.getReader().cancel()})).catch((function(n){(void 0===r||t._clearTimeout(r))&&t._onError(e,s.errorNetworkFetch,n)}))}else this.fetchAsBuffer(e,n,i)}},{key:"_doFetch",value:function(e,t,n,i){var r=this;fetch(e,t?{}:{cache:"no-store"}).then((function(t){(void 0===i||r._clearTimeout(i))&&(r._onResponse(e,t)&&t.ok?t[n]().then((function(t){r._onResult(e,t,!0)})).catch((function(t){r._onError(e,s.errorNetworkRead,t)})):t.body.getReader().cancel())})).catch((function(t){(void 0===i||r._clearTimeout(i))&&r._onError(e,s.errorNetworkFetch,t)}))}},{key:"_doRequest",value:function(e,t,n){var i=this,r=new XMLHttpRequest;r.onreadystatechange=function(t){(void 0===n||i._clearTimeout(n))&&2===r.readyState&&(r.ok=r.status>=200&&r.status<=299,i._onResponse(e,r))},r.onload=function(t){r.status>=200&&r.status<=299&&i._onResult(e,r.response,!0)},r.onerror=function(t){(void 0===n||i._clearTimeout(n))&&i._onError(e,r.readyState>2?s.errorNetworkRead:s.errorNetworkFetch,t)},r.open("GET",e),r.responseType=t,r.send()}},{key:"_clearTimeout",value:function(e){return void 0!==e&&(window.clearTimeout(e),this._callbackMap.delete(e))}},{key:"_setTimeout",value:function(e,t){var n=this;if(t>0){var i=[];return i[0]=window.setTimeout((function(){n._callbackMap.delete(i[0]),n._onError(e,s.errorNetworkTimeout,t)}),t),this._callbackMap.set(i[0],1),i[0]}}}]),e}(),h=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,e),this._readDone=!1,this._reader=null,this._onResponse=t,this._onData=n,this._onError=i,this._onDataFetchedBinder=this._onDataFetched.bind(this),this._onReadErrorBinder=this._onReadError.bind(this)}return a(e,[{key:"destroy",value:function(){this._readDone=!0,this._onData=null}},{key:"fetchAsStream",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a={};if(0!=i){var l={};l.Range="bytes=".concat(i,"-")+(r>0?(r-1).toString():""),a.headers=l}n||(a.cache="no-store");var c=o>0?window.setTimeout((function(){t._onError(s.errorNetworkTimeout,o)}),o):void 0;fetch(e,a).then((function(e){t._clearTimeout(c),t._reader&&(t._reader.cancel(),t._reader=null),t._onResponse(e)&&e.ok?(t._readDone=!1,t._reader=e.body.getReader(),t._reader.read().then(t._onDataFetchedBinder).catch(t._onReadErrorBinder)):e.body.getReader().cancel()})).catch((function(e){t._clearTimeout(c),t._onError(s.errorNetworkFetch,e)}))}},{key:"_onDataFetched",value:function(e){e.done&&(this._reader=null,this._readDone=!0),this._reader&&(this._readDone?(this._reader.cancel(),this._reader=null):this._reader.read().then(this._onDataFetchedBinder).catch(this._onReadErrorBinder)),this._onData&&!this._onData(e.value)&&(this._readDone=!0,this._reader&&(this._reader.cancel(),this._reader=null))}},{key:"_onReadError",value:function(e){this._onError(s.errorNetworkRead,e)}},{key:"_clearTimeout",value:function(e){void 0!==e&&window.clearTimeout(e)}}]),e}();e.exports={Fetcher:u,StreamFetcher:h}},483:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var r=n(319),o=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mediaSource=t,this._onEnded=n,this._onError=i,this._dataList=[],this._mimeType=null,this._sourceOpened=!1,this._sourceBuffer=null,this._eosBuffer=new Uint8Array,this._onSourceOpenBinder=this._onSourceOpen.bind(this),this._onUpdateEndBinder=this._onUpdateEnd.bind(this),t&&t.addEventListener("sourceopen",this._onSourceOpenBinder)}var t,n;return t=e,(n=[{key:"destroy",value:function(){this.removeSource(),this._dataList.length=0,this._mediaSource=null,this._mimeType=null,this._sourceOpened=!1}},{key:"addSource",value:function(e){if(this._mimeType=e,e&&this._sourceOpened&&!this._sourceBuffer)try{this._sourceBuffer=this._mediaSource.addSourceBuffer(e),this._sourceBuffer&&this._sourceBuffer.addEventListener("updateend",this._onUpdateEndBinder)}catch(e){this._onError&&this._onError(r.errorMseOpen,e)}return null!==this._sourceBuffer}},{key:"removeSource",value:function(){this._sourceBuffer&&(this._sourceBuffer.removeEventListener("updateend",this._onUpdateEndBinder,!1),this._mediaSource.removeSourceBuffer(this._sourceBuffer),this._sourceBuffer=null)}},{key:"pushBuffer",value:function(e){this._dataList.push(e),this._onUpdateEnd()}},{key:"pushEnd",value:function(){0!==this._dataList.length||this._sourceBuffer?(this._dataList.push(this._eosBuffer),this._onUpdateEnd()):this._onEnded&&this._onEnded()}},{key:"removeBuffer",value:function(e,t){try{if(!this._sourceBuffer.updating)return this._sourceBuffer.remove(e,t),!0}catch(n){console.warn("remove buffer failed: ".concat(e," -> ").concat(t),n)}return!1}},{key:"_onSourceOpen",value:function(){this._mediaSource&&(this._mediaSource.duration=1/0,this._mediaSource.removeEventListener("sourceopen",this._onSourceOpenBinder),this._sourceOpened=!0,this._mimeType&&this.addSource(this._mimeType))}},{key:"_onUpdateEnd",value:function(){var e=this._sourceBuffer;if(e&&!e.updating){var t=this._dataList;if(t.length){var n=t.shift();try{n===this._eosBuffer?("open"===this._mediaSource.readyState&&this._mediaSource.endOfStream(),this._onEnded&&this._onEnded()):null!==n&&e.appendBuffer(n),n=null}catch(e){"QuotaExceededError"===e.name?n&&t.unshift(n):this._onError&&this._onError(r.errorMseAppend,e)}}}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports.E=o}},t={},function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(35);var e,t},e.exports=t()},3626:function(e,t,n){"use strict";var i,r,o,a,s,l,c,u,h,d=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},f=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},p=this&&this.__classPrivateFieldSet||function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},v=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.multitask=t.GoldMiner=void 0;const y=m(n(5026)),g=n(4354),w=n(3301),b=(0,w.getSizeInBytes)({$mainId:(0,w.shortUUID)(),$id:(0,w.UUID)(),$createTime:Date.now(),$expire:-1,$content:"",$type:"xxxx"}),_={expire:432e6,maxSpace:20,dbVersion:1},k={main:"$id",logList:"$id, $mainId"};class C{constructor(e){i.set(this,{}),r.set(this,{main:[],logList:[]}),o.set(this,void 0),a.set(this,"closed"),s.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,!1),h.set(this,void 0),Object.assign(f(this,i,"f"),_,e),p(this,o,`GM-${f(this,i,"f").appName}`,"f"),this.idb=new y.default(f(this,o,"f")).version(f(this,i,"f").dbVersion),p(this,s,{$id:(0,w.shortUUID)()},"f"),e.init&&this.init(e.init)}static recieveMsg(e,t){void 0===C.GoldMinerCahce[t.appName]&&(C.GoldMinerCahce[t.appName]=new C({appName:t.appName,env:t.env}));return C.GoldMinerCahce[t.appName].reportManyLog({timeRage:[e.data.start_timestamp,e.data.end_timestamp],sourceType:t.source,msgId:e.data.msg_id,appId:e.data.app_id,appName:e.data.app_name,latestCount:t.latestCount}).catch(console.error)}init(e,t=!0){f(this,s,"f").$createTime?(f(this,r,"f").main=[],f(this,r,"f").logList=[],p(this,s,Object.assign(Object.assign({$id:(0,w.shortUUID)()},e),{$expire:f(this,i,"f").expire,$createTime:Date.now(),$updateTime:Date.now()}),"f")):Object.assign(f(this,s,"f"),Object.assign(Object.assign({},e),{$expire:f(this,i,"f").expire,$createTime:Date.now(),$updateTime:Date.now()})),f(this,s,"f").$space=(0,w.getSizeInBytes)(f(this,s,"f")),f(this,r,"f").main[0]=f(this,s,"f"),t&&this.initStore().then((()=>{this.startQueueTask("main")}))}initStore(){return d(this,void 0,void 0,(function*(){if("opening"!==f(this,a,"f")&&"opened"!==f(this,a,"f")){p(this,a,"opening","f");try{yield this.idb.stores(k),p(this,l,this.idb.getStore("main"),"f"),p(this,c,this.idb.getStore("logList"),"f"),p(this,a,"opened","f"),this.startQueueTask("logList")}catch(e){console.error(e)}}}))}destroy(){this.idb.close(),f(this,a,"f")}startQueueTask(e){if(!Array.isArray(f(this,r,"f")[e])||"opened"!=f(this,a,"f")||void 0===f(this,s,"f"))return;const t=this.idb.getStore(e),n=()=>{var i;if("logList"===e&&f(this,r,"f")[e].length){const i=f(this,r,"f")[e].shift();if(!i)return;f(this,s,"f").$updateTime=i.$createTime,f(this,s,"f").$space=(f(this,s,"f").$space||0)+(0,w.getSizeInBytes)(i.$content)+b,t.add(i).then((()=>{var e;n(),f(this,s,"f").$createTime&&(null===(e=f(this,l,"f"))||void 0===e||e.put(f(this,s,"f")))})).catch(n)}else if("main"===e){if(!f(this,r,"f")[e].shift())return;null===(i=f(this,l,"f"))||void 0===i||i.put(f(this,s,"f")).then((()=>{f(this,u,"f")||(p(this,u,!0,"f"),this.checkSpaceAndClear())}))}};n()}log(e){var t;!f(this,l,"f")&&f(this,s,"f").$createTime&&this.initStore();const n=Date.now(),i={$id:(0,w.UUID)(),$mainId:f(this,s,"f").$id,$content:e,$createTime:n,$expire:-1};"object"==typeof e&&(i.$content=e.content,i.$createTime=null!==(t=e.ts)&&void 0!==t?t:n,void 0!==e.type&&(i.$type=e.type)),f(this,r,"f").logList.push(i),f(this,r,"f").logList.length<2&&this.startQueueTask("logList")}checkSpaceAndClear(){return d(this,void 0,void 0,(function*(){if(!f(this,c,"f")||!f(this,l,"f"))return;const e=yield f(this,l,"f").getAll();let t=0;const n=[],r={};if(e.forEach((e=>{var o;(void 0===e.$expire||e.$expire>5184e6)&&(e.$expire=f(this,i,"f").expire),void 0===e.$createTime&&(e.$createTime=e.$updateTime),t+=null!==(o=e.$space)&&void 0!==o?o:0,Date.now()-e.$updateTime<6e5&&0!==e.$expire||(Date.now()-(e.$createTime||e.$updateTime)>e.$expire?n.push(e.$id):r[e.$id]=e)})),yield this.removeLogList(n),t/1048576>=f(this,i,"f").maxSpace){const e=Date.now(),t=[];for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=r[n];e-i.$createTime>i.$expire/2&&t.push(i.$id)}yield this.removeLogList(t);const n=f(this,c,"f").getStore();if(!n)return;const i=n.openCursor();i.onsuccess=e=>{const t=i.result;if(t){const e=t.value;return void 0===r[e.$mainId]&&t.delete(),void t.continue()}}}}))}removeLogList(e){var t;return d(this,void 0,void 0,(function*(){if(f(this,c,"f")&&f(this,l,"f"))for(const n of e)n!==(null===(t=f(this,s,"f"))||void 0===t?void 0:t.$id)&&(f(this,l,"f").delete(n),yield f(this,c,"f").deleteByIndex("$mainId",n))}))}recieveMsg(e,t){if("LIVE_PLAYER_LOG_RECYCLE"===e.cmd)x(e.data.msg_id,(()=>d(this,void 0,void 0,(function*(){e.data.user_id===(0,w.getUserId)()&&e.data.app_name===f(this,i,"f").appName&&(yield this.reportManyLog({timeRage:[e.data.start_timestamp,e.data.end_timestamp],sourceType:t.source,msgId:e.data.msg_id,appId:e.data.app_id,appName:e.data.app_name,latestCount:t.latestCount}).catch(console.error))}))))}report(e){let t;return e.startTime&&e.endTime&&(t=[e.startTime,e.endTime]),this.reportManyLog({timeRage:t,sourceType:e.source,appName:f(this,i,"f").appName,latestCount:e.latestCount,msgId:e.msgId})}reportManyLog(e){return d(this,void 0,void 0,(function*(){const t=yield this.getLogs({timeRange:e.timeRage,latestCount:e.latestCount||10}),n=[];for(const r of t){const{$id:t,$expire:o,$space:a,$createTime:s,$updateTime:l}=r,c=v(r,["$id","$expire","$space","$createTime","$updateTime"]);(yield(0,g.reportLog)({data:Object.assign({createTime:s,updateTime:l},c),appName:e.appName,sourceType:e.sourceType,msgId:e.msgId,appId:e.appId},f(this,i,"f").env))&&n.push(t)}this.removeLogList(n)}))}getLogs({timeRange:e,latestCount:t=40}){var n,i;return d(this,void 0,void 0,(function*(){if(!f(this,c,"f")||!f(this,l,"f"))return yield this.initStore(),yield(0,w.sleep)(200),this.getLogs({timeRange:e,latestCount:t});const r=[];let o=(yield f(this,l,"f").getAll()).sort(((e,t)=>(t.$createTime||t.$updateTime)-(e.$createTime||t.$updateTime)));if(Array.isArray(e)){const t=null!==(n=e[0])&&void 0!==n?n:Date.now()-3e3,r=null!==(i=e[1])&&void 0!==i?i:Date.now();o=o.filter((e=>e.$createTime>=t&&e.$createTime<=r))}t>0&&(o=o.slice(0,t));const a=f(this,h,"f")?e=>f(this,h,"f")(e):function(e){var t;let n,i=e.$createTime;"object"==typeof e.$content&&null!==e.$content&&(n=e.$content.color,i=null!==(t=e.$content.ts)&&void 0!==t?t:i,delete e.$content.color,delete e.$content.ts);const r={content:e.$content,ts:i};return e.$type&&(r.type=e.$type),n&&(r.color=n),r};for(const e of o){const t=yield f(this,c,"f").queryWithIndex("$mainId",e.$id);r.push(Object.assign(Object.assign({},e),{logList:t.map(a)}))}return r}))}formatter(e){p(this,h,e,"f")}}function x(e,t){return d(this,void 0,void 0,(function*(){yield new Promise((e=>{setTimeout((()=>{e()}),300*Math.random()|0)}));const n=void 0===e?"":`live-log-report-${e}`;if(""!==n){if(null!==localStorage.getItem(n))return;localStorage.setItem(n,"1")}yield t(),""!==n&&localStorage.removeItem(n)}))}t.GoldMiner=C,i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,C.GoldMinerCahce={},t.multitask=x},8651:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;const r=n(3301),o="//api.live.bilibili.com",a=new Map;function s(e,t){return i(this,void 0,void 0,(function*(){let n=e;/^(https?:)?\/\//.test(e)||(n=`${o}/${e.replace(/^\//,"")}`);const i=new URL(n,location.href),s=a.get(i.host+i.pathname);if(null!=s&&s.expiresTime>performance.now()){const e=Math.random()*s.scope;yield(0,r.sleep)(e)}const l=(0,r.getCookie)("bili_jct");if(""!==l&&"POST"===(null==t?void 0:t.method)&&null!=(null==t?void 0:t.data)){const e={csrf:l,csrf_token:l},n=Object.keys(e);t.data instanceof FormData?(n.forEach((n=>{var i;null===(i=t.data)||void 0===i||i.append(n,e[n])})),t.body=t.data):t.data&&(n.forEach((n=>{t.data[n]=e[n]})),t.body=JSON.stringify(t.data)),delete t.data}let c;try{c=yield fetch(n,Object.assign({credentials:"include"},null!=t?t:{}))}catch(e){const t=String(e);throw new Error(t)}if(!c.ok){const t=`url: ${e}, status: ${c.status}`;throw new Error(t)}const u=yield c.json(),{code:h,data:d,message:f}=u;if(0!==h)throw new Error(f);return d}))}t.ajax=s,s.disperse=(e,t)=>{const n=/^(https?:)?\/\//.test(e)?e:`${o}/${e.replace(/^\//,"")}`;a.set(n.replace(/^(https?:)?\/\//,""),t)}},5026:function(e,t){"use strict";var n,i,r,o,a,s,l,c,u,h,d=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},f=this&&this.__classPrivateFieldSet||function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DBCore=void 0;const v=null!==(r=null!==(i=null!==(n=window.indexedDB)&&void 0!==n?n:window.mozIndexedDB)&&void 0!==i?i:window.webkitIndexedDB)&&void 0!==r?r:window.msIndexedDB;function m(e){return console.error(e),!1}function y(e){const t=null!=e?e:"++id",[n,...i]=t.split(",").map((e=>e.trim())),r=n.includes("++");return{keyPath:n.replace("++",""),autoIncrement:r,indexKeys:i}}function g(e){return new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(e.result),i()},o=()=>{n(e.error),m(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}))}function w(e,t,n={}){return new Promise(((i,r)=>{(function(){return d(this,void 0,void 0,(function*(){const e=v.databases;if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||void 0===e)return;let t;return yield new Promise((n=>{const i=()=>{e().then(n).catch(n)};t=window.setInterval(i,100),i()})).finally((()=>clearInterval(t)))}))})().then((()=>{if(void 0===v)return void r("not support indexedDB");const o=v.open(e,t);o.onupgradeneeded=e=>{const t=o.result;"function"==typeof n.upgrade&&n.upgrade(t)},o.onsuccess=e=>{const t=o.result;i(t)},o.onerror=e=>{m(o.error),r(o.error)},o.onblocked=e=>{var t,a;if(e instanceof IDBVersionChangeEvent){const r=e,s=e=>{const t=o.result;"function"==typeof n.upgrade&&n.upgrade(t),c()},l=()=>{const e=o.result;i(e),c()},c=()=>{var e,t;null===(e=r.target)||void 0===e||e.removeEventListener("upgradeneeded",s),null===(t=r.target)||void 0===t||t.removeEventListener("success",l)};return null===(t=r.target)||void 0===t||t.addEventListener("upgradeneeded",s),void(null===(a=r.target)||void 0===a||a.addEventListener("success",l))}r(o.error)}})).catch(r)}))}function b(e,t){const n={};if(i=t,"[object Object]"!==Object.prototype.toString.call(i))return n;var i;for(const i in t)if(!e.objectStoreNames.contains(i)){const{keyPath:r,autoIncrement:o,indexKeys:a}=y(t[i]),s=e.createObjectStore(i,{keyPath:r,autoIncrement:o});a.forEach((e=>{s.createIndex(e,e,{unique:!1})})),n[i]=s}return n}class _{constructor(e){o.set(this,void 0),a.set(this,{}),s.set(this,{}),l.set(this,void 0),c.set(this,void 0),u.set(this,{status:"close"}),this.storeNames=[],f(this,l,e,"f")}getDatabase(){return d(this,void 0,void 0,(function*(){return void 0!==p(this,o,"f")?p(this,o,"f"):yield w(p(this,l,"f"))}))}version(e){if(isNaN(e)||e<.1)throw Error("Given version is not a positive number");return f(this,c,e,"f"),this}getVersion(){return d(this,void 0,void 0,(function*(){if("number"==typeof p(this,c,"f"))return p(this,c,"f");return(yield this.getDatabase()).version}))}stores(e){return d(this,void 0,void 0,(function*(){if(void 0===p(this,c,"f"))throw Error("Please use version() brefore stores()");const t=`${p(this,l,"f")}-${p(this,c,"f")}`;this.storeNames=Object.keys(e),void 0===p(this,a,"f")[t]&&(p(this,a,"f")[t]=e),void 0!==p(this,o,"f")&&(p(this,u,"f").status="closeing",p(this,o,"f").close());try{f(this,o,yield w(p(this,l,"f"),p(this,c,"f"),{upgrade:t=>{b(t,e),p(this,u,"f").status="opened"}}),"f"),p(this,u,"f").status="opened"}catch(e){throw Error(e)}return this}))}getStoreOption(){var e;const t=`${p(this,l,"f")}-${null!==(e=p(this,c,"f"))&&void 0!==e?e:""}`;return p(this,a,"f")[`${t}`]}getStore(e){var t;if(void 0===p(this,a,"f")[`${p(this,l,"f")}-${null!==(t=p(this,c,"f"))&&void 0!==t?t:""}`])throw Error("Please use stores() brefore getStore()");if(void 0===p(this,o,"f"))throw Error("DB is not ready, Please await stores()");return void 0!==p(this,s,"f")[e]||(p(this,s,"f")[e]=new k(p(this,o,"f"),e)),p(this,s,"f")[e]}getStoreNames(){return d(this,void 0,void 0,(function*(){const e=yield this.getDatabase();return Array.from(e.objectStoreNames)}))}close(){var e;null===(e=p(this,o,"f"))||void 0===e||e.close()}}t.default=_,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,_.delete=function(e){return g(v.deleteDatabase(e))};class k{constructor(e,t){h.set(this,10),this.db=e,this.storeName=t}transaction(e){return this.db.transaction(e,"readwrite")}cacheTransaction(e){this.trans=e}getStore(e){if(p(this,h,"f")<=0){m(Error("getStore error"))}else try{const t=e||this.transaction([this.storeName]);return t.objectStore(this.storeName)}catch(e){return"function"==typeof e.toString&&e.toString().indexOf("closing")>-1?f(this,h,0,"f"):f(this,h,p(this,h,"f")-1,"f"),void m(e)}}clear(){return d(this,void 0,void 0,(function*(){const e=this.getStore();return e?g(e.clear()):Promise.reject(e)}))}add(e){return d(this,void 0,void 0,(function*(){const t=this.trans?this.getStore(this.trans):this.getStore();return t?g(t.add(e)):Promise.reject(t)}))}put(e){return d(this,void 0,void 0,(function*(){const t=this.trans?this.getStore(this.trans):this.getStore();return t?g(t.put(e)):Promise.reject(t)}))}delete(e){return d(this,void 0,void 0,(function*(){const t=this.getStore();return t?g(t.delete(e)):Promise.reject(t)}))}deleteMany(e){const t=this.getStore();return t?new Promise(((n,i)=>{const r=[],o=function(){const a=e.shift();if(!a)return void(0===r.length?n():i(r));const s=t.delete(a);s.onsuccess=function(){o()},s.onerror=function(){m(s.error),r.push(s.error)}};o()})):Promise.reject(t)}deleteByIndex(e,t){return d(this,void 0,void 0,(function*(){const n=this.getStore();return n?new Promise(((i,r)=>{const o=n.index(e).openCursor(t),a=[];o.onsuccess=function(){const e=o.result;null!==e?(e.delete(),e.continue()):0===a.length?i():r(a)},o.onerror=function(){m(o.error),a.push(o.error)}})):Promise.reject(n)}))}count(e){return d(this,void 0,void 0,(function*(){const t=this.getStore();return t?g(t.count(e)):Promise.reject(t)}))}get(e){return d(this,void 0,void 0,(function*(){const t=this.getStore();return t?g(t.get(e)):Promise.reject(t)}))}getAll(){return d(this,void 0,void 0,(function*(){const e=this.getStore();return e?g(e.getAll()):Promise.reject(e)}))}queryWithIndex(e,t){return d(this,void 0,void 0,(function*(){const n=this.getStore();return n?new Promise(((i,r)=>{const o=[],a=n.index(e).openCursor(t);a.onsuccess=e=>{const t=a.result;null!==t?(o.push(t.value),t.continue()):i(o)},a.onerror=()=>{m(a.error),r(a.error)}})):Promise.reject(n)}))}each(e,t){return d(this,void 0,void 0,(function*(){const n=this.getStore();return n?new Promise(((i,r)=>{let o=0;const a=n.openCursor(e);a.onsuccess=e=>{const n=a.result;null!==n?(t(n.value,o++),n.continue()):i()},a.onerror=()=>{m(a.error),r(a.error)}})):Promise.reject(n)}))}query(e){return d(this,void 0,void 0,(function*(){const t=[];return this.each(null,(n=>{(function(e,t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]!==e[n])return!1;return!0})(n,e)&&t.push(n)})).then((()=>t))}))}}t.DBCore=k,h=new WeakMap},6861:(e,t,n)=>{"use strict";t.sI=void 0;const i=n(3626);Object.defineProperty(t,"sI",{enumerable:!0,get:function(){return i.GoldMiner}}),i.GoldMiner},4354:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.reportLog=void 0;const r=n(8651),o=n(3301);t.reportLog=function(e,t=""){return i(this,void 0,void 0,(function*(){const n=new Blob(["--"+JSON.stringify(e.data)]);"prod"===t&&(t=""),t&&(t=`ff-${t}-`);try{const{location:i}=yield(0,r.ajax)(`//${t?"uat-":""}api.bilibili.com/x/upload/web/image`,{method:"POST",data:(0,o.Object2FormData)({bucket:"live-log-ttl",dir:e.appName,file:n})});if(null==i||""===i)return!1;const a={appName:e.appName,userID:(0,o.getUserId)(),source:e.sourceType,url:i.replace(".txt","")};return null!=e.appId&&(a.appID=e.appId),null!=e.msgId&&(a.msgID=e.msgId),yield(0,r.ajax)(`//${t}api.live.bilibili.com/xlive/open-interface/v1/webLogAgent/setWebAppLogRecord`,{method:"POST",data:(0,o.Object2FormData)(a)}),!0}catch(e){return console.warn(e),!1}}))}},3301:(e,t)=>{"use strict";function n(e){var t,n;const{cookie:i}=document;return null==i?"":null!==(n=null===(t=i.split(";").filter((e=>e.trim().length>0)).map((e=>e.split("="))).map((([e,t])=>[e.trim(),t.trim()])).find((([t])=>t===e)))||void 0===t?void 0:t[1])&&void 0!==n?n:""}function i(e=12){const t=[];for(let n=0;n<e;n++){const e=10*Math.random();t.push(Math.floor(e<1&&0===n?10*Math.random():e))}return Number(t.join(""))}function r(e){return void 0===e?2:e.replace(/[\u0391-\uFFF5]/g,"aa").length}Object.defineProperty(t,"__esModule",{value:!0}),t.Object2FormData=t.getSizeInBytes=t.getStringLength=t.UUID=t.shortUUID=t.getUserId=t.sleep=t.getCookie=void 0,t.getCookie=n,t.sleep=function(e){return new Promise((t=>{setTimeout(t,e)}))},t.getUserId=function(){return Number(n("DedeUserID"))},t.shortUUID=function(){return i(8)},t.UUID=i,t.getStringLength=r,t.getSizeInBytes=function(e){let t=null;return t="string"==typeof e?e:JSON.stringify(e),r(t)},t.Object2FormData=function(e){const t=new FormData;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];t.append(n,i)}return t}},5167:e=>{
/*! @preserve @bilibili-live/live-danmaku-engine-v2: 2.1.0- (2023-10-18T09:56:09.826Z) */
self,e.exports=function(){"use strict";var e={};!function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}(e);var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},n=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},i="//uat-s1.hdslb.com/bfs/live-pkg/danmaku/danmaku-".concat("v1",".js"),r="//s1.hdslb.com/bfs/live-pkg/danmaku/danmaku-".concat("v1",".js"),o=function(){function e(e,t){this.cacheConfig=e,this.tasks=[],this.errorTimes=0,this.initDanmaku(t)}return Object.defineProperty(e.prototype,"config",{get:function(){var e;return(null===(e=this.Danmaku)||void 0===e?void 0:e.config)||this.cacheConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){var e;return null===(e=this.Danmaku)||void 0===e?void 0:e.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){var e;return null===(e=this.Danmaku)||void 0===e?void 0:e.manager},enumerable:!1,configurable:!0}),e.prototype.initDanmaku=function(e){if(!this.Danmaku){var t=new URL(window.location.href).searchParams.get("danmakuEnv"),n={dev:i,prod:r}[t]||e||r;this.loadDanmaku(n)}},e.prototype.asyncCallMethod=function(e){for(var i,r=this,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return this.Danmaku?(i=this.Danmaku[e]).call.apply(i,n([this.Danmaku],t(o),!1)):new Promise((function(i){var a=setTimeout((function(){i(null)}),15e3);r.tasks.push((function(){var s;clearTimeout(a),a=null,i((s=r.Danmaku[e]).call.apply(s,n([r.Danmaku],t(o),!1)))}))}))},e.prototype.callMethod=function(e){for(var i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(this.Danmaku)return(i=this.Danmaku[e]).call.apply(i,n([this.Danmaku],t(r),!1))},e.prototype.callTasks=function(){this.tasks.length>0&&(this.tasks.forEach((function(e){e&&e()})),this.tasks.length=0)},e.prototype.play=function(){this.asyncCallMethod("play")},e.prototype.socketListener=function(e){this.callMethod("socketListener",e)},e.prototype.add=function(e,t){this.callMethod("add",e,t)},e.prototype.searchAreaDanmaku=function(e,t){return this.asyncCallMethod("searchAreaDanmaku",e,t)},e.prototype.option=function(e,t){return this.asyncCallMethod("option",e,t)},e.prototype.visible=function(e){return this.asyncCallMethod("visible",e)},e.prototype.resize=function(){this.asyncCallMethod("resize")},e.prototype.clear=function(){this.asyncCallMethod("clear")},e.prototype.destroy=function(){this.asyncCallMethod("destroy")},e.prototype.loadDanmaku=function(e){var t=this,n=document.createElement("script");n.type="text/javascript",n.onload=function(){t.Danmaku=new window.LiveDanmakuEngine.default(t.config),t.callTasks()},n.onerror=function(){t.errorTimes>=2||(t.errorTimes++,console.error("[Danmaku Core Error]","Times: ".concat(t.errorTimes),"Url: ".concat(e)),t.loadDanmaku(e))},n.src=e,document.getElementsByTagName("body")[0].appendChild(n)},e}();return e.default=o,e}()},1484:(e,t,n)=>{"use strict";n.d(t,{f:()=>k});var i,r,o,a,s,l,c,u,h,d,f=n(3363),p=n(9727),v=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},m=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},y=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const g=new Promise((e=>{""===(0,p.ej)("buvid3")?window.fetch("//data.bilibili.com/v/",{credentials:"include"}).then((()=>e())).catch((()=>e())):e()}));function w(e,t=!1,n=0){var i;return v(this,void 0,void 0,(function*(){if(0===e.length)return;const r="string"==typeof e?e:e.join(""),o="//data.bilibili.com/gol/postweb";t?null===(i=navigator.sendBeacon)||void 0===i||i.call(navigator,o,r):(yield g,fetch(o,{method:"POST",body:r,credentials:"include"}).then((t=>{if(429===t.status){const t=[1e4,2e4,4e4][n];if(null==t)return;window.setTimeout((()=>{w(e,!1,n+=1).catch(p.ZT)}),t)}})).catch((e=>{console.error(e)})))}))}let b=!1,_=0;window.addEventListener("beforeunload",(()=>{b=!0,clearTimeout(_),_=window.setTimeout((()=>{b=!1}),5e3)}));class k{constructor(e,t={}){var n;if(i.set(this,[]),r.set(this,void 0),o.set(this,void 0),a.set(this,(()=>{})),s.set(this,void 0),l.set(this,[]),c.set(this,(()=>{let e=!1;return()=>{if(e)return;e=!0;const t=window.setTimeout((()=>{e=!1,y(this,h,"f").call(this)}),6e4);m(this,a,(()=>{e=!1,clearTimeout(t)}),"f")}})()),u.set(this,((e,t)=>{const n=Math.random()*t,i=window.setTimeout((()=>{m(this,l,y(this,l,"f").filter((({timer:e})=>e!==i)),"f"),w(e,n<10,0).catch(p.ZT)}),n),r={timer:i,data:e};y(this,l,"f").push(r)})),h.set(this,((e=!1)=>{y(this,a,"f").call(this),w(y(this,i,"f"),e).catch(p.ZT),m(this,i,[],"f")})),d.set(this,(()=>{"hidden"===document.visibilityState&&(y(this,l,"f").forEach((({timer:e})=>clearTimeout(e))),w(y(this,l,"f").map((e=>e.data)),!0).catch(p.ZT),m(this,l,[],"f"),y(this,h,"f").call(this,!0))})),m(this,r,e,"f"),m(this,s,null!==(n=t.formatter)&&void 0!==n?n:f.M[e],"f"),null==y(this,s,"f"))throw new Error(`Undefined Formatter for logId: ${e}`);m(this,o,t,"f"),document.addEventListener("visibilitychange",y(this,d,"f"))}event(e,t,n={}){var a,l;if("string"!=typeof e||""===e)throw Error(`evtId: ${JSON.stringify(e)} not a string`);const d=null!==(l=null!==(a=n.sample)&&void 0!==a?a:y(this,o,"f").sample)&&void 0!==l?l:100,f=100*Math.random()>=d;if(!0===y(this,o,"f").debug&&console.log(`live-web-track: evtId: ${e}, 采样率 ${d}%, 本次是否上报 ${JSON.stringify(!f)}`),f)return;const v=`${y(this,r,"f")}${Date.now()}${y(this,s,"f").call(this,Object.assign({evtId:e,data:t},y(this,o,"f"))).join("|")}`;if(b)w(v,!0).catch(p.ZT);else{if("number"==typeof n.randDelay)return void y(this,u,"f").call(this,v,n.randDelay);(0,p.tq)()?w(v,!0).catch(p.ZT):y(this,i,"f").push(v)}y(this,i,"f").length>=10?y(this,h,"f").call(this):y(this,c,"f").call(this)}set(e){m(this,o,Object.assign({},y(this,o,"f"),e),"f")}destroy(){y(this,h,"f").call(this),document.removeEventListener("visibilitychange",y(this,d,"f"))}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap},9972:(e,t,n)=>{"use strict";n(34)},34:(e,t,n)=>{"use strict";n(9727);new WeakMap,new WeakMap,new WeakMap},3363:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var i=n(9727);const r=e=>{var t,n;return[`${location.href}`,`${null==e.spmId?"":e.spmId+"."}${e.evtId}`,"",Date.now(),"","",`${screen.width}x${screen.height}`,"",JSON.stringify(Object.assign(Object.assign({},null!==(t=e.data)&&void 0!==t?t:{}),null!==(n=null==e?void 0:e.tags)&&void 0!==n?n:{}))]},o={"011778":r,"000527":r,"000358":e=>{var t,n;return[`${location.href}`,`${null!==(t=document.referrer)&&void 0!==t?t:""}`,`${null==e.spmId?"":e.spmId+"."}${e.evtId}`,Date.now(),null!==(n=(0,i.ej)("fts"))&&void 0!==n?n:"",`${screen.width}x${screen.height}`,(0,i.tq)()?2:1,null==e.data?"":JSON.stringify(e.data),"",0]}}},2630:(e,t,n)=>{"use strict";n.d(t,{fX:()=>i.f});var i=n(1484);n(9972),n(8052)},6674:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>d});var i,r,o,a=n(79);function s(){var e;try{const t=(null!==(e=null===performance||void 0===performance?void 0:performance.getEntriesByType("navigation")[0])&&void 0!==e?e:(0,a.bk)()).type;return"navigate"===t?r.navigate:"reload"===t?r.reload:"back_forward"===t?r.backForward:r.other}catch(e){return r.other}}function l(){var e;return null!=(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)?1:0}function c(){const e="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform,t="Win32"===navigator.platform||"Windows"===navigator.platform,n="X11"===navigator.platform&&!t&&!e,i=String(navigator.platform).includes("Linux");return e?o.Mac:t?o.Windows:n?o.Unix:i?o.Linux:o.Other}function u(){try{return"h2"===performance.getEntriesByType("navigation")[0].nextHopProtocol?1:0}catch(e){return 0}}function h(){var e;return null!=(null===(e=null===window||void 0===window?void 0:window.PerformanceObserver)||void 0===e?void 0:e.supportedEntryTypes)&&["largest-contentful-paint","paint"].every((e=>window.PerformanceObserver.supportedEntryTypes.includes(e)))?1:0}function d(){return{OS:c(),VisibilityState:"hidden"===document.visibilityState||document.hidden?0:1,NavigationType:s(),NetworkType:"4g"===(null===(e=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===e?void 0:e.effectiveType)?i["4g"]:"3g"===(null===(t=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===t?void 0:t.effectiveType)?i["3g"]:"2g"===(null===(n=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===n?void 0:n.effectiveType)?i["2g"]:i.other,ServiceWorkerState:l(),NextHopProtocol:u(),SupportedEntryTypes:h()};var e,t,n}!function(e){e[e.other=0]="other",e[e["2g"]=2]="2g",e[e["3g"]=3]="3g",e[e["4g"]=4]="4g"}(i||(i={})),function(e){e[e.navigate=0]="navigate",e[e.reload=1]="reload",e[e.backForward=2]="backForward",e[e.other=255]="other"}(r||(r={})),function(e){e[e.Other=0]="Other",e[e.Mac=1]="Mac",e[e.Windows=2]="Windows",e[e.Unix=3]="Unix",e[e.Linux=4]="Linux"}(o||(o={}))},8052:(e,t,n)=>{"use strict";var i,r,o,a,s,l,c,u=n(6674),h=n(79),d=n(2630),f=n(9727),p=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},v=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},m=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const y=["url","refer_url","spm_id","timestamp","fts","browser_resolution","ptype","business_name","level","event_name","event_content","extra_info","arg1","arg2","arg3"];r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,i=new WeakSet,c=function(e={},t={},n=!1){const i="number"==typeof t.delay?t.delay:"number"==typeof v(this,a,"f").delay?v(this,a,"f").delay:0,r=Object.assign(Object.assign(Object.assign(Object.assign({},n?{}:(0,h.VP)()),(0,u.Fr)()),v(this,s,"f")),e),o=e=>{var t;return null===(t=v(this,l,"f"))||void 0===t?void 0:t.event("performanceTrack",e,{sample:100,randDelay:0})};i<=0?o(r):setTimeout((()=>{o(r)}),i)}},79:(e,t,n)=>{"use strict";n.d(t,{VP:()=>o,bk:()=>r});const i=["startTime","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","duration","redirectCount","decodedBodySize","encodedBodySize","transferSize"];function r(){try{const e=performance.timing,t=performance.navigation.type===performance.navigation.TYPE_BACK_FORWARD?"back_forward":performance.navigation.type===performance.navigation.TYPE_NAVIGATE?"navigate":performance.navigation.type===performance.navigation.TYPE_RELOAD?"reload":"prerender",n={entryType:"navigation",startTime:0,duration:e.loadEventEnd-e.navigationStart,redirectCount:performance.navigation.redirectCount,type:t};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n}catch(e){return{}}}function o(){var e;try{const t=null!==(e=null===performance||void 0===performance?void 0:performance.getEntriesByType("navigation")[0])&&void 0!==e?e:r(),n={};return i.forEach((e=>{var i;n[e]=Math.max(null!==(i=t[e])&&void 0!==i?i:0,0)})),n}catch(e){return{}}}},9727:(e,t,n)=>{"use strict";function i(e){var t,n;return null!==(n=null===(t=RegExp(`[;\\s]*${e}=([^;\\s]+)`).exec(document.cookie))||void 0===t?void 0:t[1])&&void 0!==n?n:""}function r(){return/ipad|iphone os|android/i.test(navigator.userAgent)}function o(){}function a(e,t){if(e===t)return!0;if("object"==typeof e){for(const n in e)if(!a(e[n],t[n]))return!1;return!0}return!1}n.d(t,{ZT:()=>o,ej:()=>i,tq:()=>r,vZ:()=>a})},1401:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,".Cmx7R8yM0VwVoSMZIK7C {\n  display: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  padding: 0 6px 0;\n  text-align: left;\n  color: #fff;\n  background-color: rgba(28, 28, 28, 0.8);\n  border-radius: 4px;\n  font-size: 12px;\n  z-index: 101;\n  cursor: text;\n  user-select: text;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre::-webkit-scrollbar {\n  background-color: rgba(0, 0, 0, 0);\n  width: 8px;\n  cursor: auto;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre::-webkit-scrollbar-thumb {\n  background-color: rgba(255, 255, 255, 0.5);\n  border-radius: 8px;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre {\n  overflow-y: scroll;\n  word-break: break-all;\n  white-space: break-spaces;\n  width: 240px;\n  height: 310px;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre .wrmgAiKoMkSXAJ7eJo8C {\n  color: #999;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre .qDmWwhF6xA4upOMgc7qa {\n  color: inherit;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre .tooeSLcIdtNpz7raHta0 {\n  color: #ff9900;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre .VZkiViHg2QV1N0fte8Gd {\n  color: #f3323e;\n}\n.Cmx7R8yM0VwVoSMZIK7C pre code {\n  font-family: PingFang SC, Microsoft YaHei;\n}\n.Cmx7R8yM0VwVoSMZIK7C .lDnIu25fCpVdtDyVhnpA {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  cursor: pointer;\n}\n",""]),a.locals={webPlayerLogPanel:"Cmx7R8yM0VwVoSMZIK7C",log0:"wrmgAiKoMkSXAJ7eJo8C",log1:"qDmWwhF6xA4upOMgc7qa",log2:"tooeSLcIdtNpz7raHta0",log3:"VZkiViHg2QV1N0fte8Gd",closeBtn:"lDnIu25fCpVdtDyVhnpA"};const s=a},3007:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,".Wwtfc6b2w65cfBRzL9Id {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 40;\n}\n.Wwtfc6b2w65cfBRzL9Id .LvQXQu436nrg7xhvy0gR {\n  margin-top: -10%;\n  width: 230px;\n}\n.Wwtfc6b2w65cfBRzL9Id .Vei429vuPGSkiUk6mvNg {\n  font-family: PingFang SC;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 18px;\n  line-height: 34px;\n  color: #FFFFFF;\n  margin-bottom: 20px;\n  margin-top: 0;\n}\n.Wwtfc6b2w65cfBRzL9Id .Vei429vuPGSkiUk6mvNg .Drr75YBXxNhOIsANHqn8 {\n  color: #23ADE5;\n}\n.Wwtfc6b2w65cfBRzL9Id .lyVvS1iMZbSbaKIxAF9p {\n  width: 135px;\n  height: 45px;\n  background: #23ADE5;\n  border-radius: 4px;\n  color: white;\n  font-family: PingFang SC;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 18px;\n  text-align: center;\n  vertical-align: middle;\n  line-height: 45px;\n  cursor: pointer;\n}\n.ntMzdJGK5xCLVyRrSZKp {\n  position: absolute;\n  width: 150px;\n  height: 32px;\n  background: #23ADE5;\n  border-radius: 4px;\n  z-index: 40;\n  bottom: 40;\n  left: 30px;\n  bottom: 10px;\n  cursor: pointer;\n}\n.ntMzdJGK5xCLVyRrSZKp .LvQXQu436nrg7xhvy0gR {\n  width: 18px;\n  height: 18px;\n  line-height: 28px;\n  position: absolute;\n  top: 6px;\n  left: 11px;\n  margin-right: 9px;\n}\n.ntMzdJGK5xCLVyRrSZKp .Vei429vuPGSkiUk6mvNg {\n  position: absolute;\n  font-family: PingFang SC;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 32px;\n  color: #FFFFFF;\n  top: 0;\n  left: 41px;\n  white-space: nowrap;\n  margin: 0;\n}\n",""]),a.locals={notAutoPlayTipContainer:"Wwtfc6b2w65cfBRzL9Id",tipImg:"LvQXQu436nrg7xhvy0gR",tipText:"Vei429vuPGSkiUk6mvNg",textTipEmphasize:"Drr75YBXxNhOIsANHqn8",tipBtn:"lyVvS1iMZbSbaKIxAF9p",mutePlayTipContainer:"ntMzdJGK5xCLVyRrSZKp"};const s=a},4802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,"ul._4VubdELY6ypK0qXUMVHR,\n._4VubdELY6ypK0qXUMVHR li {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\nul._4VubdELY6ypK0qXUMVHR {\n  position: absolute;\n  left: -9999px;\n  top: -9999px;\n  padding: 3px;\n  min-width: 80px;\n  font-size: 12px;\n  color: #eee;\n  background: rgba(28, 28, 28, 0.9);\n  border-radius: 3px;\n  opacity: 0;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  transition: opacity 0.1s cubic-bezier(0, 0, 0.2, 1);\n  z-index: 99;\n  font-family: PingFang SC, Microsoft YaHei;\n  outline: none;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp {\n  position: relative;\n  padding: 3px 20px;\n  width: 200px;\n  line-height: 22px;\n  cursor: pointer;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp.fG2r2piYghHTQKQZF8bl {\n  color: #777;\n  cursor: default;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp:not(.fG2r2piYghHTQKQZF8bl):hover {\n  background: rgba(255, 255, 255, 0.1);\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp:not(.fG2r2piYghHTQKQZF8bl):hover .YccudlUCmLKcUTg_yzKN {\n  display: block;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp.ELfCeN5I2pV6pHooIfhB::before {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 9px;\n  right: 9px;\n  height: 1px;\n  background-color: #aaa;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp .QuIt19RVTudvx6Ncp_Dh {\n  position: absolute;\n  right: 4px;\n  top: 10px;\n  width: 8px;\n  height: 8px;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp .QuIt19RVTudvx6Ncp_Dh::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 4px solid transparent;\n  border-left-color: #eee;\n  opacity: 0.8;\n}\nul._4VubdELY6ypK0qXUMVHR .tzeL3Q2VLyvTwgBo_yWp .snH8M_ZAwhP5s9Z9fkQ5 {\n  display: inline-block;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n  overflow: hidden;\n}\nul._4VubdELY6ypK0qXUMVHR .YccudlUCmLKcUTg_yzKN {\n  list-style: none;\n  outline: none;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  left: 100%;\n  top: 0;\n  display: none;\n  color: #eee;\n  background: rgba(28, 28, 28, 0.9);\n  border-radius: 3px;\n  overflow: hidden;\n}\nul._4VubdELY6ypK0qXUMVHR .YccudlUCmLKcUTg_yzKN .HfodaIBaRC9NaglgykBX {\n  padding: 3px 20px;\n  width: 120px;\n  height: 22px;\n  line-height: 22px;\n  text-align: left;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  transition: all 0.3s ease-in-out;\n}\nul._4VubdELY6ypK0qXUMVHR .YccudlUCmLKcUTg_yzKN .HfodaIBaRC9NaglgykBX.fG2r2piYghHTQKQZF8bl {\n  color: #777;\n  cursor: default;\n}\nul._4VubdELY6ypK0qXUMVHR .YccudlUCmLKcUTg_yzKN .HfodaIBaRC9NaglgykBX:not(.fG2r2piYghHTQKQZF8bl):hover {\n  background: rgba(255, 255, 255, 0.1);\n}\nul._4VubdELY6ypK0qXUMVHR.TtSI5XrmG9T7nwBJ5HhH .YccudlUCmLKcUTg_yzKN {\n  left: 0;\n  transform: translate(-100%, 0);\n}\nul._4VubdELY6ypK0qXUMVHR .Fn3JSaTFz0UexZuswQm9,\nul._4VubdELY6ypK0qXUMVHR .ZZ2m0DZagK8hVmMnapaW,\nul._4VubdELY6ypK0qXUMVHR .PglQi63z2ggjuZqtSxHV {\n  width: 12px;\n  height: 12px;\n  margin-right: 6px;\n  display: inline-block;\n  position: relative;\n  top: 2px;\n  margin-left: 2px;\n  pointer-events: none;\n}\nul._4VubdELY6ypK0qXUMVHR .Fn3JSaTFz0UexZuswQm9:before,\nul._4VubdELY6ypK0qXUMVHR .ZZ2m0DZagK8hVmMnapaW:before,\nul._4VubdELY6ypK0qXUMVHR .PglQi63z2ggjuZqtSxHV:before,\nul._4VubdELY6ypK0qXUMVHR .Fn3JSaTFz0UexZuswQm9:after,\nul._4VubdELY6ypK0qXUMVHR .ZZ2m0DZagK8hVmMnapaW:after,\nul._4VubdELY6ypK0qXUMVHR .PglQi63z2ggjuZqtSxHV:after {\n  content: '';\n  position: absolute;\n}\nul._4VubdELY6ypK0qXUMVHR .Fn3JSaTFz0UexZuswQm9:before {\n  width: 14px;\n  height: 10px;\n  border-radius: 14px / 10px;\n  background: #aaa;\n  top: 1px;\n  left: -1px;\n}\nul._4VubdELY6ypK0qXUMVHR .Fn3JSaTFz0UexZuswQm9:after {\n  width: 6px;\n  height: 10px;\n  border-radius: 6px / 10px;\n  background: #777777;\n  left: 3px;\n  top: 1px;\n}\nul._4VubdELY6ypK0qXUMVHR .ZZ2m0DZagK8hVmMnapaW:before,\nul._4VubdELY6ypK0qXUMVHR .ZZ2m0DZagK8hVmMnapaW:after {\n  width: 5px;\n  height: 5px;\n  border: 2px solid #aaa;\n  top: 0;\n  left: 0;\n  border-radius: 1px;\n}\nul._4VubdELY6ypK0qXUMVHR .ZZ2m0DZagK8hVmMnapaW:after {\n  top: 4px;\n  left: 4px;\n  background: #1c1c1c;\n  background: rgba(28, 28, 28, 0.8);\n  -webkit-box-shadow: -1px 0 0 rgba(28, 28, 28, 0.8), 0 -1px 0 rgba(28, 28, 28, 0.8);\n  -moz-box-shadow: -1px 0 0 rgba(28, 28, 28, 0.8), 0 -1px 0 rgba(28, 28, 28, 0.8);\n  box-shadow: -1px 0 0 rgba(28, 28, 28, 0.8), 0 -1px 0 rgba(28, 28, 28, 0.8);\n}\nul._4VubdELY6ypK0qXUMVHR .PglQi63z2ggjuZqtSxHV:before {\n  width: 6px;\n  height: 8px;\n  background: #aaa;\n  top: 1px;\n  left: 3px;\n  border-radius: 1px;\n}\nul._4VubdELY6ypK0qXUMVHR .PglQi63z2ggjuZqtSxHV:after {\n  border: 5px solid transparent;\n  border-top-color: #aaa;\n  top: 7px;\n  left: 1px;\n}\n",""]),a.locals={webPlayerContextMenu:"_4VubdELY6ypK0qXUMVHR",contextMenuItem:"tzeL3Q2VLyvTwgBo_yWp",disabled:"fG2r2piYghHTQKQZF8bl",contextSubMenu:"YccudlUCmLKcUTg_yzKN",menuItemHr:"ELfCeN5I2pV6pHooIfhB",contextMenuRightArrow:"QuIt19RVTudvx6Ncp_Dh",contextMenuText:"snH8M_ZAwhP5s9Z9fkQ5",contextSubMenuItem:"HfodaIBaRC9NaglgykBX",leftSubMenu:"TtSI5XrmG9T7nwBJ5HhH",blpIconShow:"Fn3JSaTFz0UexZuswQm9",blpIconCopy:"ZZ2m0DZagK8hVmMnapaW",blpIconDownload:"PglQi63z2ggjuZqtSxHV"};const s=a},7599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,'.web-player-report-msg {\n  color: #4fc1e9;\n  font-size: 12px;\n  line-height: 2;\n}\n.web-player-report-msg img {\n  height: 25px;\n}\n.web-player-report-uname {\n  font-size: 12px;\n  color: #666;\n  line-height: 2;\n}\n.web-player-report-select-input {\n  height: 32px;\n  position: relative;\n  border: 1px solid #e3e8ec;\n  font-size: 12px;\n  background: #fff;\n  cursor: pointer;\n  border-radius: 4px;\n  margin: 10px 0 25px;\n}\n.web-player-report-select-wrap {\n  position: absolute;\n  height: 34px;\n  width: 360px;\n}\n.web-player-report-select-wrap:hover .bilibili-live-player-report-icon::after {\n  transform-origin: center;\n  transform: rotate(-135deg);\n  transition: transform 0.3s;\n}\n.web-player-report-icon {\n  display: inline-block;\n  width: 40px;\n  height: 30px;\n  margin-right: 20px;\n}\n.web-player-report-icon::after {\n  display: inline-block;\n  content: " ";\n  height: 6px;\n  width: 6px;\n  border-width: 0 2px 2px 0;\n  border-color: #999999;\n  border-style: solid;\n  transform: matrix(0.71, 0.71, -0.71, 0.71, 0, 0);\n  transform-origin: center;\n  transition: transform 0.3s;\n  position: absolute;\n  top: 50%;\n  right: 10px;\n  margin-top: -4px;\n}\n.web-player-report-curt {\n  padding-left: 8px;\n  height: 32px;\n  line-height: 32px;\n  color: #646c7a;\n}\n.web-player-report-ul {\n  display: none;\n  position: relative;\n  top: -27px;\n  width: 358px;\n  height: 160px;\n  padding: 0;\n  margin: 0;\n  font-size: inherit;\n  border: 1px solid #ddd;\n  border-top: 0;\n  background: #fff;\n  overflow-y: auto;\n  -webkit-box-shadow: 0 1px 2px 0 rgba(105, 115, 133, 0.22);\n  box-shadow: 0 1px 2px 0 rgba(105, 115, 133, 0.22);\n  border-radius: 0 0 4px 4px;\n  z-index: 1;\n  cursor: pointer;\n}\n.web-player-report-ul li {\n  padding: 10px 0 10px 8px;\n  color: #999;\n  font-size: 12px;\n  height: 24px;\n  line-height: 24px;\n}\n.web-player-report-ul li:hover {\n  background: #eef9fd;\n}\n',""]);const s=a},2002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,'.blp-plugin-modal {\n  position: absolute;\n  top: 100px;\n  left: 0;\n  padding: 15px;\n  z-index: 99;\n  display: none;\n  background: #ffffff;\n  border-radius: 4px;\n}\n.blp-plugin-modal.active {\n  display: block;\n}\n.blp-plugin-modal-header {\n  font-size: 16px;\n  color: #4fc1e9;\n  height: 26px;\n  line-height: 20px;\n}\n.blp-plugin-modal-body {\n  margin: 10px 0;\n  font-size: 14px;\n}\n.blp-plugin-modal-footer {\n  text-align: center;\n  position: relative;\n}\n.blp-plugin-modal-btn {\n  border: none;\n  display: inline-block;\n  margin: 0 2px;\n  font-size: 14px;\n  padding: 6px 10px;\n  cursor: pointer;\n  outline: none;\n  border-radius: 4px;\n}\n.blp-plugin-modal-btn.submit-btn {\n  color: #fff;\n  background: #4fc1e9;\n}\n.blp-plugin-modal-btn.submit-btn:hover {\n  background: #61c7eb;\n}\n.blp-plugin-modal-btn.cancel-btn {\n  color: #4fc1e9;\n  background: #e0f4fb;\n}\n.blp-plugin-modal-btn.cancel-btn:hover {\n  background: #ceeef9;\n}\n.blp-plugin-modal-close {\n  position: absolute;\n  width: 30px;\n  height: 30px;\n  top: 9px;\n  right: 9px;\n  cursor: pointer;\n  border-radius: 100%;\n  transition: transform 0.3s ease-in-out;\n  display: none;\n}\n.blp-plugin-modal-close:hover {\n  transform: rotate(180deg);\n}\n.blp-plugin-modal-close:before {\n  content: "";\n  position: absolute;\n  width: 22px;\n  height: 22px;\n  left: 4px;\n  top: 4px;\n  border-radius: 100%;\n}\n.blp-plugin-modal-close i {\n  font-size: 14px;\n  color: #999;\n  position: absolute;\n  z-index: 10;\n  text-align: center;\n  top: 9px;\n  left: 9px;\n}\n.blp-plugin-modal-close.active {\n  display: block;\n}\n',""]);const s=a},3124:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,".web-player-subtitle-wrap {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  z-index: 8;\n}\n.web-player-subtitle-wrap.draggable .web-player-subtitle {\n  pointer-events: auto;\n  cursor: move;\n}\n.web-player-subtitle-wrap .web-player-subtitle {\n  display: none;\n  position: absolute;\n  bottom: 15%;\n  left: 50%;\n  color: #fff;\n  font-size: 24px;\n  width: 600px;\n  padding: 5px 12px;\n  box-sizing: border-box;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.4);\n  user-select: none;\n  pointer-events: none;\n}\n.web-player-subtitle-wrap .web-player-subtitle > div {\n  overflow: hidden;\n  line-height: 30px;\n  max-height: 60px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  text-overflow: ellipsis;\n}\n.web-player-subtitle-wrap .web-player-subtitle.dragging {\n  background: rgba(0, 0, 0, 0.9);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);\n}\n.web-player-subtitle-wrap .web-player-subtitle::after {\n  content: 'AI';\n  position: absolute;\n  top: 0;\n  right: 4px;\n  font-size: 10px;\n  opacity: 0.75;\n  transform: scale(0.8);\n}\n",""]);const s=a},375:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(9601),r=n.n(i),o=n(2609),a=n.n(o)()(r());a.push([e.id,".PyF4K7mjqm4rpICeBFJA {\n  z-index: 12;\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  height: 3px;\n  user-select: none;\n  -webkit-touch-callout: none;\n}\n.PyF4K7mjqm4rpICeBFJA div.sQ7P_w4XjOd8SExhczBj {\n  bottom: 40px;\n}\n.PyF4K7mjqm4rpICeBFJA div.J2Mzk9ck3DuoidcPcJ1f {\n  bottom: 0;\n}\n@media screen and (max-width: 850px) {\n  .PyF4K7mjqm4rpICeBFJA div.sQ7P_w4XjOd8SExhczBj {\n    bottom: 30px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n  }\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO {\n  opacity: 0.8;\n  bottom: 0;\n  left: 7px;\n  right: 7px;\n  position: absolute;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO div.oBSBJoZnWYwpc16H5bzu {\n  height: 4px;\n  padding: 2px 0;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO div.GZlS31Neqszo98vukxFu {\n  height: 3px;\n  padding: 0;\n}\n@media screen and (max-width: 850px) {\n  .PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO div.oBSBJoZnWYwpc16H5bzu {\n    height: 2px;\n    padding: 2px 0;\n  }\n  .PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO div.GZlS31Neqszo98vukxFu {\n    height: 2px;\n    padding: 0;\n  }\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .XhJAZxh51Lj7dEy0AcpQ {\n  height: 3px;\n  padding: 0;\n  position: relative;\n  width: 100%;\n  background: rgba(255, 255, 255, 0.3);\n  cursor: pointer;\n  opacity: 0.9;\n  background-clip: content-box;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .XhJAZxh51Lj7dEy0AcpQ .Ffl96gMCVet2m9Sd_oHH {\n  position: absolute;\n  left: 100%;\n  margin-left: -7px;\n  margin-top: -6px;\n  width: 14px;\n  height: 14px;\n  background-size: 100%;\n  z-index: 1;\n  display: none;\n  background-image: url('https://i0.hdslb.com/bfs/activity-plat/static/20210315/d0411babbbf77c49ca42a3320eb804ae/F7QzSyeFMa.png');\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .XhJAZxh51Lj7dEy0AcpQ .TzW8pOv1omXIeb5MHnoh {\n  width: 100%;\n  height: 100%;\n  background: #00a1d6;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .yj1tAzD_IFIsyYditjwo .iyY_JGjyWwZEv7V75iUY {\n  top: 0px;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .yj1tAzD_IFIsyYditjwo .iyY_JGjyWwZEv7V75iUY .C2xX5d9nxl3_LvQ5N8kc {\n  width: 3px;\n  height: 3px;\n}\n@media screen and (max-width: 850px) {\n  .PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .yj1tAzD_IFIsyYditjwo .iyY_JGjyWwZEv7V75iUY .C2xX5d9nxl3_LvQ5N8kc {\n    width: 2px;\n    height: 2px;\n  }\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .yj1tAzD_IFIsyYditjwo .u8j2y1iYwNEz5jjIfeMK {\n  display: none;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .xFNqHUGHvS81ks6dAnBW .iyY_JGjyWwZEv7V75iUY {\n  top: 2px;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .xFNqHUGHvS81ks6dAnBW .iyY_JGjyWwZEv7V75iUY .C2xX5d9nxl3_LvQ5N8kc {\n  width: 4px;\n  height: 4px;\n}\n@media screen and (max-width: 850px) {\n  .PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .xFNqHUGHvS81ks6dAnBW .iyY_JGjyWwZEv7V75iUY .C2xX5d9nxl3_LvQ5N8kc {\n    width: 2px;\n    height: 2px;\n  }\n}\n@media screen and (max-width: 850px) {\n  .PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .xFNqHUGHvS81ks6dAnBW .iyY_JGjyWwZEv7V75iUY {\n    top: calc(50% - 1px);\n  }\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .xFNqHUGHvS81ks6dAnBW .u8j2y1iYwNEz5jjIfeMK {\n  display: block;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .Xn6hROsJ25vhVGs8Uu5l .iyY_JGjyWwZEv7V75iUY {\n  position: absolute;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .Xn6hROsJ25vhVGs8Uu5l .iyY_JGjyWwZEv7V75iUY .C2xX5d9nxl3_LvQ5N8kc {\n  position: absolute;\n  left: 0;\n  border-radius: 50%;\n  background-color: #fff;\n  cursor: pointer;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .Xn6hROsJ25vhVGs8Uu5l .iyY_JGjyWwZEv7V75iUY .u8j2y1iYwNEz5jjIfeMK {\n  position: absolute;\n  width: 36px;\n  height: 36px;\n  top: -50px;\n  left: -16px;\n  border-radius: 50%;\n  background: #00a1d6;\n  cursor: pointer;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .Xn6hROsJ25vhVGs8Uu5l .iyY_JGjyWwZEv7V75iUY .u8j2y1iYwNEz5jjIfeMK .Vvxq0TgfMGkKMA4f5RZB {\n  position: absolute;\n  left: 2px;\n  top: 2px;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  overflow: hidden;\n  background-size: cover;\n  z-index: 1;\n}\n.PyF4K7mjqm4rpICeBFJA .wzMWH0YAfabG6H8wvpQO .Xn6hROsJ25vhVGs8Uu5l .iyY_JGjyWwZEv7V75iUY .u8j2y1iYwNEz5jjIfeMK::after {\n  content: '';\n  position: absolute;\n  left: 13px;\n  bottom: -3px;\n  width: 10px;\n  height: 10px;\n  transform: rotate(45deg);\n  background-color: #00a1d6;\n}\n.iqaWt1u3SEtkJQAVh0Ts {\n  display: flex;\n  height: 22px;\n}\n.iqaWt1u3SEtkJQAVh0Ts .YG6HRq2_1znLdnnocpTp {\n  padding: 0px 8px;\n  margin: 0 9px;\n  color: #fff;\n  background-color: rgba(51, 51, 51, 0.8);\n  border-radius: 12px;\n  font-size: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n.iqaWt1u3SEtkJQAVh0Ts .YG6HRq2_1znLdnnocpTp .Ncwtb7LWNSDTgcF8xHx6 {\n  display: inline-block;\n  margin-right: 6px;\n  width: 6px;\n  height: 6px;\n  font-size: 0;\n  border-radius: 50%;\n  background: #ff5243;\n  vertical-align: middle;\n}\n",""]),a.locals={webPlayerReplayContainer:"PyF4K7mjqm4rpICeBFJA",replayShow:"sQ7P_w4XjOd8SExhczBj",replayHidden:"J2Mzk9ck3DuoidcPcJ1f",webPlayerReplayElement:"wzMWH0YAfabG6H8wvpQO",progressShow:"oBSBJoZnWYwpc16H5bzu",progressHidden:"GZlS31Neqszo98vukxFu",webPlayerReplayProgress:"XhJAZxh51Lj7dEy0AcpQ",webPlayerReplayCurrentPoint:"Ffl96gMCVet2m9Sd_oHH",webPlayerReplayBar:"TzW8pOv1omXIeb5MHnoh",webPlayerReplayHighlightsHidden:"yj1tAzD_IFIsyYditjwo",highlightItem:"iyY_JGjyWwZEv7V75iUY",highlightPot:"C2xX5d9nxl3_LvQ5N8kc",highlightIcon:"u8j2y1iYwNEz5jjIfeMK",webPlayerReplayHighlightsShow:"xFNqHUGHvS81ks6dAnBW",webPlayerReplayHighlights:"Xn6hROsJ25vhVGs8Uu5l",highlightImg:"Vvxq0TgfMGkKMA4f5RZB",backliveBtnContainer:"iqaWt1u3SEtkJQAVh0Ts",backliveBtn:"YG6HRq2_1znLdnnocpTp",backliveDot:"Ncwtb7LWNSDTgcF8xHx6"};const s=a},2609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},9601:e=>{"use strict";e.exports=function(e){return e[1]}},8166:()=>{window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)}},3308:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(6062),r=n.n(i),o=n(4036),a=n.n(o),s=n(6793),l=n.n(s),c=n(7892),u=n.n(c),h=n(1173),d=n.n(h),f=n(2464),p=n.n(f),v=n(375),m={};m.styleTagTransform=p(),m.setAttributes=u(),m.insert=l().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=d();r()(v.Z,m);const y=v.Z&&v.Z.locals?v.Z.locals:void 0},6062:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],c=i.base?l[0]+i.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=r(f,i);i.byIndex=s,t.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=i(e,r),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},6793:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},1173:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},7892:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},4036:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},2464:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},9459:(e,t,n)=>{"use strict";n.d(t,{$F:()=>v,$J:()=>C,Ei:()=>m,Gb:()=>f,L5:()=>x,Sx:()=>w,Vi:()=>h,Yl:()=>p,cX:()=>d,gT:()=>b,n5:()=>_,nb:()=>g,ur:()=>k,vL:()=>y,wi:()=>S});var i,r,o=n(163),a=n(7377),s=n(7874),l=n(505),c=n(32),u=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const h={VERSION:null!==(i="3.8.4")?i:"unknown",BUILD_TIME:null!==(r="2024/1/25 11:20:18")?r:"unknown",NODE_ENV:"production"};var d;function f(){var e;return null!=Object.entries&&null!=Element.prototype.prepend&&("fetch"in window&&"ReadableStream"in window&&Boolean(null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))||o.ua.isIOS())}function p(e){o.kg.info(`${e} version: ${h.VERSION}, current date: ${(new Date).toLocaleDateString()}, build time: ${h.BUILD_TIME}`),o.kg.info(`user agent: ${navigator.userAgent}`),setTimeout((()=>{(0,o.hj)("/xlive/web-room/v1/index/getIpInfo").then((e=>{o.kg.info(`client ip info: ${JSON.stringify(e)}`)})).catch(o.kg.error)}),100)}function v(e,t){const n=(0,o.Vj)(),i=_();return o.kg.info(`userId: ${i}, roomId: ${e}`),a.default.initStaticInfo({uvid:n,uid:i,version:t+h.VERSION,roomId:e}),o.jP.init(i),f()||(a.default.error(a.default.ErrorCode.UnsupportedPlayer,"UnsupportedPlayer"),o.kg.error("Unsupported Player")),{userId:i,uvid:n}}function m(e,t){return u(this,void 0,void 0,(function*(){return null!=t?yield t(e):yield new Promise(((t,n)=>{(0,o.hj)(`//api.live.bilibili.com/xlive/web-room/v2/index/getRoomPlayInfo?room_id=${e.roomId}&protocol=0,1&format=0,1,2&codec=0,1,2&qn=${e.qn}&platform=${e.isMobile?"html5":"web"}&ptype=8&dolby=5${e.isMobile?"":"&panorama=1"}`,{handleRes:t}).catch(n)}))}))}function y({roomId:e,isMobile:t},n,i){return u(this,void 0,void 0,(function*(){const{code:r,data:a}=yield m({roomId:e,qn:0,isMobile:t},i);if(r===o.Xt.AreaBlock)throw(0,s.J)(n,o.Xt.AreaBlock,"Sorry, bilibili is currently not available in your country according to copyright restrictions<br/>非常抱歉，根据版权方要求，您所在的地区无法观看本直播"),new Error("RoomAreaBlock");return a}))}function g(e,{duration:t=0,errMsg:n="ApiError",apiUrl:i=""}){"apiBizErr"===e?a.default.error(a.default.ErrorCode.ApiBiz,n,{apiUrl:i,extFields:[]}):"requestErr"===e?a.default.error(a.default.ErrorCode.ApiRequest,n,{apiUrl:i,extFields:[],sampleRate:.01}):"responseErr"===e?a.default.error(a.default.ErrorCode.ApiResponse,n,{apiUrl:i,extFields:[]}):"perf"===e&&a.default.perf(a.default.PerfCode.Api,t,{params:{apiUrl:i},extFields:[],sampleRate:.01})}function w(e,t){return{handleLogger:t=>{var n;const i=o.kg.dump();switch(t){case"copy":return void(null===(n=navigator.clipboard)||void 0===n||n.writeText(i).catch((()=>{})));case"download":return void function(e,t){try{const n=document.createElement("a");n.download=t,n.style.display="none";const i=new Blob([e]);n.href=window.URL.createObjectURL(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(e){o.kg.error("Failed to download file")}}(i,`Bilibili-Live-HTML5-Player-EventLog-${Date.now()}.txt`);case"show":e.show()}},handleVideoInfo:()=>{t.show()}}}function b(e,t){const n={area:"danmakuArea",fontScale:"fontSize"},i=e=>e/100,r={opacity:i,fontScale:i,density:i,area:e=>e/4*100};Object.entries(e).map((([e,t])=>{var i,o;return[null!==(i=n[e])&&void 0!==i?i:e,(null!==(o=r[e])&&void 0!==o?o:e=>e)(t)]})).forEach((([e,n])=>{"display"===e?t[n?"show":"hide"]():t.set({[e]:n})}))}function _(){return Number((0,o.ej)("DedeUserID"))}function k(e,t){let n=0,i=!1;o.Cn.on("play",(()=>{r()})),o.Cn.on("pause",(()=>{c()}));const r=()=>{var r,a;if(clearTimeout(n),!i)return;i=!1;const s=e instanceof l.Gf&&!0===(null===(r=e.replay)||void 0===r?void 0:r.isReplay);o.kg.info(`reload when blocked stream, isReplay?: ${String(s)}`),s?null===(a=e.replay)||void 0===a||a.reload():(e.destroy(),t.reload().catch((e=>{o.kg.error(e)})))},a=e.on(l.Bs.Play,r),s=e.ctrl.onChange(((e,t)=>{"playStatus"===e&&(t?r():c())})),c=()=>{n=window.setTimeout((()=>{o.kg.info("block stream because paused 10 sec"),i=!0,e.blockStream()}),1e4)};return()=>{a(),s(),clearTimeout(n),i=!1,o.Cn.destroy()}}function C(e){let t=[];const n=n=>{t.push(performance.now()),t=t.filter((e=>performance.now()-e<50)),t.length>=2&&(t=[],e.dispatchEvent(new MouseEvent("contextmenu",{clientX:n.changedTouches[0].clientX,clientY:n.changedTouches[0].clientY})))};return e.addEventListener("touchend",n),()=>{e.removeEventListener("touchend",n)}}!function(e){e.Activity="A",e.Room="R",e.Home="H",e.Mobile="M"}(d||(d={}));const x=(e,t)=>{let n,i=null,r=!1;const s=[e.on(o.n4.FirstFrame,(()=>{n=e.getVideoEl()})),e.on(o.n4.SEIParseData,((e,s,l)=>{e===o.Yw.B_LIVE_VIBRATION&&null!=n&&(null==i&&(i=new c.N(n,t)),i.input(s,l),r||(r=!0,a.default.custom(a.default.CustomCode.DMVisualVibrate)))})),e.on(l.Bs.Destroyed,(()=>{null==i||i.destroy(),i=null})),e.on(l.Bs.WaitStart,(()=>{null==i||i.webXInputSetState(0,0)}))];return()=>{null==i||i.destroy(),i=null,s.forEach((e=>e()))}};function S(e){var t;null!=e.ctrl&&(e.ctrl.getCtrlUI().ctrlItemVisibility.danmaku=!1),null===(t=e.danmakuBiz)||void 0===t||t.hide()}},7874:(e,t,n)=>{"use strict";function i(e,t,n){let i="直播已断开";const r=null!=n?n:"直播时空次元异常，正在努力恢复中",o=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div");o.className="web-player-error-panel",s.className="web-player-error-code",l.className="web-player-error-image",c.className="web-player-error-tip";i+='\n    <div style="\n    display: block;\n    font-size: 13px;\n    color: #fff;\n  " class="web-player-error-operation">\n      ( 请尝试\n        <a style="\n    color: #fd9ccc;\n    display: inline-block;\n    position: relative;\n    margin: 0 3px;\n  " class="web-player-error-reload" href="javascript:void(0);">刷新</a>\n      )\n    </div>\n  ',a.style.cssText="\n    display: block;\n    max-width: 80%;\n    display: inline-block;\n    font-size: 16px;\n    color: #eee;\n    line-height: 24px;\n    padding: 10px;\n    cursor: default;\n  ",l.style.cssText="\n    display: block;\n    width: 30%;\n    height: 30%;\n    background: url(//s1.hdslb.com/bfs/static/player/live/html5/images/error.png) no-repeat 50% 0;\n    background-size: contain;\n  ",o.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    z-index: 18;\n    background: #000;\n    cursor: default;\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n  ";const u="\n    font-size: 24px;\n    margin-top: 12px;\n    color: #999999;\n    height: 33px;\n    line-height: 33px;\n    text-align: center;\n  ";return s.style.cssText=u,c.style.cssText=u,a.innerHTML='直播已断开\n    <div style="\n    display: block;\n    font-size: 13px;\n    color: #fff;\n  " class="web-player-error-operation">\n      ( 请尝试\n        <a style="\n    color: #fd9ccc;\n    display: inline-block;\n    position: relative;\n    margin: 0 3px;\n  " class="web-player-error-reload" href="javascript:void(0);">刷新</a>\n      )\n    </div>\n  ',o.appendChild(a),o.appendChild(l),c.innerHTML=r,s.innerText=`status: ${t}`,a.style.display="none",o.appendChild(s),o.appendChild(c),e.appendChild(o),()=>{o.remove()}}n.d(t,{J:()=>i})},4089:(e,t,n)=>{"use strict";n.d(t,{M:()=>x});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},_=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};let k=!1;const C=()=>{k=!0,window.removeEventListener("touchstart",C),window.removeEventListener("click",C)};window.addEventListener("touchstart",C),window.addEventListener("click",C);class x{constructor(e=!0){i.set(this,!1),r.set(this,0),o.set(this,0),a.set(this,!1),s.set(this,!0),l.set(this,[]),c.set(this,void 0),u.set(this,void 0),h.set(this,1e3),d.set(this,-1),this.enableControllerHaptic=()=>{b(this,s,!0,"f")},this.disableControllerHaptic=()=>{b(this,s,!1,"f")},this.dispose=()=>{this.setState(0,0),_(this,a,"f")&&(window.removeEventListener("gamepadconnected",_(this,c,"f")),window.removeEventListener("gamepaddisconnected",_(this,u,"f")))},this.setState=(e,t)=>{clearTimeout(_(this,d,"f")),_(this,f,"f").call(this,e,t),_(this,p,"f").call(this,e,t),(e>0||t>0)&&b(this,d,window.setTimeout((()=>{b(this,d,-1,"f"),this.setState(0,0)}),_(this,h,"f")),"f")},f.set(this,((e,t)=>{if(x.IsSupportWebHaptic()){const n=.5,a=65535,s=Math.max(e,t*n);if(s!==_(this,r,"f")){if(b(this,r,s,"f"),b(this,o,s/a,"f"),!k)return;s>0?_(this,i,"f")||(b(this,i,!0,"f"),_(this,m,"f").call(this,this)):(b(this,i,!1,"f"),window.navigator.vibrate(0))}}})),p.set(this,((e,t)=>{var n;if(_(this,a,"f")){const i=65535,r=1e3,o=e/i,a=t/i;for(const[,e]of Object.entries(_(this,l,"f")))null!=e&&(null===(n=null==e?void 0:e.vibrationActuator)||void 0===n||n.playEffect("dual-rumble",{duration:r,strongMagnitude:o,weakMagnitude:a}))}})),this.getMotorPercent=()=>_(this,o,"f"),v.set(this,(()=>{b(this,l,navigator.getGamepads(),"f")})),m.set(this,(e=>{k&&_(e,r,"f")>0&&_(e,i,"f")&&(_(e,o,"f")<.075?_(e,w,"f").call(e,e,_(e,o,"f")):_(this,o,"f")<.88?_(e,g,"f").call(e,e,_(e,o,"f")):_(e,y,"f").call(e,e,_(e,o,"f")))})),y.set(this,((e,t)=>{const n=100*t;window.navigator.vibrate(n),setTimeout((()=>{_(e,m,"f").call(e,e)}),n)})),g.set(this,((e,t)=>{const n=50*t;window.navigator.vibrate(n),setTimeout((()=>{_(e,m,"f").call(e,e)}),n)})),w.set(this,((e,t)=>{const n=100-t/.025*100;window.navigator.vibrate(2),setTimeout((()=>{_(e,m,"f").call(e,e)}),n)})),b(this,s,e,"f"),_(this,s,"f")&&b(this,a,x.IsSupportControllerHaptic(),"f"),b(this,c,(e=>{console.log("A gamepad was connected:"+e.gamepad.id),_(this,v,"f").call(this)}),"f"),b(this,u,(e=>{console.log("A gamepad was disconnected:"+e.gamepad.id),_(this,v,"f").call(this)}),"f"),_(this,a,"f")&&(window.addEventListener("gamepadconnected",_(this,c,"f")),window.addEventListener("gamepaddisconnected",_(this,u,"f")),_(this,v,"f").call(this))}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,x.IsSupportControllerHaptic=()=>{var e,t;return!(null==window.Gamepad||null==window.GamepadHapticActuator||!(null===(t=null===(e=window.GamepadHapticActuator)||void 0===e?void 0:e.prototype)||void 0===t?void 0:t.hasOwnProperty("playEffect")))},x.IsSupportWebHaptic=()=>null!=window.navigator.vibrate,x.IsSupport=()=>x.IsSupportControllerHaptic()||x.IsSupportWebHaptic()},32:(e,t,n)=>{"use strict";n.d(t,{N:()=>m});var i,r,o,a,s,l,c,u,h,d=n(163),f=n(4089),p=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},v=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class m{constructor(e,t){this.dmBiz=t,i.set(this,[]),r.set(this,new f.M),o.set(this,void 0),a.set(this,0),s.set(this,null),l.set(this,-1),c.set(this,{shiftLimit:2,curLocation:0,speed:.4,direction:"top"}),this.clear=()=>{v(this,i,"f").splice(0,v(this,i,"f").length)},this.input=(e,t)=>{const n=(0,d.DA)(t),i=JSON.parse(n);this.addVibrateData({timestamp:e,vibrate:i})},this.output=e=>{if(0===v(this,i,"f").length)return;let t=0,n=e-v(this,i,"f")[0].timestamp,r=Math.abs(n);for(let o=1;o<v(this,i,"f").length;++o){const a=Math.abs(e-v(this,i,"f")[o].timestamp),s=Math.abs(a);if(!(s<=r))break;t=o,n=a,r=s}const o=v(this,i,"f")[t];return v(this,i,"f").splice(0,t),o},this.addVibrateData=e=>{if(0===v(this,i,"f").length)v(this,i,"f").push(e);else{let t=v(this,i,"f").length-1;for(;t>=0;--t){if(v(this,i,"f")[t].timestamp<e.timestamp){t+=1;break}}v(this,i,"f").splice(t,0,e)}},this.onUpdateVibrate=()=>{const e=v(this,o,"f").currentTime,t=this.output(e);if(null!=v(this,a,"f")&&e-v(this,a,"f")>1&&this.webXInputSetState(0,0),null==t||null==t.vibrate||t.vibrate===v(this,s,"f"))return;const n=t.timestamp-e;if(Math.abs(n)<=1){{const e=Math.max(0,n);setTimeout((()=>{this.webXInputSetState(t.vibrate.l,t.vibrate.r)}),1e3*e)}p(this,s,t.vibrate,"f"),p(this,a,t.timestamp,"f")}},this.onFrameCallback=e=>{e>performance.now()-5&&this.onUpdateVibrate(),p(this,l,window.requestAnimationFrame(this.onFrameCallback),"f")},this.destroy=()=>{cancelAnimationFrame(v(this,l,"f")),p(this,i,[],"f"),this.webXInputSetState(0,0),v(this,r,"f").dispose()},u.set(this,(e=>{0===e?(v(this,c,"f").shiftLimit=0,v(this,c,"f").curLocation=0):e<.075?v(this,c,"f").shiftLimit=2:e<=.88?v(this,c,"f").shiftLimit=5:e>.88&&(v(this,c,"f").shiftLimit=7),v(this,c,"f").speed=4*e,v(this,h,"f").call(this)})),h.set(this,(()=>{"top"===v(this,c,"f").direction?(v(this,c,"f").curLocation+=v(this,c,"f").speed,v(this,c,"f").curLocation+=v(this,c,"f").speed):(v(this,c,"f").curLocation-=v(this,c,"f").speed,v(this,c,"f").curLocation-=v(this,c,"f").speed),Math.abs(v(this,c,"f").curLocation)>v(this,c,"f").shiftLimit&&("top"===v(this,c,"f").direction?(v(this,c,"f").direction="bottom",v(this,c,"f").curLocation=v(this,c,"f").shiftLimit):(v(this,c,"f").direction="top",v(this,c,"f").curLocation=v(this,c,"f").shiftLimit)),null!=this.dmBiz&&this.dmBiz.offsetDM(v(this,c,"f").curLocation)})),p(this,i,[],"f"),p(this,o,e,"f"),this.onFrameCallback(0)}webXInputSetState(e,t){v(this,r,"f").setState(e,t),v(this,u,"f").call(this,v(this,r,"f").getMotorPercent())}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap},8049:(e,t,n)=>{"use strict";n.d(t,{h:()=>l});var i=n(6656),r=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const o="//api.live.bilibili.com",a=new Map,s=new Set;function l(e,t){var n;return r(this,void 0,void 0,(function*(){const r=performance.now();let l=e;/^(https?:)?\/\//.test(e)||(l=`${o}/${e.replace(/^\//,"")}`);const c=new URL(l,location.href),u=a.get(c.host+c.pathname);if(null!=u&&u.expiresTime>performance.now()){const e=Math.random()*u.scope;yield(0,i._v)(e)}const h=(0,i.ej)("bili_jct");if(""!==h&&"POST"===(null==t?void 0:t.method)&&null!=(null==t?void 0:t.data)){const e=new FormData,i=Object.assign(Object.assign({},null!==(n=t.data)&&void 0!==n?n:{}),{csrf:h,csrf_token:h});Object.keys(i).forEach((t=>{e.append(t,i[t])})),t.body=e}let d;try{d=yield fetch(l,Object.assign({credentials:"include"},null!=t?t:{}))}catch(e){const t=String(e);throw s.forEach((e=>e("requestErr",{errMsg:t,apiUrl:c.pathname}))),new Error(t)}if(!d.ok){const t=`url: ${e}, status: ${d.status}`;throw s.forEach((e=>e("responseErr",{errMsg:`status: ${d.status}`,apiUrl:c.pathname}))),new Error(t)}const f=yield d.json();if(s.forEach((e=>e("perf",{duration:performance.now()-r,apiUrl:c.pathname}))),"function"==typeof(null==t?void 0:t.handleRes))return t.handleRes(f),f.data;const{code:p,data:v,message:m}=f;if(0!==p)throw s.forEach((e=>e("apiBizErr",{errMsg:m,apiUrl:c.pathname}))),new Error(m);return v}))}l.watch=e=>(s.add(e),()=>{s.delete(e)}),l.disperse=(e,t)=>{const n=/^(https?:)?\/\//.test(e)?e:`${o}/${e.replace(/^\//,"")}`;a.set(n.replace(/^(https?:)?\/\//,""),t)}},6656:(e,t,n)=>{"use strict";n.d(t,{DA:()=>m,Ds:()=>d,Nl:()=>y,P2:()=>h,QV:()=>u,Te:()=>g,Vj:()=>o,_v:()=>f,d_:()=>l,ej:()=>s,gR:()=>p,kB:()=>k,mr:()=>b,pl:()=>r,rN:()=>c,sQ:()=>a,ve:()=>_,wY:()=>w});var i=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function r(e){return e instanceof Error?String(e):"object"==typeof e?JSON.stringify(e,((e,t)=>t instanceof Error?String(t):t)):String(e)}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function a(e){const t=e.buffered;return null==t||0===t.length?0:t.end(t.length-1)-e.currentTime}function s(e){var t,n;const{cookie:i}=document;return null==i?"":null!==(n=null===(t=i.split(";").filter((e=>e.trim().length>0)).map((e=>e.split("="))).map((([e,t])=>[e.trim(),t.trim()])).find((([t])=>t===e)))||void 0===t?void 0:t[1])&&void 0!==n?n:""}function l(e,t){var n;const i="web-player-video-cover-img-wrap",r="web-player-video-cover-img";if(null==e)return void(null===(n=t.querySelector(`.${i}`))||void 0===n||n.remove());const o=t.querySelector(`.${r}`);if(null!=o)return void(o.src=e);const a=document.createElement("div");a.classList.add(i),a.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  ";const s=document.createElement("img");s.classList.add(r),s.style.cssText="\n    max-width: 100%;\n    max-height: 100%;\n  ",s.src=e,a.appendChild(s),t.appendChild(a)}function c(e,t){const n=new Set;return(...i)=>{n.has(e)||(n.add(e),t(...i))}}function u(e,t){return"number"!=typeof e?0:Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function h(e,t){let n;return function(...i){if(null==n||Date.now()-n>t)return n=Date.now(),e.apply(this,i)}}function d(e,t){let n;return function(...i){void 0!==n&&window.clearTimeout(n),n=window.setTimeout((()=>{e.apply(this,i)}),t)}}function f(e){return i(this,void 0,void 0,(function*(){return yield new Promise((t=>{setTimeout(t,e)}))}))}function p(e){const t=new Uint8Array(16);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return e=>{if(16!==t.length||16!==e.length)return!1;for(var n=0;n<16;++n)if(t[n]!==e[n])return!1;return!0}}const v="TextDecoder"in window?new TextDecoder:null;function m(e){return null==v?"":v.decode(e)}function y(e,t){const n=setTimeout((()=>{t()}),Math.floor(Math.random()*e));return()=>{clearTimeout(n)}}const g=()=>{let e=!1;try{const t=document.createElement("canvas");t.width=1,t.height=1,e=t.toDataURL("image/webp").startsWith("data:image/webp")}catch(e){}return e},w=()=>{const e=document.createElement("video");return"probably"===e.canPlayType('video/mp4;codecs="ec-3"')&&"probably"===e.canPlayType('video/mp4;codecs="ac-3"')},b=e=>{const t=Math.floor(e/3600),n=`0${Math.floor((e-3600*t)/60)}`.slice(-2),i=`0${Math.floor(e%60)}`.slice(-2);return`${0!==t?t.toFixed(0)+":":""}${n}:${i}`};function _(e){return i(this,void 0,void 0,(function*(){const t=document.createElement("script"),n=document.getElementsByTagName("head")[0],i=new Promise(((e,n)=>{t.onload=()=>{e()},t.onerror=n}));return t.src=e,null!=n&&n.appendChild(t),i}))}function k(e,t){const n={};return Object.keys(t).forEach((i=>{const r=e[i],o=t[i];"number"==typeof o?n[i]=o-(null!=r?r:0):Object.getPrototypeOf(o)===Object.prototype?n[i]=k(r,o):n[i]=o})),n}},163:(e,t,n)=>{"use strict";n.d(t,{Am:()=>p.Z,Cn:()=>m.Z,DA:()=>r.DA,DL:()=>s.D,Ds:()=>r.Ds,Jl:()=>i.Jl,Jw:()=>u.Jw,K4:()=>c.K,KU:()=>i.KU,Nd:()=>d.N,Nl:()=>r.Nl,Nt:()=>p.N,P2:()=>r.P2,QV:()=>r.QV,Te:()=>r.Te,V_:()=>s.V,Vj:()=>r.Vj,Xh:()=>i.Xh,Xt:()=>i.Xt,YI:()=>u.YI,Yw:()=>i.Yw,_v:()=>r._v,a5:()=>i.a5,az:()=>a.a,d_:()=>r.d_,ej:()=>r.ej,gE:()=>i.gE,gR:()=>r.gR,hj:()=>l.h,in:()=>h.a,jP:()=>v.Z,kB:()=>r.kB,kg:()=>h.Z,mr:()=>r.mr,n4:()=>i.n4,pl:()=>r.pl,qC:()=>i.qC,rN:()=>r.rN,sQ:()=>r.sQ,t$:()=>u.t$,ua:()=>o.Z,ve:()=>r.ve,wY:()=>r.wY,y3:()=>f.Z});var i=n(2034),r=n(6656),o=n(4675),a=n(3833),s=n(7558),l=n(8049),c=n(7128),u=n(3313),h=n(7117),d=n(4406),f=n(3615),p=n(9386),v=n(4538),m=n(7812)},3313:(e,t,n)=>{"use strict";n.d(t,{Jw:()=>s,YI:()=>a,t$:()=>o});var i=n(4675);function r(e,t="video/mp4"){var n;const i=document.createElement("video");if("function"!=typeof i.canPlayType||"function"!=typeof(null===(n=window.MediaSource)||void 0===n?void 0:n.isTypeSupported))return!1;const r=`${t}; codecs="${e}"`,o=i.canPlayType(r).toLowerCase();return!("maybe"!==o&&"probably"!==o||!window.MediaSource.isTypeSupported(r))}const o=(()=>{let e=null;return()=>(null==e&&(e=function(){var e;const t=document.createElement("canvas");try{const n=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(null==n)return"";const i=n.getExtension("WEBGL_debug_renderer_info");return null==i?"":n.getParameter(i.UNMASKED_RENDERER_WEBGL)}catch(e){}return""}()),e)})();function a(){const e=o();return i.Z.isIOS()||r("hvc1.1.6.L123")&&(i.Z.isSafari()||""!==e&&!e.toLowerCase().includes("swiftshader")&&(i.Z.isChrome()||i.Z.isEdg()&&i.Z.version()>99))}function s(){return r("av01.0.09M.08")}},3833:(e,t,n)=>{"use strict";function i(e,t={}){const n=document.createElement(e),i=Object.assign({classname:"",attributes:[],text:"",textAsHtml:!1},t);return n.className=i.classname,n[i.textAsHtml?"innerHTML":"textContent"]=i.text,i.attributes.forEach((([e,t])=>{n.setAttribute(e,t)})),n}n.d(t,{a:()=>i})},4406:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var i,r=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},o=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};class a{constructor(){i.set(this,new Map),this.on=(e,t)=>{var n;const o=null!==(n=r(this,i,"f").get(e))&&void 0!==n?n:new Set;return o.add(t),r(this,i,"f").has(e)||r(this,i,"f").set(e,o),()=>{o.delete(t),0===o.size&&r(this,i,"f").delete(e)}},this.emit=(e,...t)=>{const n=r(this,i,"f").get(e);null!=n&&n.forEach((e=>e(...t)))}}static forwardEvent(e,t,n){const i=n.map((n=>{const[i,r]=Array.isArray(n)?n:[n,n];return e.on(i,((...e)=>t.emit(r,...e)))}));return()=>{i.forEach((e=>e()))}}getHandlers(e){var t;return null!==(t=r(this,i,"f").get(e))&&void 0!==t?t:new Set}once(e,t){const n=this.on(e,((...e)=>{n(),t(...e)}));return n}destroy(){o(this,i,new Map,"f")}}i=new WeakMap},7128:(e,t,n)=>{"use strict";n.d(t,{K:()=>d});const i=[],r=new Set;let o=0,a=0,s=[],l=!1,c=0;const u=function(){o++;const e=performance.now(),t=e-a;if(t>=1e3){const n=Math.round(1e3*o/t);if(a=e,o=0,s.push(n),s=s.slice(-10),10===s.length){const e=Math.max(...s);for(const[t,n]of i)e<t&&n.forEach((e=>e()))}const l=s.reduce(((e,t)=>e+t),0)/s.length;r.forEach((e=>e(l)))}l&&(c=requestAnimationFrame(u))};function h(){a=performance.now(),s=[],o=0,cancelAnimationFrame(c),c=requestAnimationFrame(u)}function d(e,t){if("alert"===e.type){let n=i.find((([t])=>e.threshold===t));null==n&&(n=[e.threshold,new Set],i.push(n),i.sort((([e],[t])=>e-t))),n[1].add(t)}else"avg"===e.type&&r.add(t);return l||(l=!0,h()),()=>{var n;"alert"===e.type?null===(n=i.find((([t])=>t===e.threshold)))||void 0===n||n[1].delete(t):"avg"===e.type&&r.delete(t),i.map((([,e])=>e)).every((e=>0===e.size))&&0===r.size&&(l=!1,cancelAnimationFrame(c))}}document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&h()}))},2034:(e,t,n)=>{"use strict";var i,r,o,a,s,l,c,u,h;n.d(t,{Jl:()=>i,KU:()=>u,Xh:()=>s,Xt:()=>l,Yw:()=>h,a5:()=>r,gE:()=>o,n4:()=>c,qC:()=>a}),function(e){e.HTTP_HLS="http_hls",e.HTTP_STREAM="http_stream"}(i||(i={})),function(e){e.FLV="flv",e.TS="ts",e.FMP4="fmp4"}(r||(r={})),function(e){e.AVC="avc",e.HEVC="hevc",e.AV1="av1"}(o||(o={})),function(e){e[e.Origin=1e4]="Origin",e[e.K4=2e4]="K4",e[e.Dolby=3e4]="Dolby"}(a||(a={})),function(e){e[e.HLS_NOT_P2P=-1]="HLS_NOT_P2P",e[e.NONE=0]="NONE",e[e.HLS_BILI=1]="HLS_BILI"}(s||(s={})),function(e){e[e.AreaBlock=60005]="AreaBlock"}(l||(l={})),function(e){e.Initialized="initialized",e.LiveStateChange="liveStateChange",e.StartPlayRound="startPlayRound",e.VideoStateChange="videoStateChange",e.FullscreenChange="fullscreenChange",e.Playing="playing",e.Paused="paused",e.SwitchLine="switchLine",e.SwitchQuality="switchQuality",e.WebFullscreen="webFullscreen",e.FeedBackClick="feedBackClick",e.BlockSettingClick="blockSettingClick",e.Set="set",e.Reload="reload",e.GuidChange="guidChange",e.InitDanmaku="initDanmaku",e.AddDanmaku="addDanmaku",e.SendDanmaku="sendDanmaku",e.ReceiveOnlineCount="receiveOnlineCount",e.ReceiveMessage="receiveMessage",e.UserLogin="userLogin",e.SendGift="sendGift",e.FirstLoadedAPIPlayer="firstLoadedAPIPlayer",e.FirstLoadedAPIPlayurl="firstLoadedAPIPlayurl",e.FirstLoadStart="firstLoadStart",e.FirstLoadedMetaData="firstLoadedMetaData",e.FirstPlaying="firstPlaying",e.EnterTheRoom="enterTheRoom",e.OperableElementsChange="operableElementsChange",e.AutoPlay="autoPlay",e.SwitchQualityNotLogin="switchQualityNotLogin",e.Recommend="recommend",e.DanmakuMaskChange="danmakuMaskChange",e.DanmakuMaskStatusChange="danmakuMaskStatusChange",e.CtrlVisibleChange="ctrlVisibleChange",e.WebPlayerCreated="webPlayerCreated",e.FirstFrame="FirstFrame",e.VideoDestroyed="VideoDestroyed",e.SEIData="SEIData",e.VolumeChange="VolumeChange",e.VideoDirectionChange="VideoDirectionChange",e.UserClickPlayIcon="UserClickPlayIcon",e.MergeStream="MergeStream",e.SEIParseData="SEIParseData",e.OrientationChange="OrientationChange",e.UserRedirect="UserRedirect",e.MutePlay="MutePlay",e.NotAutoPlay="NotAutoPlay",e.WaitStart="WaitStart",e.WaitEnd="WaitEnd",e.VideoError="VideoError",e.MetaDataChange="MetaDataChange",e.PlayFaild="PlayFailed",e.ScreenStateChange="ScreenStateChange",e.UserOperation="UserOperation"}(c||(c={})),function(e){e.fMp4Player="fMp4Player",e.Hls7Player="Hls7Player",e.NativePlayer="NativePlayer"}(u||(u={})),function(e){e.LIVE_SEI_CHANNEL="LIVE_SEI_CHANNEL",e.BILIMASK__SVGBIN="BILIMASK__SVGBIN",e.B_LIVE_VIBRATION="B_LIVE_VIBRATION",e.LIVE_SEI_PC_LINK="LIVE_SEI_PC_LINK",e.BVC_KUAWAN____TS="BVC_KUAWAN____TS",e.BILILIVESUBTITLE="BILILIVESUBTITLE",e.BVCLIVESTREAMHOP="BVCLIVESTREAMHOP",e.BVC__CANVAS_DATA="BVC__CANVAS_DATA"}(h||(h={}))},7558:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,V:()=>r});const i='\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgba(0, 0, 0, 0.5); border-radius: 10px; display: block; shape-rendering: auto;" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n<g transform="rotate(0 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.8888888888888888s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(40 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.7777777777777778s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(80 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(120 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5555555555555556s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(160 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.4444444444444444s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(200 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(240 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.2222222222222222s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(280 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.1111111111111111s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(320 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate>\n  </rect>\n</g>\n</svg>\n';function r(e){e.querySelectorAll(".web-player-loading").forEach((e=>e.remove()));const t=document.createElement("div");t.classList.add("web-player-loading"),t.innerHTML=i,t.style.cssText="\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 10;\n    display: none;\n    pointer-events: none;\n  ",e.appendChild(t);const n=setTimeout((()=>{t.style.display="flex"}),500);return()=>{clearTimeout(n),t.remove()}}function o(){document.querySelectorAll(".web-player-loading").forEach((e=>e.remove()))}},7117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,a:()=>i});var i,r=n(163);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(i||(i={}));const o={printToConsole:!1,debug:function(e){l(e,i.Debug)},info:function(e){l(e,i.Info)},warn:function(e){l(e,i.Warn)},error:function(e){r.y3.Log2Console&&console.error(e);l(e,i.Error)},dump:function(){return a.map((e=>c(e))).join("\n")},history:function(){return a.slice(0)},watch:function(e){return s.add(e),()=>{s.delete(e)}},stringify:c,clear:function(){a=[]}};let a=[];const s=new Set;function l(e,t){const n={content:"object"==typeof e?JSON.stringify(e,((e,t)=>t instanceof Error?t.stack:t)):e,level:t,ts:Date.now()};if(a.push(n),o.printToConsole){const n=i[t].toLowerCase();console[n](e)}setTimeout((()=>{s.forEach((e=>e(Object.assign({},n))))}),1)}function c(e,t){const n=Object.assign({tag:!0,time:!0},t),r=new Date(e.ts),o=`${i[e.level]} `,a=`${r.getHours()}:${r.getMinutes()}:${r.getSeconds()}.${r.getMilliseconds()}`;return`${n.tag?o:""}${n.time?a:""}> ${e.content}`}const u=o},7812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(4406);let r=new i.N;null!=navigator.mediaSession&&(navigator.mediaSession.setActionHandler("pause",(()=>{r.emit("pause")})),navigator.mediaSession.setActionHandler("play",(()=>{r.emit("play")})));const o={on:function(e,t){return r.on(e,t)},destroy:function(){r.destroy(),r=new i.N}}},3615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});const{searchParams:i}=new URL(location.href);var r;!function(e){e.P2PType="wpdP2PType",e.SupportHEVC="wpdSupportHEVC",e.Log2Console="wpdLog2Console",e.SocketMsg2Console="wpdSocketMsg2Console",e.DMRenderType="wpdDMRenderType"}(r||(r={}));const o=i.get(r.P2PType),a=i.get(r.Log2Console),s=i.get(r.SupportHEVC),l=i.get(r.SocketMsg2Console),c={P2PType:null==o?null:Number(o),Log2Console:null!=a&&"0"!==a,SupportHEVC:null!=s&&"0"!==s,SocketMsg2Console:null!=l&&"0"!==l,DMRenderType:i.get(r.DMRenderType)}},9386:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,Z:()=>o});let i=null;const r=e=>{i=e};function o(e,t){document.querySelectorAll(".web-player-toast").forEach((e=>e.remove()));const n=document.createElement("div");n.classList.add("web-player-toast"),n.textContent=e,n.style.cssText=null!=i?i:"\n      font-size: 14px;\n      color: #fff;\n      background-color: rgba(0, 0, 0, 0.6);\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      z-index: 11;\n      padding: 6px 12px;\n      border-radius: 6px;\n      transition: opacity 1s;\n    ",t.appendChild(n),setTimeout((()=>{n.style.opacity="0"}),1500),setTimeout((()=>{n.remove()}),2500)}},4675:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});const i=navigator.userAgent,r={chrome:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)/,edg:/Edg\/([0-9._]+)/,safari:/Version\/([0-9._]+).*Safari/},o=i.includes("Windows NT"),a=i.includes("Mac OS X"),s=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod","iOS"].includes(navigator.platform)||i.includes("Mac")&&"ontouchend"in document,l=r.safari.test(i),c=r.chrome.test(i),u=r.edg.test(i),h=function(){function e(e){var t;return Number(null===(t=e.exec(i))||void 0===t?void 0:t[1].split(".")[0])}return c?e(r.chrome):u?e(r.edg):l?e(r.safari):0}(),d={isWin:()=>o,isMac:()=>a,isIOS:()=>s,isSafari:()=>l,isChrome:()=>c,isEdg:()=>u,version:()=>h}},4538:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(7117);const r="web-player-ui-config";let o=0;function a(){const e=localStorage.getItem(`${r}:${o}`),t={volume:{value:90,disabled:!1},danmaku:{display:!0,opacity:100,fontScale:100,density:100,area:4,showMaskOption:!1,enableMask:!0},subtitle:{pos:null,visible:!1,draggable:!1},videoEnhance:null,selectedCodec:{val:null,ts:Date.now()}};if(null===e)return t;let n;try{n=JSON.parse(e)}catch(e){return i.Z.error(e),t}return n=Object.assign({},t,n),n}const s={getDanmaku:function(){return a().danmaku},getVolume:function(){return a().volume},init:function(e){o=e},setDanmaku:function(e){const t=a();localStorage.setItem(`${r}:${o}`,JSON.stringify(Object.assign(Object.assign({},t),{danmaku:e})))},setVolume:function(e){const t=a();localStorage.setItem(`${r}:${o}`,JSON.stringify(Object.assign(Object.assign({},t),{volume:e})))},get:function(e){return a()[e]},set:function(e,t){const n=a(),i="object"==typeof t?Object.assign({},n[e],t):t;localStorage.setItem(`${r}:${o}`,JSON.stringify(Object.assign(Object.assign({},n),{[e]:i})))}}},9031:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,o:()=>s});var i=n(163),r=n(5674),o=n.n(r),a=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const s=(e,t)=>a(void 0,void 0,void 0,(function*(){var i;const{streamName:r,timeshift:o}=null!==(i=u(e))&&void 0!==i?i:{},{SistersPlayerContext:a}=yield n.e(177).then(n.t.bind(n,6452,23));return a.getTrackerParamsString({stream:r,roomid:t,timeshift:o})}));let l={};function c({corePlayer:e,videoEl:t,src:r,roomId:s,trackerServer:c}){var h;return a(this,void 0,void 0,(function*(){if(!(e instanceof o().Hls7Player))return i.kg.error("bilibili p2p must use be Hls7Player instance"),null;const{SistersPlayerContext:a,WastedDataType:d,FetchErrorType:f}=yield n.e(177).then(n.t.bind(n,6452,23)),{streamName:p,timeshift:v}=null!==(h=u(r))&&void 0!==h?h:{};if(null==p)return i.kg.error("can't detect stream name in url"),null;if(!a.checkP2PSupport())return i.kg.error("unsupported bilibili p2p"),null;l={};const m=new a(((e,t)=>{t.includes("pc.addEventListener is not a function")||i.kg.info(t)}),{playlistUrl:r,trackerParams:{stream:p,roomid:s,timeshift:v},sdkParams:{trackerServers:c}});if(void 0!==m.getStatisticsData)throw new Error("getStatisticsData is exist, cannot be extended");return m.getStatisticsData=function(e,{WastedDataType:t,FetchErrorType:n},{timeshift:r,streamName:o}){return()=>{var a,s,c,u,h,d,f,p,v,m;const y=e.getP2PDataCollectionStatus();if(null==y)return null;const{fragNum:g=0,queryNum:w=0}=null!==(a=y.getQueryServerInfo())&&void 0!==a?a:{},b=Object.assign(Object.assign({cdnDownloadValidSize:null!==(s=y.getServerDownload())&&void 0!==s?s:0,cdnDownloadInvalidSize:null!==(c=y.getWastedDataSize(t.CDN_REPEAT))&&void 0!==c?c:0,fetchErrorNum:null!==(u=y.getFetchErrorNum(n.ERROR_TO_RELOAD))&&void 0!==u?u:0,p2pDownloadValidSize:null!==(h=y.getP2PDownload())&&void 0!==h?h:0,p2pDownloadInvalidSize:null!==(d=y.getWastedDataSize(t.P2P_LATE))&&void 0!==d?d:0,p2pErrorSize:null!==(f=y.getWastedDataSize(t.ERROR_DATA))&&void 0!==f?f:0,p2pUploadSize:null!==(p=y.getP2PSend())&&void 0!==p?p:0,fragNum:g,queryNum:w,timeshift:r,streamName:o},null!==(v=y.getExtendReportInfo())&&void 0!==v?v:{}),null!==(m=y.getTrackerInfo())&&void 0!==m?m:{});if(0===Object.keys(l).length)return l=b,b;{const e=(0,i.kB)(l,b);return l=b,e}}}(m,{WastedDataType:d,FetchErrorType:f},{timeshift:v,streamName:p}),e.setP2PContext({P2PBufferLength:3,P2PFetchAsStream(e,n=!1){m.p2pFetchAsBuffer(this._onError,this._onResult,(()=>1e3*(0,i.sQ)(t)),e,n)},onPlaylistUpdate(e,t){m.updatePlaylist(e,t)}}),m}))}function u(e){const t=/\/live-bvc\/\d{3,9}\/(live_.+?)[/.]/.exec(e);if(null==t)return{timeshift:0,streamName:null};const n=Number(new URL(e).searchParams.get("tmshift"));return{streamName:t[1],timeshift:n}}},977:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9031);const r={bindBili:i.K,getTrackerParamsString:i.o}},9919:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S,E,M,T,P,L=n(163),I=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},A=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const D=1800,O="codec-decode-err";function B(){var e;let t={[L.gE.AV1]:!0,[L.gE.HEVC]:!0,[L.gE.AVC]:!0};try{const n=JSON.parse(null!==(e=sessionStorage.getItem(O))&&void 0!==e?e:"{}");t=Object.assign({},t,n)}catch(e){L.kg.error(e)}return t}class R{constructor(e){this.source=e,i.set(this,{report_interval_sec:30}),r.set(this,L.Xh.NONE),o.set(this,void 0),a.set(this,"0"),s.set(this,[]),l.set(this,L.gE.AVC),c.set(this,A(this,l,"f")),u.set(this,(()=>{const e=R.getCodecDecodecState();return{[L.gE.AVC]:!0,[L.gE.HEVC]:e[L.gE.HEVC]&&(0,L.YI)(),[L.gE.AV1]:e[L.gE.AV1]&&(0,L.Jw)()}})()),h.set(this,""),d.set(this,[]),f.set(this,void 0),p.set(this,null),v.set(this,0),m.set(this,0),y.set(this,performance.now()),g.set(this,D),w.set(this,""),b.set(this,new L.Nd),this.on=A(this,b,"f").on,this.once=A(this,b,"f").once,_.set(this,A(this,b,"f").emit),this.codecDowngrade=()=>A(this,c,"f")!==L.gE.AVC&&(R.setCodecDecodecState({[A(this,c,"f")]:!1}),A(this,u,"f")[A(this,c,"f")]=!1,this.useStream({codec:A(this,c,"f")===L.gE.AV1&&A(this,u,"f")[L.gE.HEVC]?L.gE.HEVC:L.gE.AVC}),!0),k.set(this,(e=>{if(0!==A(this,m,"f"))return A(this,r,"f");let t=null!=e?e:this.source.playurl.p2p_data.p2p_type;return null!=L.y3.P2PType&&(t=L.y3.P2PType),null==window.MediaSource&&(t=L.Xh.NONE),t!==L.Xh.HLS_BILI&&t!==L.Xh.HLS_NOT_P2P||this.hasHLSPlayerSupportStream()||(t=L.Xh.NONE),t in L.Xh||(t=L.Xh.NONE),t})),C.set(this,(()=>{var e;const t=null!==(e=L.jP.get("selectedCodec").val)&&void 0!==e?e:L.gE.AV1;return A(this,u,"f")[t]?t:A(this,u,"f")[L.gE.AV1]?L.gE.AV1:A(this,u,"f")[L.gE.HEVC]?L.gE.HEVC:L.gE.AVC})),x.set(this,(e=>navigator.userAgent.includes("PlayStation")?[L.a5.TS]:e===L.Jl.HTTP_STREAM?[L.a5.FLV]:null!=window.MediaSource||L.ua.isIOS()?[L.a5.FMP4,L.a5.TS]:[L.a5.TS])),S.set(this,(e=>{var t,n;const i=A(this,x,"f").call(this,e),r=t=>{var n,r;for(const o of i){const i=A(this,M,"f").call(this,{protocol:e,format:o,codec:t});if((null!==(r=null===(n=null==i?void 0:i.url_info)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>0)return i}return null},o=r(L.gE.AVC),a=A(this,u,"f")[L.gE.HEVC]?r(L.gE.HEVC):null,s=A(this,u,"f")[L.gE.AV1]?r(L.gE.AV1):null,{hevcAcceptQn:l,avcAcceptQn:c}=A(this,P,"f").call(this,null!==(t=null==o?void 0:o.accept_qn)&&void 0!==t?t:[],null!==(n=null==a?void 0:a.accept_qn)&&void 0!==n?n:[]);return null!=a&&(a.accept_qn=l),null!=o&&(o.accept_qn=c),{[L.gE.AVC]:o,[L.gE.HEVC]:a,[L.gE.AV1]:s}})),E.set(this,((e,t)=>{if(e===L.Jl.HTTP_HLS){if(![L.Xh.HLS_BILI,L.Xh.HLS_NOT_P2P,L.Xh.NONE].includes(A(this,r,"f")))return!0}else if(e===L.Jl.HTTP_STREAM&&[L.Xh.HLS_BILI,L.Xh.HLS_NOT_P2P].includes(A(this,r,"f")))return!0;return!1})),M.set(this,(({protocol:e,format:t,codec:n})=>{var i,r,o;const a=null===(o=null===(r=null===(i=this.source.playurl.stream.find((({protocol_name:t})=>t===e)))||void 0===i?void 0:i.format)||void 0===r?void 0:r.find((({format_name:e})=>e===t)))||void 0===o?void 0:o.codec.find((({codec_name:e})=>n===e));return null!=a?Object.assign(Object.assign({},a),{protocol:e,format:t}):null})),T.set(this,((e,t)=>{const n=e=>{var t,n;const i=A(this,o,"f").find((({qn:t})=>t===e));let r="";const a=null===(t=null==i?void 0:i.attr_desc)||void 0===t?void 0:t.find((e=>"panorama"===e.attr_name));return null!=a&&(r=a.desc),(null!==(n=null==i?void 0:i.desc)&&void 0!==n?n:"")+r};return Array.from(new Set(Object.values(e).map((e=>{var t;return null!==(t=null==e?void 0:e.accept_qn)&&void 0!==t?t:[]})).reduce(((e,t)=>e.concat(t)),[]))).sort(((e,t)=>t-e)).map((i=>{var r,o;if(!0===(null===(r=e[t])||void 0===r?void 0:r.accept_qn.includes(i)))return{code:i,value:String(i),label:n(i),codec:t};for(const t of[L.gE.AV1,L.gE.HEVC,L.gE.AVC])if(!0===(null===(o=e[t])||void 0===o?void 0:o.accept_qn.includes(i)))return{code:i,value:String(i),label:n(i),codec:t};return null})).filter((e=>Boolean(null==e?void 0:e.label)))})),P.set(this,((e,t)=>{const{dolby_qn:n}=this.source.playurl;return null!=n&&(e=e.filter((e=>e!==n[0]))),null!=n&&(0,L.wY)()?{hevcAcceptQn:t,avcAcceptQn:e=e.concat(n)}:{hevcAcceptQn:t,avcAcceptQn:e}}));try{I(this,i,JSON.parse(e.conf_json),"f")}catch(e){L.kg.error(e)}I(this,o,e.playurl.g_qn_desc,"f"),I(this,r,A(this,k,"f").call(this),"f"),I(this,l,A(this,C,"f").call(this),"f"),I(this,c,A(this,l,"f"),"f"),null!=window.MediaSource?I(this,f,[L.Xh.HLS_BILI,L.Xh.HLS_NOT_P2P].includes(A(this,r,"f"))?L.Jl.HTTP_HLS:L.Jl.HTTP_STREAM,"f"):I(this,f,L.Jl.HTTP_HLS,"f"),this.useStream()}getCurPlayUrl(){if(performance.now()>A(this,y,"f")+1e3*A(this,g,"f"))throw new Error("source data is expired");return A(this,h,"f")}getCurStreamInfo(){var e,t;const n=new URL(A(this,h,"f")),i=null!==(t=null===(e=/\/live-bvc\/\d+\/(live_.+?)[/.]/.exec(A(this,h,"f")))||void 0===e?void 0:e[1])&&void 0!==t?t:"";return{host:n.host,query:n.search,name:i,protocol:A(this,f,"f"),format:A(this,p,"f"),codec:A(this,c,"f"),p2pType:A(this,r,"f"),quality:A(this,a,"f"),timeshift:A(this,m,"f"),curAttrName:A(this,w,"f"),qualityDesc:A(this,o,"f")}}getCurQuality(){return A(this,a,"f")}getQualityDesc(e){var t;const n=null!=e?e:A(this,a,"f");return null!==(t=A(this,s,"f").find((e=>e.value===n)))&&void 0!==t?t:null}getCurLine(){return A(this,v,"f")}getCurLineDesc(){return this.getLineCandidates().find((e=>e.value===A(this,v,"f")))}getTimeShift(){return A(this,m,"f")}setTimeShift(e){I(this,m,e,"f")}setCurLine(e){if(0===A(this,d,"f").length)throw new Error("play url candidates is empty");I(this,v,e%this.getLineCandidates().length,"f");const t=A(this,d,"f")[A(this,v,"f")%A(this,d,"f").length];I(this,h,t.url,"f"),I(this,g,t.ttl>1?t.ttl:D,"f")}getPlayUrlCandates(){return A(this,d,"f")}getCurCodecType(){return A(this,c,"f")}getCurP2PType(){return A(this,r,"f")}getDynamicConfig(){return A(this,i,"f")}getQnCandidates(){return A(this,s,"f")}getAVCQnCandidates(){return this.getQnCandidates().filter((({codec:e})=>e===L.gE.AVC))}getLineCandidates(){return[{value:0,label:"主线"},{value:1,label:"备线1"},{value:2,label:"备线2"},{value:3,label:"备线3"}]}setCurP2PType(e){I(this,r,e,"f")}hasHLSPlayerSupportStream(){return Boolean(A(this,M,"f").call(this,{protocol:L.Jl.HTTP_HLS,format:L.a5.FMP4,codec:L.gE.AVC}))}useStream(e={}){var t,n;const i=null!==(t=e.protocol)&&void 0!==t?t:A(this,f,"f"),o=null!==(n=e.codec)&&void 0!==n?n:A(this,c,"f"),l=A(this,S,"f").call(this,i),u=function(e,t,n){const i=e=>null==n||n===e.current_qn;let r=e[t];if(null!=r&&i(r))return r;for(const t of[L.gE.AV1,L.gE.HEVC,L.gE.AVC])if(r=e[t],null!=r&&i(r))return r;return null}(l,o,e.quality);if(null==u)throw new Error(`can't find stream by protocol: ${i}, codec: ${null!=o?o:""}`);const y=u.codec_name,b=u.url_info.map((({host:e,extra:t,stream_ttl:n})=>{var i;return{url:`${e}${u.base_url}${t}`,ttl:n,attr_name:null!==(i=u.attr_name)&&void 0!==i?i:""}}));if(0===b.length)throw new Error("play url codec.hosts is empty");const _=A(this,v,"f")%b.length;I(this,w,b[_].attr_name,"f"),I(this,h,b[_].url,"f"),I(this,g,b[_].ttl>1?b[_].ttl:D,"f"),0!==A(this,m,"f")&&I(this,h,`${A(this,h,"f")}&tmshift=${A(this,m,"f")}`,"f"),I(this,p,u.format,"f"),I(this,c,y,"f"),I(this,f,i,"f"),I(this,r,A(this,k,"f").call(this,e.expectP2PType),"f"),I(this,s,A(this,T,"f").call(this,l,o),"f"),I(this,a,String(u.current_qn),"f"),I(this,d,b,"f"),A(this,E,"f").call(this,i,A(this,r,"f"))&&I(this,r,L.Xh.NONE,"f")}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap,P=new WeakMap,R.setCodecDecodecState=function(e){sessionStorage.setItem(O,JSON.stringify(Object.assign(B(),e)))},R.getCodecDecodecState=B},9626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f,t:()=>o});var i,r,o,a=n(562),s=n.n(a),l=n(163),c=n(7377),u=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},h=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},d=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};!function(e){e.Danmaku="DANMU_MSG",e.SysMsg="SYS_MSG",e.SysGift="SYS_GIFT",e.GuardMsg="GUARD_MSG",e.SendGift="SEND_GIFT",e.Live="LIVE",e.Preparing="PREPARING",e.End="END",e.Close="CLOSE",e.Block="BLOCK",e.Round="ROUND",e.Welcome="WELCOME",e.Refresh="REFRESH",e.ActivityRedPacket="ACTIVITY_RED_PACKET",e.AreaBlock="ROOM_LIMIT",e.PkPre="PK_PRE",e.PkEnd="PK_END",e.PkSettle="PK_SETTLE",e.PkMicEnd="PK_MIC_END",e.HotRoomNotify="HOT_ROOM_NOTIFY",e.PLAY_TAG="PLAY_TAG",e.PLAY_PROGRESS_BAR="PLAY_PROGRESS_BAR",e.LOG_IN_NOTICE="LOG_IN_NOTICE",e.PlayerLogRecycle="LIVE_PLAYER_LOG_RECYCLE"}(o||(o={}));class f{constructor(e){this.opts=e,i.set(this,null),r.set(this,new l.Nd),this.on=h(this,r,"f").on,this.emit=h(this,r,"f").emit,this.init().catch((e=>{l.kg.error(e)}))}init(){var e;return u(this,void 0,void 0,(function*(){let t;try{t=yield function(e){return u(this,void 0,void 0,(function*(){return yield(0,l.hj)(`/xlive/web-room/v1/index/getDanmuInfo?id=${e}&type=0`)}))}(this.opts.roomId)}catch(e){l.kg.error(`get danmainfo failed ${(0,l.pl)(e)}`),t={host_list:[],token:"",max_delay:5e3}}l.kg.info(`Socket init, serverInfo: ${JSON.stringify(t)}`),d(this,i,new(s())({rid:this.opts.roomId,uid:null!==(e=this.opts.userId)&&void 0!==e?e:0,url:"wss://broadcastlv.chat.bilibili.com:443/sub",urlList:t.host_list.map((({host:e,wss_port:t})=>`wss://${e}:${t}/sub`)),retry:!0,retryMaxCount:t.host_list.length,protover:3,customAuthParam:[{type:"string",key:"platform",value:"web"},{type:"number",key:"type",value:2},{type:"string",key:"key",value:t.token}],onOpen:()=>{l.kg.info("WebSocket On Open")},onClose:()=>{l.kg.info("WebSocket On Close.")},onError:e=>{var t,n,r,o;l.kg.warn(`WebSocket On Error. url: ${null!==(n=null===(t=h(this,i,"f"))||void 0===t?void 0:t.getState().url)&&void 0!==n?n:""}`),p({type:1,evt:e.code,url:null!==(o=null===(r=h(this,i,"f"))||void 0===r?void 0:r.getState().url)&&void 0!==o?o:""})},onInitialized:()=>{l.kg.info("WebSocket Initialized.")},onReceivedMessage:(e,t)=>{l.y3.SocketMsg2Console&&console.debug(`socket onReceivedMessage: ${t}`,e),t>1&&function(e){(0,l.hj)("/xlive/open-interface/v1/dm/message_ack",{method:"POST",data:{terminal:0,sequence:e}}).catch((e=>{l.kg.error(e)}))}(t),[].concat(e).forEach((e=>{this.emit("message",e)}))},onHeartBeatReply:e=>{this.emit("heartbeat",e)},onReceiveAuthRes:e=>{var t;l.kg.warn("token expired, reconnect."),null===(t=h(this,i,"f"))||void 0===t||t.destroy(),this.init().catch((e=>{l.kg.error(e)}))},onListConnectError:()=>{var e,t;l.kg.info("WebSocket On List Connect Error."),p({type:2,url:null!==(t=null===(e=h(this,i,"f"))||void 0===e?void 0:e.getState().url)&&void 0!==t?t:""})},fallback:()=>{l.kg.info("WebSocket Supporting Error.")},onLogger:e=>{l.kg.error(e)}}),"f")}))}destroy(){var e;null===(e=h(this,i,"f"))||void 0===e||e.destroy(),h(this,r,"f").destroy()}}function p(e){c.default.error(c.default.ErrorCode.SocketConnect,JSON.stringify(e))}i=new WeakMap,r=new WeakMap},7377:(e,t,n)=>{"use strict";n.d(t,{$F:()=>o,default:()=>w,jK:()=>a});var i,r,o,a,s,l,c=n(2630);!function(e){e[e.Perf=1]="Perf",e[e.Event=2]="Event",e[e.Error=3]="Error",e[e.Operation=4]="Operation",e[e.Custom=5]="Custom"}(i||(i={})),function(e){e[e.PlayerResLoad=1]="PlayerResLoad",e[e.FirstPacket=2]="FirstPacket",e[e.VideoMeta=3]="VideoMeta",e[e.FirstFrame=4]="FirstFrame",e[e.Api=5]="Api",e[e.DevicePerf=6]="DevicePerf",e[e.FirstScreen=7]="FirstScreen"}(r||(r={})),function(e){e[e.RoomPlayerInit=1]="RoomPlayerInit",e[e.CreateVideo=2]="CreateVideo",e[e.CreateRoundPlayer=3]="CreateRoundPlayer",e[e.HomePlayerInit=100]="HomePlayerInit",e[e.ActivityPlayerInit=200]="ActivityPlayerInit",e[e.MobilePlayerInit=300]="MobilePlayerInit"}(o||(o={})),function(e){e[e.UnsupportedPlayer=90001]="UnsupportedPlayer",e[e.NativeVideoError=90002]="NativeVideoError",e[e.NetworkException=90003]="NetworkException",e[e.ApiRequest=91001]="ApiRequest",e[e.ApiResponse=91002]="ApiResponse",e[e.ApiBiz=91003]="ApiBiz",e[e.RetryMaxTime=92002]="RetryMaxTime",e[e.InitPlayFaild=92003]="InitPlayFaild",e[e.SocketConnect=93001]="SocketConnect",e[e.PlayUrlNull=94001]="PlayUrlNull",e[e.RoomP0ApiFetchError=21001]="RoomP0ApiFetchError",e[e.RoomEnterLiveError=21003]="RoomEnterLiveError",e[e.RoomRoundUnknow=22e3]="RoomRoundUnknow",e[e.RoomUnSettingRound=22001]="RoomUnSettingRound",e[e.RoomCantRound=22002]="RoomCantRound",e[e.RoomEnterRoundError=22003]="RoomEnterRoundError",e[e.RoomRoundNotExistDash=22004]="RoomRoundNotExistDash",e[e.ErrorMseOpen=11003]="ErrorMseOpen"}(a||(a={})),function(e){e[e.Play=1]="Play",e[e.Pause=2]="Pause",e[e.Refresh=3]="Refresh",e[e.Mute=4]="Mute",e[e.Volume=5]="Volume",e[e.SwitchQuality=6]="SwitchQuality",e[e.SwitchLine=7]="SwitchLine",e[e.Feedback=8]="Feedback",e[e.TimeShift=9]="TimeShift",e[e.Danmaku=10]="Danmaku",e[e.FullScreen=11]="FullScreen",e[e.WebFullScreen=12]="WebFullScreen",e[e.PictureInPicture=13]="PictureInPicture",e[e.WebFullScreenWay=14]="WebFullScreenWay",e[e.Panorama=15]="Panorama"}(s||(s={})),function(e){e[e.Waiting=1]="Waiting",e[e.P2PData=2]="P2PData",e[e.UserFeedBack=3]="UserFeedBack",e[e.SEILatency=5]="SEILatency",e[e.StreamErrWhenEnded=100]="StreamErrWhenEnded",e[e.SwitchLine=104]="SwitchLine",e[e.HangUp=105]="HangUp",e[e.NetSpeed=106]="NetSpeed",e[e.AutoDiscardFrame=107]="AutoDiscardFrame",e[e.MutedPlay=108]="MutedPlay",e[e.NotAutoPlay=109]="NotAutoPlay",e[e.VideoPlaybackQuality=110]="VideoPlaybackQuality",e[e.CodecSupported=111]="CodecSupported",e[e.VideoEnhance=112]="VideoEnhance",e[e.SVGDanmaku=113]="SVGDanmaku",e[e.DMVisualVibrate=114]="DMVisualVibrate"}(l||(l={}));const u=e=>{if(null==e.data)return[];const{ctime:t,category:n,val:i,params:r,staticInfo:o,code:a}=e.data;return[o,t,n,a,i,r]},h=new c.fX("009658",{formatter:u}),d=(()=>{let e=-1;return()=>(e+=1,`v${e}`)})();let f;const p={};let v=d();function m(e,t){var n;const i=Date.now();let{category:r,val:o,params:a,code:s}=e;const{sample:l,randDelay:c,dynamicFieldsVer:u,extFields:d}=t,m=null!==(n=p[null!=u?u:v])&&void 0!==n?n:{};"all"===d?a=Object.assign(Object.assign({},a),m):Array.isArray(d)&&(a=d.reduce(((e,t)=>t in m?Object.assign(Object.assign({},e),{[t]:m[t]}):e),Object.assign({},a)));const y=window.webPlayerAbTest;null!=y&&"object"==typeof y&&(a=null!=a?a:{},a.abInfo=y);const g="string"==typeof o?o:null==o?"":JSON.stringify(o),w=0===Object.keys(null!=a?a:{}).length?"":JSON.stringify(a);h.event("playerEvt",{code:s,val:g,ctime:i,category:r,params:w,staticInfo:f},{sample:l,randDelay:c})}function y(e,t,n={}){var r,o,a;m({val:t,category:i.Error,code:e,params:Object.assign({},null!=n.apiUrl?{apiUrl:n.apiUrl}:{})},{sample:100*(null!==(r=null==n?void 0:n.sampleRate)&&void 0!==r?r:1),randDelay:null!==(o=null==n?void 0:n.randDelay)&&void 0!==o?o:5e3,extFields:null!==(a=n.extFields)&&void 0!==a?a:"all"})}function g(e,t,n){var r;m({val:t,category:i.Custom,code:e},{sample:100*(null!==(r=null==n?void 0:n.sampleRate)&&void 0!==r?r:1),randDelay:null==n?void 0:n.randDelay,extFields:null==n?void 0:n.extFields})}const w={perf:function(e,t,{extFields:n,params:r,sampleRate:o=1,randDelay:a}={}){m({val:Math.round(t),category:i.Perf,code:e,params:null!=r?r:{}},{sample:100*o,randDelay:a,extFields:null!=n?n:["sHost","sProtocol","p2pType","sQuery","x-service-module"]})},event:function(e,t,n){var r,o;m({val:t,category:i.Event,code:e},{sample:100*(null!==(r=null==n?void 0:n.sampleRate)&&void 0!==r?r:1),randDelay:null==n?void 0:n.randDelay,extFields:null!==(o=null==n?void 0:n.extFields)&&void 0!==o?o:["sProtocol","sHost","p2pType","sCodec","sFormat"]})},error:y,custom:g,operation:function(e,t,n){var r;m({val:t,code:e,category:i.Operation},{sample:100*(null!==(r=null==n?void 0:n.sampleRate)&&void 0!==r?r:.1),randDelay:null==n?void 0:n.randDelay,extFields:null==n?void 0:n.extFields})},PerfCode:r,EventCode:o,ErrorCode:a,OperationCode:s,CustomCode:l,fixedDynamicFieldsVerIns:function(){const e=v;return{custom(t,n,i){g(t,n,Object.assign({},i,{dynamicFieldsVer:e}))},error(t,n,i){y(t,n,Object.assign({},i,{dynamicFieldsVer:e}))},updateDynamicInfo(t){p[e]=Object.assign(Object.assign({},p[e]),t)}}},initStaticInfo:function(e){f=`${e.uvid}|${e.uid}|${e.version}|${e.roomId}`},updateDynamicInfo:function(e,t){if(!0===t)return v=d(),void(p[v]=Object.assign({},e));null==p[v]&&(p[v]={}),p[v]=Object.assign({},p[v],e)},formatter:u}},9946:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,U:()=>o});var i=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function r(e){let t;switch(e){case 8:t="7.1Ch";break;case 6:t="5.1Ch";break;case 2:t="Stereo";break;case 1:t="Mono";break;default:t=`${e}Ch`}return t}function o(e){var t;return i(this,void 0,void 0,(function*(){const n=yield fetch(e);if(n.ok&&n.status>=200&&n.status<=299){const i=(yield n.text()).split("\n");if(i.findIndex((e=>"#EXTM3U"===e))>-1&&i.findIndex((e=>"#EXT-X-VERSION:3"===e))>-1){const n=i.findIndex((e=>e.startsWith("#EXT-X-STREAM-INF")));if(-1!==n)return null!==(t=i[n+1])&&void 0!==t?t:e}}return e}))}},2956:(e,t,n)=>{"use strict";n.d(t,{Qp:()=>D,Tw:()=>w,nk:()=>I,tw:()=>g});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_=n(5674),k=n(163),C=n(9946),x=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},S=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},E=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};!function(e){e.VideoInfo="VideoInfo",e.MetaData="MetaData",e.CorePlayerCreated="CorePlayerCreated",e.Error="Error",e.LoadStart="LoadStart",e.Ended="Ended",e.NetworkResponse="NetworkResponse",e.FirstPacket="FirstPacket",e.FirstFrame="FirstFrame",e.SEIData="SEIData",e.Destroyed="Destroyed",e.WaitStart="WaitStart",e.WaitEnd="WaitEnd",e.WaitReport="WaitReport",e.Play="Play",e.Pause="Pause",e.MutePlay="MutePlay",e.NotAutoPlay="NotAutoPlay",e.FirstFrameTimeout="FirstFrameTimeout"}(g||(g={})),function(e){e[e.Timeout=11e3]="Timeout",e[e.ResponseError=11001]="ResponseError",e[e.DownloadInterrupt=11002]="DownloadInterrupt"}(w||(w={})),function(e){e.Initialize="Initialize",e.Loading="Loading",e.Playing="Playing",e.Pause="Pause",e.Destroyed="Destroyed"}(b||(b={}));let M=0;const T={droppedFrames:0,decodedFrames:0,videoBufferLength:0,videoNetworkActivity:0,audioNetworkActivity:0,audioBufferLength:0},P={corePlayerType:k.KU.NativePlayer,width:0,height:0,mimeType:"",volume:0,fps:0,encoder:"",videoDataRate:0,audioDataRate:0,audioSampleRate:0,audioChannel:"",videoSrc:""};var L;!function(e){e[e.FirstFrameTimeout=92001]="FirstFrameTimeout"}(L||(L={}));class I{get status(){return S(this,u,"f")}set status(e){S(this,s,"f").info(`Video status changed to ${e}`),E(this,u,e,"f")}constructor(e,t={}){i.set(this,void 0),r.set(this,void 0),o.set(this,null),a.set(this,void 0),s.set(this,void 0),l.set(this,{mediaInfo:Object.assign({},P),realtimeInfo:Object.assign({},T)}),c.set(this,null),u.set(this,b.Initialize),h.set(this,[]),d.set(this,void 0),f.set(this,void 0),p.set(this,new k.Nd),this.on=S(this,p,"f").on,this.once=S(this,p,"f").once,v.set(this,((e,...t)=>{[g.VideoInfo,g.SEIData].includes(e)||S(this,s,"f").debug(`video emit: ${e}, handlers count: ${S(this,p,"f").getHandlers(e).size}`),S(this,p,"f").emit(e,...t)})),m.set(this,(()=>{if(S(this,r,"f").includes(".mp4"))return()=>{};const e=setTimeout((()=>{S(this,v,"f").call(this,g.Error,{type:g.FirstFrameTimeout,code:L.FirstFrameTimeout,errInfo:{url:S(this,r,"f")}})}),1e4),t=()=>{clearTimeout(e)};return this.once(g.FirstFrame,t),t})),y.set(this,(e=>{var t,n;S(this,s,"f").info("metadata fired"),S(this,l,"f").mediaInfo=Object.assign({},S(this,l,"f").mediaInfo,{videoSrc:S(this,r,"f"),width:e.width,height:e.height,mimeType:null===(t=S(this,o,"f"))||void 0===t?void 0:t.mimeType,fps:(0,k.QV)(e.fps,0),encoder:null!==(n=e.encoder)&&void 0!==n?n:e.creator,videoDataRate:e.videodatarate,audioDataRate:e.audiodatarate,audioSampleRate:e.audiosamplerate,audioChannel:(0,C.I)(e.audiochannel)}),S(this,v,"f").call(this,g.VideoInfo,this.getVideoInfo()),this.updateStatisticsInfo()})),E(this,a,M,"f"),M+=1,E(this,s,new Proxy(k.kg,{get:(e,t)=>["debug","info","warn","error"].includes(t)?n=>{e[t](`id ${S(this,a,"f")}: ${n}`)}:e[t]}),"f"),E(this,r,e,"f"),E(this,d,t,"f"),E(this,i,function(){const e=document.createElement("video");return e.id=`video-${Math.random().toString().slice(2)}`,e.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  ",e.volume=.9,e.autoplay=!0,e.setAttribute("webkit-playsinline","true"),e.setAttribute("playsinline","true"),e}(),"f"),E(this,f,window.setTimeout((()=>{this.load()}),1),"f")}delyLoad(){clearTimeout(S(this,f,"f"))}load(){var e;this.status!==b.Destroyed&&(S(this,s,"f").info(`load src: ${S(this,r,"f")}, opts: ${JSON.stringify(S(this,d,"f"))}`),this.status=b.Loading,this.createCorePlayer(S(this,i,"f"),null===(e=S(this,d,"f"))||void 0===e?void 0:e.startTime),this.play().catch((e=>{k.kg.error(e)})))}play(){return x(this,void 0,void 0,(function*(){if(S(this,s,"f").info("video play"),null!=S(this,i,"f")&&this.status!==b.Playing)try{yield S(this,i,"f").play(),this.status=b.Playing}catch(e){if("NotAllowedError"!==e.name)return;S(this,s,"f").warn("try mute play"),S(this,i,"f").muted=!0;try{yield S(this,i,"f").play(),this.status=b.Playing,S(this,v,"f").call(this,g.MutePlay)}catch(e){S(this,s,"f").warn("can't auto play"),this.status=b.Pause,S(this,v,"f").call(this,g.NotAutoPlay)}}}))}pause(){S(this,s,"f").info("video pause"),null!=S(this,i,"f")&&this.status===b.Playing&&(S(this,i,"f").pause(),this.status=b.Pause)}seek({forward:e,keepBuffer:t}){if(S(this,s,"f").info(`video seek, forward: ${null!=e?e:"null"}, keepBuffer: ${null!=t?t:"null"}`),null==S(this,i,"f"))return;const n=(0,k.sQ)(S(this,i,"f"));if(!(n<=0))if(null!=t&&t>0){if(n<t)return;S(this,i,"f").currentTime+=n-t}else if(null!=e&&e>0){if(e>n)return;S(this,i,"f").currentTime+=e}}getSrc(){return S(this,r,"f")}volume(e){S(this,s,"f").info(`video setVolume(${e})`),null!=S(this,i,"f")&&(S(this,i,"f").volume=(0,k.QV)(e,2))}mute(e){null!=S(this,i,"f")&&(S(this,i,"f").muted=e)}getVideoEl(){return S(this,i,"f")}removeVideoEl(){S(this,i,"f").remove()}getVideoInfo(){return S(this,l,"f").mediaInfo.volume=S(this,i,"f").volume,S(this,l,"f")}getNetworkState(){return S(this,o,"f")instanceof _.Hls7Player?S(this,o,"f").getHLSNetworkState():null}capturePic(e,t){return O(S(this,i,"f"),e,t)}switchAudioTrack(e){var t,n;return S(this,o,"f")instanceof _.Hls7Player?null==(null===(t=S(this,o,"f"))||void 0===t?void 0:t.switchAudioTrack)?-1:(null===(n=S(this,o,"f"))||void 0===n||n.switchAudioTrack(e),(0,k.sQ)(S(this,i,"f"))):-1}getAudioTracks(){var e,t,n;return S(this,o,"f")instanceof _.Hls7Player&&null!==(n=null===(t=null===(e=S(this,o,"f"))||void 0===e?void 0:e.getAudioTracks)||void 0===t?void 0:t.call(e))&&void 0!==n?n:[]}destroy(e=!1){var t,n;if(e||this.removeVideoEl(),this.status!==b.Destroyed){this.status=b.Destroyed,S(this,s,"f").info(`video destroyed, holdLastFrame: ${e.toString()}`),clearTimeout(S(this,f,"f")),window.clearInterval(null!==(t=S(this,c,"f"))&&void 0!==t?t:0),E(this,l,{mediaInfo:Object.assign({},P),realtimeInfo:Object.assign({},T)},"f"),S(this,i,"f").pause(),S(this,h,"f").forEach((e=>null==e?void 0:e()));try{null===(n=S(this,o,"f"))||void 0===n||n.destroy()}catch(e){k.kg.error("corePlayer destroy error!!")}S(this,v,"f").call(this,g.Destroyed),S(this,p,"f").destroy()}}createCorePlayer(e,t){var n;if(null==S(this,r,"f"))return;const i=null!=window.MediaSource?new window.MediaSource:{},a=new URL(S(this,r,"f")).pathname;let s,c;if(a.endsWith(".flv"))s=new _.fMp4Player(i,e),c=k.KU.fMp4Player;else if(a.endsWith(".m3u8"))!0===S(this,d,"f").forceNativePlayer||null==window.MediaSource?(s=new _.NativePlayer(i,e),c=k.KU.NativePlayer):(s=new _.Hls7Player(i,e),c=k.KU.Hls7Player);else{if(!a.endsWith(".mp4"))throw new Error(`Unsupported stream url: ${a}`);s=new _.NativePlayer(i,e),c=k.KU.NativePlayer}S(this,l,"f").mediaInfo=Object.assign({},S(this,l,"f").mediaInfo,{corePlayerType:c}),S(this,v,"f").call(this,g.LoadStart,{corePlayer:s,videoEl:e,src:S(this,r,"f")}),s.keepUsedBuffer=10,s.timeout=7e3,null!=(null===(n=S(this,d,"f"))||void 0===n?void 0:n.latencySec)&&(s.latencySec=S(this,d,"f").latencySec),S(this,h,"f").push(this.bindEvents(s,e),S(this,m,"f").call(this)),null!=t&&t>0&&(s instanceof _.fMp4Player||s instanceof _.NativePlayer)&&(s.startTime=t),c===k.KU.NativePlayer&&a.endsWith(".m3u8")?(0,C.U)(S(this,r,"f")).then((e=>{s.src=e})).catch((e=>{s.src=S(this,r,"f"),k.kg.error(e)})):s.src=S(this,r,"f"),E(this,o,s,"f"),S(this,v,"f").call(this,g.CorePlayerCreated,{corePlayer:s,videoEl:e,src:S(this,r,"f")})}updateStatisticsInfo(){var e;let t=0;window.clearInterval(null!==(e=S(this,c,"f"))&&void 0!==e?e:0),E(this,c,window.setInterval((()=>{var e,n,r;const{droppedVideoFrames:a=0,totalVideoFrames:s=0}=null!==(r=null===(n=null===(e=S(this,i,"f"))||void 0===e?void 0:e.getVideoPlaybackQuality)||void 0===n?void 0:n.call(e))&&void 0!==r?r:{};let c=0;null!=S(this,o,"f")&&(c=S(this,o,"f").receivedBytes-t,Number.isNaN(c)&&(c=0),t=S(this,o,"f").receivedBytes);const u=(0,k.QV)((0,k.sQ)(S(this,i,"f")),3);S(this,l,"f").realtimeInfo=Object.assign({},S(this,l,"f").realtimeInfo,{droppedFrames:a,decodedFrames:s,videoBufferLength:u,videoNetworkActivity:c}),A(S(this,i,"f"),u),S(this,v,"f").call(this,g.VideoInfo,this.getVideoInfo())}),1e3),"f")}bindEvents(e,t){const n=performance.now();let i=!1;e.onMetaData=e=>{S(this,y,"f").call(this,e),S(this,v,"f").call(this,g.MetaData,performance.now()-n),S(this,s,"f").info(`after onMetaData mediaInfo: ${JSON.stringify(S(this,l,"f").mediaInfo)}`)},e.onSeiData=(...e)=>{S(this,v,"f").call(this,g.SEIData,...e)},e.onFileFetched=(e,{used:t,duration:n})=>{let i=2e3;0===n?i=2e3:n<=500&&(i=500),t>i&&S(this,s,"f").warn(`fetch slowly: ${e}, cost ${t}ms, duration: ${n}ms`)},e.onFirstResponse=e=>{S(this,v,"f").call(this,g.NetworkResponse,e)},e.onEndOfStream=()=>{let e=Math.ceil((0,k.sQ)(t));(e<0||isNaN(e))&&(e=0),S(this,s,"f").warn(`video onEndOfStream, bufLen: ${e}`),setTimeout((()=>{t.dispatchEvent(new Event("ended"))}),1e3*e)},e.onFirstPacket=()=>{const e=performance.now()-n;S(this,s,"f").info(`video first packet cost: ${Math.round(e)}`),S(this,v,"f").call(this,g.FirstPacket,performance.now()-n)};const r=(e,t,n)=>{if(i)return;i=!0;const r=(0,k.pl)({code:t,errInfo:n});S(this,s,"f").error(`player core ${e}, ${r}`),S(this,v,"f").call(this,g.Error,{code:t,errInfo:n}),this.destroy()};e.onNetworkError=r.bind(this,"NetworkError"),e.onParserError=r.bind(this,"ParserError");const o=()=>{const e=performance.now()-n;S(this,s,"f").info(`video first frame cost: ${Math.round(e)}`),S(this,v,"f").call(this,g.FirstFrame,e)};t.addEventListener("loadeddata",o);const c=()=>{i||(i=!0,S(this,v,"f").call(this,g.Ended),this.destroy())};t.addEventListener("ended",c);const u=()=>{if(i)return;i=!0;const e=t.error,n={code:90002,errInfo:{code:null==e?void 0:e.code,msg:null==e?void 0:e.message}};S(this,s,"f").error(`video native error: ${(0,k.pl)(n)}`),S(this,v,"f").call(this,g.Error,n),this.destroy()};t.addEventListener("error",u);const h=function(e,t,{startCb:n,endCb:i,reportCb:r,id:o}){let a=!1;const s=()=>{a=!0,e.removeEventListener("loadeddata",s)};e.addEventListener("loadeddata",s);let l=!1;const c=()=>{e.removeEventListener("progress",c),l&&(l=!1,i())},u=()=>{a&&(l=!0,n(),e.addEventListener("progress",c))},h=()=>{e.removeEventListener("progress",c),l&&(l=!1,i())};e.addEventListener("waiting",u),e.addEventListener("playing",h);const d=new _.BufferDetector(e,1e3);let f=0,p=0,v=0,m=0,y=performance.now();const g=()=>{const n=performance.now(),i=t.receivedBytes-m;m=t.receivedBytes,r({count:d.waitedCount-f,duration:Math.round(d.waitedDuration-p),windowSize:Math.round(n-y),playTime:Math.round(e.currentTime-v),playedTime:Math.round(e.currentTime),receivedBytes:i,id:o}),f=d.waitedCount,p=d.waitedDuration,v=e.currentTime,y=n},w=window.setInterval(g,6e4),b=()=>{g()};return window.addEventListener("beforeunload",b),()=>{window.clearInterval(w),g(),window.removeEventListener("beforeunload",b),e.removeEventListener("playing",h),e.removeEventListener("waiting",u),e.removeEventListener("loadeddata",s),d.destroy()}}(t,e,{startCb:()=>{S(this,s,"f").warn(`video waiting!, bufferLen: ${(0,k.sQ)(t)}`),S(this,v,"f").call(this,g.WaitStart)},endCb:()=>{S(this,s,"f").info("video playing"),S(this,v,"f").call(this,g.WaitEnd)},reportCb:e=>{S(this,v,"f").call(this,g.WaitReport,e)},id:S(this,a,"f")}),d=()=>{S(this,v,"f").call(this,g.Play)};t.addEventListener("play",d);const f=()=>{S(this,v,"f").call(this,g.Pause)};t.addEventListener("pause",f);const p=k.Cn.on("pause",(()=>{t.pause()})),m=k.Cn.on("play",(()=>{t.play().catch((e=>{k.kg.error(e)}))}));return()=>{t.removeEventListener("loadeddata",o),t.removeEventListener("ended",c),t.removeEventListener("error",u),t.removeEventListener("play",d),t.removeEventListener("pause",f),h(),p(),m()}}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap;const A=(()=>{let e=0;return(t,n)=>{t.paused||((n>10||e===t.currentTime&&n>5)&&(t.currentTime+=n/2,k.kg.warn(`force discard frame, current time: ${t.currentTime}`)),e=t.currentTime)}})();function D(e){if(e.videoHeight>e.videoWidth){const t=function(e){const t=O(e);let n=null;return n=document.createElement("div"),n.style.cssText=`\n    background-image: url(${t});\n    background-size: cover;\n    background-position: center;\n    width: 100%;\n    height: 100%;\n    filter: blur(35px);\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  `,n}(e);return e.insertAdjacentElement("afterend",t),t}return null}function O(e,t="image/jpeg",n=.8){var i;const r=document.createElement("canvas");return r.width=e.videoWidth,r.height=e.videoHeight,null===(i=r.getContext("2d"))||void 0===i||i.drawImage(e,0,0,r.width,r.height),r.toDataURL(t,n)}},6031:(e,t,n)=>{"use strict";n.d(t,{$p:()=>a,bm:()=>s,yu:()=>o});var i=n(163),r=n(2956);const o=function(){let e=0,t=0;try{if("PerformanceObserver"in window){new PerformanceObserver((n=>{n.getEntries().forEach((n=>{e+=1,t+=n.duration}))})).observe({type:"longtask",buffered:!1})}}catch(e){console.error(e)}return{total:()=>({longTaskCount:e,longTaskDuration:t})}}(),a=e=>{let t=0,n=0,i=0,o=0,a=!0;e.on(r.tw.VideoInfo,(e=>{if(!a)return t=e.realtimeInfo.droppedFrames,void(n=e.realtimeInfo.decodedFrames);i+=e.realtimeInfo.droppedFrames-t,o+=e.realtimeInfo.decodedFrames-n,t=e.realtimeInfo.droppedFrames,n=e.realtimeInfo.decodedFrames}));let s=0;const l=()=>{"hidden"===document.visibilityState?a=!1:"visible"===document.visibilityState&&(clearTimeout(s),s=self.setTimeout((()=>{a=!0}),1500))};return document.addEventListener("visibilitychange",l),e.once(r.tw.Destroyed,(()=>{clearTimeout(s),document.removeEventListener("visibilitychange",l)})),{total:()=>({totalDroped:i,totalDecodedFrames:o})}},s=(()=>{const e=window.PressureObserver;if(null==e)return()=>-1;const t={nominal:0,fair:150,serious:300,critical:450};let n=t.nominal,r=performance.now(),o=[];new e((e=>{const a=e[e.length-1],s={from:n,to:t[a.state],duration:performance.now()-r};i.kg.info(`cpu state change: ${JSON.stringify(s)}`),n=s.to,r=performance.now(),o.push(s)}),{sampleRate:1}).observe("cpu");let a=performance.now();return()=>{const e=performance.now();let t=o.reduce(((e,t)=>e+t.from*t.duration),0);return t+=n*(e-r),r=e,o=[],t/=(e-a)/1e3,a=e,(0,i.QV)(t/1e3,0)}})()},109:(e,t,n)=>{"use strict";n.d(t,{AO:()=>s,Km:()=>a,_B:()=>c,dx:()=>l});var i=n(163),r=n(2956),o=n(7377);function a(e,t,n={}){var r;const o=e.getCtrlUI(),a=t.getVideoEl();if(null==a||null==o)return()=>{};const s=i.jP.getVolume();null!=s&&(a.volume=s.value/100,a.muted=null!==(r=n.mute)&&void 0!==r?r:s.disabled,o.volume={disabled:a.muted,value:100*a.volume});const l=()=>{o.playStatus=!0},c=()=>{o.playStatus=!1},u=()=>{t.getVideoEl().paused&&e.show()},h=e=>{null!=o.volume&&(o.volume={disabled:a.muted,value:100*a.volume})};a.addEventListener("playing",l),a.addEventListener("pause",c),a.addEventListener("loadeddata",u),a.addEventListener("volumechange",h);const d=e.onChange(((e,t)=>{if("playStatus"===e)t?a.play().catch((e=>{i.kg.error(e)})):a.pause();else if("volume"===e){const{disabled:e,value:n}=t;a.muted=e,a.volume=n/100}}));return()=>{d(),a.removeEventListener("playing",l),a.removeEventListener("pause",c),a.removeEventListener("loadeddata",u),a.removeEventListener("volumechange",h)}}function s(e,t,n){let o;const a=()=>{o=(0,i.V_)(t)},s=()=>{null==o||o()},l=e.on(r.tw.WaitStart,(()=>{a()})),c=e.on(r.tw.WaitEnd,s);return e.once(r.tw.FirstFrame,(()=>{s(),(0,i.d_)(null,t)})),null==n||""===n?(a(),(0,i.d_)(null,t)):(0,i.d_)(n,t),()=>{l(),c(),s()}}function l(e,t){const n=()=>{null!=document.pictureInPictureElement&&document.exitPictureInPicture().catch((e=>{i.kg.error(e)}))},a=e.on(r.tw.Destroyed,(()=>{n(),c.pipStatus=!1,a()})),s=t.onChange(((t,r)=>{if("pipStatus"===t&&document.pictureInPictureEnabled){if(r){const t=e.getVideoEl();return n(),void t.requestPictureInPicture().catch(i.kg.error)}n()}})),l=e.getVideoEl(),c=t.getCtrlUI();let u=0;const h=()=>{o.default.operation(o.default.OperationCode.PictureInPicture,Math.floor((performance.now()-u)/1e3),{sampleRate:1})},d=()=>{c.pipStatus=!1,h()},f=()=>{u=performance.now()},p=()=>{null!=document.pictureInPictureElement&&h()};return l.addEventListener("leavepictureinpicture",d),l.addEventListener("enterpictureinpicture",f),window.addEventListener("beforeunload",p),()=>{s(),l.removeEventListener("leavepictureinpicture",d),l.removeEventListener("enterpictureinpicture",f),window.removeEventListener("beforeunload",p),n()}}function c(e,t){if(!0===t.getCtrlUI().mirrorStatus){e.getVideoEl().style.transform="rotateY(180deg)"}const n=t.onChange(((t,n)=>{if("mirrorStatus"!==t)return;const i=e.getVideoEl();i.style.transform=!0!==n?"":"rotateY(180deg)"}));return()=>{n()}}},6080:(e,t,n)=>{"use strict";n.d(t,{R:()=>g,Z:()=>S});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w=n(2517),b=n(163),_=n(7377),k=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},C=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},x=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};!function(e){e.BottomDistanceChange="bottomDistanceChange",e.CtrlItemVisibility="ctrlItemVisibility"}(g||(g={}));class S{constructor(e,t){this.container=e,this.opts=t,i.set(this,new b.Nd),r.set(this,void 0),o.set(this,void 0),a.set(this,void 0),s.set(this,new Set),l.set(this,new Set),c.set(this,void 0),u.set(this,!1),h.set(this,0),d.set(this,0),f.set(this,(()=>{})),this.on=x(this,i,"f").on,p.set(this,x(this,i,"f").emit),v.set(this,!1),this.setBottomDistance=e=>{parseInt(getComputedStyle(x(this,r,"f")).bottom)!==e&&(x(this,r,"f").style.bottom=`${e}px`,x(this,o,"f").style.bottom=`${e}px`,x(this,p,"f").call(this,g.BottomDistanceChange,e))},m.set(this,(()=>{if(b.kg.info("Controller onrefresh"),0!==x(this,l,"f").size)for(const e of Array.from(x(this,l,"f")))e()})),this.getCtrlEl=()=>x(this,r,"f"),y.set(this,((e,t)=>k(this,void 0,void 0,(function*(){if(b.kg.info(`Controller onchange: type: ${e}, value: ${JSON.stringify(t)}`),0===x(this,s,"f").size)return!1;return!(yield Promise.all(Array.from(x(this,s,"f")).map((n=>n(e,t))))).includes(!1)&&void 0})))),this.changeCtrlVisible=e=>{e?(x(this,o,"f").style.visibility="visible",x(this,r,"f").style.visibility="visible"):(x(this,o,"f").style.visibility="hidden",x(this,r,"f").style.visibility="hidden")},C(this,r,function(){const e=document.createElement("div");return e.style.cssText="\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    z-index: 13;\n  ",e.classList.add("web-player-controller-wrap"),e.id="web-player-controller-wrap-el",e}(),"f"),C(this,o,function(){const e=document.createElement("div");return e.classList.add("web-player-controller-bg"),e.style.cssText="\n    display: none;\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    z-index: 10;\n    height: 56px;\n    background-image: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7));\n  ",e.classList.add("web-player-controller-wrap"),e}(),"f"),t.enableCtrlUI&&(this.container.appendChild(x(this,o,"f")),e.appendChild(x(this,r,"f"))),C(this,a,new w.Z({target:x(this,r,"f"),props:{show:!1,playStatus:!1,quality:{list:[],value:null},line:{list:[],value:null},videoEnhanceConf:{title:"画质增强",visbility:!1,status:!1,highestQuality:250,desc:"仅对超清及以下生效"},onRefresh:x(this,m,"f"),onChange:x(this,y,"f"),isMobile:this.opts.isMobile,container:e,dmMsg:""}}),"f"),this.opts.isMobile?C(this,c,function(e,t,n){let i=!1;const r=e=>{const r=t.getCtrlUI().qualityPanelRef;!i||!E(n,e,!0)&&!0!==(null==r?void 0:r.contains(e.target))?(i=!i,i?(t.show(),t.delayHide(2e3,(()=>{i=!1}))):t.hide()):t.delayHide(2e3,(()=>{i=!1}))};return t.onChange(((e,n)=>{"dmInputFocus"===e&&(n?t.show(!0):t.hide())})),e.addEventListener("touchstart",r),()=>{e.removeEventListener("touchstart",r)}}(e,this,x(this,r,"f")),"f"):(C(this,c,function(e,t,n){const i=(0,b.P2)((e=>{if(t.getLockDisplayState())return;if(t.show(),t.showCursor(),E(n,e))return;t.delayHide(2e3);const i=t.getCtrlUI();!0!==i.webFullScreenStatus&&!0!==i.fullScreenStatus||t.delayHideCursor(2e3)}),500),r=()=>{t.getLockDisplayState()||(t.hide(),t.showCursor())},o=e=>{if(E(n,e))return;t.delayHide(2e3);const i=t.getCtrlUI();!0!==i.webFullScreenStatus&&!0!==i.fullScreenStatus||(t.showCursor(),t.delayHideCursor(2e3))};e.addEventListener("mousemove",i),e.addEventListener("mouseleave",r),e.addEventListener("click",o);const a=e=>{n.contains(e.target)||(()=>k(this,void 0,void 0,(function*(){t.triggerWebFullscreen()})))().catch((e=>{b.kg.error(e)}))};return e.addEventListener("dblclick",a),()=>{e.removeEventListener("click",o),e.removeEventListener("mousemove",i),e.removeEventListener("mouseleave",r),e.removeEventListener("dblclick",a)}}(e,this,x(this,r,"f")),"f"),C(this,f,function(e){const t=e.onChange(((t,n)=>{if("fullScreenStatus"===t||"webFullScreenStatus"===t){if(n)return void e.delayHideCursor(2e3);e.showCursor()}}));return()=>{t()}}(this),"f"))}triggerWebFullscreen(){var e;const t=!(null!==(e=x(this,a,"f").webFullScreenStatus)&&void 0!==e&&e);x(this,a,"f").webFullScreenStatus=t,x(this,s,"f").forEach((e=>e("webFullScreenStatus",t))),_.default.operation(_.default.OperationCode.WebFullScreenWay,t?1:-1)}onChange(e){return x(this,s,"f").add(e),()=>{x(this,s,"f").delete(e)}}onRefresh(e){return x(this,l,"f").add(e),()=>{x(this,l,"f").delete(e)}}getCtrlUI(){return x(this,a,"f")}updateItemVisibility(e){x(this,a,"f").ctrlItemVisibility=Object.assign(Object.assign({},x(this,a,"f").ctrlItemVisibility),e),x(this,p,"f").call(this,g.CtrlItemVisibility,e)}setMiniMode(e){C(this,u,e,"f")}show(e=!1){C(this,v,e,"f"),clearTimeout(x(this,h,"f")),x(this,u,"f")||x(this,a,"f").show||(x(this,o,"f").style.display="block",x(this,a,"f").show=!0,x(this,s,"f").forEach((e=>e("show",!0))))}delayHide(e,t=(()=>{})){clearTimeout(x(this,h,"f")),C(this,h,window.setTimeout((()=>{x(this,v,"f")||(this.hide(),t())}),e),"f")}hide(e=!1){C(this,v,e,"f"),x(this,a,"f").show&&(x(this,o,"f").style.display="none",x(this,a,"f").show=!1,x(this,s,"f").forEach((e=>e("show",!1))))}getLockDisplayState(){return x(this,v,"f")}setScreenStatus(e){const t=!0===x(this,a,"f").webFullScreenStatus?1:!0===x(this,a,"f").fullScreenStatus?2:0;if(t===e)return;let n="fullScreenStatus",i=!0;switch(e){case 0:n=["webFullScreenStatus","webFullScreenStatus","fullScreenStatus"][t],i=!1,x(this,a,"f").webFullScreenStatus=!1,x(this,a,"f").fullScreenStatus=!1;break;case 1:n="webFullScreenStatus",x(this,a,"f").webFullScreenStatus=!0,x(this,a,"f").fullScreenStatus=!1;break;case 2:n="fullScreenStatus",x(this,a,"f").webFullScreenStatus=!1,x(this,a,"f").fullScreenStatus=!0}x(this,s,"f").forEach((e=>e(n,i)))}destroy(){C(this,s,new Set,"f"),C(this,l,new Set,"f"),x(this,c,"f").call(this),x(this,a,"f").$destroy(),x(this,r,"f").remove(),x(this,o,"f").remove(),clearTimeout(x(this,h,"f")),clearTimeout(x(this,d,"f")),x(this,f,"f").call(this)}showCursor(){clearTimeout(x(this,d,"f")),"default"!==this.container.style.cursor&&(this.container.style.cursor="default")}delayHideCursor(e){clearTimeout(x(this,d,"f")),C(this,d,window.setTimeout((()=>{this.container.style.cursor="none"}),e),"f")}}function E(e,t,n=!1){const i=e.getBoundingClientRect().top-36-14-(n?52:0);return n?t.touches[0].clientY>i||e.contains(t.target):t.clientY>i||e.contains(t.target)}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap},8557:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});var i=n(2956),r=n(7377),o=n(163),a=n(6031),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const{PerfCode:l,EventCode:c,CustomCode:u}=r.default;let h=!0;function d(){!function(){if(!f)return;f=!1;let e=!1;function t(t){!e&&h&&(e=!0,r.default.error(r.default.ErrorCode.InitPlayFaild,t,{}))}window.addEventListener("beforeunload",(()=>{performance.now()>7e3&&t("beforeunload")})),setTimeout((()=>{t("timeout")}),1e4)}();const e=new WeakMap,t=t=>{r.default.event(c.CreateVideo,null,{sampleRate:.1,extFields:["sProtocol","sHost","p2pType","sCodec","sName","sFormat"],randDelay:0}),t.once(i.tw.NetworkResponse,(e=>{const t="x-service-module",n=e.headers.get(t);null!=n&&r.default.updateDynamicInfo({[t]:{[n]:1}})})),t.once(i.tw.FirstFrame,(e=>{r.default.perf(l.FirstFrame,e,{sampleRate:.1,extFields:"all"}),h&&(h=!1,r.default.perf(r.default.PerfCode.FirstScreen,Math.round(performance.now()),{sampleRate:.1,extFields:"all",params:{ff:e}}))})),t.once(i.tw.FirstPacket,(e=>{r.default.perf(l.FirstPacket,e,{sampleRate:.05})})),t.once(i.tw.MetaData,(e=>{r.default.perf(l.VideoMeta,e,{sampleRate:.05})}));const n=r.default.fixedDynamicFieldsVerIns();!function(e,t){e.once(i.tw.Ended,(()=>s(this,void 0,void 0,(function*(){p=!0})))),e.once(i.tw.FirstFrame,(()=>{p=!1,v=!1})),e.once(i.tw.Error,(n=>{if(m||v)return;if(v=!0,p)return;r.default.error(n.code,JSON.stringify(n.errInfo));const a=e.getNetworkState();n.code in i.Tw&&null!=a&&t.error(r.jK.NetworkException,JSON.stringify(Object.assign({},a,{errCode:n.code,bufLen:1e3*(0,o.sQ)(e.getVideoEl())})),{sampleRate:.1})}))}(t,n),function(e,t,n){const r=(0,a.$p)(e);let s={},l={},c={};e.once(i.tw.FirstFrame,(()=>{e.on(i.tw.WaitReport,(i=>{var h;const d={},f=n.get(e);if(null!=(null==f?void 0:f.getP2PDataCollectionStatus)){(null===(h=null==f?void 0:f.getP2PDataCollectionStatus)||void 0===h?void 0:h.call(f)).getQueryServerInfo().bvcServiceModule.forEach(((e,t)=>{d[t]=e}))}const p=(0,o.kB)(s,d);s=d;const v=(0,o.kB)(l,a.yu.total());l=a.yu.total();const m=(0,o.kB)(c,r.total());c=r.total();const y="x-service-module";null!=f&&t.updateDynamicInfo({[y]:p});const g=Object.assign(Object.assign(Object.assign({},i),v),{dropFrameCnt:m.totalDroped,dropFrameRate:0===m.totalDecodedFrames?0:(0,o.QV)(m.totalDroped/m.totalDecodedFrames,4),cpuState:(0,a.bm)()});o.kg.info(`5-1: ${JSON.stringify(g)}`),t.custom(u.Waiting,g,{randDelay:5e3,extFields:"all"})}))}))}(t,n,e),t.on(i.tw.WaitStart,(()=>{const e=t.getNetworkState();null!=e&&n.error(r.jK.NetworkException,JSON.stringify(Object.assign({},e,{trigger:"wait",bufLen:1e3*(0,o.sQ)(t.getVideoEl())})),{sampleRate:.1})}))};return t.setP2PInstance=(t,n)=>{e.set(t,n)},t}let f=!0;let p=!1,v=!1,m=!1;window.addEventListener("beforeunload",(()=>{m=!0}))},4870:(e,t,n)=>{"use strict";n.d(t,{OU:()=>s,XD:()=>a,aP:()=>l,md:()=>u,zd:()=>c});var i=n(163),r=n(2956),o=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function a(e,t){let n=-1;function r(e){return o(this,void 0,void 0,(function*(){if(-1===n)n+=1;else{const e=t[n];i.kg.error(`retry times: ${n}, delay: ${e}`),n+=1,yield(0,i._v)(e)}try{const t=yield e();return n=-1,t}catch(o){if(i.kg.error(o),n<t.length)return yield r(e);throw i.kg.error("retry failed"),o}}))}return(...t)=>o(this,void 0,void 0,(function*(){return yield new Promise(((n,i)=>{r((()=>e(...t))).then((e=>{n(e)})).catch((e=>{i(e)}))}))}))}const s=(()=>{const e=[[0,0],[.5,2],[2,4],[4,6]].map((e=>e.map((e=>1e3*e)))),t=new Map;return(n,r)=>o(void 0,void 0,void 0,(function*(){r=r>4?4:r;let o=t.get(n);null==o&&(o={count:0,removeTimer:0},t.set(n,o)),clearTimeout(o.removeTimer);const a=o.count;if(a>=r)throw t.delete(n),new Error("backoff failed");o.removeTimer=window.setTimeout((()=>{t.delete(n)}),2*e[e.length-1][1]),o.count+=1;const[s,l]=e[a],c=Math.round(Math.random()*(l-s)+s);return i.kg.warn(`backoff delay: sleepTime: ${c}, count: ${o.count}`),yield(0,i._v)(c),o.count}))})();function l(e,t){let n;return null==t||""===t?(n=(0,i.V_)(e),(0,i.d_)(null,e)):(0,i.d_)(t,e),()=>{null==n||n()}}function c(e,t){null==e||e.destroy(!0);const n=null==e?void 0:e.getVideoEl();if(null==n)return;const i=()=>{n.removeEventListener("play",i),t()};n.addEventListener("play",i)}const u=(()=>{let e=0;const t=()=>{e>0||(e=performance.now())};return n=>(n.once(r.tw.FirstFrame,(()=>{e=0})),n.once(r.tw.Error,t),n.once(r.tw.Ended,t),()=>!(e>0&&performance.now()-e>6e4))})()},2458:(e,t,n)=>{"use strict";n.d(t,{F:()=>a,x:()=>o});var i=n(163),r=n(2956);function o(e,t){if(null===t)return()=>{};if(!i.ua.isChrome()&&!i.ua.isEdg())return()=>{};const{enable:n,highSpeed:o,lowSpeed:a,maxThreshold:s,minThreshold:l}=t;if(!n)return()=>{};i.kg.info(`live player start autoSyncProgress, ${JSON.stringify(t)}`);let c=-1e6;const u=e.on(r.tw.WaitStart,(()=>{c=performance.now()}));let h=!1,d=0,f=0,p=[];const v=e.on(r.tw.VideoInfo,(({realtimeInfo:t})=>{const n=t.videoBufferLength;if(n<0||isNaN(n))return;if(p.push(n),p=p.slice(-5),h)return;const r=2-.2*n,u=n-(Math.max(...p)-Math.min(...p))*r;let d=1;u>s&&performance.now()-c>12e4?d=o:u<l&&(d=a),(d<=0||d>2)&&(d=1);const v=e.getVideoEl();d!==v.playbackRate&&(i.kg.debug(`autoSyncProgress, playbackRate: ${d}`),v.playbackRate=d,clearTimeout(f),1===d?m():f=window.setTimeout((()=>{i.kg.debug("autoSyncProgress recover"),v.playbackRate=1,m()}),2e3))}));function m(){h=!0,clearTimeout(d),d=window.setTimeout((()=>{h=!1}),3e3)}return()=>{v(),u()}}function a(e,t){if(null===t)return()=>{};const{latency:n,enable:o,maxThreshold:a}=t;if(!o||n>10||n<1||n>=a)return()=>{};i.kg.info(`live player initiates autoDiscardFrame detection, ${JSON.stringify(t)}}`);let s=[-1e6,-1e6,-1e6],l=-1e6;const c=e.on(r.tw.WaitStart,(()=>{s=s.concat(performance.now()).slice(-3)}));let u=[];const h=e.on(r.tw.VideoInfo,(({realtimeInfo:t})=>{const r=t.videoBufferLength;if(r<0||isNaN(r))return;if(u=u.concat(r).slice(-3),performance.now()-l<5e3)return;if(r<10&&r<a)return;const[o,,c]=s;if(performance.now()-c<3e4||performance.now()-o<12e4)return;const h=u.length;if(h>=3&&(Math.max(...u)-Math.min(...u)>1.5||u[h-1]>u[h-2]))return;i.kg.debug(`autoDiscardFrame: ${r-n} `);const d=e.getVideoEl();d.paused||(l=performance.now(),d.currentTime+=r-n)}));return()=>{c(),h()}}},6523:(e,t,n)=>{"use strict";n.d(t,{G:()=>J,p:()=>X});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S,E,M,T,P,L,I,A,D=n(163),O=n(2956),B=n(9919),R=n(6080),$=n(688),V=n(4870),F=n(8557),j=n(7377),H=n(1081),U=n(109),N=n(9387),W=n(577),z=n(5216),q=n(6357),Z=n(2458),G=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},K=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},Q=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};const Y={[D.Xh.HLS_BILI]:D.Xh.HLS_NOT_P2P,[D.Xh.HLS_NOT_P2P]:D.Xh.HLS_NOT_P2P,[D.Xh.NONE]:D.Xh.NONE};var X;!function(e){e.Failed="liveplayer-failed",e.LiveStatusChange="liveplayer-status-change",e.Destroyed="liveplayer-destroyed",e.VideoError="VideoError"}(X||(X={}));class J{constructor(e,t,n){var $;this.container=e,this.opts=t,this.socket=n,i.set(this,""),r.set(this,""),o.set(this,null),a.set(this,null),this.playUrlParser=null,s.set(this,0),this.replay=null,l.set(this,[]),c.set(this,[]),u.set(this,null),h.set(this,!1),d.set(this,null),f.set(this,null),p.set(this,"Fetch"),v.set(this,void 0),m.set(this,null),y.set(this,(()=>{})),g.set(this,null),w.set(this,(()=>{})),b.set(this,new D.Nd),this.on=K(this,b,"f").on,this.once=K(this,b,"f").once,_.set(this,K(this,b,"f").emit),k.set(this,new Set),C.set(this,null),x.set(this,null),S.set(this,(e=>G(this,void 0,void 0,(function*(){var t,n,i,r,o;if(Q(this,s,e,"f"),this.opts.roomId=e,D.kg.info(`live player init roomId: ${e}`),null==this.opts.roomInfo)yield K(this,T,"f").call(this);else{if(Q(this,a,this.opts.roomInfo,"f"),null==(null===(t=K(this,a,"f").playurl_info)||void 0===t?void 0:t.playurl))return K(this,_,"f").call(this,X.Failed,j.default.ErrorCode.PlayUrlNull),void D.kg.error("playUrlInfo.playurl is null");this.playUrlParser=ee(K(this,a,"f").playurl_info,{userId:this.opts.userId,ownerId:K(this,a,"f").uid,isMobile:null!==(n=this.opts.isMobile)&&void 0!==n&&n})}this.reload(),null!=(null===(i=K(this,a,"f"))||void 0===i?void 0:i.live_time)&&K(this,c,"f").push(function(e,t){const n=Date.now()/1e3-e-performance.now()/1e3,i=window.setInterval((()=>{t.time={value:(0,D.mr)(performance.now()/1e3+n),tips:"直播持续时间"}}),1e3);return()=>{clearInterval(i)}}(K(this,a,"f").live_time,this.ctrl.getCtrlUI())),null!=K(this,a,"f")&&!0!==this.opts.isMobile&&this.opts.enableCtrlUI&&(this.replay=new H.Z(this.container,{live_time:null===(r=K(this,a,"f"))||void 0===r?void 0:r.live_time,rid:null===(o=K(this,a,"f"))||void 0===o?void 0:o.room_id},this.socket,this.ctrl),this.replay.on("timeShiftChange",(e=>{this.tmShiftHandler(e),this.reload(),e>0&&Q(this,x,null,"f")})),this.enableReplay()&&this.replay.init())})))),this.tmShiftHandler=e=>{var t,n,i;const r=this.playUrlParser;if(null==this.replay||null==r)return;const o=r.getCurP2PType(),a=r.getCurStreamInfo().protocol;let s=D.Jl.HTTP_HLS,l=D.Xh.HLS_NOT_P2P;const c=r.getCurStreamInfo().timeshift;0!==e?(0===c&&(this.replay.bakState={p2pType:o,protocol:a}),(null!==(t=this.replay.bakState.p2pType)&&void 0!==t?t:o)>0&&(r.setCurP2PType(D.Xh.HLS_BILI),l=D.Xh.HLS_BILI)):(l=null!==(n=this.replay.bakState.p2pType)&&void 0!==n?n:o,r.setCurP2PType(l),s=null!==(i=this.replay.bakState.protocol)&&void 0!==i?i:a,this.replay.bakState={}),r.setTimeShift(e),r.useStream({protocol:s,expectP2PType:l})},E.set(this,(e=>{var t,n;const i=null!==(n=null===(t=this.playUrlParser)||void 0===t?void 0:t.getLineCandidates().length)&&void 0!==n?n:0,r=new W.T(e.getVideoEl(),{lineNum:i}),o=e.on(O.tw.WaitStart,(()=>{var t,n,i;if(!0===(null===(t=this.replay)||void 0===t?void 0:t.isReplay)||!r.getNeedSwitchLine())return;const o=performance.now(),a=navigator.connection;this.switchLine(W.T.switchNum,!1),j.default.custom(j.default.CustomCode.SwitchLine,{switchNum:W.T.switchNum,videoCurrentTime:e.getVideoEl().currentTime,interval:Math.floor((o-W.T.lastSwitchTime)/1e3),downlink:null!==(n=null==a?void 0:a.downlink)&&void 0!==n?n:-1,rtt:null!==(i=null==a?void 0:a.rtt)&&void 0!==i?i:-1}),D.kg.warn(`waiting auto switch line to ${W.T.switchNum}`)}));K(this,l,"f").push(r.destroy),K(this,l,"f").push(o)})),M.set(this,(()=>{K(this,l,"f").forEach((e=>e())),Q(this,l,[],"f")})),T.set(this,(0,V.XD)((e=>G(this,void 0,void 0,(function*(){var t,n,i,r,o,l,c,u,h;const f=this.playUrlParser;let p=null!==(n=null===(t=null==f?void 0:f.getQualityDesc(f.getCurQuality()))||void 0===t?void 0:t.code)&&void 0!==n?n:0;null!=e&&(p=e),(0,V.aP)(this.container,K(this,d,"f"));const v=null!==(r=null===(i=this.playUrlParser)||void 0===i?void 0:i.getCurLine())&&void 0!==r?r:0,{timeshift:m}=null!==(l=null===(o=this.playUrlParser)||void 0===o?void 0:o.getCurStreamInfo())&&void 0!==l?l:{};D.kg.info(`updateRoomInfo quality: ${p}, line: ${v}`);const{code:y,data:g,message:w}=yield this.opts.roomInfoProvider({roomId:K(this,s,"f"),qn:p,isMobile:null!==(c=this.opts.isMobile)&&void 0!==c&&c});if(y===D.Xt.AreaBlock)return void K(this,_,"f").call(this,X.Failed,D.Xt.AreaBlock,w);if(1!==g.live_status)return(0,D.DL)(),void K(this,_,"f").call(this,X.LiveStatusChange,g.live_status);return null==g.playurl_info?((0,D.DL)(),this.playUrlParser=null,void D.kg.info("playUrlInfo is null")):(Q(this,a,g,"f"),D.kg.debug(`room info: ${JSON.stringify(g)}`),null==g.playurl_info.playurl?(K(this,_,"f").call(this,X.Failed,j.default.ErrorCode.PlayUrlNull),void D.kg.error("playUrlInfo.playurl is null")):(this.playUrlParser=ee(K(this,a,"f").playurl_info,{userId:this.opts.userId,ownerId:g.uid,isMobile:null!==(u=this.opts.isMobile)&&void 0!==u&&u}),null===(h=this.playUrlParser)||void 0===h||h.setCurLine(v),void this.tmShiftHandler(null!=m?m:0)))}))),[0,1,3,5,10,20,30,60,90,120].map((e=>1e3*e)))),P.set(this,((e,t)=>{e.once(O.tw.FirstFrame,(()=>{var n,a;let s=null;if(K(this,l,"f").push((()=>{null==s||s.remove()})),K(this,k,"f").forEach((t=>{t!==e&&(t.destroy(),K(this,k,"f").delete(t))})),Q(this,i,(0,D.Vj)(),"f"),Q(this,r,t,"f"),K(this,h,"f"))return void e.destroy();null===(n=K(this,o,"f"))||void 0===n||n.removeVideoEl();const c=e.getVideoEl();this.container.appendChild(c),Q(this,o,e,"f"),!0!==this.opts.isMobile&&(s=(0,O.Qp)(e.getVideoEl())),null===(a=K(this,u,"f"))||void 0===a||a.success(),K(this,y,"f").call(this),Q(this,y,(0,Z.x)(e,K(this,m,"f")),"f"),K(this,w,"f").call(this),Q(this,w,(0,Z.F)(e,K(this,g,"f")),"f")}))})),L.set(this,(e=>{var t,n,i,r;const o=(0,V.md)(e);e.once(O.tw.Ended,(()=>G(this,void 0,void 0,(function*(){if(e.destroy(),!o())return D.kg.error("retry over 1 min"),void K(this,_,"f").call(this,X.Failed,j.default.ErrorCode.RetryMaxTime);s().catch(D.kg.error)})))),e.once(O.tw.Error,(t=>G(this,void 0,void 0,(function*(){var n;if(K(this,_,"f").call(this,X.VideoError,t),e.destroy(),D.kg.error(t),!o())return void K(this,_,"f").call(this,X.Failed,j.default.ErrorCode.RetryMaxTime);const i=(0,V.aP)(this.container,K(this,d,"f"));!0!==(null===(n=this.replay)||void 0===n?void 0:n.isReplay)&&(null!=this.playUrlParser&&function(e,t){if(e.code===j.default.ErrorCode.ErrorMseOpen||e.code===j.default.ErrorCode.NativeVideoError&&[3,4].includes(e.errInfo.code)){const e=t.getCurCodecType();if(B.Z.getCodecDecodecState()[e])return t.codecDowngrade()}return!1}(t,this.playUrlParser)?this.reload():s().then(i).catch((e=>{D.kg.error(e),i()})))})))),D.kg.debug(`max retry times：${null!==(n=null===(t=this.playUrlParser)||void 0===t?void 0:t.getPlayUrlCandates().length)&&void 0!==n?n:0}`);const a=Math.min(null!==(r=null===(i=this.playUrlParser)||void 0===i?void 0:i.getPlayUrlCandates().length)&&void 0!==r?r:0,4),s=()=>G(this,void 0,void 0,(function*(){try{const e=yield(0,V.OU)(this.playUrlParser,a);if(null!=this.playUrlParser){const t=(0,z.S)(this.playUrlParser,e,a);if(t===z.k.SwitchLine)K(this,_,"f").call(this,D.n4.SwitchLine,this.playUrlParser.getCurLine());else if(t===z.k.Failed)throw new Error("not supported hls protocol stream")}}catch(e){D.kg.error(e);try{yield K(this,T,"f").call(this)}catch(e){throw K(this,_,"f").call(this,X.Failed,j.default.ErrorCode.RoomP0ApiFetchError),this.destroy(),e}}this.reload()}))})),I.set(this,(e=>{const t=(0,D.gR)(D.Yw.LIVE_SEI_CHANNEL),n=(0,D.gR)(D.Yw.B_LIVE_VIBRATION),i=(0,D.gR)(D.Yw.LIVE_SEI_PC_LINK),r=(0,D.gR)(D.Yw.BVC_KUAWAN____TS),o=(0,D.gR)(D.Yw.BVCLIVESTREAMHOP),a=(0,D.gR)(D.Yw.BILILIVESUBTITLE),s=(0,D.gR)(D.Yw.BVC__CANVAS_DATA);return e.once(O.tw.Destroyed,(()=>{K(this,_,"f").call(this,O.tw.Destroyed)})),[D.Nd.forwardEvent(e,K(this,b,"f"),[O.tw.Play,O.tw.Pause,O.tw.LoadStart,O.tw.MetaData,O.tw.FirstFrame,O.tw.WaitStart,O.tw.WaitEnd,O.tw.NotAutoPlay,O.tw.MutePlay,O.tw.CorePlayerCreated]),e.on(O.tw.VideoInfo,(e=>{var t,n;K(this,_,"f").call(this,O.tw.VideoInfo,{mediaInfo:Object.assign(Object.assign({},e.mediaInfo),{corePlayerType:`${null!==(n=null===(t=e.mediaInfo)||void 0===t?void 0:t.corePlayerType)&&void 0!==n?n:""} (${K(this,p,"f")})`}),realtimeInfo:Object.assign(Object.assign({},e.realtimeInfo),{latency:K(this,x,"f")})})})),e.on(O.tw.SEIData,((...e)=>{t(e[2])?K(this,_,"f").call(this,D.n4.SEIParseData,D.Yw.LIVE_SEI_CHANNEL,(0,D.DA)(e[3])):n(e[2])?K(this,_,"f").call(this,D.n4.SEIParseData,D.Yw.B_LIVE_VIBRATION,e[1],e[3]):i(e[2])?K(this,_,"f").call(this,D.n4.SEIParseData,D.Yw.LIVE_SEI_PC_LINK,(0,D.DA)(e[3])):r(e[2])?K(this,_,"f").call(this,D.n4.SEIParseData,D.Yw.BVC_KUAWAN____TS,(0,D.DA)(e[3])):o(e[2])?K(this,A,"f").call(this,e):a(e[2])?K(this,_,"f").call(this,D.n4.SEIParseData,D.Yw.BILILIVESUBTITLE,e[1],(0,D.DA)(e[3])):s(e[2])?K(this,_,"f").call(this,D.n4.SEIParseData,D.Yw.BVC__CANVAS_DATA,e[1],(0,D.DA)(e[3])):K(this,_,"f").call(this,O.tw.SEIData,e)}))]})),this.play=()=>{var e;null===(e=K(this,o,"f"))||void 0===e||e.play().catch((()=>{}))},this.pause=()=>{var e;null===(e=K(this,o,"f"))||void 0===e||e.pause()},this.volume=e=>{var t;null===(t=K(this,o,"f"))||void 0===t||t.volume(e)},this.switchAudioTrack=e=>{var t,n;return null!==(n=null===(t=K(this,o,"f"))||void 0===t?void 0:t.switchAudioTrack(e))&&void 0!==n?n:-1},this.getAudioTracks=()=>{var e;return null===(e=K(this,o,"f"))||void 0===e?void 0:e.getAudioTracks()},this.mute=e=>{var t;this.opts.mute=e,null===(t=K(this,o,"f"))||void 0===t||t.mute(e)},this.enableReplay=()=>null!=K(this,a,"f")&&null!=this.playUrlParser&&!(!K(this,a,"f").all_special_types.includes(19)||!this.playUrlParser.hasHLSPlayerSupportStream()),A.set(this,(e=>{var t,n,i;if(document.hidden)return;if(!0===(null===(t=this.replay)||void 0===t?void 0:t.isReplay))return;const r=null===(n=K(this,o,"f"))||void 0===n?void 0:n.getVideoEl();if(null==r||r.paused)return;let a=[];try{a=JSON.parse((0,D.DA)(e[3]))}catch(e){return void D.kg.error("bvc latency sei解析失败")}const s=this.playUrlParser,{format:l,p2pType:c}=null!==(i=null==s?void 0:s.getCurStreamInfo())&&void 0!==i?i:{},u=e[1],h=Math.round(1e3*(u-r.currentTime)+Date.now());a.length>0&&Q(this,x,h-a[0].curr_ms,"f"),ne(a.concat({curr_ms:h,author:"web_player",author_ver:"v3.8.4",buffer_ms:Math.round(1e3*(0,D.sQ)(r)),protocol:null!=c&&c===D.Xh.HLS_BILI?"webrtc":"http",muxer:l})),ie((()=>{Q(this,x,null,"f")}))})),!0!==t.isMobile&&(e.style.overflow="hidden"),this.ctrl=new R.Z(e,{userId:t.userId,isMobile:null!==($=this.opts.isMobile)&&void 0!==$&&$,enableCtrlUI:t.enableCtrlUI}),K(this,c,"f").push(function(e,t,n){let i=!1;const r=e.onRefresh((()=>{var e,r;t.once(O.tw.FirstFrame,(()=>{i&&((0,D.Am)("刷新成功",t.container),i=!1)})),(0,D.Am)("正在刷新",t.container),i=!0,!0===(null===(e=t.replay)||void 0===e?void 0:e.isReplay)&&(null===(r=t.replay)||void 0===r||r.returnLive()),t.tmShiftHandler(0),t.reload(),n(),j.default.operation(j.default.OperationCode.Refresh)})),o=e.onChange(((e,n)=>G(this,void 0,void 0,(function*(){if(function(e,t){"danmaku"===e?j.default.operation(j.default.OperationCode.Danmaku,Object.assign({},t)):"volume"===e?!0===t.disabled?j.default.operation(j.default.OperationCode.Mute):j.default.operation(j.default.OperationCode.Volume,{value:t.value}):"playStatus"===e?!0===t?j.default.operation(j.default.OperationCode.Play):j.default.operation(j.default.OperationCode.Pause):"fullScreenStatus"===e?j.default.operation(j.default.OperationCode.FullScreen,{value:t}):"webFullScreenStatus"===e&&j.default.operation(j.default.OperationCode.WebFullScreen,{value:t})}(e,n),"quality"===e)return t.switchQuality(n);"line"===e&&t.switchLine(n)}))));return()=>{r(),o()}}(this.ctrl,this,(()=>{K(this,_,"f").call(this,D.n4.Reload)}))),Q(this,v,(0,F.m)(),"f"),K(this,S,"f").call(this,this.opts.roomId).catch((e=>{D.kg.error(e),j.default.error(j.default.ErrorCode.RoomEnterLiveError,e)}))}reload(){var e;if(K(this,h,"f"))return;D.kg.info(`live player load roomId: ${K(this,s,"f")}`);const t=K(this,s,"f");if(null==K(this,a,"f")||0===t||null==this.playUrlParser)return;const n=this.playUrlParser;let i;null==K(this,f,"f")&&Q(this,f,n.getCurQuality(),"f");try{i=n.getCurPlayUrl()}catch(e){return D.kg.error(e),void K(this,T,"f").call(this).then((()=>{this.reload()})).catch((e=>{D.kg.error(e)}))}if(K(this,h,"f"))return;const r=n.getCurStreamInfo();j.default.updateDynamicInfo({p2pType:r.p2pType,sHost:r.host,sQuery:r.query,sProtocol:r.protocol,sCodec:r.codec,sName:r.name,quality:r.quality,sFormat:null!==(e=r.format)&&void 0!==e?e:"",line:this.playUrlParser.getCurLine()},!0);const o=j.default.fixedDynamicFieldsVerIns();D.kg.info(`current stream info: ${JSON.stringify(r)}`),K(this,M,"f").call(this);const c=new O.nk(i,{forceNativePlayer:"panorama"===n.getCurStreamInfo().curAttrName||navigator.userAgent.includes("PlayStation"),latencySec:K(this,a,"f").risk_with_delay});K(this,l,"f").push(...te(this.playUrlParser,this.container,t.toString(),c.getVideoEl(),this.ctrl)),K(this,k,"f").add(c),function(e,t){var n,i,r;const o={list:null!==(n=t.getLineCandidates())&&void 0!==n?n:[],value:null!==(i=t.getCurLine())&&void 0!==i?i:0};e.line=o;const a={list:t.getQnCandidates(),value:null!==(r=t.getCurQuality())&&void 0!==r?r:"0"};e.quality=a}(this.ctrl.getCtrlUI(),n),K(this,E,"f").call(this,c),function(e,t,n){D.kg.debug("listen sticker SEI");let i=null,r=!1;const o=t.on(D.n4.SEIParseData,((e,t)=>{e===D.Yw.LIVE_SEI_CHANNEL&&(r||(r=!0,i=new N.Z(n)),null==i||i.onSei(t))})),a=e.on(O.tw.MetaData,(e=>{r&&(D.kg.info("destroy sticker when metadata"),null==i||i.destroy(),r=!1)}));let s=0;const l=t.ctrl.onChange(((e,t)=>{"webFullScreenStatus"!==e&&"fullScreenStatus"!==e||(clearTimeout(s),s=window.setTimeout((()=>{null==i||i.calcDisplayInfo(),null==i||i.batchUpdateStickerElement()}),"webFullScreenStatus"===e?10:300))})),c=e.on(O.tw.VideoInfo,(e=>{null==i||i.onVideoInfo({width:e.mediaInfo.width,height:e.mediaInfo.height})}));t.once(X.Destroyed,h),e.once(O.tw.Destroyed,h);let u=!1;function h(){u||(u=!0,D.kg.info("destroy sticker..."),clearTimeout(s),null==i||i.destroy(),l(),o(),a(),c())}}(c,this,this.container),K(this,P,"f").call(this,c,i),K(this,L,"f").call(this,c),K(this,v,"f").call(this,c),K(this,l,"f").push((0,U.Km)(this.ctrl,c,{mute:this.opts.mute}),(0,U.AO)(c,this.container,K(this,d,"f")),(0,U.dx)(c,this.ctrl),(0,U._B)(c,this.ctrl),...K(this,I,"f").call(this,c));const u=n.getCurP2PType();(0,$.Z)({video:c,type:u,roomId:t,interval:n.getDynamicConfig().report_interval_sec}).then((e=>{Q(this,C,e,"f"),K(this,v,"f").setP2PInstance(c,e),K(this,l,"f").push((()=>{Q(this,C,null,"f")})),Q(this,p,{[D.Xh.HLS_BILI]:"SistersFetcher",[D.Xh.HLS_NOT_P2P]:"Fetch",[D.Xh.NONE]:"Fetch"}[u],"f")})).catch((e=>{var t,i;Q(this,p,"Fetch","f");const r=null!==(t=Y[u])&&void 0!==t?t:D.Xh.NONE;n.setCurP2PType(r),o.updateDynamicInfo({p2pType:r}),D.kg.error(e),null===(i=K(this,C,"f"))||void 0===i||i.destroy(),Q(this,C,null,"f")}))}setTitlePageImg(e){Q(this,d,e,"f")}setAutoSyncProgressCfg(e){/chrome\/91/g.test(navigator.userAgent.toLowerCase())||(Q(this,m,e,"f"),null!=K(this,o,"f")&&(K(this,y,"f").call(this),Q(this,y,(0,Z.x)(K(this,o,"f"),e),"f")))}setAutoDiscardFrameCfg(e){Q(this,g,e,"f"),null!=K(this,o,"f")&&(K(this,w,"f").call(this),Q(this,w,(0,Z.F)(K(this,o,"f"),e),"f"))}getPlayerInfo(){var e,t,n,a,s,l,c,u,h,d;const{name:f}=null!==(t=null===(e=this.playUrlParser)||void 0===e?void 0:e.getCurStreamInfo())&&void 0!==t?t:{name:""};return{guid:K(this,i,"f"),playingStatus:!(null===(a=null===(n=K(this,o,"f"))||void 0===n?void 0:n.getVideoEl().paused)||void 0===a||a),playSrc:K(this,r,"f"),streamName:f,quality:null!==(l=null===(s=this.playUrlParser)||void 0===s?void 0:s.getCurQuality())&&void 0!==l?l:"",qualityCandidates:null!==(u=null===(c=this.playUrlParser)||void 0===c?void 0:c.getQnCandidates())&&void 0!==u?u:[],timeShift:null!==(d=null===(h=this.playUrlParser)||void 0===h?void 0:h.getTimeShift())&&void 0!==d?d:0}}getVideoEl(){var e;return null===(e=K(this,o,"f"))||void 0===e?void 0:e.getVideoEl()}getP2PTransport(){var e,t;return{downloadExtraFile:null===(e=K(this,C,"f"))||void 0===e?void 0:e.downloadExtraFile.bind(K(this,C,"f")),shareExtraFile:null===(t=K(this,C,"f"))||void 0===t?void 0:t.shareExtraFile.bind(K(this,C,"f"))}}blockStream(){(0,V.zd)(K(this,o,"f"),(()=>{K(this,_,"f").call(this,O.tw.Play)}))}discardFrame(e){var t;const n=null===(t=K(this,o,"f"))||void 0===t?void 0:t.getVideoEl();null!=n&&(n.currentTime+=e)}remainBufferLength(){var e;const t=null===(e=K(this,o,"f"))||void 0===e?void 0:e.getVideoEl();return null==t?0:(0,D.sQ)(t)}destroy(e){var t,n;D.kg.info(`live player destroy, holdLastFrame: ${String(e)}`),null===(t=K(this,o,"f"))||void 0===t||t.destroy(e),K(this,h,"f")||(Q(this,h,!0,"f"),K(this,_,"f").call(this,X.Destroyed),null===(n=this.replay)||void 0===n||n.destroy(),K(this,M,"f").call(this),this.ctrl.destroy(),K(this,y,"f").call(this),K(this,w,"f").call(this),K(this,b,"f").destroy(),K(this,c,"f").forEach((e=>e())),Q(this,c,[],"f"))}switchQuality(e,t=""){var n;D.kg.info(`switchQuality to ${e}`);const i=this.playUrlParser;if(null==i)return;const r=i.getCurStreamInfo().host,o=i.getQualityDesc(e),a=i.getCurQuality(),s=i.getQualityDesc(a),l=i.getQualityDesc(null!==(n=K(this,f,"f"))&&void 0!==n?n:"0");if(null!=o&&null!=l&&null!=s){if(0===Number((0,D.ej)("DedeUserID"))&&o.code>l.code)return D.kg.warn("user not login, reject switch quality"),K(this,_,"f").call(this,D.n4.SwitchQualityNotLogin,{newQn:{qn:e,text:o.label},oldQn:{qn:s.value,text:s.label}}),!1;(0,D.Am)(`${t}清晰度即将切换至${o.label}`,this.container),Q(this,u,{success:()=>{(0,D.Am)(`${t}清晰度已经切换至${o.label}`,this.container),Q(this,u,null,"f"),K(this,_,"f").call(this,D.n4.SwitchQuality,e,s.value,i.getQnCandidates().map((({label:e,value:t})=>({qn:t,desc:e}))))}},"f"),K(this,T,"f").call(this,o.code).then((()=>{var t,n;const i=o.code===D.qC.Dolby?D.Jl.HTTP_HLS:void 0;null===(t=this.playUrlParser)||void 0===t||t.useStream({quality:o.code,protocol:i}),this.reload();const s=null===(n=this.playUrlParser)||void 0===n?void 0:n.getCurStreamInfo().host;j.default.operation(j.default.OperationCode.SwitchQuality,{fromQuality:a,toQuality:e,fromHost:r,toHost:s})})).catch((e=>{D.kg.error(e)}))}else D.kg.error(`switchQuality: quality parser error. ${JSON.stringify({targetQnDesc:o,curQnDesc:s,defQnDesc:l})}`)}switchLine(e,t=!0){var n,i,r;const o=this.playUrlParser;if(null==o)return;const a=o.getCurStreamInfo().host;t&&(0,D.Am)(`线路即将切换至${null!==(i=null===(n=o.getLineCandidates().find((t=>t.value===e)))||void 0===n?void 0:n.label)&&void 0!==i?i:""}`,this.container),Q(this,u,{success:()=>{t&&(0,D.Am)(`线路已经切换至${o.getCurLineDesc().label}`,this.container),Q(this,u,null,"f"),K(this,_,"f").call(this,D.n4.SwitchLine,e)}},"f"),null===(r=this.playUrlParser)||void 0===r||r.setCurLine(e);const s=o.getCurStreamInfo().host;j.default.operation(j.default.OperationCode.SwitchLine,{line:e,fromHost:a,toHost:s}),this.reload()}capturePic(e,t){var n,i;return null!==(i=null===(n=K(this,o,"f"))||void 0===n?void 0:n.capturePic(e,t))&&void 0!==i?i:null}}function ee(e,{userId:t,ownerId:n,isMobile:i}){const r=new B.Z(e);return(t===n||i)&&r.setCurP2PType(Y[r.getCurP2PType()]),r}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap,P=new WeakMap,L=new WeakMap,I=new WeakMap,A=new WeakMap;const te=(e,t,n,i,r)=>{const o=[];if(e.getCurStreamInfo().qualityDesc.some((e=>{var t;return!0===(null===(t=e.attr_desc)||void 0===t?void 0:t.some((e=>"panorama"===e.attr_name)))}))){const e=(0,q.a)(t,n);if(null!=e){r.show();const t=setTimeout((()=>{r.hide()}),1e4);o.push(e,(()=>{clearTimeout(t)}));const n=r.onChange(((i,r)=>{"qualityPanelShow"===i&&!0===r&&(e(),n(),clearTimeout(t))}))}}if("panorama"===e.getCurStreamInfo().curAttrName){const e=new q.H(t,i,(()=>{(0,D.Am)("资源加载失败，无法进行全景交互",t)}));o.push(e.destroy)}return o},ne=(0,D.P2)((e=>{j.default.custom(j.default.CustomCode.SEILatency,{sei_latency:e},{extFields:["p2pType","sHost","sProtocol","sCodec","quality","sName"],sampleRate:.01})}),6e4),ie=(0,D.Ds)((e=>e()),6e4)},688:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(163),r=n(2956),o=n(977),a=n(7377),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function l({video:e,type:t,roomId:n,interval:l}){return s(this,void 0,void 0,(function*(){if(i.kg.info(`launch p2p: ${t}`),t!==i.Xh.HLS_BILI)throw new Error("unsupported P2P type");const{corePlayer:s,videoEl:u,src:h}=yield new Promise((t=>{e.once(r.tw.CorePlayerCreated,t)})),d=yield c(n,e.getSrc()).catch((e=>(i.kg.error(e),null)));if(null==d||0===d.length)throw new Error("fetch bili_p2p trackerServer failed");const f=yield o.Z.bindBili({corePlayer:s,videoEl:u,src:h,roomId:n,trackerServer:d});if(null==f)throw new Error("launch bili_p2p failed");f.onEventReport=e=>{!function(e,t){switch(e.type){case 1:"number"==typeof e.body.p2pBufferLengthSec&&e.body.p2pBufferLengthSec>=0&&(t.minBufferLength=e.body.p2pBufferLengthSec,i.kg.info(`Change P2PBufferLength: ${e.body.p2pBufferLengthSec}`));break;case 0:a.default.custom(e.body.code+1e4,e.body.data),i.kg.warn(`sister p2p emit: code: ${e.type}`)}}(e,s)};const p=function(e,t,n=30){let r=0;const o=a.default.fixedDynamicFieldsVerIns();function s(){let n=(0,i.sQ)(t);n=n<0?0:n;const s=Math.round(1e3*(t.currentTime+n)),l=(0,i.QV)((s<0?0:s)-r,0);r=s;const c=e.getStatisticsData();null!=c&&o.custom(a.default.CustomCode.P2PData,Object.assign(Object.assign({},c),{duration:l}),{randDelay:5e3,extFields:"all"})}const l=setInterval(s,1e3*(n>=10||n<=300?n:30)),c=()=>{clearInterval(l),s()};return window.addEventListener("beforeunload",c),()=>{clearInterval(l),window.removeEventListener("beforeunload",c),s()}}(f,u,l);return e.once(r.tw.Destroyed,(()=>{p(),f.destroy()})),f}))}const c=(()=>{const e={};return(t,n)=>s(void 0,void 0,void 0,(function*(){const r=yield o.Z.getTrackerParamsString(n,t);if(null!=e[r])return e[r];let a=[];try{a=(yield(0,i.hj)(`/xlive/open-interface/v2/tracker/conf${r}`)).domains}catch(e){i.kg.error("track server url parsed error")}return e[r]=a,a}))})()},6357:(e,t,n)=>{"use strict";n.d(t,{H:()=>D,a:()=>O});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S,E,M,T,P=n(163),L=n(7377),I=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},A=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};class D{constructor(e,t,n){this.container=e,this.videoEl=t,i.set(this,document.createElement("div")),r.set(this,!1),o.set(this,0),a.set(this,0),s.set(this,0),l.set(this,0),c.set(this,!1),u.set(this,0),h.set(this,0),d.set(this,0),f.set(this,void 0),p.set(this,[]),v.set(this,null),this.destroy=()=>{A(this,r,!0,"f"),I(this,T,"f").call(this),I(this,i,"f").remove(),I(this,p,"f").forEach((e=>null==e?void 0:e()))},m.set(this,((e,t,n)=>{const i=n.getBoundingClientRect(),r=new e.PerspectiveCamera(75,i.width/i.height,1,1100);I(this,y,"f").call(this,r);const o=new e.Scene,a=new e.SphereBufferGeometry(500,100,80);a.scale(-1,1,1);const s=new e.VideoTexture(t),l=new e.MeshBasicMaterial({map:s}),c=new e.Mesh(a,l);o.add(c);const u=new e.WebGLRenderer;return A(this,v,u,"f"),u.setPixelRatio(window.devicePixelRatio),u.setSize(i.width,i.height),I(this,p,"f").push(this.handleResize()),{camera:r,renderer:u,scene:o}})),this.handleResize=()=>{const e=()=>{var e;const t=this.container.getBoundingClientRect();null===(e=I(this,v,"f"))||void 0===e||e.setSize(t.width,t.height)};window.addEventListener("resize",e);const t=setInterval((()=>{e()}),17);return()=>{window.removeEventListener("resize",e),clearInterval(t)}},y.set(this,(e=>{A(this,h,Math.max(-85,Math.min(85,I(this,h,"f"))),"f");const t=window.THREE.MathUtils.degToRad(90-I(this,h,"f")),n=window.THREE.MathUtils.degToRad(I(this,u,"f"));e.position.x=10*Math.sin(t)*Math.cos(n),e.position.y=10*Math.cos(t),e.position.z=10*Math.sin(t)*Math.sin(n),e.lookAt(0,0,0)})),g.set(this,(()=>{const{THREE:e}=window,{camera:t,renderer:n,scene:r}=I(this,m,"f").call(this,e,this.videoEl,this.container);A(this,f,t,"f");const o=n.domElement;this.videoEl.style.cssText+="\n      z-index: -1;\n    ",P.ua.isSafari()&&(this.videoEl.crossOrigin="anonymous"),o.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      overflow: hidden;\n      z-index: 1;\n    ",o.style.width="100%",o.style.height="100%",this.container.appendChild(o),I(this,p,"f").push(I(this,w,"f").call(this,t)),this.container.appendChild(I(this,i,"f")),function e(){n.render(r,t),s=requestAnimationFrame(e)}();const a=I(this,_,"f").call(this,t,this.container);let s=0;return()=>{a(),cancelAnimationFrame(s),o.remove(),I(this,i,"f").remove()}})),w.set(this,(e=>{L.default.operation(L.default.OperationCode.Panorama,{type:"pv"}),I(this,i,"f").style.cssText="\n    position: absolute;\n    opacity: 0.4;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    z-index: 39;\n    outline: none;\n    left: 10px;\n    top: 60px;\n    background-color: #fff;\n    cursor: pointer;\n  ",I(this,i,"f").appendChild(I(this,k,"f").call(this)),I(this,i,"f").appendChild(I(this,C,"f").call(this)),I(this,i,"f").appendChild(I(this,S,"f").call(this)),I(this,i,"f").appendChild(I(this,E,"f").call(this));const t=e=>{e.stopPropagation()};return I(this,i,"f").addEventListener("dblclick",t),I(this,i,"f").onmouseenter=()=>{I(this,i,"f").style.opacity="1"},I(this,i,"f").onmouseleave=()=>{I(this,i,"f").style.opacity="0.4"},()=>{I(this,i,"f").removeEventListener("dblclick",t)}})),b.set(this,(e=>{I(this,i,"f").contains(e.target)||(A(this,c,!0,"f"),L.default.operation(L.default.OperationCode.Panorama,{type:"mouse"},{sampleRate:.1}),A(this,o,e.clientX,"f"),A(this,a,e.clientY,"f"),A(this,s,I(this,u,"f"),"f"),A(this,l,I(this,h,"f"),"f"))})),_.set(this,((e,t)=>{const n=t=>{I(this,i,"f").contains(t.target)||I(this,c,"f")&&(A(this,u,.1*(I(this,o,"f")-t.clientX)+I(this,s,"f"),"f"),A(this,h,.1*(I(this,a,"f")-t.clientY)+I(this,l,"f"),"f"),I(this,y,"f").call(this,e))},r=()=>{A(this,c,!1,"f")};return t.addEventListener("pointerdown",I(this,b,"f")),t.addEventListener("pointermove",n),t.addEventListener("pointerup",r),t.addEventListener("mouseleave",r),t.addEventListener("mouseout",r),()=>{t.removeEventListener("pointerdown",I(this,b,"f")),t.removeEventListener("pointermove",n),t.removeEventListener("pointerup",r),t.removeEventListener("mouseleave",r),t.removeEventListener("mouseout",r)}})),k.set(this,(()=>{const e=document.createElement("span");return e.innerHTML=R,e.style.cssText+=B,e.style.cssText+="\n    left: 50%;\n    margin: -4px 0 0 -8px;\n    top: 0;\n    transform: rotate(-90deg);\n  ",I(this,M,"f").call(this,e,"top"),e})),C.set(this,(()=>{const e=document.createElement("span");return e.innerHTML=R,e.style.cssText+=B,e.style.cssText+="\n    top: 50%;\n    margin: -10px -4px 0 -4px;\n    left: 1px;\n    transform: rotate(-180deg);\n  ",I(this,M,"f").call(this,e,"left"),e})),x.set(this,(e=>{if(null!=I(this,f,"f")){switch(I(this,y,"f").call(this,I(this,f,"f")),e){case"top":A(this,h,I(this,h,"f")-1,"f");break;case"left":A(this,u,I(this,u,"f")-1,"f");break;case"bottom":A(this,h,I(this,h,"f")+1,"f");break;case"right":A(this,u,I(this,u,"f")+1,"f")}A(this,d,requestAnimationFrame((()=>{I(this,x,"f").call(this,e)})),"f")}})),S.set(this,(()=>{const e=document.createElement("span");return e.innerHTML=R,e.style.cssText+=B,e.style.cssText+="\n    left: 50%;\n    margin: -7px 0px -5px -10px;\n    bottom: 0px;\n    transform: rotate(90deg);\n  ",I(this,M,"f").call(this,e,"bottom"),e})),E.set(this,(()=>{const e=document.createElement("span");return e.innerHTML=R,e.style.cssText+=B,e.style.cssText+="\n    top: 50%;\n    margin: -8px -1px 0 0;\n    right: -2px;\n  ",I(this,M,"f").call(this,e,"right"),e})),M.set(this,((e,t)=>{e.onmousedown=()=>{L.default.operation(L.default.OperationCode.Panorama,{type:t},{sampleRate:.1}),I(this,x,"f").call(this,t)},e.onmouseup=I(this,T,"f"),e.onmouseout=I(this,T,"f")})),T.set(this,(()=>{cancelAnimationFrame(I(this,d,"f"))})),null==window.THREE?(0,P.ve)("//s1.hdslb.com/bfs/live-pkg/live-web-player/three-0.141.0.min.js").then((()=>{I(this,r,"f")||I(this,p,"f").push(I(this,g,"f").call(this))})).catch((e=>{P.kg.error(e),n()})):I(this,p,"f").push(I(this,g,"f").call(this))}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap;const O=(e,t)=>{const n="bili_panorama_roomId_list",i=localStorage.getItem(n);if(!0===(null==i?void 0:i.includes(t)))return null;if(null==i)localStorage.setItem(n,t);else{let e=i.split(",");100===e.length&&(e=e.slice(1)),e.push(t),localStorage.setItem(n,e.join(","))}L.default.operation(L.default.OperationCode.Panorama,{type:"tip"});const r=$();e.appendChild(r);const o=setTimeout((()=>{r.remove()}),1e4);return()=>{r.remove(),clearTimeout(o)}},B="\n  position: absolute;\n  width: 18px;\n  cursor: pointer;\n  transition: fill .3s;\n  vertical-align: middle;\n  display: inline-block;\n  font-size: 0;\n",R='\n<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M2.65 11.634a.75.75 0 01-.073-.976l.072-.085L6.185 7.03 2.65 3.483a.75.75 0 01-.071-.977l.072-.084a.75.75 0 01.977-.071l.084.073L7.776 6.5a.75.75 0 01.072.975l-.072.084-4.065 4.074a.75.75 0 01-1.06.001z" fill="#999"></path>\n</svg>\n',$=()=>{const e=document.createElement("div");e.style.cssText="\n    position: absolute;\n    z-index: 40;\n    bottom: 40px;\n    right: 194px;\n    cursor: pointer;\n    background-color: #23ADE5;\n    color: white;\n    height: 30px;\n    text-align: center;\n    vertical-align: middle;\n    line-height: 30px;\n    border-radius: 4px;\n    padding: 0 12px 0 12px;\n    font-size: 14px;\n  ";const t=document.createElement("span");return t.style.cssText+="\n    border: 8px solid transparent;\n    border-top-color: #23ADE5;\n    width: 0;\n    position: absolute;\n    height: 0;\n    bottom: -14px;\n    right: 8px;\n  ",e.innerText="快来体验下沉浸式全景直播吧!",e.appendChild(t),e}},1081:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S,E,M,T,P,L,I,A,D,O,B,R,$,V,F,j,H=n(3308),U=n(163),N=n(9626),W=n(6080),z=n(7377),q=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},Z=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},G=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class K{constructor(e,t,n,K){this.ctrl=K,i.set(this,3600),r.set(this,300),o.set(this,document.createElement("div")),a.set(this,document.createElement("div")),s.set(this,document.createElement("div")),l.set(this,document.createElement("div")),c.set(this,document.createElement("div")),u.set(this,document.createElement("div")),h.set(this,null),d.set(this,new Map),f.set(this,0),p.set(this,void 0),v.set(this,void 0),m.set(this,[]),y.set(this,[]),g.set(this,0),w.set(this,{}),this.isReplay=!1,b.set(this,new U.Nd),this.on=G(this,b,"f").on,this.emit=G(this,b,"f").emit,_.set(this,0),k.set(this,!0),C.set(this,!1),this.bakState={},x.set(this,!1),this.init=()=>{var e;const t=this.ctrl.onChange(((e,t)=>q(this,void 0,void 0,(function*(){"show"===e&&(this.changeReplayStyle(t),t||this.removeMouseMoveListener())})))),n=G(this,S,"f").call(this);n.addEventListener("touchstart",G(this,T,"f")),n.addEventListener("mousedown",G(this,E,"f"));let i=0;const o=()=>q(this,void 0,void 0,(function*(){var e;(yield G(this,V,"f").call(this))&&(G(this,j,"f").call(this),null===(e=G(this,h,"f"))||void 0===e||e.appendChild(n),i=window.setInterval((()=>{G(this,R,"f").call(this)}),1e3),window.addEventListener("message",G(this,$,"f")))}));if(Date.now()/1e3-G(this,f,"f")>=G(this,r,"f"))o().catch((e=>{U.kg.error(e)}));else{const e=window.setInterval((()=>{Date.now()/1e3-G(this,f,"f")>=G(this,r,"f")&&(o().catch((e=>{U.kg.error(e)})),clearInterval(e))}),5e3);G(this,m,"f").push((()=>clearInterval(e)))}const s=null===(e=G(this,h,"f"))||void 0===e?void 0:e.getElementsByClassName("web-player-controller-wrap"),l=Date.now();null!=s&&s[0].classList.add("web-player-controller-"+l.toString()),G(this,m,"f").push(t,(()=>{clearInterval(i)}),this.ctrl.on(W.R.BottomDistanceChange,(e=>{G(this,a,"f").style.bottom=`${e}px`})))},this.removeReplay=()=>{G(this,m,"f").forEach((e=>null==e?void 0:e())),Z(this,m,[],"f"),window.removeEventListener("message",G(this,$,"f")),G(this,a,"f").remove(),G(this,a,"f").removeEventListener("mousedown",G(this,E,"f"))},this.removeHighlight=e=>{let t=!1;return G(this,d,"f").forEach(((n,i)=>{n.tag_id===e&&(G(this,d,"f").delete(i),t=!0,i.remove())})),t},this.handleHighlight=e=>{this.removeHighlight(e.tag_id),"ADD"===e.type&&G(this,B,"f").call(this,e),"DEL_ALL"===e.type&&G(this,d,"f").forEach(((e,t)=>{G(this,d,"f").delete(t),t.remove()}))},this.changeReplayStyle=e=>{e?(G(this,o,"f").classList.remove(H.Z.replayHidden),G(this,o,"f").classList.add(H.Z.replayShow),G(this,c,"f").classList.remove(H.Z.progressHidden),G(this,c,"f").classList.add(H.Z.progressShow),G(this,s,"f").style.display="block",G(this,l,"f").classList.add(H.Z.webPlayerReplayHighlightsShow),G(this,l,"f").classList.remove(H.Z.webPlayerReplayHighlightsHidden)):(G(this,o,"f").classList.remove(H.Z.replayShow),G(this,o,"f").classList.add(H.Z.replayHidden),G(this,c,"f").classList.remove(H.Z.progressShow),G(this,c,"f").classList.add(H.Z.progressHidden),G(this,s,"f").style.display="none",G(this,l,"f").classList.remove(H.Z.webPlayerReplayHighlightsShow),G(this,l,"f").classList.add(H.Z.webPlayerReplayHighlightsHidden))},this.setProgress=e=>{G(this,u,"f").style.width=e,G(this,s,"f").style.left=e},this.removeMouseMoveListener=e=>{var t,n;if(null===(t=G(this,h,"f"))||void 0===t||t.removeEventListener("mousemove",G(this,M,"f")),null!=e){const e=G(this,A,"f").call(this,G(this,s,"f").style.left);if(this.isReplay=0!==e,0===G(this,g,"f")){const e=this.ctrl.getCtrlUI();Z(this,k,Boolean(null===(n=e.danmaku)||void 0===n?void 0:n.display),"f")}Z(this,g,e,"f"),this.reload(e),window.removeEventListener("mouseup",this.removeMouseMoveListener),z.default.operation(z.default.OperationCode.TimeShift,{type:!0,timeShiftDuration:0}),Z(this,_,performance.now(),"f")}},S.set(this,(()=>(G(this,a,"f").classList.add(H.Z.webPlayerReplayContainer),G(this,o,"f").classList.add(H.Z.webPlayerReplayElement),G(this,c,"f").classList.add(H.Z.webPlayerReplayProgress),G(this,s,"f").classList.add(H.Z.webPlayerReplayCurrentPoint),G(this,u,"f").classList.add(H.Z.webPlayerReplayBar),G(this,l,"f").classList.add(H.Z.webPlayerReplayHighlights,H.Z.webPlayerReplayHighlightsHidden),G(this,c,"f").appendChild(G(this,s,"f")),G(this,c,"f").appendChild(G(this,u,"f")),G(this,o,"f").appendChild(G(this,c,"f")),G(this,o,"f").appendChild(G(this,l,"f")),G(this,a,"f").appendChild(G(this,o,"f")),G(this,a,"f")))),E.set(this,(e=>{var t;if(!e.target.className.includes("highlight")){const n=G(this,I,"f").call(this,e);this.setProgress(n),window.addEventListener("mouseup",this.removeMouseMoveListener),null===(t=G(this,h,"f"))||void 0===t||t.addEventListener("mousemove",G(this,M,"f"))}})),M.set(this,(e=>{const t=G(this,I,"f").call(this,e);G(this,u,"f").style.width=t,G(this,s,"f").style.left=t})),T.set(this,(e=>{Z(this,x,!1,"f"),G(this,a,"f").addEventListener("touchmove",G(this,L,"f")),G(this,a,"f").addEventListener("touchend",G(this,P,"f"))})),P.set(this,(e=>{G(this,a,"f").removeEventListener("touchmove",G(this,L,"f")),G(this,a,"f").removeEventListener("touchend",G(this,P,"f")),G(this,x,"f")&&(Z(this,x,!1,"f"),this.removeMouseMoveListener(e.changedTouches[0]))})),L.set(this,(e=>{Z(this,x,!0,"f");const t=G(this,I,"f").call(this,e.touches[0]);G(this,u,"f").style.width=t,G(this,s,"f").style.left=t})),I.set(this,(e=>{var t;const n=Number(null!==(t=getComputedStyle(document.documentElement).zoom)&&void 0!==t?t:1);let i=e.clientX/n-G(this,o,"f").getBoundingClientRect().left;i=i<0?0:i;const r=G(this,o,"f").clientWidth;return(i/r>1?100:i/r*100).toFixed(2)+"%"})),A.set(this,(e=>{const t=parseFloat(e.split("%")[0]);let n=Date.now()/1e3-G(this,f,"f");return n=n>G(this,i,"f")?G(this,i,"f"):n,Math.round(n*(100-t)/100)})),D.set(this,(e=>{const t=Date.now()/1e3;let n=t-G(this,f,"f");n=n>G(this,i,"f")?G(this,i,"f"):n;const r=Math.round(t-e);return{timeShift:r,left:(100-100*r/n).toFixed(2)+"%"}})),O.set(this,(()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");return e.classList.add(H.Z.backliveBtnContainer),t.classList.add(H.Z.backliveBtn),n.classList.add(H.Z.backliveDot),t.appendChild(n),t.append("返回直播"),t.onclick=()=>{this.setProgress("100%"),this.returnLive(),this.emit("timeShiftChange",0),z.default.operation(z.default.OperationCode.TimeShift,{type:!1,timeShiftDuration:Math.round(performance.now()-G(this,_,"f"))}),Z(this,_,0,"f")},e.appendChild(t),e})),B.set(this,(e=>{const t=document.createElement("div");t.classList.add(H.Z.highlightItem);let n=`<div class="${H.Z.highlightPot}"></div>`;null!=e.pic&&""!==e.pic&&(n+=`\n      <div class="${H.Z.highlightIcon}">\n        <div class="${H.Z.highlightImg}" style="background-image: url(${e.pic})">\n        </div>\n      </div>\n      `),t.innerHTML=n,t.onclick=()=>{var t;const{timeShift:n,left:i}=G(this,D,"f").call(this,e.timestamp);if(this.setProgress(i),0===G(this,g,"f")){const e=this.ctrl.getCtrlUI();Z(this,k,Boolean(null===(t=e.danmaku)||void 0===t?void 0:t.display),"f")}Z(this,g,n,"f"),this.isReplay=0!==n,this.reload(n),z.default.operation(z.default.OperationCode.TimeShift,{type:!0,isHighlight:!0,timeShiftDuration:0}),Z(this,_,performance.now(),"f")},G(this,d,"f").set(t,Object.assign(Object.assign({},e),{isAppend:!1,left:""}))})),R.set(this,(()=>{G(this,d,"f").forEach(((e,t)=>{const n=G(this,D,"f").call(this,e.timestamp);n.left.includes("-")?(t.remove(),G(this,d,"f").delete(t)):(t.style.left=n.left,G(this,d,"f").set(t,Object.assign(Object.assign({},e),n)),e.isAppend||(G(this,d,"f").set(t,Object.assign(Object.assign({},e),{isAppend:!0})),G(this,l,"f").appendChild(t)))}))})),$.set(this,(e=>{const t=e.origin.split("://");if(!(t.length>=2&&/^(?:uat-)?mlive\.bilibili\.co(?::\d+)?$/.test(t[1].split("/")[0])||"production".includes("dev")))return;const n=e.data;"previewPlaybackTimelineAnchor"===n.type&&this.handleHighlight({tag_id:0,timestamp:n.data.time,pic:n.data.iconUrl,type:"ADD"})})),V.set(this,(()=>q(this,void 0,void 0,(function*(){G(this,d,"f").forEach(((e,t)=>{G(this,d,"f").delete(t),t.remove()}));const e=yield(0,U.hj)(`/xlive/web-room/v1/index/getProgressBarInfo?roomid=${G(this,v,"f")}&platform=web`);return!G(this,C,"f")&&(null!=e.play_tag_list&&"ENABLE"===e.bar_status&&e.play_tag_list.forEach((e=>{this.handleHighlight(Object.assign(Object.assign({},e),{type:"ADD"}))})),"ENABLE"===e.bar_status)})))),F.set(this,(e=>e.on("message",(e=>{switch(e.cmd){case N.t.PLAY_TAG:this.handleHighlight(e.data);break;case N.t.PLAY_PROGRESS_BAR:{const{platform:t,type:n}=e.data;if(!t.includes("web"))return;if(["DISABLE","LIMIT"].includes(n)){if(this.isReplay){const e=this.on("timeShiftChange",(t=>{0===t&&(this.removeReplay(),e())}));return void G(this,m,"f").push(e)}this.removeReplay()}else if(null!=G(this,v,"f")){const t=Number(e.data.scatter.min),n=Number(e.data.scatter.max),i=setTimeout((()=>{this.init()}),Math.floor(1e3*(Math.random()*(n-t)+t)));G(this,m,"f").push((()=>{clearTimeout(i)}))}}}})))),this.destroy=()=>{Z(this,C,!0,"f"),this.removeReplay()},this.returnLive=()=>{G(this,y,"f").forEach((e=>e())),Z(this,y,[],"f"),this.setProgress("100%"),this.emit("backLive");const e=this.ctrl.getCtrlUI();e.ctrlItemVisibility=Object.assign(Object.assign({},e.ctrlItemVisibility),G(this,w,"f")),e.onChange("danmaku",{display:G(this,k,"f")}),this.isReplay=!1,Z(this,g,0,"f")},this.reload=(e=G(this,g,"f"))=>{if(G(this,y,"f").forEach((e=>e())),Z(this,y,[],"f"),0!==e){const e=this.ctrl.getCtrlUI();e.onChange("danmaku",{display:!1}),0===Object.keys(G(this,w,"f")).length&&Z(this,w,Object.assign({},e.ctrlItemVisibility),"f"),e.ctrlItemVisibility=Object.assign(Object.assign({},e.ctrlItemVisibility),{rightSetting:!1,quality:!1,danmaku:!1}),G(this,y,"f").push(e.appendCtrlItem(G(this,p,"f"),{xIndex:0})),this.isReplay=!0}else this.returnLive();this.emit("timeShiftChange",e)},j.set(this,(()=>{const e=this.ctrl.getCtrlUI();G(this,a,"f").style.visibility="hidden",G(this,m,"f").push(this.ctrl.onChange(((e,t)=>{"show"===e&&(t||0!==G(this,g,"f")?G(this,a,"f").style.visibility="visible":G(this,a,"f").style.visibility="hidden")})),this.on("timeShiftChange",(t=>{0!==t||e.show?G(this,a,"f").style.visibility="visible":G(this,a,"f").style.visibility="hidden"})))})),Z(this,h,e,"f"),Z(this,f,t.live_time,"f"),Z(this,v,t.rid,"f"),G(this,d,"f").clear(),Z(this,p,G(this,O,"f").call(this),"f"),G(this,m,"f").push(G(this,F,"f").call(this,n))}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap,P=new WeakMap,L=new WeakMap,I=new WeakMap,A=new WeakMap,D=new WeakMap,O=new WeakMap,B=new WeakMap,R=new WeakMap,$=new WeakMap,V=new WeakMap,F=new WeakMap,j=new WeakMap},5216:(e,t,n)=>{"use strict";n.d(t,{S:()=>s,k:()=>o});var i=n(163);const r={[i.Xh.HLS_BILI]:i.Xh.NONE,[i.Xh.NONE]:i.Xh.HLS_NOT_P2P,[i.Xh.HLS_NOT_P2P]:i.Xh.NONE};var o;!function(e){e[e.Retry=0]="Retry",e[e.SwitchLine=1]="SwitchLine",e[e.ChangeProtocol=2]="ChangeProtocol",e[e.Failed=3]="Failed"}(o||(o={}));const a={[i.Jl.HTTP_HLS]:[i.Xh.HLS_BILI,i.Xh.HLS_NOT_P2P],[i.Jl.HTTP_STREAM]:[i.Xh.NONE]};function s(e,t,n){if(null==e)return o.Retry;const s=e.getCurP2PType();switch(n-t){case 1:case 2:case 3:return i.kg.error(`maxRetryTimes: ${n} retry count: ${t}, auto change line`),e.setCurLine(e.getCurLine()+1),o.SwitchLine;case 0:{if(null!=i.y3.P2PType)return o.Retry;if(i.kg.error(`retry count: ${t}, auto change Protocol`),a[i.Jl.HTTP_STREAM].includes(s)&&!e.hasHLSPlayerSupportStream())return o.Failed;const n=r[s];return a[i.Jl.HTTP_HLS].includes(n)?e.useStream({protocol:i.Jl.HTTP_HLS,expectP2PType:n}):e.useStream({protocol:i.Jl.HTTP_STREAM,expectP2PType:n}),o.ChangeProtocol}default:return i.kg.error(`maxRetryTimes: ${n} retry count: ${t}, retry`),o.Retry}}},9387:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S,E=n(163),M=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},T=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},P=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};!function(e){e[e.Normal=1]="Normal",e[e.Text=2]="Text"}(S||(S={}));const L=(0,E.Te)();class I{constructor(e){this.container=e,i.set(this,void 0),r.set(this,void 0),o.set(this,null),a.set(this,0),s.set(this,0),l.set(this,new Map),c.set(this,new Map),u.set(this,[]),h.set(this,0),d.set(this,[]),f.set(this,!1),this.onSei=e=>{P(this,w,"f").call(this,e).catch((e=>{throw E.kg.error("贴纸加载失败"),new Error(e)}))},this.onVideoInfo=e=>{e.width!==P(this,i,"f").width&&e.height!==P(this,i,"f").height&&(T(this,i,e,"f"),T(this,r,{width:0,height:0},"f"))},p.set(this,(e=>{var t,n;P(this,l,"f").has(e.sticker_id)||P(this,f,"f")||(T(this,f,!0,"f"),e.sticker_type===S.Text?(null===(t=P(this,l,"f").get(e.sticker_id))||void 0===t||t.el.remove(),P(this,l,"f").set(e.sticker_id,P(this,v,"f").call(this,e))):(null===(n=P(this,l,"f").get(e.sticker_id))||void 0===n||n.el.remove(),P(this,l,"f").set(e.sticker_id,P(this,m,"f").call(this,e))))})),v.set(this,(e=>{E.kg.info(`create text sticker, id: ${e.sticker_id}`);const t=new Image,n=document.createElement("div"),i=P(this,c,"f").get(e.sticker_id);return t.onload=()=>{this.container.append(t),i.stretch.top_margin=(t.height-3)/2,i.stretch.bottom_margin=t.height/2,P(this,c,"f").set(e.sticker_id,Object.assign(Object.assign({},i),{width:t.width,height:t.height}));const o=P(this,y,"f").call(this,i,t.getBoundingClientRect(),e),l=document.createElement("span");l.innerText=e.sticker_title,l.style.cssText=`\n        color: ${e.sticker_title_color};\n        font-size: ${o.borderBottom+o.borderTop}px;\n        position: absolute;\n        z-index: 4;\n        visibility: hidden;\n        word-break: keep-all;\n        white-space: no-wrap;\n        transform: scale(0.3);\n        transform-origin: 0 0;\n        white-space: nowrap;\n        cursor: default;\n        user-select: none;\n      `,this.container.append(l),l.style.cssText+=`\n        top: -${2.2*i.title.bottom_margin/t.height*(o.borderBottom+o.borderTop)}px;\n        left: -${3*i.title.right_margin/t.width*o.width-.3*o.height}px;\n      `,n.style.cssText=`\n        transition: all .1s ease-in-out;\n        position: absolute;\n        z-index: 4;\n        border-style: solid;\n        border-color: transparent;\n        border-left-width: ${o.borderLeft}px;\n        border-right-width: ${o.borderRight}px;\n        border-top-width: ${o.borderTop}px;\n        border-bottom-width: ${o.borderBottom}px;\n        width: ${l.getBoundingClientRect().width-o.borderRight+.5*o.height}px;\n        border-image-source: url(${i.url});\n        border-image-repeat: stretch stretch;\n        border-image-slice: ${i.stretch.top_margin} ${i.stretch.right_margin} ${i.stretch.bottom_margin} ${i.stretch.left_margin} fill;\n      `,n.append(l),this.container.append(n);let u=P(this,r,"f").width,h=P(this,r,"f").height;u-=n.getBoundingClientRect().width,h=h-o.borderBottom-o.borderTop-l.getBoundingClientRect().height,e.display_width-e.sticker_right_offset<2?n.style.cssText+=`\n            left: ${P(this,s,"f")+u}px;\n            top: ${P(this,a,"f")+Math.min(e.sticker_top_offset*P(this,r,"f").height/e.display_height,h)}px;\n          `:n.style.cssText+=`\n            left: ${P(this,s,"f")+Math.min(e.sticker_left_offset*P(this,r,"f").width/e.display_width,u)}px;\n            top: ${P(this,a,"f")+Math.min(e.sticker_top_offset*P(this,r,"f").height/e.display_height,h)}px;\n          `,l.style.visibility="visible",t.remove(),T(this,f,!1,"f")},t.src=L?i.url:i.url.replace(".webp",".gif"),t.style.visibility="hidden",{el:n,sei:e,width:0,height:0}})),m.set(this,(e=>{E.kg.info(`create img sticker, id: ${e.sticker_id}`);const t=new Image,n=P(this,c,"f").get(e.sticker_id);return this.container.append(t),t.onload=()=>{let i=P(this,r,"f").width,o=P(this,r,"f").height;const l=P(this,y,"f").call(this,n,t.getBoundingClientRect(),e);o-=l.height,i-=l.width,t.style.cssText="\n          transition: all .1s ease-in-out;\n          position: absolute;\n          z-index: 4;\n        ",e.display_width-e.sticker_right_offset<2?t.style.cssText+=`\n            left: ${P(this,s,"f")+i}px;\n            top: ${P(this,a,"f")+Math.min(e.sticker_top_offset*P(this,r,"f").height/e.display_height,o)}px;\n          `:t.style.cssText+=`\n            left: ${P(this,s,"f")+Math.min(e.sticker_left_offset*P(this,r,"f").width/e.display_width,i)}px;\n            top: ${P(this,a,"f")+Math.min(e.sticker_top_offset*P(this,r,"f").height/e.display_height,o)}px;\n          `,P(this,c,"f").set(e.sticker_id,Object.assign(Object.assign({},n),{width:t.width,height:t.height})),t.width=l.width,T(this,f,!1,"f")},t.src=L?n.url:n.url.replace(".webp",".gif"),{el:t,sei:e,width:0,height:0}})),this.batchUpdateStickerElement=()=>{P(this,l,"f").forEach(((e,t)=>{P(this,g,"f").call(this,t)}))},y.set(this,((e,t,n)=>{const i={width:0,height:0,top:0,left:0,borderLeft:0,borderRight:0,borderTop:0,borderBottom:0};if(i.height=P(this,r,"f").height*(n.sticker_bottom_offset-n.sticker_top_offset)/n.display_height/1.1,i.width=i.height*t.width/t.height,e.sticker_type===S.Text){const n=e,{top_margin:r,left_margin:o,right_margin:a,bottom_margin:s}=n.stretch,{top_margin:l,left_margin:c}=n.title;i.borderBottom=i.height/(s+r)*s,i.borderLeft=i.width/(o+a)*o,i.borderRight=i.width/(o+a)*a,i.borderTop=i.height/(s+r)*r,i.left=c*i.width/t.width,i.top=l*i.width/t.width}return i})),g.set(this,(e=>{const t=P(this,l,"f").get(e),n=P(this,c,"f").get(e);if(null!=t&&null!=n){const e=P(this,y,"f").call(this,n,{width:n.width,height:n.height},t.sei);let i=P(this,r,"f").width,o=P(this,r,"f").height;if(t.sei.sticker_type===S.Text){const r=n,a=t.el,s=a.firstElementChild;if(null==s)return void P(this,x,"f").call(this);const l=e.borderBottom+e.borderTop;s.style.fontSize=l.toString()+"px",s.innerText=String(t.sei.sticker_title);let c=s.getBoundingClientRect().width-e.borderRight+.5*e.height;c=c>0?c:0,a.style.cssText+=`\n          border-left-width: ${e.borderLeft}px;\n          border-right-width: ${e.borderRight}px;\n          border-top-width: ${e.borderTop}px;\n          border-bottom-width: ${e.borderBottom}px;\n          width: ${c}px;\n        `,s.style.cssText+=`\n          top: -${2.2*r.title.bottom_margin/r.height*(e.borderBottom+e.borderTop)}px;\n          color: ${t.sei.sticker_title_color};\n          left: -${3*r.title.right_margin/n.width*e.width-.3*e.height}px;\n        `,i=i-e.borderLeft-e.borderRight-c,o=o-e.borderBottom-e.borderTop-s.getBoundingClientRect().height}else t.el.width=e.width,o-=e.height,i-=e.width;t.el.style.cssText+="\n        display: block;\n      ",t.sei.display_width-t.sei.sticker_right_offset<2?t.el.style.cssText+=`\n          left: ${P(this,s,"f")+i}px;\n          top: ${P(this,a,"f")+Math.min(t.sei.sticker_top_offset*P(this,r,"f").height/t.sei.display_height,o)}px;\n        `:t.el.style.cssText+=`\n          left: ${P(this,s,"f")+Math.min(t.sei.sticker_left_offset*P(this,r,"f").width/t.sei.display_width,i)}px;\n          top: ${P(this,a,"f")+Math.min(t.sei.sticker_top_offset*P(this,r,"f").height/t.sei.display_height,o)}px;\n        `}})),w.set(this,(e=>M(this,void 0,void 0,(function*(){if(0===P(this,i,"f").width)return;if(!e.includes("LIVE_STICKER"))return;const t=JSON.parse(e);if(0===P(this,r,"f").width&&(P(this,_,"f").call(this,t.LIVE_STICKER[0]),this.batchUpdateStickerElement()),clearTimeout(P(this,h,"f")),0!==t.LIVE_STICKER.length){P(this,l,"f").forEach(((e,n)=>{var i;let r=!0;for(const e of t.LIVE_STICKER)e.sticker_id===n&&(r=!1);r&&(null===(i=e.el)||void 0===i||i.remove(),E.kg.info(`remove sticker id: ${e.sei.sticker_id}`),P(this,l,"f").delete(n))}));for(const e of t.LIVE_STICKER)if(P(this,l,"f").has(e.sticker_id)){const t=P(this,l,"f").get(e.sticker_id);(null==t?void 0:t.sei.hash)!==e.hash&&(null!=t?(P(this,l,"f").set(e.sticker_id,Object.assign(Object.assign({},t),{sei:e})),P(this,g,"f").call(this,e.sticker_id)):(E.kg.info(`2remove sticker id: ${e.sticker_id}`),P(this,l,"f").delete(e.sticker_id)))}else if(P(this,c,"f").has(e.sticker_id))P(this,p,"f").call(this,e);else{if(P(this,d,"f").includes(e.group_id))return;P(this,d,"f").push(e.group_id),P(this,C,"f").call(this,e.group_id,e).catch((e=>{E.kg.error(e)}))}}else P(this,x,"f").call(this)})))),b.set(this,(()=>{window.addEventListener("resize",P(this,k,"f")),document.addEventListener("fullscreenchange",P(this,k,"f")),P(this,u,"f").push((()=>{window.removeEventListener("resize",P(this,k,"f")),document.removeEventListener("fullscreenchange",P(this,k,"f"))}))})),this.calcDisplayInfo=()=>{if(null!=P(this,o,"f")){const e=this.container.getBoundingClientRect().height,t=this.container.getBoundingClientRect().width,n=P(this,i,"f").width,l=P(this,i,"f").height;e/l<t/n?(T(this,r,{width:e*n/l,height:e*n/l*P(this,o,"f").display_height/P(this,o,"f").display_width},"f"),T(this,a,P(this,r,"f").width*P(this,o,"f").display_height/P(this,o,"f").display_width*.2,"f"),T(this,s,(t-P(this,r,"f").width)/2,"f")):(T(this,s,0,"f"),T(this,r,{width:t,height:t*P(this,o,"f").display_height/P(this,o,"f").display_width},"f"),T(this,a,(e-P(this,r,"f").width/7*4)/2+P(this,r,"f").width/14,"f"))}},_.set(this,(e=>{T(this,o,e,"f"),null!=e&&this.calcDisplayInfo()})),this.destroy=()=>{P(this,x,"f").call(this),T(this,f,!1,"f"),P(this,u,"f").forEach((e=>e())),T(this,u,[],"f"),T(this,i,{width:0,height:0},"f"),T(this,r,{width:0,height:0},"f"),T(this,d,[],"f")},k.set(this,(()=>{this.calcDisplayInfo(),this.batchUpdateStickerElement()})),C.set(this,((e,t)=>M(this,void 0,void 0,(function*(){E.hj.disperse("/xlive/web-room/v1/stickers/getStickers",{scope:1e3*t.request_random_sec_range,expiresTime:performance.now()+1e3*t.request_random_sec_range}),(0,E.hj)(`/xlive/web-room/v1/stickers/getStickers?id=${e}`).then((e=>{for(const t of e.pic_stickers)P(this,c,"f").has(t.id)||P(this,c,"f").set(t.id,t);for(const t of e.text_stickers)P(this,c,"f").has(t.id)||(t.stretch.top_margin*=3,t.stretch.left_margin*=3,t.stretch.right_margin*=3,t.stretch.bottom_margin*=3,P(this,c,"f").set(t.id,t));P(this,p,"f").call(this,t)})).catch((e=>{E.kg.error(e)}))})))),x.set(this,(()=>{P(this,l,"f").forEach((({el:e})=>{null==e||e.remove()})),P(this,l,"f").clear()})),T(this,i,{width:0,height:0},"f"),T(this,r,{width:0,height:0},"f"),P(this,b,"f").call(this)}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap},577:(e,t,n)=>{"use strict";n.d(t,{T:()=>d});var i,r,o,a,s,l,c=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},u=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};let h=0;class d{constructor(e,t){this.video=e,this.opts=t,i.set(this,!1),r.set(this,[]),o.set(this,0),a.set(this,0),s.set(this,[]),this.getNeedSwitchLine=()=>c(this,i,"f"),this.destroy=()=>{c(this,s,"f").forEach((e=>e())),u(this,s,[],"f")},l.set(this,(e=>{let t=0;h=performance.now();const n=()=>{c(this,i,"f")?d.switchNum+=1:t=performance.now()},l=()=>{if(h+1e4>performance.now())return;if(0===t||c(this,a,"f")+5e3>=performance.now())return;const e={duration:performance.now()-t,waitingStartTime:t};c(this,r,"f").push(e),u(this,r,c(this,r,"f").filter((e=>(e.waitingStartTime+6e4<performance.now()&&u(this,o,c(this,o,"f")-e.duration,"f"),e.waitingStartTime+6e4>=performance.now()))),"f"),u(this,o,c(this,r,"f").reduce(((e,t)=>e+t.duration),0),"f"),(c(this,o,"f")>8e3||c(this,r,"f").length>=5)&&u(this,i,!0,"f")},f=()=>{u(this,a,performance.now(),"f")};e.addEventListener("playing",l),e.addEventListener("seeking",f),e.addEventListener("waiting",n),c(this,s,"f").push((()=>{e.removeEventListener("seeking",f),e.removeEventListener("playing",l),e.removeEventListener("waiting",n)}))})),d.switchNum+1!==this.opts.lineNum&&c(this,l,"f").call(this,e)}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,d.switchNum=0,d.lastSwitchTime=0},1073:(e,t,n)=>{"use strict";n.d(t,{G:()=>v});var i,r,o,a,s,l,c,u=n(163),h=n(2956),d=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},f=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},p=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};!function(e){e.Initialize="Initialize",e.Loading="Loading",e.Playing="Playing",e.Pause="Pause",e.Destroyed="Destroyed"}(c||(c={}));class v{constructor(){i.set(this,c.Destroyed),r.set(this,null),o.set(this,void 0),a.set(this,new u.Nd),s.set(this,void 0),this.on=p(this,a,"f").on,this.once=p(this,a,"f").once,this.emit=(e,...t)=>{[h.tw.VideoInfo].includes(e)||p(this,s,"f").debug(`video emit: ${e}, handlers count: ${p(this,a,"f").getHandlers(e).size}`),p(this,a,"f").emit(e,...t)},this.init=(e,t=0)=>d(this,void 0,void 0,(function*(){null==window.BLWLitePlayer&&(yield(0,u.ve)("https://activity.hdslb.com/blackboard/static/20230331/3d1800776659bb31c053477bad97dc6e/40BlqHHKgR.js")),f(this,r,new window.BLWLitePlayer(p(this,o,"f")),"f"),yield p(this,r,"f").init({type:window.BLWLitePlayer.TYPES.DASH,url:e,enableHEVC:!0,enableAV1:!0,defaultVideoQuality:t}).catch((()=>{this.emit(h.tw.Error)})),p(this,l,"f").call(this)})),this.play=()=>d(this,void 0,void 0,(function*(){if(p(this,s,"f").info("video play"),null!=p(this,o,"f")&&p(this,i,"f")!==c.Playing)try{yield p(this,o,"f").play(),f(this,i,c.Playing,"f")}catch(e){if("NotAllowedError"!==e.name)return;p(this,s,"f").warn("try mute play"),p(this,o,"f").muted=!0;try{yield p(this,o,"f").play(),f(this,i,c.Playing,"f"),this.emit(h.tw.MutePlay)}catch(e){p(this,s,"f").warn("can't auto play"),f(this,i,c.Pause,"f"),this.emit(h.tw.NotAutoPlay)}}})),this.pause=()=>{p(this,s,"f").info("video pause"),null!=p(this,o,"f")&&p(this,i,"f")===c.Playing&&(p(this,o,"f").pause(),f(this,i,c.Pause,"f"))},this.volume=e=>{p(this,s,"f").info(`video setVolume(${e})`),null!=p(this,o,"f")&&(p(this,o,"f").volume=(0,u.QV)(e,2))},this.mute=e=>{p(this,o,"f").muted=e},this.seek=e=>d(this,void 0,void 0,(function*(){var t;null===(t=p(this,r,"f"))||void 0===t||t.seek(e).catch((e=>console.error(e)))})),l.set(this,(()=>{var e,t,n,o,a,l,u,d,v;null===(e=p(this,r,"f"))||void 0===e||e.on(window.BLWLitePlayer.EVENTS.PLAYING,(()=>{this.emit(h.tw.Play)})),null===(t=p(this,r,"f"))||void 0===t||t.on(window.BLWLitePlayer.EVENTS.PAUSE,(()=>{this.emit(h.tw.Pause)})),null===(n=p(this,r,"f"))||void 0===n||n.on(window.BLWLitePlayer.EVENTS.REBUFFERING,(()=>{this.emit(h.tw.WaitStart)})),null===(o=p(this,r,"f"))||void 0===o||o.on(window.BLWLitePlayer.EVENTS.REBUFFERING_END,(()=>{this.emit(h.tw.WaitEnd)})),null===(a=p(this,r,"f"))||void 0===a||a.on(window.BLWLitePlayer.EVENTS.INITIALIZED,(()=>{f(this,i,c.Initialize,"f"),this.emit(h.tw.LoadStart)})),null===(l=p(this,r,"f"))||void 0===l||l.on(window.BLWLitePlayer.EVENTS.CANPLAY,(()=>{this.emit(h.tw.FirstFrame)})),null===(u=p(this,r,"f"))||void 0===u||u.on(window.BLWLitePlayer.EVENTS.ENDED,(()=>{this.emit(h.tw.Ended)})),null===(d=p(this,r,"f"))||void 0===d||d.on(window.BLWLitePlayer.EVENTS.ERROR,(()=>{this.emit(h.tw.Error)})),null===(v=p(this,r,"f"))||void 0===v||v.on(window.BLWLitePlayer.EVENTS.CANPLAY,(()=>{this.play().catch((e=>p(this,s,"f").warn(e)))}))})),f(this,i,c.Loading,"f"),f(this,o,function(){const e=document.createElement("video");return e.id=`video-${Math.random().toString().slice(2)}`,e.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  ",e.volume=.9,e.autoplay=!0,e.setAttribute("webkit-playsinline","true"),e.setAttribute("playsinline","true"),e}(),"f"),f(this,s,new Proxy(u.kg,{get:(e,t)=>["debug","info","warn","error"].includes(t)?n=>{e[t](n)}:e[t]}),"f")}getVideoEl(){return p(this,o,"f")}removeVideoEl(){p(this,o,"f").remove()}getVideoInfo(){return{}}capturePic(e,t){return function(e,t="image/jpeg",n=.8){var i;const r=document.createElement("canvas");return r.width=e.videoWidth,r.height=e.videoHeight,null===(i=r.getContext("2d"))||void 0===i||i.drawImage(e,0,0,r.width,r.height),r.toDataURL(t,n)}(p(this,o,"f"),e,t)}destroy(e=!1){var t;if(e||this.removeVideoEl(),p(this,i,"f")!==c.Destroyed){f(this,i,c.Destroyed,"f"),p(this,s,"f").info(`dashPlayer destroyed, holdLastFrame: ${e.toString()}`),p(this,o,"f").pause();try{null===(t=p(this,r,"f"))||void 0===t||t.destroy()}catch(e){u.kg.error("corePlayer destroy error!!")}this.emit(h.tw.Destroyed),p(this,a,"f").destroy(),f(this,i,c.Destroyed,"f")}}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap},7707:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,f:()=>S});var i,r,o,a,s,l,c,u,h,d,f,p,v=n(1073),m=n(6080),y=n(163),g=n(4870),w=n(109),b=n(7377),_=n(2956),k=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},C=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},x=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};!function(e){e[e.Preround=-1]="Preround",e[e.Failed=-2]="Failed",e[e.Nonenabled=-3]="Nonenabled"}(p||(p={}));class S{constructor(e,t){i.set(this,""),r.set(this,null),o.set(this,void 0),a.set(this,void 0),s.set(this,new y.Nd),this.on=x(this,s,"f").on,this.emit=x(this,s,"f").emit,l.set(this,[]),c.set(this,null),u.set(this,""),h.set(this,!1),this.getVideoEl=()=>{var e;return null===(e=x(this,r,"f"))||void 0===e?void 0:e.getVideoEl()},this.getPlayerInfo=()=>{var e,t;return{guid:x(this,i,"f"),playingStatus:!(null!==(t=null===(e=x(this,r,"f"))||void 0===e?void 0:e.getVideoEl().paused)&&void 0!==t&&t),playSrc:x(this,u,"f"),quality:"0",timeShift:0,streamName:"",qualityCandidates:[]}},this.play=()=>{var e;null===(e=x(this,r,"f"))||void 0===e||e.play().catch((()=>{}))},this.pause=()=>{var e;null===(e=x(this,r,"f"))||void 0===e||e.pause()},this.volume=e=>{var t;null===(t=x(this,r,"f"))||void 0===t||t.volume(e)},this.mute=e=>{var t;null===(t=x(this,r,"f"))||void 0===t||t.mute(e)},d.set(this,(()=>k(this,void 0,void 0,(function*(){var e,t;if(x(this,h,"f"))return;null===(e=x(this,r,"f"))||void 0===e||e.destroy();const n=(0,y.V_)(x(this,o,"f")),m=yield function(e){return k(this,void 0,void 0,(function*(){const t=yield(0,y.hj)(`/live/getRoundPlayVideo?room_id=${e}&a=${Date.now()}&type=flv`);if(Object.values(p).includes(t.cid))return{play_time:t.play_time,cid:t.cid,bvid:t.bvid,title:t.title};if(t.cid<=0)throw new Error(`getRoundPlayVideo result parse failed: ${JSON.stringify(t)}`);return{play_time:t.play_time,cid:t.cid,bvid:t.bvid,title:t.title}}))}(x(this,a,"f").roomId);if(n(),m.cid===p.Failed)return;if(m.cid<=0){let e;return m.cid===p.Nonenabled&&(e=b.default.ErrorCode.RoomUnSettingRound),y.kg.warn(`exit round cause: ${p[m.cid]}`),this.emit("failed",m.cid,m.play_time,e),void this.destroy()}this.emit(y.n4.StartPlayRound,m);const{dash:S}=yield E(m.cid,m.bvid,x(this,a,"f").userId);if(null==S)throw b.default.error(b.default.ErrorCode.RoomRoundNotExistDash,"dash url is not exist"),new Error("dash url is not exist");if(C(this,r,new v.G,"f"),x(this,r,"f").init(S,0===x(this,a,"f").userId?0:80).then((()=>{var e;null===(e=x(this,r,"f"))||void 0===e||e.seek(m.play_time).catch((e=>{y.kg.error(e)}))})).catch((e=>{y.kg.error(e)})),x(this,h,"f"))return;C(this,i,(0,y.Vj)(),"f"),C(this,u,JSON.stringify(S),"f"),x(this,l,"f").forEach((e=>e())),C(this,l,[],"f"),x(this,l,"f").push(x(this,f,"f").call(this,m.title),(0,w.Km)(this.ctrl,x(this,r,"f")),(0,w.AO)(x(this,r,"f"),x(this,o,"f"),x(this,c,"f")),(0,w.dx)(x(this,r,"f"),this.ctrl),(0,w._B)(x(this,r,"f"),this.ctrl),y.Nd.forwardEvent(x(this,r,"f"),x(this,s,"f"),[_.tw.Play,_.tw.Pause,_.tw.LoadStart,_.tw.MetaData,_.tw.VideoInfo,_.tw.FirstFrame,_.tw.WaitEnd,_.tw.WaitStart])),x(this,r,"f").once(_.tw.Destroyed,(()=>{this.emit(_.tw.Destroyed)}));let M=null;const T=()=>k(this,void 0,void 0,(function*(){let e;try{e=(0,y.V_)(x(this,o,"f")),yield(0,g.OU)(m.bvid,4),null==e||e()}catch(t){null==e||e()}x(this,d,"f").call(this).catch((e=>{y.kg.error(e),b.default.error(b.default.ErrorCode.RoomEnterRoundError,e)})),null==M||M.remove()}));x(this,r,"f").once(_.tw.Ended,T),x(this,r,"f").once(_.tw.Error,T);const P=x(this,r,"f").getVideoEl();x(this,r,"f").once(_.tw.FirstFrame,(()=>{M=(0,_.Qp)(P)})),null===(t=x(this,r,"f"))||void 0===t||t.removeVideoEl(),x(this,o,"f").appendChild(P)})))),f.set(this,(e=>{var t;const n="web-player-round-title";null===(t=document.querySelector(`.${n}`))||void 0===t||t.remove();const i=document.createElement("div");return i.classList.add(n),i.textContent=e,i.style.cssText="\n      z-index: 2;\n      position: absolute;\n      right: 20px;\n      bottom: 20px;\n      pointer-events: none;\n      color: #aaa;\n      font-size: 14px;\n    ",x(this,o,"f").appendChild(i),()=>{i.remove()}})),this.blockStream=()=>{(0,g.zd)(x(this,r,"f"),(()=>{this.emit(_.tw.Play)}))},y.kg.info("enter round"),C(this,o,e,"f"),C(this,a,t,"f"),this.ctrl=new m.Z(x(this,o,"f"),{userId:x(this,a,"f").userId,isMobile:!1,enableCtrlUI:x(this,a,"f").enableCtrlUI}),x(this,d,"f").call(this).catch((e=>{y.kg.error(e),b.default.error(b.default.ErrorCode.RoomEnterRoundError,e)})),this.ctrl.onRefresh((()=>{x(this,d,"f").call(this).catch((e=>{y.kg.error(e),b.default.error(b.default.ErrorCode.RoomEnterRoundError,e)}))}))}setTitlePageImg(e){C(this,c,e,"f")}capturePic(e,t){var n,i;return null!==(i=null===(n=x(this,r,"f"))||void 0===n?void 0:n.capturePic(e,t))&&void 0!==i?i:null}destroy(e=!1){var t;x(this,h,"f")||(C(this,h,!0,"f"),y.kg.info(`round player destroy, holdLastFrame: ${String(e)}`),null===(t=x(this,r,"f"))||void 0===t||t.destroy(e),x(this,l,"f").forEach((e=>e())),C(this,l,[],"f"),this.ctrl.destroy(),x(this,s,"f").destroy())}}i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;const E=(e,t,n)=>k(void 0,void 0,void 0,(function*(){return yield(0,y.hj)(`https://api.bilibili.com/x/player/playurl?cid=${e}&bvid=${t}&fnval=16&platform=web`)}))},505:(e,t,n)=>{"use strict";n.d(t,{Bs:()=>s,Dn:()=>o.D,Gf:()=>r.G,R_:()=>a.R,fe:()=>o.f,pc:()=>r.p});var i=n(2956),r=n(6523),o=n(7707),a=n(6080);const s=i.tw},2517:(e,t,n)=>{"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}(this,n)}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function y(){}n.d(t,{Z:()=>Nn});var g=function(e){return e};function w(e){return e()}function b(){return Object.create(null)}function _(e){e.forEach(w)}function k(e){return"function"==typeof e}function C(e,t){return e!=e?t==t:e!==t||e&&"object"===i(e)||"function"==typeof e}function x(e,t,n,i){return e[1]&&i?function(e,t){for(var n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function S(e){return null==e?"":e}function E(e){var t="string"==typeof e&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}var M="undefined"!=typeof window,T=M?function(){return window.performance.now()}:function(){return Date.now()},P=M?function(e){return requestAnimationFrame(e)}:y,L=new Set;function I(e){L.forEach((function(t){t.c(e)||(L.delete(t),t.f())})),0!==L.size&&P(I)}function A(e,t){e.appendChild(t)}function D(e,t,n){var i=O(e);if(!i.getElementById(t)){var r=j("style");r.id=t,r.textContent=n,R(i,r)}}function O(e){if(!e)return document;var t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function B(e){var t=j("style");return R(O(e),t),t.sheet}function R(e,t){return A(e.head||e,t),t.sheet}function $(e,t,n){e.insertBefore(t,n||null)}function V(e){e.parentNode&&e.parentNode.removeChild(e)}function F(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function j(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function U(){return H(" ")}function N(){return H("")}function W(e,t,n,i){return e.addEventListener(t,n,i),function(){return e.removeEventListener(t,n,i)}}function z(e){return function(t){return t.preventDefault(),e.call(this,t)}}function q(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Z(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function K(e,t){e.value=null==t?"":t}function Q(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Y(e,t,n){e.classList[n?"add":"remove"](t)}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.bubbles,r=void 0!==i&&i,o=n.cancelable,a=void 0!==o&&o,s=document.createEvent("CustomEvent");return s.initCustomEvent(e,r,a,t),s}var J,ee=new Map,te=0;function ne(e,t,n,i,r,o,a){for(var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=16.666/i,c="{\n",u=0;u<=1;u+=l){var h=t+(n-t)*o(u);c+=100*u+"%{".concat(a(h,1-h),"}\n")}var d=c+"100% {".concat(a(n,1-n),"}\n}"),f="__svelte_".concat(function(e){for(var t=5381,n=e.length;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d),"_").concat(s),p=O(e),v=ee.get(p)||function(e,t){var n={stylesheet:B(t),rules:{}};return ee.set(e,n),n}(p,e),m=v.stylesheet,y=v.rules;y[f]||(y[f]=!0,m.insertRule("@keyframes ".concat(f," ").concat(d),m.cssRules.length));var g=e.style.animation||"";return e.style.animation="".concat(g?"".concat(g,", "):"").concat(f," ").concat(i,"ms linear ").concat(r,"ms 1 both"),te+=1,f}function ie(e){J=e}function re(){if(!J)throw new Error("Function called outside component initialization");return J}function oe(e){re().$$.on_mount.push(e)}function ae(e){re().$$.on_destroy.push(e)}var se=[],le=[],ce=[],ue=[],he=Promise.resolve(),de=!1;function fe(e){ce.push(e)}function pe(e){ue.push(e)}var ve,me=new Set,ye=0;function ge(){if(0===ye){var e=J;do{try{for(;ye<se.length;){var t=se[ye];ye++,ie(t),we(t.$$)}}catch(e){throw se.length=0,ye=0,e}for(ie(null),se.length=0,ye=0;le.length;)le.pop()();for(var n=0;n<ce.length;n+=1){var i=ce[n];me.has(i)||(me.add(i),i())}ce.length=0}while(se.length);for(;ue.length;)ue.pop()();de=!1,me.clear(),ie(e)}}function we(e){if(null!==e.fragment){e.update(),_(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(fe)}}function be(e,t,n){e.dispatchEvent(X("".concat(t?"intro":"outro").concat(n)))}var _e,ke=new Set;function Ce(){_e={r:0,c:[],p:_e}}function xe(){_e.r||_(_e.c),_e=_e.p}function Se(e,t){e&&e.i&&(ke.delete(e),e.i(t))}function Ee(e,t,n,i){if(e&&e.o){if(ke.has(e))return;ke.add(e),_e.c.push((function(){ke.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}var Me={duration:0};function Te(e,t,n,i){var r={direction:"both"},o=t(e,n,r),a=i?0:1,s=null,l=null,c=null;function u(){c&&function(e,t){var n=(e.style.animation||"").split(", "),i=n.filter(t?function(e){return e.indexOf(t)<0}:function(e){return-1===e.indexOf("__svelte")}),r=n.length-i.length;r&&(e.style.animation=i.join(", "),(te-=r)||P((function(){te||(ee.forEach((function(e){var t=e.stylesheet.ownerNode;t&&V(t)})),ee.clear())})))}(e,c)}function h(e,t){var n=e.b-a;return t*=Math.abs(n),{a,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function d(t){var n,i=o||Me,r=i.delay,d=void 0===r?0:r,f=i.duration,p=void 0===f?300:f,v=i.easing,m=void 0===v?g:v,w=i.tick,b=void 0===w?y:w,k=i.css,C={start:T()+d,b:t};t||(C.group=_e,_e.r+=1),s||l?l=C:(k&&(u(),c=ne(e,a,t,p,d,m,k)),t&&b(0,1),s=h(C,p),fe((function(){return be(e,t,"start")})),n=function(t){if(l&&t>l.start&&(s=h(l,p),l=null,be(e,s.b,"start"),k&&(u(),c=ne(e,a,s.b,s.duration,0,m,o.css))),s)if(t>=s.end)b(a=s.b,1-a),be(e,s.b,"end"),l||(s.b?u():--s.group.r||_(s.group.c)),s=null;else if(t>=s.start){var n=t-s.start;a=s.a+s.d*m(n/s.duration),b(a,1-a)}return!(!s&&!l)},0===L.size&&P(I),new Promise((function(e){L.add({c:n,f:e})})))}return{run:function(e){k(o)?(ve||(ve=Promise.resolve()).then((function(){ve=null})),ve).then((function(){o=o(r),d(e)})):d(e)},end:function(){u(),s=l=null}}}function Pe(e,t,n){var i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Le(e){e&&e.c()}function Ie(e,t,n,i){var r=e.$$,o=r.fragment,a=r.after_update;o&&o.m(t,n),i||fe((function(){var t,n=e.$$.on_mount.map(w).filter(k);e.$$.on_destroy?(t=e.$$.on_destroy).push.apply(t,p(n)):_(n),e.$$.on_mount=[]})),a.forEach(fe)}function Ae(e,t){var n,i,r,o=e.$$;null!==o.fragment&&(n=o.after_update,i=[],r=[],ce.forEach((function(e){return-1===n.indexOf(e)?i.push(e):r.push(e)})),r.forEach((function(e){return e()})),ce=i,_(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function De(e,t,n,i,r,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],l=J;ie(e);var c=e.$$={fragment:null,ctx:[],props:o,update:y,not_equal:r,bound:b(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:b(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(c.root);var u=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){var i=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&r(c.ctx[t],c.ctx[t]=i)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](i),u&&function(e,t){-1===e.$$.dirty[0]&&(se.push(e),de||(de=!0,he.then(ge)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),u=!0,_(c.before_update),c.fragment=!!i&&i(c.ctx),t.target){if(t.hydrate){var h=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(h),h.forEach(V)}else c.fragment&&c.fragment.c();t.intro&&Se(e.$$.fragment),Ie(e,t.target,t.anchor,t.customElement),ge()}ie(l)}var Oe=function(){function e(){r(this,e)}return a(e,[{key:"$destroy",value:function(){Ae(this,1),this.$destroy=y}},{key:"$on",value:function(e,t){if(!k(t))return y;var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}();function Be(e){var t=e-1;return t*t*t+1}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?0:n,r=t.duration,o=void 0===r?400:r,a=t.easing,s=void 0===a?g:a,l=+getComputedStyle(e).opacity;return{delay:i,duration:o,easing:s,css:function(e){return"opacity: ".concat(e*l)}}}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?0:n,r=t.duration,o=void 0===r?400:r,a=t.easing,s=void 0===a?Be:a,l=t.x,c=void 0===l?0:l,u=t.y,h=void 0===u?0:u,d=t.opacity,p=void 0===d?0:d,v=getComputedStyle(e),m=+v.opacity,y="none"===v.transform?"":v.transform,g=m*(1-p),w=f(E(c),2),b=w[0],_=w[1],k=f(E(h),2),C=k[0],x=k[1];return{delay:i,duration:o,easing:s,css:function(e,t){return"\n\t\t\ttransform: ".concat(y," translate(").concat((1-e)*b).concat(_,", ").concat((1-e)*C).concat(x,");\n\t\t\topacity: ").concat(m-g*t)}}}var Ve='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 2.5C5.61929 2.5 4.5 3.61929 4.5 5V19C4.5 20.3807 5.61929 21.5 7 21.5C8.38071 21.5 9.5 20.3807 9.5 19V5C9.5 3.61929 8.38071 2.5 7 2.5ZM17 2.5C15.6193 2.5 14.5 3.61929 14.5 5V19C14.5 20.3807 15.6193 21.5 17 21.5C18.3807 21.5 19.5 20.3807 19.5 19V5C19.5 3.61929 18.3807 2.5 17 2.5Z" fill="white"/></svg>',Fe='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.6249 9.6185C22.4583 10.677 22.4583 13.3232 20.6249 14.3816L9.74994 20.6603C7.91661 21.7188 5.62494 20.3957 5.62494 18.2788L5.62494 5.72139C5.62494 3.60444 7.91661 2.28134 9.74994 3.33982L20.6249 9.6185Z" fill="white"/></svg>',je='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4C4.89543 4 4 4.89543 4 6V12.5C4 13.0522 4.44772 13.5 5 13.5C5.55228 13.5 6 13.0522 6 12.5V6L12.5 6C13.0523 6 13.5 5.55229 13.5 5C13.5 4.44772 13.0523 4 12.5 4H6ZM20 11.5C20 10.9477 19.5523 10.5 19 10.5C18.4477 10.5 18 10.9477 18 11.5V18H11.5C10.9477 18 10.5 18.4477 10.5 19C10.5 19.5523 10.9477 20 11.5 20L18 20C19.1046 20 20 19.1045 20 18V11.5Z" fill="white"/></svg>',He='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 3C11.5 2.44772 11.0523 2 10.5 2C9.9477 2 9.49998 2.44772 9.49998 3V9.49998L2.99998 9.49998C2.4477 9.49998 1.99998 9.94769 1.99998 10.5C1.99998 11.0523 2.4477 11.5 2.99998 11.5L9.49998 11.5C10.6046 11.5 11.5 10.6045 11.5 9.49998L11.5 3ZM14.5 12.5C13.3954 12.5 12.5 13.3954 12.5 14.5L12.5 21C12.5 21.5522 12.9477 22 13.5 22C14.0523 22 14.5 21.5522 14.5 21L14.5 14.5L21 14.5C21.5523 14.5 22 14.0523 22 13.5C22 12.9477 21.5523 12.5 21 12.5L14.5 12.5Z" fill="white"/></svg>',Ue='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 5C9.48178 5 7.283 5.1281 5.73089 5.25397C4.6522 5.34144 3.81611 6.16547 3.72 7.23449C3.60607 8.50175 3.5 10.1729 3.5 12C3.5 13.8271 3.60607 15.4982 3.72 16.7655C3.81611 17.8345 4.6522 18.6586 5.73089 18.746C7.283 18.8719 9.48178 19 12 19C14.5185 19 16.7174 18.8719 18.2696 18.746C19.3481 18.6585 20.184 17.8347 20.2801 16.766C20.394 15.4993 20.5 13.8284 20.5 12C20.5 10.1716 20.394 8.50072 20.2801 7.234C20.184 6.16525 19.3481 5.34147 18.2696 5.25401C16.7174 5.12813 14.5185 5 12 5ZM5.60965 3.75888C7.19232 3.63053 9.43258 3.5 12 3.5C14.5677 3.5 16.8081 3.63056 18.3908 3.75891C20.1881 3.90467 21.6118 5.29473 21.7741 7.09968C21.8909 8.39885 22 10.116 22 12C22 13.884 21.8909 15.6011 21.7741 16.9003C21.6118 18.7053 20.1881 20.0953 18.3908 20.2411C16.8081 20.3694 14.5677 20.5 12 20.5C9.43258 20.5 7.19232 20.3695 5.60965 20.2411C3.81205 20.0954 2.38831 18.7049 2.22602 16.8998C2.10918 15.6002 2 13.8827 2 12C2 10.1173 2.10918 8.39982 2.22602 7.10017C2.38831 5.29507 3.81205 3.90465 5.60965 3.75888ZM9.50582 8.03601C9.52234 8.44989 9.20022 8.79881 8.78633 8.81533C8.20666 8.83848 7.72467 8.86384 7.37432 8.8844C7.3468 9.23937 7.31414 9.7246 7.2892 10.2889C7.27091 10.7028 6.92062 11.0234 6.50681 11.0051C6.093 10.9868 5.77237 10.6365 5.79066 10.2227C5.82948 9.34458 5.88637 8.65052 5.91657 8.31727C5.9609 7.82809 6.35372 7.44737 6.84098 7.41481C7.16305 7.39329 7.8313 7.35227 8.72649 7.31653C9.14038 7.3 9.48929 7.62212 9.50582 8.03601ZM15.2137 8.81533C14.7998 8.79881 14.4777 8.44989 14.4942 8.03601C14.5107 7.62212 14.8596 7.3 15.2735 7.31653C16.1687 7.35227 16.837 7.39329 17.159 7.41481C17.6463 7.44737 18.0391 7.82809 18.0834 8.31727C18.1136 8.65052 18.1705 9.34458 18.2093 10.2227C18.2276 10.6365 17.907 10.9868 17.4932 11.0051C17.0794 11.0234 16.7291 10.7028 16.7108 10.2889C16.6859 9.7246 16.6532 9.23937 16.6257 8.8844C16.2753 8.86384 15.7933 8.83848 15.2137 8.81533ZM9.50582 15.964C9.52234 15.5501 9.20022 15.2012 8.78633 15.1847C8.20666 15.1615 7.72467 15.1362 7.37432 15.1156C7.3468 14.7606 7.31414 14.2754 7.2892 13.7111C7.27091 13.2972 6.92062 12.9766 6.50681 12.9949C6.093 13.0132 5.77237 13.3635 5.79066 13.7773C5.82948 14.6554 5.88637 15.3495 5.91657 15.6827C5.9609 16.1719 6.35372 16.5526 6.84098 16.5852C7.16305 16.6067 7.8313 16.6477 8.72649 16.6835C9.14038 16.7 9.48929 16.3779 9.50582 15.964ZM15.2137 15.1847C14.7998 15.2012 14.4777 15.5501 14.4942 15.964C14.5107 16.3779 14.8596 16.7 15.2735 16.6835C16.1687 16.6477 16.837 16.6067 17.159 16.5852C17.6463 16.5526 18.0391 16.1719 18.0834 15.6827C18.1136 15.3495 18.1705 14.6554 18.2093 13.7773C18.2276 13.3635 17.907 13.0132 17.4932 12.9949C17.0794 12.9766 16.7291 13.2972 16.7108 13.7111C16.6859 14.2754 16.6532 14.7606 16.6257 15.1156C16.2753 15.1362 15.7933 15.1615 15.2137 15.1847Z" fill="white"/></svg>',Ne='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 5C9.48178 5 7.283 5.1281 5.73089 5.25397C4.6522 5.34144 3.81611 6.16547 3.72 7.23449C3.60607 8.50175 3.5 10.1729 3.5 12C3.5 13.8271 3.60607 15.4982 3.72 16.7655C3.81611 17.8345 4.6522 18.6586 5.73089 18.746C7.283 18.8719 9.48178 19 12 19C14.5185 19 16.7174 18.8719 18.2696 18.746C19.3481 18.6585 20.184 17.8347 20.2801 16.766C20.394 15.4993 20.5 13.8284 20.5 12C20.5 10.1716 20.394 8.50072 20.2801 7.234C20.184 6.16525 19.3481 5.34147 18.2696 5.25401C16.7174 5.12813 14.5185 5 12 5ZM5.60965 3.75888C7.19232 3.63053 9.43258 3.5 12 3.5C14.5677 3.5 16.8081 3.63056 18.3908 3.75891C20.1881 3.90467 21.6118 5.29473 21.7741 7.09968C21.8909 8.39885 22 10.116 22 12C22 13.884 21.8909 15.6011 21.7741 16.9003C21.6118 18.7053 20.1881 20.0953 18.3908 20.2411C16.8081 20.3694 14.5677 20.5 12 20.5C9.43258 20.5 7.19232 20.3695 5.60965 20.2411C3.81205 20.0954 2.38831 18.7049 2.22602 16.8998C2.10918 15.6002 2 13.8827 2 12C2 10.1173 2.10918 8.39982 2.22602 7.10017C2.38831 5.29507 3.81205 3.90465 5.60965 3.75888ZM18.0059 13.5399C18.0225 13.9538 17.7003 14.3027 17.2865 14.3192C16.7068 14.3424 16.2248 14.3677 15.8744 14.3883C15.8469 14.7433 15.8143 15.2285 15.7893 15.7928C15.771 16.2067 15.4207 16.5273 15.0069 16.509C14.5931 16.4907 14.2725 16.1404 14.2908 15.7266C14.3296 14.8485 14.3865 14.1544 14.4167 13.8212C14.461 13.332 14.8538 12.9513 15.3411 12.9187C15.6632 12.8972 16.3314 12.8562 17.2266 12.8204C17.6405 12.8039 17.9894 13.126 18.0059 13.5399ZM6.71354 14.3192C6.29966 14.3027 5.97754 13.9538 5.99406 13.5399C6.01059 13.126 6.3595 12.8039 6.77339 12.8204C7.66858 12.8562 8.33683 12.8972 8.6589 12.9187C9.14616 12.9513 9.53898 13.332 9.58331 13.8212C9.61351 14.1544 9.6704 14.8485 9.70922 15.7266C9.72751 16.1404 9.40688 16.4907 8.99307 16.509C8.57926 16.5273 8.22897 16.2067 8.21068 15.7928C8.18573 15.2285 8.15308 14.7433 8.12556 14.3883C7.77521 14.3677 7.29322 14.3424 6.71354 14.3192ZM18.0059 10.4601C18.0225 10.0462 17.7003 9.69729 17.2865 9.68076C16.7068 9.65762 16.2248 9.63225 15.8744 9.61169C15.8469 9.25673 15.8143 8.77149 15.7893 8.20715C15.771 7.79334 15.4207 7.47271 15.0069 7.491C14.5931 7.50929 14.2725 7.85958 14.2908 8.27339C14.3296 9.15151 14.3865 9.84557 14.4167 10.1788C14.461 10.668 14.8538 11.0487 15.3411 11.0813C15.6632 11.1028 16.3314 11.1438 17.2266 11.1796C17.6405 11.1961 17.9894 10.874 18.0059 10.4601ZM6.71354 9.68076C6.29966 9.69729 5.97754 10.0462 5.99406 10.4601C6.01059 10.874 6.3595 11.1961 6.77339 11.1796C7.66858 11.1438 8.33683 11.1028 8.6589 11.0813C9.14616 11.0487 9.53898 10.668 9.58331 10.1788C9.61351 9.84557 9.6704 9.15151 9.70922 8.27339C9.72751 7.85958 9.40688 7.50929 8.99307 7.491C8.57926 7.47271 8.22897 7.79334 8.21068 8.20715C8.18573 8.77149 8.15308 9.25673 8.12556 9.61169C7.77521 9.63225 7.29322 9.65762 6.71354 9.68076Z" fill="white"/></svg>',We='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 4.99805C9.48178 4.99805 7.283 5.12615 5.73089 5.25202C4.6522 5.33949 3.81611 6.16351 3.72 7.23253C3.60607 8.4998 3.5 10.171 3.5 11.998C3.5 13.8251 3.60607 15.4963 3.72 16.7636C3.8161 17.8325 4.65243 18.6566 5.73121 18.7441C6.85323 18.8351 8.3137 18.9273 9.98883 18.9714C10.4029 18.9823 10.7297 19.3268 10.7188 19.7408C10.7079 20.1549 10.3634 20.4817 9.94937 20.4708C8.24273 20.4259 6.75465 20.332 5.60997 20.2392C3.81247 20.0934 2.38832 18.7031 2.22602 16.8979C2.10918 15.5982 2 13.8808 2 11.998C2 10.1153 2.10918 8.39787 2.22602 7.09822C2.38831 5.29311 3.81205 3.90269 5.60965 3.75692C7.19232 3.62858 9.43258 3.49805 12 3.49805C14.5677 3.49805 16.8081 3.62861 18.3908 3.75696C20.1883 3.90273 21.6118 5.29327 21.7741 7.09811C21.8459 7.89664 21.9147 8.85236 21.9571 9.90718C21.9738 10.3211 21.6518 10.6701 21.2379 10.6867C20.824 10.7034 20.475 10.3813 20.4583 9.96745C20.4171 8.94094 20.3501 8.01018 20.2801 7.23242C20.184 6.16356 19.348 5.33951 18.2696 5.25205C16.7174 5.12618 14.5185 4.99805 12 4.99805ZM12.5 15.25C12.5 13.7312 13.7312 12.5 15.25 12.5H20.25C21.7688 12.5 23 13.7312 23 15.25V18.25C23 19.7688 21.7688 21 20.25 21H15.25C13.7312 21 12.5 19.7688 12.5 18.25V15.25ZM15.25 14C14.5596 14 14 14.5596 14 15.25V18.25C14 18.9404 14.5596 19.5 15.25 19.5H20.25C20.9404 19.5 21.5 18.9404 21.5 18.25V15.25C21.5 14.5596 20.9404 14 20.25 14H15.25ZM12.0303 11.9697C12.3232 12.2626 12.3232 12.7374 12.0303 13.0303C11.7374 13.3232 11.2626 13.3232 10.9697 13.0303L8.75 10.8107V12C8.75 12.4142 8.41421 12.75 8 12.75C7.58579 12.75 7.25 12.4142 7.25 12V9C7.25 8.58579 7.58579 8.25 8 8.25H11C11.4142 8.25 11.75 8.58579 11.75 9C11.75 9.41421 11.4142 9.75 11 9.75H9.81066L12.0303 11.9697Z" fill="white"/></svg>',ze='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 4.99805C9.48178 4.99805 7.283 5.12615 5.73089 5.25202C4.6522 5.33949 3.81611 6.16351 3.72 7.23253C3.60607 8.4998 3.5 10.171 3.5 11.998C3.5 13.8251 3.60607 15.4963 3.72 16.7636C3.8161 17.8325 4.65243 18.6566 5.73121 18.7441C6.85323 18.8351 8.3137 18.9273 9.98883 18.9714C10.4029 18.9823 10.7297 19.3268 10.7188 19.7408C10.7079 20.1549 10.3634 20.4817 9.94937 20.4708C8.24273 20.4259 6.75465 20.332 5.60997 20.2392C3.81247 20.0934 2.38832 18.7031 2.22602 16.8979C2.10918 15.5982 2 13.8808 2 11.998C2 10.1153 2.10918 8.39787 2.22602 7.09822C2.38831 5.29311 3.81205 3.90269 5.60965 3.75692C7.19232 3.62858 9.43258 3.49805 12 3.49805C14.5677 3.49805 16.8081 3.62861 18.3908 3.75696C20.1883 3.90273 21.6118 5.29327 21.7741 7.09811C21.8459 7.89664 21.9147 8.85236 21.9571 9.90718C21.9738 10.3211 21.6518 10.6701 21.2379 10.6867C20.824 10.7034 20.475 10.3813 20.4583 9.96745C20.4171 8.94094 20.3501 8.01018 20.2801 7.23242C20.184 6.16356 19.348 5.33951 18.2696 5.25205C16.7174 5.12618 14.5185 4.99805 12 4.99805ZM12.5 15.25C12.5 13.7312 13.7312 12.5 15.25 12.5H20.25C21.7688 12.5 23 13.7312 23 15.25V18.25C23 19.7688 21.7688 21 20.25 21H15.25C13.7312 21 12.5 19.7688 12.5 18.25V15.25ZM15.25 14C14.5596 14 14 14.5596 14 15.25V18.25C14 18.9404 14.5596 19.5 15.25 19.5H20.25C20.9404 19.5 21.5 18.9404 21.5 18.25V15.25C21.5 14.5596 20.9404 14 20.25 14H15.25ZM8.53033 8.46967C8.23744 8.17678 7.76256 8.17678 7.46967 8.46967C7.17678 8.76256 7.17678 9.23744 7.46967 9.53033L9.68934 11.75H8.5C8.08579 11.75 7.75 12.0858 7.75 12.5C7.75 12.9142 8.08579 13.25 8.5 13.25H11.5C11.9142 13.25 12.25 12.9142 12.25 12.5V9.5C12.25 9.08579 11.9142 8.75 11.5 8.75C11.0858 8.75 10.75 9.08579 10.75 9.5V10.6893L8.53033 8.46967Z" fill="white"/></svg>',qe='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.7803 4.28033C21.0732 3.98744 21.0732 3.51256 20.7803 3.21967C20.4874 2.92678 20.0126 2.92678 19.7197 3.21967L19.3955 3.54385C19.298 3.5596 19.2005 3.5819 19.1035 3.61101L18.4722 3.80038C18.0755 3.9194 17.8504 4.33751 17.9694 4.73426C17.987 4.79296 18.0111 4.8479 18.0408 4.89853L14.5 8.43934V7.86015C14.5 7.73328 14.5136 7.60929 14.5395 7.4896C14.6271 7.08475 14.3699 6.68557 13.965 6.598C13.5602 6.51043 13.161 6.76763 13.0734 7.17248C13.0252 7.39547 13 7.62575 13 7.86015V8.55014C13 8.92917 13.2812 9.24253 13.6463 9.29303L11 11.9393V7.11612C11 6.12251 10.3482 5.24653 9.39653 4.96101L4.89653 3.61101C3.45291 3.17793 2 4.25893 2 5.76612V18.234C2 19.0354 2.41077 19.7163 3.01251 20.1132C2.96922 20.3477 3.03828 20.5989 3.21967 20.7803C3.51256 21.0732 3.98744 21.0732 4.28033 20.7803L20.7803 4.28033ZM3.99841 18.9409L9.5 13.4393V7.11612C9.5 6.78492 9.28275 6.49293 8.96551 6.39775L4.46551 5.04775C3.9843 4.90339 3.5 5.26373 3.5 5.76612V18.234C3.5 18.5678 3.71379 18.8389 3.99841 18.9409ZM8.96551 17.6024L8.57759 17.7188L6.34038 19.956L9.39653 19.0391C10.3482 18.7536 11 17.8777 11 16.884V15.2964L9.5 16.7964V16.884C9.5 17.2152 9.28275 17.5072 8.96551 17.6024ZM13.75 13.4401C13.5063 13.4401 13.2897 13.3238 13.1527 13.1437L14.5 11.7964V12.6901C14.5 13.1043 14.1642 13.4401 13.75 13.4401ZM20.5 6.45878V5.79636L21.6058 4.69061C21.7375 4.78157 21.8413 4.91525 21.8938 5.0796C21.963 5.2964 22 5.52713 22 5.76612V6.45878C22 6.873 21.6642 7.20878 21.25 7.20878C20.8358 7.20878 20.5 6.873 20.5 6.45878ZM15.9473 4.55785C16.3441 4.43882 16.7622 4.66396 16.8812 5.06071C17.0002 5.45745 16.7751 5.87556 16.3784 5.99459L15.7471 6.18395C15.6256 6.22041 15.5108 6.26907 15.4036 6.32826C15.041 6.52847 14.5847 6.39682 14.3845 6.0342C14.1843 5.67159 14.3159 5.21533 14.6785 5.01512C14.8783 4.90484 15.0916 4.81457 15.3161 4.74722L15.9473 4.55785ZM20.5 9.22943C20.5 8.81521 20.8358 8.47943 21.25 8.47943C21.6642 8.47943 22 8.81521 22 9.22943V10.6148C22 11.029 21.6642 11.3648 21.25 11.3648C20.8358 11.3648 20.5 11.029 20.5 10.6148V9.22943ZM20.5 13.3854C20.5 12.9712 20.8358 12.6354 21.25 12.6354C21.6642 12.6354 22 12.9712 22 13.3854V14.7707C22 15.1849 21.6642 15.5207 21.25 15.5207C20.8358 15.5207 20.5 15.1849 20.5 14.7707V13.3854ZM13 15.45C13 15.0358 13.3358 14.7 13.75 14.7C14.1642 14.7 14.5 15.0358 14.5 15.45V16.14C14.5 16.2669 14.5136 16.3909 14.5395 16.5105C14.6271 16.9154 14.3699 17.3146 13.965 17.4022C13.5602 17.4897 13.161 17.2325 13.0734 16.8277C13.0252 16.6047 13 16.3744 13 16.14V15.45ZM20.5 17.5414C20.5 17.1272 20.8358 16.7914 21.25 16.7914C21.6642 16.7914 22 17.1272 22 17.5414V18.234C22 18.473 21.963 18.7037 21.8938 18.9206C21.7679 19.3152 21.3459 19.533 20.9513 19.407C20.5567 19.2811 20.3389 18.8591 20.4648 18.4645C20.4872 18.3943 20.5 18.3173 20.5 18.234V17.5414ZM14.6785 18.985C14.3159 18.7848 14.1843 18.3286 14.3845 17.9659C14.5847 17.6033 15.041 17.4717 15.4036 17.6719C15.5108 17.7311 15.6256 17.7797 15.7471 17.8162L16.3784 18.0056C16.7751 18.1246 17.0002 18.5427 16.8812 18.9394C16.7622 19.3362 16.3441 19.5613 15.9473 19.4423L15.3161 19.2529C15.0916 19.1856 14.8783 19.0953 14.6785 18.985ZM18.4722 20.1998C18.0755 20.0807 17.8504 19.6626 17.9694 19.2659C18.0884 18.8691 18.5065 18.644 18.9033 18.763L19.5345 18.9524C19.6143 18.9763 19.6916 18.9862 19.7654 18.9849C20.1795 18.9777 20.5211 19.3076 20.5284 19.7217C20.5356 20.1359 20.2057 20.4774 19.7916 20.4847C19.564 20.4886 19.3324 20.4578 19.1035 20.3891L18.4722 20.1998Z" fill="white"/></svg>',Ze='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.89653 3.61101C3.45291 3.17793 2 4.25893 2 5.76612V18.234C2 19.7412 3.45291 20.8222 4.89653 20.3891L9.39653 19.0391C10.3482 18.7536 11 17.8777 11 16.884V7.11612C11 6.12251 10.3482 5.24653 9.39653 4.96101L4.89653 3.61101ZM3.5 5.76612C3.5 5.26373 3.9843 4.90339 4.46551 5.04775L8.96551 6.39775C9.28275 6.49293 9.5 6.78492 9.5 7.11612V16.884C9.5 17.2152 9.28275 17.5072 8.96551 17.6024L4.46551 18.9524C3.9843 19.0968 3.5 18.7364 3.5 18.234V5.76612ZM19.7654 5.01525C19.6916 5.01396 19.6143 5.02382 19.5345 5.04775L18.9033 5.23712C18.5065 5.35614 18.0884 5.131 17.9694 4.73426C17.8504 4.33751 18.0755 3.9194 18.4722 3.80038L19.1035 3.61101C19.3324 3.54234 19.564 3.51151 19.7916 3.51548C20.2057 3.5227 20.5356 3.86429 20.5284 4.27844C20.5211 4.69259 20.1795 5.02247 19.7654 5.01525ZM15.9473 4.55785C16.3441 4.43882 16.7622 4.66396 16.8812 5.06071C17.0002 5.45745 16.7751 5.87556 16.3784 5.99459L15.7471 6.18395C15.6256 6.22041 15.5108 6.26907 15.4036 6.32826C15.041 6.52847 14.5847 6.39682 14.3845 6.0342C14.1843 5.67159 14.3159 5.21533 14.6785 5.01512C14.8783 4.90484 15.0916 4.81457 15.3161 4.74722L15.9473 4.55785ZM20.4648 5.53561C20.3389 5.141 20.5567 4.71903 20.9513 4.5931C21.3459 4.46718 21.7679 4.68499 21.8938 5.0796C21.963 5.2964 22 5.52713 22 5.76612V6.45878C22 6.873 21.6642 7.20878 21.25 7.20878C20.8358 7.20878 20.5 6.873 20.5 6.45878V5.76612C20.5 5.68283 20.4872 5.60588 20.4648 5.53561ZM13.0734 7.17248C13.161 6.76763 13.5602 6.51043 13.965 6.598C14.3699 6.68557 14.6271 7.08475 14.5395 7.4896C14.5136 7.60929 14.5 7.73328 14.5 7.86015V8.55014C14.5 8.96435 14.1642 9.30014 13.75 9.30014C13.3358 9.30014 13 8.96435 13 8.55014V7.86015C13 7.62575 13.0252 7.39547 13.0734 7.17248ZM20.5 9.22943C20.5 8.81521 20.8358 8.47943 21.25 8.47943C21.6642 8.47943 22 8.81521 22 9.22943V10.6148C22 11.029 21.6642 11.3648 21.25 11.3648C20.8358 11.3648 20.5 11.029 20.5 10.6148V9.22943ZM13 11.3101C13 10.8959 13.3358 10.5601 13.75 10.5601C14.1642 10.5601 14.5 10.8959 14.5 11.3101V12.6901C14.5 13.1043 14.1642 13.4401 13.75 13.4401C13.3358 13.4401 13 13.1043 13 12.6901V11.3101ZM20.5 13.3854C20.5 12.9712 20.8358 12.6354 21.25 12.6354C21.6642 12.6354 22 12.9712 22 13.3854V14.7707C22 15.1849 21.6642 15.5207 21.25 15.5207C20.8358 15.5207 20.5 15.1849 20.5 14.7707V13.3854ZM13 15.45C13 15.0358 13.3358 14.7 13.75 14.7C14.1642 14.7 14.5 15.0358 14.5 15.45V16.14C14.5 16.2669 14.5136 16.3909 14.5395 16.5105C14.6271 16.9154 14.3699 17.3146 13.965 17.4022C13.5602 17.4897 13.161 17.2325 13.0734 16.8277C13.0252 16.6047 13 16.3744 13 16.14V15.45ZM20.5 17.5414C20.5 17.1272 20.8358 16.7914 21.25 16.7914C21.6642 16.7914 22 17.1272 22 17.5414V18.234C22 18.473 21.963 18.7037 21.8938 18.9206C21.7679 19.3152 21.3459 19.533 20.9513 19.407C20.5567 19.2811 20.3389 18.8591 20.4648 18.4645C20.4872 18.3943 20.5 18.3173 20.5 18.234V17.5414ZM14.6785 18.985C14.3159 18.7848 14.1843 18.3286 14.3845 17.9659C14.5847 17.6033 15.041 17.4717 15.4036 17.6719C15.5108 17.7311 15.6256 17.7797 15.7471 17.8162L16.3784 18.0056C16.7751 18.1246 17.0002 18.5427 16.8812 18.9394C16.7622 19.3362 16.3441 19.5613 15.9473 19.4423L15.3161 19.2529C15.0916 19.1856 14.8783 19.0953 14.6785 18.985ZM18.4722 20.1998C18.0755 20.0807 17.8504 19.6626 17.9694 19.2659C18.0884 18.8691 18.5065 18.644 18.9033 18.763L19.5345 18.9524C19.6143 18.9763 19.6916 18.9862 19.7654 18.9849C20.1795 18.9777 20.5211 19.3076 20.5284 19.7217C20.5356 20.1359 20.2057 20.4774 19.7916 20.4847C19.564 20.4886 19.3324 20.4578 19.1035 20.3891L18.4722 20.1998Z" fill="white"/></svg>',Ge='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.08653 3.39235L8.28133 5.18624C7.5461 5.2058 6.76295 5.23027 5.93182 5.25963C4.13556 5.3231 2.64276 6.66421 2.38792 8.44343C2.22599 9.57393 2.14575 10.9534 2.14575 12.585C2.14575 14.5393 2.2609 16.2276 2.49273 17.6524C2.77397 19.3808 4.22464 20.6776 5.97357 20.7641C7.873 20.8581 10.3376 20.9051 12.5283 20.9051C12.908 20.9051 13.2158 20.5973 13.2158 20.2176C13.2158 19.8379 12.908 19.5301 12.5283 19.5301C10.3595 19.5301 7.91746 19.4836 6.04152 19.3908C4.94034 19.3363 4.02696 18.5198 3.84988 17.4316C3.63098 16.0863 3.52075 14.47 3.52075 12.585C3.52075 11.014 3.59733 9.69747 3.74903 8.63839C3.90948 7.51814 4.8494 6.67374 5.98038 6.63378C8.40317 6.54817 10.4129 6.50452 12.0085 6.50276C13.6041 6.50452 15.6138 6.54817 18.0366 6.63378C19.1676 6.67374 20.1075 7.51814 20.2679 8.63839C20.4196 9.69747 20.4732 11.0897 20.4732 12.6607C20.4732 13.0404 20.781 13.3482 21.1607 13.3482C21.5404 13.3482 21.8482 13.0404 21.8482 12.6607C21.8482 11.0291 21.791 9.57393 21.629 8.44343C21.3742 6.66421 19.8814 5.3231 18.0851 5.25963C17.1431 5.22635 16.2626 5.19936 15.4438 5.17867L16.7064 3.42188C17.0314 2.96967 16.9283 2.33961 16.4761 2.0146C16.0239 1.68959 15.3938 1.7927 15.0688 2.24491L13.1622 4.89769C13.1086 4.97233 13.0666 5.05182 13.0359 5.13398C12.7202 5.13065 12.4175 5.12864 12.1278 5.12796L12.1087 5.1277L12.0085 5.12776L11.9083 5.1277L11.8892 5.12796C11.4963 5.12888 11.0797 5.13224 10.6392 5.13805C10.6124 5.06532 10.5767 4.99456 10.5318 4.92722L8.76499 2.27444C8.45628 1.81094 7.8303 1.68546 7.3668 1.99416C6.90331 2.30287 6.77783 2.92886 7.08653 3.39235ZM11.2013 9.59793H12.5213C12.2683 9.08093 11.9933 8.62993 11.6963 8.23393L12.7413 7.88193C13.0493 8.32193 13.3243 8.78393 13.5553 9.28993L12.8623 9.59793H14.3803C14.6883 9.03693 14.9523 8.43193 15.1943 7.79393L16.2833 8.17893C16.0633 8.70693 15.8103 9.17993 15.5353 9.59793H16.8113V13.0393C15.1626 13.4113 13.8225 14.5979 13.2362 16.1539H10.8053V15.0759H13.4233V14.2289H11.2013V9.59793ZM8.49535 11.6769L8.34135 13.1619H10.5413C10.5413 15.0539 10.4753 16.3189 10.3653 16.9569C10.2333 17.5949 9.67235 17.9469 8.67135 18.0129C8.40449 18.0129 8.13763 17.9938 7.8529 17.9733L7.79135 17.9689L7.49435 16.9019C7.78035 16.9349 8.08835 16.9569 8.39635 16.9569C8.94635 16.9569 9.25435 16.7809 9.33135 16.4289C9.40835 16.0769 9.45235 15.3179 9.45235 14.1519H7.17535L7.48335 10.6979H9.34235V9.26793H7.27435V8.28893H10.4753V11.6769H8.49535ZM15.7993 12.4139V13.2719H14.5453V12.4139H15.7993ZM13.4233 13.2719V12.4139H12.2243V13.2719H13.4233ZM13.4233 11.4679H12.2243V10.5659H13.4233V11.4679ZM14.5453 10.5659V11.4679H15.7993V10.5659H14.5453ZM22.0624 18.0626C22.0624 20.2717 20.2716 22.0626 18.0624 22.0626C15.8533 22.0626 14.0624 20.2717 14.0624 18.0626C14.0624 15.8534 15.8533 14.0626 18.0624 14.0626C20.2716 14.0626 22.0624 15.8534 22.0624 18.0626ZM15.3256 18.0626C15.3256 19.5741 16.5509 20.7994 18.0624 20.7994C18.579 20.7994 19.0621 20.6563 19.4743 20.4076L15.7172 16.6511C15.4686 17.0632 15.3256 17.5462 15.3256 18.0626ZM20.4074 19.4746C20.6561 19.0623 20.7993 18.5792 20.7993 18.0626C20.7993 16.551 19.5739 15.3257 18.0624 15.3257C17.5456 15.3257 17.0623 15.469 16.6499 15.7179L20.4074 19.4746Z" fill="white"/></svg>',Ke='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.28142 5.18618L7.08662 3.39229C6.77792 2.9288 6.9034 2.30281 7.36689 1.99411C7.83039 1.6854 8.45638 1.81089 8.76508 2.27438L10.5319 4.92716C10.5768 4.9945 10.6125 5.06527 10.6393 5.13799C11.1174 5.13169 11.5675 5.12827 11.9896 5.12772L12 5.12765L12.0544 5.12766L12.1088 5.12765L12.1192 5.12772C12.4115 5.1281 12.7172 5.12986 13.0363 5.13299C13.067 5.05116 13.1088 4.97199 13.1623 4.89763L15.0689 2.24485C15.3939 1.79264 16.024 1.68953 16.4762 2.01454C16.9284 2.33955 17.0315 2.96961 16.7065 3.42182L15.4455 5.17635C16.2897 5.19733 17.2002 5.22507 18.1769 5.25958C19.9731 5.32304 21.3759 6.72997 21.6308 8.50919C21.7162 9.10539 21.7578 10.6458 21.7884 11.7781C21.7974 12.1111 21.8055 12.4088 21.8134 12.6368C21.8266 13.0162 21.5297 13.3345 21.1502 13.3477C20.7708 13.3609 20.4524 13.064 20.4392 12.6845C20.4313 12.4551 20.4233 12.1482 20.4143 11.8042C20.386 10.7137 20.348 9.25085 20.2696 8.70415C20.1092 7.5839 19.2593 6.67368 18.1283 6.63372C15.6823 6.5473 13.6573 6.50363 12.0544 6.50266C10.4515 6.50363 8.42652 6.5473 5.98047 6.63372C4.84949 6.67368 3.90958 7.51808 3.74912 8.63833C3.59742 9.69741 3.52084 11.014 3.52084 12.5849C3.52084 14.4699 3.63107 16.0862 3.84998 17.4315C4.02705 18.5198 4.94043 19.3363 6.04161 19.3908C7.91755 19.4836 9.30361 19.53 11.4724 19.53C11.8521 19.53 12.1599 19.8378 12.1599 20.2175C12.1599 20.5972 11.8521 20.905 11.4724 20.905C9.28169 20.905 7.87309 20.8581 5.97366 20.7641C4.22473 20.6776 2.77406 19.3807 2.49283 17.6524C2.26099 16.2276 2.14584 14.5392 2.14584 12.5849C2.14584 10.9534 2.22608 9.57387 2.38801 8.44338C2.64285 6.66416 4.13566 5.32304 5.93192 5.25958C6.76304 5.23021 7.5462 5.20575 8.28142 5.18618ZM12.5105 9.60362H11.1905V14.2346H13.4125V15.0816H10.7945V16.1596H13.4125L13.4152 16.8373C13.7755 16.8635 14.129 16.9998 14.425 17.2443H14.5345V16.1596H17.2295V15.0816H14.5345V14.2346H16.8005V9.60362H15.5245C15.7995 9.18562 16.0525 8.71262 16.2725 8.18462L15.1835 7.79962C14.9415 8.43762 14.6775 9.04262 14.3695 9.60362H12.8515L13.5445 9.29562C13.3135 8.78962 13.0385 8.32762 12.7305 7.88762L11.6855 8.23962C11.9825 8.63562 12.2575 9.08662 12.5105 9.60362ZM8.33053 13.1676L8.48453 11.6826H10.4645V8.29462H7.26353V9.27362H9.33153V10.7036H7.47253L7.16453 14.1576H9.44153C9.44153 15.3236 9.39753 16.0826 9.32053 16.4346C9.24353 16.7866 8.93553 16.9626 8.38553 16.9626C8.07753 16.9626 7.76953 16.9406 7.48353 16.9076L7.78053 17.9746L7.84208 17.979C8.12681 17.9995 8.39367 18.0186 8.66053 18.0186C9.66153 17.9526 10.2225 17.6006 10.3545 16.9626C10.4645 16.3246 10.5305 15.0596 10.5305 13.1676H8.33053ZM15.7885 13.2776V12.4196H14.5345V13.2776H15.7885ZM13.4125 12.4196V13.2776H12.2135V12.4196H13.4125ZM12.2135 11.4736H13.4125V10.5716H12.2135V11.4736ZM14.5345 11.4736V10.5716H15.7885V11.4736H14.5345Z" fill="white"/><path d="M21.6199 14.869C21.8969 14.561 22.3712 14.5359 22.6791 14.813C22.9591 15.0648 23.0052 15.4796 22.8032 15.7843L22.7351 15.8721L16.9306 22.3705C16.6648 22.666 16.2207 22.699 15.9154 22.4632L15.8359 22.3922L12.8796 19.3578C12.5905 19.0611 12.5967 18.5863 12.8934 18.2972C13.1631 18.0345 13.5801 18.0157 13.8708 18.2374L13.954 18.3111L16.351 20.771L21.6199 14.869Z" fill="#FF6699"/></svg>';function Qe(e){D(e,"svelte-11g6lf7",".tip-wrap.svelte-11g6lf7.svelte-11g6lf7{position:relative}.tip-wrap.svelte-11g6lf7:hover .tip.svelte-11g6lf7{display:block}.tip.svelte-11g6lf7.svelte-11g6lf7{line-height:21px;padding:6px 10px;word-break:keep-all;white-space:nowrap;display:none}")}function Ye(e){var t,n,i,r;return{c:function(){t=j("div"),n=H(e[0]),Z(t,"class","tip panel svelte-11g6lf7"),Z(t,"style",e[1])},m:function(e,i){$(e,t,i),A(t,n),r=!0},p:function(e,i){(!r||1&i)&&G(n,e[0]),(!r||2&i)&&Z(t,"style",e[1])},i:function(e){r||(fe((function(){r&&(i||(i=Te(t,$e,{duration:200,y:10},!0)),i.run(1))})),r=!0)},o:function(e){i||(i=Te(t,$e,{duration:200,y:10},!1)),i.run(0),r=!1},d:function(e){e&&V(t),e&&i&&i.end()}}}function Xe(e){var t,n,i,r,o,a,s=e[2]&&e[0]&&Ye(e),l=e[4].default,c=function(e,t,n,i){if(e){var r=x(e,t,n,null);return e[0](r)}}(l,e,e[3]);return{c:function(){t=j("div"),s&&s.c(),n=U(),i=j("div"),c&&c.c(),Z(t,"class","tip-wrap svelte-11g6lf7")},m:function(l,u){$(l,t,u),s&&s.m(t,null),A(t,n),A(t,i),c&&c.m(i,null),r=!0,o||(a=[W(t,"mouseenter",e[5]),W(t,"mouseleave",e[6])],o=!0)},p:function(e,i){var o=f(i,1)[0];e[2]&&e[0]?s?(s.p(e,o),5&o&&Se(s,1)):((s=Ye(e)).c(),Se(s,1),s.m(t,n)):s&&(Ce(),Ee(s,1,1,(function(){s=null})),xe()),c&&c.p&&(!r||8&o)&&function(e,t,n,i,r,o){if(r){var a=x(t,n,i,null);e.p(a,r)}}(c,l,e,e[3],r?function(e,t,n,i){return e[2],t.dirty}(l,e[3]):function(e){if(e.ctx.length>32){for(var t=[],n=e.ctx.length/32,i=0;i<n;i++)t[i]=-1;return t}return-1}(e[3]))},i:function(e){r||(Se(s),Se(c,e),r=!0)},o:function(e){Ee(s),Ee(c,e),r=!1},d:function(e){e&&V(t),s&&s.d(),c&&c.d(e),o=!1,_(a)}}}function Je(e,t,n){var i=t.$$slots,r=void 0===i?{}:i,o=t.$$scope,a=t.text,s=void 0===a?"":a,l=t.style,c=void 0===l?"":l,u=!1;return e.$$set=function(e){"text"in e&&n(0,s=e.text),"style"in e&&n(1,c=e.style),"$$scope"in e&&n(3,o=e.$$scope)},[s,c,u,o,r,function(){return n(2,u=!0)},function(){return n(2,u=!1)}]}var et=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Je,Xe,C,{text:0,style:1},Qe),i}return n}(),tt='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7815 4.28522C13.2722 3.89261 14 4.24201 14 4.87128V19.1286C14 19.7579 13.2722 20.1073 12.7815 19.7147L8.54026 16.3217C7.87534 15.7897 7.04918 15.4999 6.19766 15.4999H4.38145C4.03827 15.4999 3.79833 15.281 3.7531 15.0177C3.62929 14.2971 3.49999 13.2456 3.5 11.9999C3.50001 10.7543 3.6293 9.70279 3.7531 8.98216C3.79833 8.71888 4.03828 8.49994 4.38146 8.49994H6.19766C7.04917 8.49994 7.87534 8.21014 8.54026 7.6782L12.7815 4.28522ZM15.5 4.87128C15.5 2.98504 13.318 1.9351 11.8444 3.11392L7.60322 6.50689C7.20427 6.82606 6.70857 6.99994 6.19766 6.99994H4.38146C3.38521 6.99994 2.45632 7.67137 2.27476 8.72819C2.13963 9.51477 2.00001 10.6527 2 11.9999C1.99999 13.3472 2.13962 14.4851 2.27475 15.2717C2.45632 16.3285 3.3852 16.9999 4.38145 16.9999H6.19766C6.70857 16.9999 7.20427 17.1738 7.60322 17.493L11.8444 20.886C13.318 22.0648 15.5 21.0148 15.5 19.1286V4.87128ZM22.25 11.25H17.75C17.3358 11.25 17 11.5858 17 12C17 12.4142 17.3358 12.75 17.75 12.75H22.25C22.6642 12.75 23 12.4142 23 12C23 11.5858 22.6642 11.25 22.25 11.25ZM18.2803 14.7197L20.7803 17.2197C21.0732 17.5126 21.0732 17.9874 20.7803 18.2803C20.4874 18.5732 20.0126 18.5732 19.7197 18.2803L17.2197 15.7803C16.9268 15.4874 16.9268 15.0126 17.2197 14.7197C17.5126 14.4268 17.9874 14.4268 18.2803 14.7197ZM20.7803 6.78033C21.0732 6.48744 21.0732 6.01256 20.7803 5.71967C20.4874 5.42678 20.0126 5.42678 19.7197 5.71967L17.2197 8.21967C16.9268 8.51256 16.9268 8.98744 17.2197 9.28033C17.5126 9.57322 17.9874 9.57322 18.2803 9.28033L20.7803 6.78033Z" fill="white"/></svg>',nt='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7815 4.28522C13.2722 3.89261 14 4.24201 14 4.87128V19.1286C14 19.7579 13.2722 20.1073 12.7815 19.7147L8.54026 16.3217C7.87534 15.7897 7.04918 15.4999 6.19766 15.4999H4.38145C4.03827 15.4999 3.79833 15.281 3.7531 15.0177C3.62929 14.2971 3.49999 13.2456 3.5 11.9999C3.50001 10.7543 3.6293 9.70279 3.7531 8.98216C3.79833 8.71888 4.03828 8.49994 4.38146 8.49994H6.19766C7.04917 8.49994 7.87534 8.21014 8.54026 7.6782L12.7815 4.28522ZM15.5 4.87128C15.5 2.98504 13.318 1.9351 11.8444 3.11392L7.60322 6.50689C7.20427 6.82606 6.70857 6.99994 6.19766 6.99994H4.38146C3.38521 6.99994 2.45632 7.67137 2.27476 8.72819C2.13963 9.51477 2.00001 10.6527 2 11.9999C1.99999 13.3472 2.13962 14.4851 2.27475 15.2717C2.45632 16.3285 3.3852 16.9999 4.38145 16.9999H6.19766C6.70857 16.9999 7.20427 17.1738 7.60322 17.493L11.8444 20.886C13.318 22.0648 15.5 21.0148 15.5 19.1286V4.87128ZM23.2803 10.0303C23.5732 9.73743 23.5732 9.26256 23.2803 8.96967C22.9874 8.67677 22.5126 8.67678 22.2197 8.96967L20.25 10.9394L18.2803 8.96975C17.9874 8.67686 17.5126 8.67686 17.2197 8.96976C16.9268 9.26266 16.9268 9.73753 17.2197 10.0304L19.1893 12L17.2197 13.9696C16.9268 14.2625 16.9268 14.7373 17.2197 15.0302C17.5125 15.3231 17.9874 15.3231 18.2803 15.0303L20.25 13.0607L22.2197 15.0303C22.5126 15.3232 22.9874 15.3232 23.2803 15.0303C23.5732 14.7374 23.5732 14.2626 23.2803 13.9697L21.3107 12L23.2803 10.0303Z" fill="white"/></svg>',it=function(e,t,n){return Math.min(Math.max(Math.round(e),t),n)};function rt(e){var t;return{onEnter:function(n){clearTimeout(t),t=window.setTimeout((function(){n()}),e)},onLeave:function(n){clearTimeout(t),t=window.setTimeout((function(){n()}),e)}}}function ot(e){D(e,"svelte-crc1ty",".vertical-slider-wrap.svelte-crc1ty.svelte-crc1ty{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 6px;opacity:0.9;border-radius:8px;-webkit-box-sizing:border-box;box-sizing:border-box}.vertical-slider-wrap.svelte-crc1ty .number.svelte-crc1ty{-ms-flex-negative:0;flex-shrink:0;margin-bottom:5px;width:20px;text-align:center;color:#fff}.vertical-slider-wrap.svelte-crc1ty .slider-rail.svelte-crc1ty{width:2px;-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative;padding:0 4px;background:rgba(255, 255, 255, 0.2);background-clip:content-box;border-radius:2px;cursor:pointer}.vertical-slider-wrap.svelte-crc1ty .slider-handle.svelte-crc1ty{width:12px;height:12px;position:absolute;left:50%;z-index:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-radius:50%;background-color:#fff}.vertical-slider-wrap.svelte-crc1ty .slider-handle.top-trans.svelte-crc1ty{-webkit-transition:top 0.2s ease-in-out;transition:top 0.2s ease-in-out}.vertical-slider-wrap.svelte-crc1ty .slider-track.svelte-crc1ty{position:absolute;bottom:0;width:4px;margin-left:-1px;background-color:#fff;border-radius:8px}.vertical-slider-wrap.svelte-crc1ty .slider-track.height-trans.svelte-crc1ty{-webkit-transition:height 0.2s ease-in-out;transition:height 0.2s ease-in-out}")}function at(e){var t,n,i,r,o,a,s,l,c,u,h=Math.round(e[0])+"";return{c:function(){t=j("div"),n=j("div"),i=H(h),r=U(),o=j("div"),a=j("div"),s=U(),l=j("div"),Z(n,"class","number svelte-crc1ty"),Q(a,"top",e[4]+"px"),Z(a,"class","slider-handle svelte-crc1ty"),Y(a,"top-trans",!e[3]),Q(l,"height",e[0]+"%"),Z(l,"class","slider-track svelte-crc1ty"),Y(l,"height-trans",!e[3]),Z(o,"class","slider-rail svelte-crc1ty"),Z(t,"class","vertical-slider-wrap svelte-crc1ty")},m:function(h,d){$(h,t,d),A(t,n),A(n,i),A(t,r),A(t,o),A(o,a),e[9](a),A(o,s),A(o,l),e[10](o),c||(u=[W(a,"mousedown",e[7]),W(o,"mousedown",e[6]),W(t,"wheel",q(z(e[11])))],c=!0)},p:function(e,t){var n=f(t,1)[0];1&n&&h!==(h=Math.round(e[0])+"")&&G(i,h),16&n&&Q(a,"top",e[4]+"px"),8&n&&Y(a,"top-trans",!e[3]),1&n&&Q(l,"height",e[0]+"%"),8&n&&Y(l,"height-trans",!e[3])},i:y,o:y,d:function(n){n&&V(t),e[9](null),e[10](null),c=!1,_(u)}}}function st(e,t,n){var i,r,o,a,s=t.value,l=void 0===s?100:s,c=t.onChange,u=void 0===c?null:c,h=Number(null!==(r=getComputedStyle(document.documentElement).zoom)&&void 0!==r?r:1),d=!1,f=function(e){var t=it(e,0,100);u?u(t):n(0,l=t)};return e.$$set=function(e){"value"in e&&n(0,l=e.value),"onChange"in e&&n(8,u=e.onChange)},e.$$.update=function(){3&e.$$.dirty&&n(4,i=(100-l)/100*((null==o?void 0:o.clientHeight)-12))},[l,o,a,d,i,f,function(e){e.target!==a&&f(100-(e.clientY/h-o.getBoundingClientRect().top)/o.clientHeight*100)},function(e){var t=e.clientY/h,i=l;n(3,d=!0);var r=function(e){var n=t-e.clientY/h;f(i+n/o.clientHeight*100)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){n(3,d=!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}))},u,function(e){le[e?"unshift":"push"]((function(){n(2,a=e)}))},function(e){le[e?"unshift":"push"]((function(){n(1,o=e)}))},function(e){var t=e.deltaY;f(l-Math.ceil(t/10))}]}var lt=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,st,at,C,{value:0,onChange:8},ot),i}return n}();function ct(e){D(e,"svelte-qk4eah",".volume.svelte-qk4eah.svelte-qk4eah{position:relative}.volume.svelte-qk4eah .volume-control.svelte-qk4eah{height:110px}")}function ut(e){var t,n,i,r,o;return n=new lt({props:{value:e[0]?0:e[1],onChange:e[8]}}),{c:function(){t=j("div"),Le(n.$$.fragment),Z(t,"class","panel volume-control svelte-qk4eah")},m:function(a,s){$(a,t,s),Ie(n,t,null),i=!0,r||(o=W(t,"mousedown",e[9]),r=!0)},p:function(e,t){var i={};3&t&&(i.value=e[0]?0:e[1]),n.$set(i)},i:function(e){i||(Se(n.$$.fragment,e),i=!0)},o:function(e){Ee(n.$$.fragment,e),i=!1},d:function(e){e&&V(t),Ae(n),r=!1,o()}}}function ht(e){var t,n,i,r,o,a,s=(e[0]?nt:tt)+"",l=(e[2]||e[3])&&ut(e);return{c:function(){t=j("div"),l&&l.c(),n=U(),Z(i=j("span"),"class","icon"),Z(t,"class","volume svelte-qk4eah")},m:function(c,u){$(c,t,u),l&&l.m(t,null),A(t,n),A(t,i),i.innerHTML=s,r=!0,o||(a=[W(i,"click",e[10]),W(t,"mouseenter",e[11]),W(t,"mouseleave",e[12]),W(t,"wheel",q(z(e[13])))],o=!0)},p:function(e,o){var a=f(o,1)[0];e[2]||e[3]?l?(l.p(e,a),12&a&&Se(l,1)):((l=ut(e)).c(),Se(l,1),l.m(t,n)):l&&(Ce(),Ee(l,1,1,(function(){l=null})),xe()),(!r||1&a)&&s!==(s=(e[0]?nt:tt)+"")&&(i.innerHTML=s)},i:function(e){r||(Se(l),r=!0)},o:function(e){Ee(l),r=!1},d:function(e){e&&V(t),l&&l.d(),o=!1,_(a)}}}function dt(e,t,n){var i=t.onChange,r=void 0===i?null:i,o=t.disabled,a=void 0!==o&&o,s=t.value,l=void 0===s?100:s,c=!1,u=!1,h=function(e,t){if("disabled"===e)r?r({disabled:t,value:l}):n(0,a=t);else if("value"===e&&t!==l){var i=0===t;r?r({disabled:i,value:t}):(n(1,l=t),n(0,a=i))}},d=rt(100),f=d.onEnter,p=d.onLeave;return e.$$set=function(e){"onChange"in e&&n(7,r=e.onChange),"disabled"in e&&n(0,a=e.disabled),"value"in e&&n(1,l=e.value)},[a,l,c,u,h,f,p,r,function(e){return h("value",e)},function(){n(3,u=!0),document.addEventListener("mouseup",(function e(){n(3,u=!1),document.removeEventListener("mouseup",e)}))},function(){return h("disabled",!a)},function(){return f((function(){n(2,c=!0)}))},function(){return p((function(){n(2,c=!1)}))},function(e){var t=e.deltaY;h("value",it(l-Math.ceil(t/10),0,100))}]}var ft=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,dt,ht,C,{onChange:7,disabled:0,value:1},ct),i}return n}(),pt='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.32564 1.57564C4.09132 1.80995 4.09132 2.18985 4.32564 2.42417L7.90137 5.9999L4.32564 9.57564C4.09132 9.80995 4.09132 10.1899 4.32564 10.4242C4.55995 10.6585 4.93985 10.6585 5.17417 10.4242L8.99739 6.60094C9.32934 6.269 9.32933 5.73081 8.99739 5.39886L5.17417 1.57564C4.93985 1.34132 4.55995 1.34132 4.32564 1.57564Z" fill="white"/></svg>';function vt(e){D(e,"svelte-qjh8n9",".live-web-player-controller .control-area .left-area > *,.live-web-player-controller .control-area .right-area > *{margin:0 2px;border-radius:6px}.live-web-player-controller .control-area .left-area > *:hover,.live-web-player-controller .control-area .right-area > *:hover{background-color:rgba(255, 255, 255, 0.1)}.live-web-player-controller .control-area .left-area > *:first-child{margin-left:0px}.live-web-player-controller .control-area .left-area > *:last-child{margin-right:0px}.live-web-player-controller .control-area .right-area > *:first-child{margin-right:0px}.live-web-player-controller .control-area .right-area > *:last-child{margin-left:0px}@-webkit-keyframes svelte-qjh8n9-hhh{50%{width:28px;height:28px}100%{width:24px;height:24px}}@keyframes svelte-qjh8n9-hhh{50%{width:28px;height:28px}100%{width:24px;height:24px}}.switch.svelte-qjh8n9.svelte-qjh8n9{display:inline-block;width:32px;height:20px;border-radius:48px;background:rgba(255, 255, 255, 0.2);padding:3px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}.switch.svelte-qjh8n9 .btn.svelte-qjh8n9{width:14px;height:14px;border-radius:50%;background-color:#fff;margin-left:0px;-webkit-transition:margin-left 0.1s;transition:margin-left 0.1s}.switch.on.svelte-qjh8n9.svelte-qjh8n9{background:#ff6699}.switch.on.svelte-qjh8n9 .btn.svelte-qjh8n9{margin-left:12px}")}function mt(e){var t,n,i;return{c:function(){(t=j("div")).innerHTML='<div class="btn svelte-qjh8n9"></div>',Z(t,"class","switch svelte-qjh8n9"),Y(t,"on",e[0])},m:function(r,o){$(r,t,o),n||(i=W(t,"click",e[2]),n=!0)},p:function(e,n){1&f(n,1)[0]&&Y(t,"on",e[0])},i:y,o:y,d:function(e){e&&V(t),n=!1,i()}}}function yt(e,t,n){var i,r=t.value,o=(i=re(),function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cancelable,r=void 0!==n&&n,o=i.$$.callbacks[e];if(o){var a=X(e,t,{cancelable:r});return o.slice().forEach((function(e){e.call(i,a)})),!a.defaultPrevented}return!0});return e.$$set=function(e){"value"in e&&n(0,r=e.value)},[r,o,function(){o("click")}]}var gt=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,yt,mt,C,{value:0},vt),i}return n}();function wt(e){D(e,"svelte-s2ukfj",".quality-wrap.svelte-s2ukfj.svelte-s2ukfj{position:relative}.quality-wrap.svelte-s2ukfj .selected-qn.svelte-s2ukfj{font-size:14px}.quality-wrap.svelte-s2ukfj .panel.svelte-s2ukfj{padding:8px;min-height:94px;border-radius:8px}.quality-wrap.svelte-s2ukfj .line-wrap.svelte-s2ukfj{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:42px;line-height:1;margin:-8px -8px 6px;padding:0 20px;border-bottom:1px solid rgba(255, 255, 255, 0.1);cursor:pointer}.quality-wrap.svelte-s2ukfj .line-wrap .arrow-icon.svelte-s2ukfj{display:inline-block;width:12px;height:12px}.quality-wrap.svelte-s2ukfj .line-wrap .arrow-icon.left.svelte-s2ukfj{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.quality-wrap.svelte-s2ukfj .list-it.svelte-s2ukfj{padding:0 8px 0 12px;height:36px;line-height:36px;width:144px;cursor:pointer;white-space:nowrap;word-break:keep-all}.quality-wrap.svelte-s2ukfj .list-it.svelte-s2ukfj:hover{background-color:rgba(229, 233, 239, 0.1);border-radius:6px}.quality-wrap.svelte-s2ukfj .list-it.selected.svelte-s2ukfj{color:#ff6699}.quality-wrap.svelte-s2ukfj .video-enhance.svelte-s2ukfj{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default}.quality-wrap.svelte-s2ukfj .video-enhance .tip.svelte-s2ukfj{margin-left:2px;display:-webkit-box;display:-ms-flexbox;display:flex}.quality-wrap.svelte-s2ukfj .video-enhance .tip.svelte-s2ukfj svg{width:16px;height:16px}")}function bt(e,t,n){var i=e.slice();return i[28]=t[n],i}function _t(e,t,n){var i=e.slice();return i[25]=t[n],i}function kt(e){var t,n,i,r,o,a,s=null!=e[0]&&Ct(e);function l(e,t){return e[8]?Mt:Et}var c=l(e),u=c(e),h=!e[8]&&e[4].visbility&&Lt(e);return{c:function(){t=j("div"),s&&s.c(),n=U(),u.c(),i=U(),h&&h.c(),Z(t,"class","panel svelte-s2ukfj")},m:function(l,c){$(l,t,c),s&&s.m(t,null),A(t,n),u.m(t,null),A(t,i),h&&h.m(t,null),r=!0,o||(a=W(t,"mousemove",e[22]),o=!0)},p:function(e,r){null!=e[0]?s?s.p(e,r):((s=Ct(e)).c(),s.m(t,n)):s&&(s.d(1),s=null),c===(c=l(e))&&u?u.p(e,r):(u.d(1),(u=c(e))&&(u.c(),u.m(t,i))),!e[8]&&e[4].visbility?h?(h.p(e,r),272&r[0]&&Se(h,1)):((h=Lt(e)).c(),Se(h,1),h.m(t,null)):h&&(Ce(),Ee(h,1,1,(function(){h=null})),xe())},i:function(e){r||(Se(h),r=!0)},o:function(e){Ee(h),r=!1},d:function(e){e&&V(t),s&&s.d(),u.d(),h&&h.d(),o=!1,a()}}}function Ct(e){var t,n,i,r,o,a,s,l=e[8]&&xt(),c=!e[8]&&St();return{c:function(){t=j("div"),l&&l.c(),n=U(),i=j("span"),r=H(e[11]),o=U(),c&&c.c(),Z(t,"class","line-wrap svelte-s2ukfj")},m:function(u,h){$(u,t,h),l&&l.m(t,null),A(t,n),A(t,i),A(i,r),A(t,o),c&&c.m(t,null),a||(s=W(t,"click",e[18]),a=!0)},p:function(e,i){e[8]?l?l.p(e,i):((l=xt()).c(),l.m(t,n)):l&&(l.d(1),l=null),2048&i[0]&&G(r,e[11]),e[8]?c&&(c.d(1),c=null):c?c.p(e,i):((c=St()).c(),c.m(t,null))},d:function(e){e&&V(t),l&&l.d(),c&&c.d(),a=!1,s()}}}function xt(e){var t;return{c:function(){Z(t=j("span"),"class","arrow-icon left svelte-s2ukfj")},m:function(e,n){$(e,t,n),t.innerHTML=pt},p:y,d:function(e){e&&V(t)}}}function St(e){var t;return{c:function(){Z(t=j("span"),"class","arrow-icon right svelte-s2ukfj")},m:function(e,n){$(e,t,n),t.innerHTML=pt},p:y,d:function(e){e&&V(t)}}}function Et(e){for(var t,n=e[3],i=[],r=0;r<n.length;r+=1)i[r]=Tt(bt(e,n,r));return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=N()},m:function(e,n){for(var r=0;r<i.length;r+=1)i[r]&&i[r].m(e,n);$(e,t,n)},p:function(e,r){if(4106&r[0]){var o;for(n=e[3],o=0;o<n.length;o+=1){var a=bt(e,n,o);i[o]?i[o].p(a,r):(i[o]=Tt(a),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d:function(e){F(i,e),e&&V(t)}}}function Mt(e){for(var t,n=e[2],i=[],r=0;r<n.length;r+=1)i[r]=Pt(_t(e,n,r));return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=N()},m:function(e,n){for(var r=0;r<i.length;r+=1)i[r]&&i[r].m(e,n);$(e,t,n)},p:function(e,r){if(8197&r[0]){var o;for(n=e[2],o=0;o<n.length;o+=1){var a=_t(e,n,o);i[o]?i[o].p(a,r):(i[o]=Pt(a),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d:function(e){F(i,e),e&&V(t)}}}function Tt(e){var t,n,i,r,o,a=e[28].label+"";function s(){return e[20](e[28])}return{c:function(){t=j("div"),n=H(a),i=U(),Z(t,"class","list-it svelte-s2ukfj"),Y(t,"selected",e[28].value==e[1])},m:function(e,a){$(e,t,a),A(t,n),A(t,i),r||(o=W(t,"click",s),r=!0)},p:function(i,r){e=i,8&r[0]&&a!==(a=e[28].label+"")&&G(n,a),10&r[0]&&Y(t,"selected",e[28].value==e[1])},d:function(e){e&&V(t),r=!1,o()}}}function Pt(e){var t,n,i,r,o,a=e[25].label+"";function s(){return e[19](e[25])}return{c:function(){t=j("div"),n=H(a),i=U(),Z(t,"class","list-it svelte-s2ukfj"),Y(t,"selected",e[25].value==e[0])},m:function(e,a){$(e,t,a),A(t,n),A(t,i),r||(o=W(t,"click",s),r=!0)},p:function(i,r){e=i,4&r[0]&&a!==(a=e[25].label+"")&&G(n,a),5&r[0]&&Y(t,"selected",e[25].value==e[0])},d:function(e){e&&V(t),r=!1,o()}}}function Lt(e){var t,n,i,r,o,a,s,l,c,u,h=e[4].title+"";return s=new et({props:{text:e[4].desc,$$slots:{default:[It]},$$scope:{ctx:e}}}),(c=new gt({props:{value:e[4].status}})).$on("click",e[21]),{c:function(){t=j("div"),n=j("div"),i=j("div"),r=H(h),o=U(),a=j("div"),Le(s.$$.fragment),l=U(),Le(c.$$.fragment),Q(a,"margin-right","auto"),Z(n,"class","video-enhance svelte-s2ukfj"),Z(t,"class","list-it svelte-s2ukfj")},m:function(e,h){$(e,t,h),A(t,n),A(n,i),A(i,r),A(n,o),A(n,a),Ie(s,a,null),A(n,l),Ie(c,n,null),u=!0},p:function(e,t){(!u||16&t[0])&&h!==(h=e[4].title+"")&&G(r,h);var n={};16&t[0]&&(n.text=e[4].desc),1&t[1]&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);var i={};16&t[0]&&(i.value=e[4].status),c.$set(i)},i:function(e){u||(Se(s.$$.fragment,e),Se(c.$$.fragment,e),u=!0)},o:function(e){Ee(s.$$.fragment,e),Ee(c.$$.fragment,e),u=!1},d:function(e){e&&V(t),Ae(s),Ae(c)}}}function It(e){var t;return{c:function(){Z(t=j("div"),"class","tip svelte-s2ukfj")},m:function(e,n){$(e,t,n),t.innerHTML='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd"    d="M7.99967 2.3335C4.87006 2.3335 2.33301 4.87055 2.33301 8.00016C2.33301 11.1298 4.87006 13.6668 7.99967 13.6668C11.1293 13.6668 13.6663 11.1298 13.6663 8.00016C13.6663 4.87055 11.1293 2.3335 7.99967 2.3335ZM1.33301 8.00016C1.33301 4.31826 4.31778 1.3335 7.99967 1.3335C11.6816 1.3335 14.6663 4.31826 14.6663 8.00016C14.6663 11.6821 11.6816 14.6668 7.99967 14.6668C4.31778 14.6668 1.33301 11.6821 1.33301 8.00016ZM8.49959 10.4999C8.49959 10.776 8.27576 10.9999 7.99965 10.9999C7.72354 10.9999 7.49972 10.776 7.49972 10.4999C7.49972 10.2238 7.72354 10 7.99965 10C8.27576 10 8.49959 10.2238 8.49959 10.4999ZM7.1663 6.83333C7.1663 6.3731 7.5394 6 7.99963 6C8.45987 6 8.83297 6.3731 8.83297 6.83333C8.83297 7.05026 8.76564 7.19002 8.64931 7.33144C8.58438 7.41036 8.50443 7.48891 8.40254 7.58308C8.37958 7.6043 8.35482 7.62692 8.32884 7.65064L8.32864 7.65083C8.24761 7.72484 8.15478 7.80962 8.06796 7.89645C7.81367 8.15073 7.66167 8.39441 7.57987 8.63072C7.49954 8.8628 7.4996 9.0554 7.49963 9.16048L7.49963 9.16667C7.49963 9.44281 7.72349 9.66667 7.99963 9.66667C8.27578 9.66667 8.49963 9.44281 8.49963 9.16667C8.49963 9.07755 8.50133 9.0258 8.52486 8.95783C8.54853 8.88945 8.60747 8.77114 8.77506 8.60355C8.84451 8.5341 8.91292 8.47161 8.98917 8.40195C9.01853 8.37512 9.04906 8.34723 9.08127 8.31747C9.18982 8.21714 9.31137 8.10071 9.42158 7.96673C9.6555 7.68237 9.83297 7.32474 9.83297 6.83333C9.83297 5.82081 9.01216 5 7.99963 5C6.98711 5 6.1663 5.82081 6.1663 6.83333C6.1663 7.10948 6.39016 7.33333 6.6663 7.33333C6.94244 7.33333 7.1663 7.10948 7.1663 6.83333Z"    fill="#ffffff" /></svg>'},p:y,d:function(e){e&&V(t)}}}function At(e){var t,n,i,r,o,a,s,l=e[9]&&kt(e);return{c:function(){t=j("div"),l&&l.c(),n=U(),i=j("span"),r=H(e[10]),Z(i,"class","text selected-qn svelte-s2ukfj"),Z(t,"class","quality-wrap svelte-s2ukfj")},m:function(c,u){$(c,t,u),l&&l.m(t,null),A(t,n),A(t,i),A(i,r),o=!0,a||(s=[W(t,"mouseenter",e[23]),W(t,"mouseleave",e[24])],a=!0)},p:function(e,i){e[9]?l?(l.p(e,i),512&i[0]&&Se(l,1)):((l=kt(e)).c(),Se(l,1),l.m(t,n)):l&&(Ce(),Ee(l,1,1,(function(){l=null})),xe()),(!o||1024&i[0])&&G(r,e[10])},i:function(e){o||(Se(l),o=!0)},o:function(e){Ee(l),o=!1},d:function(e){e&&V(t),l&&l.d(),a=!1,_(s)}}}function Dt(e,t,n){var i,r,o,a,s=t.lineList,l=void 0===s?[]:s,c=t.qualityList,u=void 0===c?[]:c,h=t.line,d=void 0===h?"":h,f=t.quality,p=void 0===f?"":f,v=t.videoEnhanceConf,m=void 0===v?{title:"画质增强",visbility:!1,status:!1,highestQuality:250,desc:"仅对超清及以下生效"}:v,y=t.onChange,g=!1,w=!1,b=function(e){e!==p&&(y?y("quality",e):n(1,p=e))},_=function(e){e!==d&&(y?y("line",e):n(0,d=e))},k=rt(100),C=k.onEnter,x=k.onLeave,S=0,E=!1;return e.$$set=function(e){"lineList"in e&&n(2,l=e.lineList),"qualityList"in e&&n(3,u=e.qualityList),"line"in e&&n(0,d=e.line),"quality"in e&&n(1,p=e.quality),"videoEnhanceConf"in e&&n(4,m=e.videoEnhanceConf),"onChange"in e&&n(5,y=e.onChange)},e.$$.update=function(){65541&e.$$.dirty[0]&&n(11,i=null===n(16,o=l.find((function(e){var t=e.value;return d===t})))||void 0===o?void 0:o.label),131082&e.$$.dirty[0]&&n(10,r=null===n(17,a=u.find((function(e){var t=e.value;return p===t})))||void 0===a?void 0:a.label),192&e.$$.dirty[0]&&(E||clearTimeout(S))},[d,p,l,u,m,y,S,E,g,w,r,i,b,_,C,x,o,a,function(){n(8,g=!g),n(7,E=!0)},function(e){return _(e.value)},function(e){return b(e.value)},function(){var e;null===(e=y)||void 0===e||e("videoEnhance",!m.status)},function(){n(7,E=!1)},function(){return C((function(){w||(n(9,w=!0),y("qualityPanelShow",w))}))},function(){return x((function(){E?(clearTimeout(S),n(6,S=window.setTimeout((function(){n(9,w=!1),y("qualityPanelShow",w)}),2e3))):(n(9,w=!1),y("qualityPanelShow",w))}))}]}var Ot=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Dt,At,C,{lineList:2,qualityList:3,line:0,quality:1,videoEnhanceConf:4,onChange:5},wt,[-1,-1]),i}return n}();function Bt(e){D(e,"svelte-1c429zu",".setting.svelte-1c429zu.svelte-1c429zu{position:relative}.setting-panel.svelte-1c429zu.svelte-1c429zu{width:63px;padding:12px 20px}.player-type.svelte-1c429zu .label.svelte-1c429zu{margin-bottom:4px}.player-type.svelte-1c429zu label.svelte-1c429zu{white-space:nowrap;word-break:keep-all}")}function Rt(e){var t,n,i,r,o,a,s,l,c,u,h,d;return h=e[7][0],l={p:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(d=t).forEach((function(e){return h.push(e)}))},r:function(){d.forEach((function(e){return h.splice(h.indexOf(e),1)}))}},{c:function(){t=j("div"),n=j("div"),(i=j("div")).textContent="播放器",r=U(),o=j("input"),a=U(),(s=j("label")).textContent="HTML5",Z(i,"class","label svelte-1c429zu"),Z(o,"type","radio"),Z(o,"name","player-type"),Z(o,"id","html5"),o.__value="html5",o.value=o.__value,Z(s,"for","html5"),Z(s,"class","svelte-1c429zu"),Z(n,"class","player-type svelte-1c429zu"),Z(t,"class","panel setting-panel svelte-1c429zu"),l.p(o)},m:function(l,h){$(l,t,h),A(t,n),A(n,i),A(n,r),A(n,o),o.checked=o.__value===e[0],A(n,a),A(n,s),c||(u=[W(o,"click",e[5]),W(o,"change",e[6])],c=!0)},p:function(e,t){1&t&&(o.checked=o.__value===e[0])},d:function(e){e&&V(t),l.r(),c=!1,_(u)}}}function $t(e){var t,n,i,r,o,a=e[2]&&Rt(e);return{c:function(){t=j("div"),a&&a.c(),n=U(),Z(i=j("span"),"class","icon"),Z(t,"class","setting svelte-1c429zu")},m:function(s,l){$(s,t,l),a&&a.m(t,null),A(t,n),A(t,i),i.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">    \x3c!-- Generator: Sketch 63.1 (92452) - https://sketch.com --\x3e            <g id="终稿" stroke="none" stroke-width="1" fill-rule="evenodd" opacity="0.9">        <g id="图标切图" transform="translate(-439.000000, -120.000000)">            <g id="编组-3" transform="translate(421.000000, 56.000000)">                <g id="编组-7" transform="translate(18.000000, 64.000000)">                    <g id="icon_设置" transform="translate(7.000000, 7.000000)">                        <g id="Group-2-Copy-6">                            <g id="player_setting">                                <path                                    d="M12.1355728,17.8458478 C11.7659721,17.9061404 11.3866469,17.9374882 11,17.9374882 C10.6133531,17.9374882 10.2340279,17.9061404 9.86442721,17.8458478 L8.82459672,19.1089545 C8.51390489,19.4863592 7.97590114,19.5838288 7.55255402,19.3394092 L5.55571956,18.1865363 C5.13237243,17.9421167 4.94778172,17.427457 5.11927787,16.9696876 L5.67630577,15.4828303 L5.67630577,15.4828303 C5.15507014,14.8729186 4.73681236,14.1723594 4.44845574,13.408076 L2.83560101,13.1392668 C2.35341304,13.0589022 2,12.6417121 2,12.1528729 L2,9.84712709 C2,9.35828794 2.35341304,8.94109783 2.83560101,8.86073316 L4.39976975,8.60003837 L4.39976975,8.60003837 C4.67272638,7.82931533 5.07685543,7.12062603 5.58532098,6.50080638 L5.01100429,4.9678006 C4.83950815,4.51003124 5.02409886,3.99537151 5.44744598,3.75095193 L7.44428044,2.59807902 C7.86762757,2.35365945 8.40563132,2.45112906 8.71632314,2.82853376 L9.72466395,4.05338917 L9.72466395,4.05338917 C10.1381953,3.9772668 10.5644523,3.93748822 11,3.93748822 C11.4355477,3.93748822 11.8618047,3.9772668 12.2753361,4.05338917 L13.2836769,2.82853376 C13.5943687,2.45112906 14.1323724,2.35365945 14.5557196,2.59807902 L16.552554,3.75095193 C16.9759011,3.99537151 17.1604919,4.51003124 16.9889957,4.9678006 L16.414679,6.50080638 L16.414679,6.50080638 C16.9231446,7.12062603 17.3272736,7.82931533 17.6002302,8.60003837 L19.164399,8.86073316 C19.646587,8.94109783 20,9.35828794 20,9.84712709 L20,12.1528729 C20,12.6417121 19.646587,13.0589022 19.164399,13.1392668 L17.5515443,13.408076 L17.5515443,13.408076 C17.2631876,14.1723594 16.8449299,14.8729186 16.3236942,15.4828303 L16.8807221,16.9696876 C17.0522183,17.427457 16.8676276,17.9421167 16.4442804,18.1865363 L14.447446,19.3394092 C14.0240989,19.5838288 13.4860951,19.4863592 13.1754033,19.1089545 L12.1355728,17.8458478 L12.1355728,17.8458478 Z M11,15 C13.209139,15 15,13.209139 15,11 C15,8.790861 13.209139,7 11,7 C8.790861,7 7,8.790861 7,11 C7,13.209139 8.790861,15 11,15 Z M11,13 C9.8954305,13 9,12.1045695 9,11 C9,9.8954305 9.8954305,9 11,9 C12.1045695,9 13,9.8954305 13,11 C13,12.1045695 12.1045695,13 11,13 Z"                                    id="Combined-Shape"></path>                            </g>                        </g>                    </g>                </g>            </g>        </g>    </g></svg>',r||(o=[W(t,"mouseenter",e[8]),W(t,"mouseleave",e[9])],r=!0)},p:function(e,i){var r=f(i,1)[0];e[2]?a?a.p(e,r):((a=Rt(e)).c(),a.m(t,n)):a&&(a.d(1),a=null)},i:y,o:y,d:function(e){e&&V(t),a&&a.d(),r=!1,_(o)}}}function Vt(e,t,n){var i=t.playerType,r=void 0===i?"html5":i,o=t.onChange,a=!1,s=rt(100),l=s.onEnter,c=s.onLeave;return e.$$set=function(e){"playerType"in e&&n(0,r=e.playerType),"onChange"in e&&n(1,o=e.onChange)},[r,o,a,l,c,function(){return"html5"!==r&&o("playerType","html5")},function(){r=this.__value,n(0,r)},[[]],function(){return l((function(){n(2,a=!0)}))},function(){return c((function(){n(2,a=!1)}))}]}var Ft=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Vt,$t,C,{playerType:0,onChange:1},Bt),i}return n}();function jt(e){D(e,"svelte-w4hee4",".horizontal-slider-wrap.svelte-w4hee4.svelte-w4hee4{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.horizontal-slider-wrap.svelte-w4hee4 .number.svelte-w4hee4{width:31px;-ms-flex-negative:0;flex-shrink:0;margin-left:10px}.horizontal-slider-wrap.svelte-w4hee4 .slider-rail.svelte-w4hee4{height:2px;-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative;padding:5px 0;background:rgba(255, 255, 255, 0.2);background-clip:content-box;border-radius:10px;cursor:pointer}.horizontal-slider-wrap.svelte-w4hee4 .slider-handle.svelte-w4hee4{width:12px;height:12px;position:absolute;top:0;z-index:1;border-radius:50%;background-color:#fff}.horizontal-slider-wrap.svelte-w4hee4 .slider-handle.left-trans.svelte-w4hee4{-webkit-transition:left 0.2s ease-in-out;transition:left 0.2s ease-in-out}.horizontal-slider-wrap.svelte-w4hee4 .slider-track.svelte-w4hee4{position:absolute;height:4px;margin-top:-1px;background-color:#fff;border-radius:8px}.horizontal-slider-wrap.svelte-w4hee4 .slider-track.width-trans.svelte-w4hee4{-webkit-transition:width 0.2s ease-in-out;transition:width 0.2s ease-in-out}")}function Ht(e){var t,n,i,r,o,a,s,l,c,u,h=e[3](e[0])+"";return{c:function(){t=j("div"),n=j("div"),i=j("div"),r=U(),o=j("div"),a=U(),s=j("div"),l=H(h),Q(i,"left",e[7]+"px"),Z(i,"class","slider-handle svelte-w4hee4"),Y(i,"left-trans",!e[6]),Q(o,"width",(e[0]-e[2])/(e[1]-e[2])*100+"%"),Z(o,"class","slider-track svelte-w4hee4"),Y(o,"width-trans",!e[6]),Z(n,"class","slider-rail svelte-w4hee4"),Z(s,"class","number svelte-w4hee4"),Z(t,"class","horizontal-slider-wrap svelte-w4hee4")},m:function(h,d){$(h,t,d),A(t,n),A(n,i),e[13](i),A(n,r),A(n,o),e[14](n),A(t,a),A(t,s),A(s,l),c||(u=[W(i,"mousedown",e[10]),W(n,"mousedown",e[9]),W(t,"wheel",q(z(e[15])))],c=!0)},p:function(e,t){var n=f(t,1)[0];128&n&&Q(i,"left",e[7]+"px"),64&n&&Y(i,"left-trans",!e[6]),7&n&&Q(o,"width",(e[0]-e[2])/(e[1]-e[2])*100+"%"),64&n&&Y(o,"width-trans",!e[6]),9&n&&h!==(h=e[3](e[0])+"")&&G(l,h)},i:y,o:y,d:function(n){n&&V(t),e[13](null),e[14](null),c=!1,_(u)}}}function Ut(e,t,n){var i,r,o,a,s,l=Number(null!==(o=getComputedStyle(document.documentElement).zoom)&&void 0!==o?o:1),c=t.max,u=void 0===c?100:c,h=t.min,d=void 0===h?0:h,f=t.value,p=void 0===f?u:f,v=t.onChange,m=void 0===v?null:v,y=t.valueFormater,g=void 0===y?function(e){return e}:y,w=!1,b=function(e){var t=it(e,d,u);m?m(t):n(0,p=t)};return e.$$set=function(e){"max"in e&&n(1,u=e.max),"min"in e&&n(2,d=e.min),"value"in e&&n(0,p=e.value),"onChange"in e&&n(11,m=e.onChange),"valueFormater"in e&&n(3,g=e.valueFormater)},e.$$.update=function(){16&e.$$.dirty&&n(12,i=(null==a?void 0:a.clientWidth)-12),4103&e.$$.dirty&&n(7,r=(p-d)/(u-d)*i)},[p,u,d,g,a,s,w,r,b,function(e){e.target!==s&&b((e.clientX/l-a.getBoundingClientRect().left)/i*(u-d)+d-(u-d)/i*6)},function(e){var t=e.clientX/l,r=p;n(6,w=!0);var o=function(e){var n=e.clientX/l-t;b(r+n*((u-d)/i))};document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){n(6,w=!1),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)}))},m,i,function(e){le[e?"unshift":"push"]((function(){n(5,s=e)}))},function(e){le[e?"unshift":"push"]((function(){n(4,a=e)}))},function(e){var t=e.deltaY;b(p+Math.ceil(t/10))}]}var Nt=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Ut,Ht,C,{max:1,min:2,value:0,onChange:11,valueFormater:3},jt),i}return n}();function Wt(e){D(e,"svelte-p9soo8",".danmaku-control.panel.svelte-p9soo8.svelte-p9soo8{width:298px;padding:16px 12px;-webkit-box-sizing:border-box;box-sizing:border-box;left:auto;right:12px;-webkit-transform:translate(0, calc(-100% - 2px));transform:translate(0, calc(-100% - 2px))}.base-setting.svelte-p9soo8 .item.svelte-p9soo8{display:-webkit-box;display:-ms-flexbox;display:flex;height:16px;margin-bottom:16px}.base-setting.svelte-p9soo8 .item.svelte-p9soo8:last-of-type{margin-bottom:11px}.item-title.svelte-p9soo8.svelte-p9soo8{margin-right:20px}.area-setting.svelte-p9soo8.svelte-p9soo8{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.area-setting.svelte-p9soo8 .area-icon-wrap.svelte-p9soo8{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:41px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.area-setting.svelte-p9soo8 .area-icon-wrap .area-icon.svelte-p9soo8{width:30px;height:30px;cursor:pointer}.area-setting.svelte-p9soo8 .area-icon-wrap .area-icon.selected.svelte-p9soo8 svg *{fill:#ff6699}.other-setting.svelte-p9soo8.svelte-p9soo8{margin-top:14px}.other-setting.svelte-p9soo8 label.svelte-p9soo8{margin-right:20px}")}function zt(e){var t,n,i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,k,C,x,S,E,M,T,P,L,I,D,O;a=new Nt({props:{value:e[0].opacity,onChange:e[7],min:10,max:100,valueFormater:e[3]}}),h=new Nt({props:{value:e[0].fontScale,onChange:e[8],min:10,max:200,valueFormater:e[3]}}),m=new Nt({props:{value:e[0].density,onChange:e[9],min:10,max:100,valueFormater:e[3]}});var B=e[0].showMaskOption&&qt(e);return{c:function(){t=j("div"),n=j("div"),i=j("div"),(r=j("div")).textContent="不透明度",o=U(),Le(a.$$.fragment),s=U(),l=j("div"),(c=j("div")).textContent="字号缩放",u=U(),Le(h.$$.fragment),d=U(),f=j("div"),(p=j("div")).textContent="同屏密度",v=U(),Le(m.$$.fragment),y=U(),g=j("div"),(w=j("div")).textContent="显示区域",b=U(),k=j("div"),C=j("span"),x=U(),S=j("span"),E=U(),M=j("span"),T=U(),P=j("span"),L=U(),B&&B.c(),Z(r,"class","item-title svelte-p9soo8"),Z(i,"class","item svelte-p9soo8"),Z(c,"class","item-title svelte-p9soo8"),Z(l,"class","item svelte-p9soo8"),Z(p,"class","item-title svelte-p9soo8"),Z(f,"class","item svelte-p9soo8"),Z(n,"class","base-setting svelte-p9soo8"),Z(w,"class","item-title svelte-p9soo8"),Z(C,"class","area-icon svelte-p9soo8"),Y(C,"selected",1===e[0].area),Z(S,"class","area-icon svelte-p9soo8"),Y(S,"selected",2===e[0].area),Z(M,"class","area-icon svelte-p9soo8"),Y(M,"selected",3===e[0].area),Z(P,"class","area-icon svelte-p9soo8"),Y(P,"selected",4===e[0].area),Z(k,"class","area-icon-wrap svelte-p9soo8"),Z(g,"class","area-setting svelte-p9soo8"),Z(t,"class","panel danmaku-control svelte-p9soo8")},m:function(_,R){$(_,t,R),A(t,n),A(n,i),A(i,r),A(i,o),Ie(a,i,null),A(n,s),A(n,l),A(l,c),A(l,u),Ie(h,l,null),A(n,d),A(n,f),A(f,p),A(f,v),Ie(m,f,null),A(t,y),A(t,g),A(g,w),A(g,b),A(g,k),A(k,C),C.innerHTML='<svg viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd"    d="M15 6.5625C11.7392 6.5625 8.8918 6.7137 6.87988 6.86246C5.34947 6.97562 4.15041 8.13128 4.00866 9.6408C3.87148 11.1016 3.75 12.9692 3.75 15C3.75 17.0308 3.87148 18.8984 4.00866 20.3592C4.15041 21.8687 5.34947 23.0244 6.87988 23.1375C8.8918 23.2863 11.7392 23.4375 15 23.4375C18.2612 23.4375 21.1088 23.2863 23.1208 23.1375C24.6509 23.0243 25.8497 21.8691 25.9915 20.3599C26.1286 18.8996 26.25 17.0322 26.25 15C26.25 12.9678 26.1286 11.1004 25.9915 9.64011C25.8497 8.13095 24.6509 6.97566 23.1208 6.86251C21.1088 6.71373 18.2612 6.5625 15 6.5625ZM6.77618 5.46004C8.81428 5.30934 11.6971 5.15625 15 5.15625C18.3032 5.15625 21.1863 5.30938 23.2245 5.46009C25.4204 5.62248 27.1839 7.29789 27.3915 9.50864C27.5317 11.0013 27.6562 12.9138 27.6562 15C27.6562 17.0862 27.5317 18.9987 27.3915 20.4914C27.1839 22.7021 25.4204 24.3775 23.2245 24.5399C21.1863 24.6906 18.3032 24.8438 15 24.8438C11.6971 24.8438 8.81428 24.6907 6.77619 24.54C4.57988 24.3776 2.81619 22.7017 2.60857 20.4907C2.46835 18.9975 2.34375 17.0848 2.34375 15C2.34375 12.9152 2.46835 11.0025 2.60857 9.50933C2.81619 7.29834 4.57988 5.62244 6.77618 5.46004Z"    fill="white" />  <rect x="3" y="8" width="7" height="2" rx="1" fill="white" />  <rect x="11" y="8" width="13" height="2" rx="1" fill="white" />  <circle cx="26" cy="9" r="1" fill="white" />  <g opacity="0.2">    <circle cx="4" cy="13" r="1" fill="white" />    <rect x="6" y="12" width="21" height="2" rx="1" fill="white" />  </g>  <g opacity="0.2">    <rect x="3" y="16" width="7" height="2" rx="1" fill="white" />    <rect x="11" y="16" width="13" height="2" rx="1" fill="white" />    <circle cx="26" cy="17" r="1" fill="white" />  </g>  <g opacity="0.2">    <circle cx="4" cy="21" r="1" fill="white" />    <rect x="6" y="20" width="21" height="2" rx="1" fill="white" />  </g></svg>',A(k,x),A(k,S),S.innerHTML='<svg viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.5625C11.7392 6.5625 8.8918 6.7137 6.87988 6.86246C5.34947 6.97562 4.15041 8.13128 4.00866 9.6408C3.87148 11.1016 3.75 12.9692 3.75 15C3.75 17.0308 3.87148 18.8984 4.00866 20.3592C4.15041 21.8687 5.34947 23.0244 6.87988 23.1375C8.8918 23.2863 11.7392 23.4375 15 23.4375C18.2612 23.4375 21.1088 23.2863 23.1208 23.1375C24.6509 23.0243 25.8497 21.8691 25.9915 20.3599C26.1286 18.8996 26.25 17.0322 26.25 15C26.25 12.9678 26.1286 11.1004 25.9915 9.64011C25.8497 8.13095 24.6509 6.97566 23.1208 6.86251C21.1088 6.71373 18.2612 6.5625 15 6.5625ZM6.77618 5.46004C8.81428 5.30934 11.6971 5.15625 15 5.15625C18.3032 5.15625 21.1863 5.30938 23.2245 5.46009C25.4204 5.62248 27.1839 7.29789 27.3915 9.50864C27.5317 11.0013 27.6562 12.9138 27.6562 15C27.6562 17.0862 27.5317 18.9987 27.3915 20.4914C27.1839 22.7021 25.4204 24.3775 23.2245 24.5399C21.1863 24.6906 18.3032 24.8438 15 24.8438C11.6971 24.8438 8.81428 24.6907 6.77619 24.54C4.57988 24.3776 2.81619 22.7017 2.60857 20.4907C2.46835 18.9975 2.34375 17.0848 2.34375 15C2.34375 12.9152 2.46835 11.0025 2.60857 9.50933C2.81619 7.29834 4.57988 5.62244 6.77618 5.46004Z" fill="white"/><rect x="3" y="8" width="7" height="2" rx="1" fill="white"/><rect x="11" y="8" width="13" height="2" rx="1" fill="white"/><circle cx="26" cy="9" r="1" fill="white"/><circle cx="4" cy="13" r="1" fill="white"/><rect x="6" y="12" width="21" height="2" rx="1" fill="white"/><g opacity="0.2"><rect x="3" y="16" width="7" height="2" rx="1" fill="white"/><rect x="11" y="16" width="13" height="2" rx="1" fill="white"/><circle cx="26" cy="17" r="1" fill="white"/></g><g opacity="0.2"><circle cx="4" cy="21" r="1" fill="white"/><rect x="6" y="20" width="21" height="2" rx="1" fill="white"/></g></svg>',A(k,E),A(k,M),M.innerHTML='<svg viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.5625C11.7392 6.5625 8.8918 6.7137 6.87988 6.86246C5.34947 6.97562 4.15041 8.13128 4.00866 9.6408C3.87148 11.1016 3.75 12.9692 3.75 15C3.75 17.0308 3.87148 18.8984 4.00866 20.3592C4.15041 21.8687 5.34947 23.0244 6.87988 23.1375C8.8918 23.2863 11.7392 23.4375 15 23.4375C18.2612 23.4375 21.1088 23.2863 23.1208 23.1375C24.6509 23.0243 25.8497 21.8691 25.9915 20.3599C26.1286 18.8996 26.25 17.0322 26.25 15C26.25 12.9678 26.1286 11.1004 25.9915 9.64011C25.8497 8.13095 24.6509 6.97566 23.1208 6.86251C21.1088 6.71373 18.2612 6.5625 15 6.5625ZM6.77618 5.46004C8.81428 5.30934 11.6971 5.15625 15 5.15625C18.3032 5.15625 21.1863 5.30938 23.2245 5.46009C25.4204 5.62248 27.1839 7.29789 27.3915 9.50864C27.5317 11.0013 27.6562 12.9138 27.6562 15C27.6562 17.0862 27.5317 18.9987 27.3915 20.4914C27.1839 22.7021 25.4204 24.3775 23.2245 24.5399C21.1863 24.6906 18.3032 24.8438 15 24.8438C11.6971 24.8438 8.81428 24.6907 6.77619 24.54C4.57988 24.3776 2.81619 22.7017 2.60857 20.4907C2.46835 18.9975 2.34375 17.0848 2.34375 15C2.34375 12.9152 2.46835 11.0025 2.60857 9.50933C2.81619 7.29834 4.57988 5.62244 6.77618 5.46004Z" fill="white"/><rect x="3" y="8" width="7" height="2" rx="1" fill="white"/><rect x="11" y="8" width="13" height="2" rx="1" fill="white"/><circle cx="26" cy="9" r="1" fill="white"/><circle cx="4" cy="13" r="1" fill="white"/><rect x="6" y="12" width="21" height="2" rx="1" fill="white"/><rect x="3" y="16" width="7" height="2" rx="1" fill="white"/><rect x="11" y="16" width="13" height="2" rx="1" fill="white"/><circle cx="26" cy="17" r="1" fill="white"/><g opacity="0.2"><circle cx="4" cy="21" r="1" fill="white"/><rect x="6" y="20" width="21" height="2" rx="1" fill="white"/></g></svg>',A(k,T),A(k,P),P.innerHTML='<svg viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd"    d="M15 6.5625C11.7392 6.5625 8.8918 6.7137 6.87988 6.86246C5.34947 6.97562 4.15041 8.13128 4.00866 9.6408C3.87148 11.1016 3.75 12.9692 3.75 15C3.75 17.0308 3.87148 18.8984 4.00866 20.3592C4.15041 21.8687 5.34947 23.0244 6.87988 23.1375C8.8918 23.2863 11.7392 23.4375 15 23.4375C18.2612 23.4375 21.1088 23.2863 23.1208 23.1375C24.6509 23.0243 25.8497 21.8691 25.9915 20.3599C26.1286 18.8996 26.25 17.0322 26.25 15C26.25 12.9678 26.1286 11.1004 25.9915 9.64011C25.8497 8.13095 24.6509 6.97566 23.1208 6.86251C21.1088 6.71373 18.2612 6.5625 15 6.5625ZM6.77618 5.46004C8.81428 5.30934 11.6971 5.15625 15 5.15625C18.3032 5.15625 21.1863 5.30938 23.2245 5.46009C25.4204 5.62248 27.1839 7.29789 27.3915 9.50864C27.5317 11.0013 27.6562 12.9138 27.6562 15C27.6562 17.0862 27.5317 18.9987 27.3915 20.4914C27.1839 22.7021 25.4204 24.3775 23.2245 24.5399C21.1863 24.6906 18.3032 24.8438 15 24.8438C11.6971 24.8438 8.81428 24.6907 6.77619 24.54C4.57988 24.3776 2.81619 22.7017 2.60857 20.4907C2.46835 18.9975 2.34375 17.0848 2.34375 15C2.34375 12.9152 2.46835 11.0025 2.60857 9.50933C2.81619 7.29834 4.57988 5.62244 6.77618 5.46004Z"    fill="white" />  <path    d="M10.284 12.062C9.537 13.124 8.16 14.339 6.684 15.158C6.54 14.906 6.234 14.51 6 14.285C7.548 13.502 9.006 12.116 9.672 11H10.797C11.76 12.386 13.227 13.565 14.658 14.177C14.388 14.456 14.145 14.816 13.947 15.149C12.561 14.384 11.049 13.133 10.284 12.062ZM7.224 16.283H13.38V17.219H7.224V16.283ZM7.683 14.294H12.966V15.239H7.683V14.294ZM6.504 18.308H14.19V19.271H6.504V18.308ZM9.717 14.717H10.86V18.848H9.717V14.717Z"    fill="white" />  <path    d="M15.981 11.423H17.07V14.096C17.07 15.68 16.926 18.029 15.981 19.514C15.765 19.343 15.279 19.064 15.009 18.956C15.909 17.57 15.981 15.536 15.981 14.096V11.423ZM16.647 11.423H22.911V13.844H16.647V12.926H21.822V12.332H16.647V11.423ZM16.998 16.598H23.406V17.507H16.998V16.598ZM17.241 14.762H23.163V15.653H17.241V14.762ZM20.733 15.05H21.777V19.487H20.733V15.05ZM18.42 15.068H19.446V16.508C19.446 17.633 19.221 18.803 17.628 19.523C17.493 19.289 17.142 18.902 16.917 18.722C18.249 18.146 18.42 17.3 18.42 16.49V15.068ZM17.952 13.997L18.888 13.727C19.104 13.997 19.32 14.384 19.401 14.663L18.411 14.951C18.357 14.69 18.15 14.285 17.952 13.997ZM21.291 13.673L22.38 13.952C22.128 14.321 21.876 14.672 21.687 14.906L20.751 14.654C20.94 14.375 21.174 13.97 21.291 13.673Z"    fill="white" /></svg>',A(t,L),B&&B.m(t,null),I=!0,D||(O=[W(C,"click",e[10]),W(S,"click",e[11]),W(M,"click",e[12]),W(P,"click",e[13])],D=!0)},p:function(e,n){var i={};1&n&&(i.value=e[0].opacity),2&n&&(i.onChange=e[7]),a.$set(i);var r={};1&n&&(r.value=e[0].fontScale),2&n&&(r.onChange=e[8]),h.$set(r);var o={};1&n&&(o.value=e[0].density),2&n&&(o.onChange=e[9]),m.$set(o),(!I||1&n)&&Y(C,"selected",1===e[0].area),(!I||1&n)&&Y(S,"selected",2===e[0].area),(!I||1&n)&&Y(M,"selected",3===e[0].area),(!I||1&n)&&Y(P,"selected",4===e[0].area),e[0].showMaskOption?B?B.p(e,n):((B=qt(e)).c(),B.m(t,null)):B&&(B.d(1),B=null)},i:function(e){I||(Se(a.$$.fragment,e),Se(h.$$.fragment,e),Se(m.$$.fragment,e),I=!0)},o:function(e){Ee(a.$$.fragment,e),Ee(h.$$.fragment,e),Ee(m.$$.fragment,e),I=!1},d:function(e){e&&V(t),Ae(a),Ae(h),Ae(m),B&&B.d(),D=!1,_(O)}}}function qt(e){var t,n,i,r,o,a,s;return{c:function(){t=j("div"),n=j("input"),r=U(),(o=j("label")).textContent="智能防挡弹幕",Z(n,"type","checkbox"),Z(n,"id","mask"),n.checked=i=e[0].enableMask,Z(o,"for","mask"),Z(o,"class","svelte-p9soo8"),Z(t,"class","other-setting svelte-p9soo8")},m:function(i,l){$(i,t,l),A(t,n),A(t,r),A(t,o),a||(s=W(n,"click",e[14]),a=!0)},p:function(e,t){1&t&&i!==(i=e[0].enableMask)&&(n.checked=i)},d:function(e){e&&V(t),a=!1,s()}}}function Zt(e){var t,n,i,r,o,a,s=e[2]&&zt(e);return{c:function(){t=j("div"),s&&s.c(),n=U(),Z(i=j("span"),"class","icon"),Z(t,"class","danmaku")},m:function(l,c){$(l,t,c),s&&s.m(t,null),A(t,n),A(t,i),i.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.4325 5.17716L16.7042 3.40774C17.0259 2.96005 16.9239 2.33629 16.4762 2.01453C16.0285 1.69277 15.4047 1.79485 15.083 2.24254L13.1954 4.86879C13.1356 4.952 13.0905 5.04128 13.0594 5.13358C12.6865 5.12972 12.332 5.12774 11.9958 5.12764C11.995 5.12764 11.9942 5.12764 11.9934 5.12764C11.9894 5.12764 11.9854 5.12764 11.9814 5.12764C11.9774 5.12764 11.9734 5.12764 11.9694 5.12764C11.9685 5.12764 11.9677 5.12764 11.9668 5.12764C11.552 5.12777 11.1092 5.13075 10.6385 5.1366C10.6119 5.06435 10.5765 4.99404 10.5319 4.92715L8.78274 2.3009C8.47713 1.84204 7.8574 1.71781 7.39854 2.02343C6.93968 2.32904 6.81545 2.94877 7.12107 3.40763L8.30351 5.18297C7.54701 5.20276 6.73863 5.22785 5.87833 5.25825C4.10004 5.32108 2.65644 6.72012 2.40415 8.48154C2.24383 9.60074 2.1644 10.9664 2.1644 12.5817C2.1644 14.5164 2.27839 16.1879 2.50791 17.5985C2.78633 19.3095 4.232 20.6798 5.96344 20.7655C7.44086 20.8386 8.98021 20.8333 10.624 20.8277H10.6241H10.6243C11.0726 20.8262 11.5287 20.8246 11.9934 20.8246C12.3693 20.8246 12.6741 20.5199 12.6741 20.144C12.6741 19.7681 12.3693 19.4634 11.9934 19.4634C11.5258 19.4634 11.067 19.465 10.6163 19.4666H10.6163C8.99792 19.4724 7.48334 19.4778 6.03071 19.4059C4.94055 19.352 4.02679 18.4572 3.85149 17.3798C3.63477 16.048 3.52565 14.4478 3.52565 12.5817C3.52565 11.0264 3.60146 9.72304 3.75164 8.67455C3.91049 7.5655 4.80673 6.65821 5.9264 6.61865C8.3693 6.53234 10.388 6.48911 11.9814 6.48889C13.5748 6.48911 15.5935 6.53234 18.0364 6.61865C19.1561 6.65821 20.0866 7.49417 20.2454 8.60322C20.3956 9.65171 20.4243 10.1486 20.4243 11.7039C20.4243 12.0798 20.729 12.3845 21.1049 12.3845C21.4808 12.3845 21.7855 12.0798 21.7855 11.7039C21.7855 10.0887 21.7532 9.5294 21.5929 8.41021C21.3406 6.64879 19.8628 5.32108 18.0845 5.25825C17.1376 5.2248 16.2536 5.19776 15.4325 5.17716ZM11.2249 9.58372H12.5317C12.2812 9.07189 12.009 8.6254 11.7149 8.23336L12.7495 7.88488C13.0544 8.32048 13.3266 8.77786 13.5553 9.2788L12.8693 9.58372H14.3721C14.677 9.02833 14.9384 8.42938 15.1779 7.79776L16.2561 8.17891C16.0383 8.70163 15.7878 9.1699 15.5155 9.58372H16.7788V12.3398H15.2257C15.0759 12.3398 14.9299 12.3656 14.7931 12.4139H14.558V12.5244C14.3574 12.6445 14.1892 12.8185 14.076 13.0329L13.4247 14.2669V14.2266H11.2249V9.58372ZM12.9919 15.0866H10.8328V16.1539H12.4286L12.9919 15.0866ZM8.48609 11.6619L8.33363 13.2236H10.5116C10.5116 15.0967 10.4463 16.349 10.3374 16.9807C10.2067 17.6123 9.65132 17.9608 8.66033 18.0261C8.39621 18.0261 8.13209 18.0071 7.8503 17.9869L7.85016 17.9869H7.85014H7.85012H7.8501L7.78913 17.9825L7.4951 16.9262C7.77824 16.9589 8.08316 16.9807 8.38808 16.9807C8.93258 16.9807 9.2375 16.8064 9.31373 16.4579C9.38996 16.1095 9.43352 15.358 9.43352 14.2037H7.17929L7.48421 10.6927H9.32462V9.25807H7.2773V8.28886H10.4463V11.6619H8.48609ZM13.4234 13.2724V12.423H12.2364V13.2724H13.4234ZM13.4234 11.4679H12.2364V10.5749H13.4234V11.4679ZM14.558 10.5822V11.4752H15.7994V10.5822H14.558ZM16.1731 13.6052C15.725 13.6062 15.3112 13.8451 15.0862 14.2326L13.344 17.2332C13.1174 17.6234 13.1168 18.1051 13.3425 18.4959L15.064 21.4776C15.2896 21.8683 15.7068 22.1086 16.158 22.1076L20.1607 22.0988C20.6087 22.0978 21.0226 21.8589 21.2475 21.4715L22.9898 18.4708C23.2163 18.0806 23.2169 17.599 22.9913 17.2082L21.2698 14.2264C21.0442 13.8357 20.6269 13.5954 20.1758 13.5964L16.1731 13.6052ZM15.8586 15.4939C16.0855 15.114 16.4951 14.8809 16.9376 14.8799L19.4625 14.8743C19.9082 14.8733 20.3212 15.1078 20.5487 15.4909L21.5822 17.2313C21.8181 17.6285 21.8177 18.1229 21.5813 18.5197L20.5253 20.2916C20.2986 20.6721 19.8887 20.9056 19.4458 20.9066L16.9223 20.9122C16.4763 20.9132 16.063 20.6783 15.8356 20.2946L14.8013 18.5495C14.5658 18.1521 14.5666 17.6577 14.8034 17.2611L15.8586 15.4939ZM18.1625 19.3295C18.9357 19.3295 19.5625 18.7027 19.5625 17.9295C19.5625 17.1563 18.9357 16.5295 18.1625 16.5295C17.3893 16.5295 16.7625 17.1563 16.7625 17.9295C16.7625 18.7027 17.3893 19.3295 18.1625 19.3295Z" fill="white"/></svg>',r=!0,o||(a=[W(t,"mouseenter",e[15]),W(t,"mouseleave",e[16])],o=!0)},p:function(e,i){var r=f(i,1)[0];e[2]?s?(s.p(e,r),4&r&&Se(s,1)):((s=zt(e)).c(),Se(s,1),s.m(t,n)):s&&(Ce(),Ee(s,1,1,(function(){s=null})),xe())},i:function(e){r||(Se(s),r=!0)},o:function(e){Ee(s),r=!1},d:function(e){e&&V(t),s&&s.d(),o=!1,_(a)}}}function Gt(e,t,n){var i=t.options,r=t.onChange,o=!1,a=function(e){r("enableMask",e.target.checked)},s=rt(100),l=s.onEnter,c=s.onLeave;return e.$$set=function(e){"options"in e&&n(0,i=e.options),"onChange"in e&&n(1,r=e.onChange)},[i,r,o,function(e){return"".concat(e,"%")},a,l,c,function(e){return r("opacity",e)},function(e){return r("fontScale",e)},function(e){return r("density",e)},function(){return r("area",1)},function(){return r("area",2)},function(){return r("area",3)},function(){return r("area",4)},function(e){return a(e)},function(){return l((function(){n(2,o=!0)}))},function(){return c((function(){n(2,o=!1)}))}]}var Kt=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Gt,Zt,C,{options:0,onChange:1},Wt),i}return n}();function Qt(e){D(e,"svelte-1g87leh",".send-panel-wrap.svelte-1g87leh{position:absolute;height:32px;width:400px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.send-panel-container.svelte-1g87leh{display:-webkit-box;display:-ms-flexbox;display:flex;width:400px;height:32px;background:rgba(255, 255, 255, 0.4);border-radius:15.5px}.send-panel-input.svelte-1g87leh{outline:none;border-radius:15.5px;background:0 0;border:0;width:100%;padding-left:26px;color:#FFFFFF;font-family:PingFang SC;font-style:normal;font-weight:normal;font-size:14px;line-height:20px}.send-panel-input.svelte-1g87leh::-webkit-input-placeholder{position:absolute;height:20px;top:calc(50% - 20px/2);font-size:14px;line-height:20px;color:#FFFFFF}.send-panel-input.svelte-1g87leh::-moz-placeholder{position:absolute;height:20px;top:calc(50% - 20px/2);font-size:14px;line-height:20px;color:#FFFFFF}.send-panel-input.svelte-1g87leh:-ms-input-placeholder{position:absolute;height:20px;top:calc(50% - 20px/2);font-size:14px;line-height:20px;color:#FFFFFF}.send-panel-input.svelte-1g87leh::-ms-input-placeholder{position:absolute;height:20px;top:calc(50% - 20px/2);font-size:14px;line-height:20px;color:#FFFFFF}.send-panel-input.svelte-1g87leh::placeholder{position:absolute;height:20px;top:calc(50% - 20px/2);font-size:14px;line-height:20px;color:#FFFFFF}.send-panel-btn.svelte-1g87leh{width:60px;height:24px;background:#23ade5;border-radius:19px;color:#FFFFFF;margin-top:4px;text-align:center;line-height:26px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;top:0;right:5px}")}function Yt(e){var t,n,i,r,o,a,s;return{c:function(){t=j("div"),n=j("div"),i=j("input"),r=U(),(o=j("div")).textContent="发送",Z(i,"placeholder","发个弹幕呗~"),Z(i,"class","send-panel-input svelte-1g87leh"),Z(i,"maxlength","20"),Z(n,"class","send-panel-container svelte-1g87leh"),Z(o,"class","send-panel-btn svelte-1g87leh"),Z(t,"class","send-panel-wrap svelte-1g87leh")},m:function(l,c){$(l,t,c),A(t,n),A(n,i),K(i,e[0]),A(t,r),A(t,o),a||(s=[W(i,"input",e[3]),W(i,"blur",e[4]),W(i,"focus",e[5]),W(o,"click",e[6])],a=!0)},p:function(e,t){1&f(t,1)[0]&&i.value!==e[0]&&K(i,e[0])},i:y,o:y,d:function(e){e&&V(t),a=!1,_(s)}}}function Xt(e,t,n){var i=t.dmMsg,r=t.onSend,o=t.foucsChange,a=function(e){13===e.keyCode&&r(i)};return oe((function(){window.addEventListener("keydown",a)})),ae((function(){window.removeEventListener("keydown",a)})),e.$$set=function(e){"dmMsg"in e&&n(0,i=e.dmMsg),"onSend"in e&&n(1,r=e.onSend),"foucsChange"in e&&n(2,o=e.foucsChange)},[i,r,o,function(){i=this.value,n(0,i)},function(){o(!1)},function(){o(!0)},function(){r(i)}]}var Jt=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Xt,Yt,C,{dmMsg:0,onSend:1,foucsChange:2},Qt),i}return n}();function en(e){D(e,"svelte-1ildxxc",".quality-container.svelte-1ildxxc.svelte-1ildxxc{position:absolute;right:-160px;z-index:15;width:160px;top:0px;height:100%;-webkit-transition:right 0.5s;transition:right 0.5s;background-color:rgba(0, 0, 0, 0.8);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.quality-container-show.svelte-1ildxxc.svelte-1ildxxc{right:0px}.quality-scroll.svelte-1ildxxc .svelte-1ildxxc::-webkit-scrollbar{display:none}.quality-scroll.svelte-1ildxxc.svelte-1ildxxc{position:absolute;width:100%;height:85%;overflow-y:scroll;padding-left:24px}.quality-select.svelte-1ildxxc.svelte-1ildxxc{color:#FFFFFF;font-size:14px;margin-bottom:20px}.quality-select.selected.svelte-1ildxxc.svelte-1ildxxc{color:#23ade5}")}function tn(e,t,n){var i=e.slice();return i[12]=t[n],i}function nn(e){var t,n,i,r,o,a=e[12].label+"";function s(){return e[8](e[12])}return{c:function(){t=j("div"),n=H(a),i=U(),Z(t,"class","quality-select svelte-1ildxxc"),Y(t,"selected",e[12].value==e[0])},m:function(e,a){$(e,t,a),A(t,n),A(t,i),r||(o=W(t,"click",s),r=!0)},p:function(i,r){e=i,4&r&&a!==(a=e[12].label+"")&&G(n,a),5&r&&Y(t,"selected",e[12].value==e[0])},d:function(e){e&&V(t),r=!1,o()}}}function rn(e){for(var t,n,i,r,o,a,s,l,c,u=e[2],h=[],d=0;d<u.length;d+=1)h[d]=nn(tn(e,u,d));return{c:function(){t=j("div"),n=j("div"),i=j("div");for(var l=0;l<h.length;l+=1)h[l].c();o=U(),a=j("span"),s=H(e[5]),Z(i,"class","quality-scroll svelte-1ildxxc"),Z(n,"class",r=S(e[4]?"quality-container quality-container-show":"quality-container")+" svelte-1ildxxc"),Z(a,"class","text")},m:function(r,u){$(r,t,u),A(t,n),A(n,i);for(var d=0;d<h.length;d+=1)h[d]&&h[d].m(i,null);e[9](n),A(t,o),A(t,a),A(a,s),l||(c=W(a,"click",e[10]),l=!0)},p:function(e,t){var o=f(t,1)[0];if(29&o){var a;for(u=e[2],a=0;a<u.length;a+=1){var l=tn(e,u,a);h[a]?h[a].p(l,o):(h[a]=nn(l),h[a].c(),h[a].m(i,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=u.length}16&o&&r!==(r=S(e[4]?"quality-container quality-container-show":"quality-container")+" svelte-1ildxxc")&&Z(n,"class",r),32&o&&G(s,e[5])},i:y,o:y,d:function(n){n&&V(t),F(h,n),e[9](null),l=!1,c()}}}function on(e,t,n){var i,r,o=t.container,a=t.qualityList,s=void 0===a?[]:a,l=t.quality,c=void 0===l?"":l,u=t.onChange,h=!1,d=t.ref,f=function(e){null!=d&&(d.contains(e.target)||n(4,h=!1))};return oe((function(){null!=o&&(o.append(d),o.addEventListener("touchstart",f))})),ae((function(){null!=o&&(o.removeChild(d),o.removeEventListener("touchstart",f))})),e.$$set=function(e){"container"in e&&n(6,o=e.container),"qualityList"in e&&n(2,s=e.qualityList),"quality"in e&&n(0,c=e.quality),"onChange"in e&&n(3,u=e.onChange),"ref"in e&&n(1,d=e.ref)},e.$$.update=function(){133&e.$$.dirty&&n(5,i=null===n(7,r=s.find((function(e){var t=e.value;return c===t})))||void 0===r?void 0:r.label)},[c,d,s,u,h,i,o,r,function(e){var t=e.value;console.error(t,c),t!==c&&(u?u("quality",t):n(0,c=t),n(4,h=!1),u("qualityPanelShow",h))},function(e){le[e?"unshift":"push"]((function(){n(1,d=e)}))},function(){n(4,h=!0),u("qualityPanelShow",h)}]}var an=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,on,rn,C,{container:6,qualityList:2,quality:0,onChange:3,ref:1},en),i}return n}(),sn='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="icon_&#229;&#173;&#151;&#229;&#185;&#149;"><path id="Vector" d="M12 4.99805C9.48178 4.99805 7.283 5.12616 5.73089 5.25202C4.65221 5.33949 3.81611 6.16352 3.72 7.23254C3.60607 8.4998 3.5 10.171 3.5 11.998C3.5 13.8251 3.60607 15.4963 3.72 16.7635C3.81611 17.8325 4.65221 18.6566 5.73089 18.7441C7.283 18.8699 9.48178 18.998 12 18.998C14.5185 18.998 16.7174 18.8699 18.2696 18.744C19.3481 18.6565 20.184 17.8328 20.2801 16.764C20.394 15.4973 20.5 13.8264 20.5 11.998C20.5 10.1696 20.394 8.49877 20.2801 7.23205C20.184 6.1633 19.3481 5.33952 18.2696 5.25205C16.7174 5.12618 14.5185 4.99805 12 4.99805ZM5.60965 3.75693C7.19232 3.62859 9.43258 3.49805 12 3.49805C14.5677 3.49805 16.8081 3.62861 18.3908 3.75696C20.1881 3.90272 21.6118 5.29278 21.7741 7.09773C21.8909 8.3969 22 10.114 22 11.998C22 13.882 21.8909 15.5992 21.7741 16.8984C21.6118 18.7033 20.1881 20.0933 18.3908 20.2391C16.8081 20.3675 14.5677 20.498 12 20.498C9.43258 20.498 7.19232 20.3675 5.60965 20.2392C3.81206 20.0934 2.38831 18.7029 2.22603 16.8979C2.10918 15.5982 2 13.8808 2 11.998C2 10.1153 2.10918 8.39787 2.22603 7.09823C2.38831 5.29312 3.81206 3.90269 5.60965 3.75693Z" fill="white"/><path id="Vector_2" d="M6.0377 9.57774V10.1738C6.0377 10.4568 5.80825 10.6863 5.5252 10.6863C5.24216 10.6863 5.0127 10.4568 5.0127 10.1738V9.31524C5.0127 8.89412 5.35409 8.55274 5.7752 8.55274H10.8164C11.2376 8.55274 11.5789 8.89412 11.5789 9.31524V10.1738C11.5789 10.4568 11.3495 10.6863 11.0664 10.6863C10.7834 10.6863 10.5539 10.4568 10.5539 10.1738V9.57774H6.0377Z" fill="white"/><path id="Vector_3" d="M8.00415 7.87592C8.26546 7.76714 8.56548 7.89079 8.67425 8.15211L8.9724 8.86834C9.08118 9.12964 8.95753 9.42966 8.69622 9.53844C8.43491 9.64721 8.13489 9.52356 8.02612 9.26225L7.72797 8.54602C7.61919 8.2847 7.74284 7.9847 8.00415 7.87592Z" fill="white"/><path id="Vector_4" d="M5.19336 12.957C5.19336 12.6739 5.42281 12.4445 5.70586 12.4445H10.8861C11.1691 12.4445 11.3986 12.6739 11.3986 12.957C11.3986 13.24 11.1691 13.4695 10.8861 13.4695H5.70586C5.42281 13.4695 5.19336 13.24 5.19336 12.957Z" fill="white"/><path id="Vector_5" d="M6.48828 10.6646C6.48828 10.3816 6.71774 10.1521 7.00078 10.1521H9.632C9.82863 10.1521 10.0079 10.2646 10.0935 10.4416C10.179 10.6187 10.1557 10.8291 10.0335 10.9831L9.06966 12.2008V15.232C9.06966 15.515 8.8402 15.7445 8.55716 15.7445H7.48338C7.20033 15.7445 6.97088 15.515 6.97088 15.232C6.97088 14.949 7.20033 14.7195 7.48338 14.7195H8.04466V12.0221C8.04466 11.9065 8.08379 11.7942 8.15569 11.7036L8.5711 11.1771H7.00078C6.71774 11.1771 6.48828 10.9476 6.48828 10.6646Z" fill="white"/><path id="Vector_6" d="M12.0996 8.66282C12.0996 8.40739 12.3067 8.20032 12.5621 8.20032H18.4736C18.729 8.20032 18.9361 8.40739 18.9361 8.66282C18.9361 8.91825 18.729 9.12532 18.4736 9.12532H12.5621C12.3067 9.12532 12.0996 8.91825 12.0996 8.66282Z" fill="white"/><path id="Vector_7" d="M12.7485 10.1299C12.7485 9.71567 13.0843 9.37988 13.4985 9.37988H17.5391C17.9533 9.37988 18.2891 9.71567 18.2891 10.1299V11.6581C18.2891 12.0723 17.9533 12.4081 17.5391 12.4081H13.4985C13.0843 12.4081 12.7485 12.0723 12.7485 11.6581V10.1299ZM13.7485 10.3799V11.4081H17.2891V10.3799H13.7485Z" fill="white"/><path id="Vector_8" d="M12.8984 10.8938C12.8984 10.7005 13.0551 10.5438 13.2484 10.5438H16.5038C16.6971 10.5438 16.8538 10.7005 16.8538 10.8938C16.8538 11.0871 16.6971 11.2438 16.5038 11.2438H13.2484C13.0551 11.2438 12.8984 11.0871 12.8984 10.8938Z" fill="white"/><path id="Vector_9" d="M12.0996 13.0986C12.0996 12.8432 12.3067 12.6361 12.5621 12.6361H18.4735C18.729 12.6361 18.936 12.8432 18.936 13.0986C18.936 13.3541 18.729 13.5611 18.4735 13.5611H12.5621C12.3067 13.5611 12.0996 13.3541 12.0996 13.0986Z" fill="white"/><path id="Vector_10" d="M15.4284 11.6158C15.5979 11.8069 15.5805 12.0992 15.3895 12.2688L12.8691 14.5058C12.6781 14.6754 12.3858 14.658 12.2162 14.467C12.0466 14.2759 12.064 13.9836 12.2551 13.814L14.7754 11.577C14.9665 11.4074 15.2588 11.4248 15.4284 11.6158Z" fill="white"/><path id="Vector_11" d="M14.062 14.8273V15.3317C14.062 15.6078 13.8382 15.8317 13.562 15.8317C13.2859 15.8317 13.062 15.6078 13.062 15.3317V14.5273C13.062 14.1408 13.3755 13.8273 13.762 13.8273H17.3354C17.7219 13.8273 18.0354 14.1408 18.0354 14.5273V15.3651C18.0354 15.6412 17.8115 15.8651 17.5354 15.8651C17.2592 15.8651 17.0354 15.6412 17.0354 15.3651V14.8273H14.062Z" fill="white"/><path id="Vector_12" d="M15.5489 12.7247C15.8044 12.7247 16.0114 12.9318 16.0114 13.1872V15.482C16.0114 15.7375 15.8044 15.9445 15.5489 15.9445C15.2935 15.9445 15.0864 15.7375 15.0864 15.482V13.1872C15.0864 12.9318 15.2935 12.7247 15.5489 12.7247Z" fill="white"/><path id="Vector_13" d="M14.1959 7.75501C14.4513 7.75501 14.6584 7.96208 14.6584 8.2175V9.45639C14.6584 9.71182 14.4513 9.91889 14.1959 9.91889C13.9405 9.91889 13.7334 9.71182 13.7334 9.45639V8.2175C13.7334 7.96208 13.9405 7.75501 14.1959 7.75501ZM16.8394 7.75501C17.0948 7.75501 17.3019 7.96208 17.3019 8.2175V9.45639C17.3019 9.71182 17.0948 9.91889 16.8394 9.91889C16.5839 9.91889 16.3769 9.71182 16.3769 9.45639V8.2175C16.3769 7.96208 16.5839 7.75501 16.8394 7.75501Z" fill="white"/><path id="Vector_14" d="M16.5967 12.8776C16.7399 12.6662 17.0273 12.6109 17.2388 12.754L18.7327 13.7767C18.9442 13.9199 18.9995 14.2074 18.8563 14.4188C18.7131 14.6303 18.4257 14.6856 18.2142 14.5424L16.7202 13.5198C16.5088 13.3766 16.4535 13.0891 16.5967 12.8776Z" fill="white"/></g></svg>',ln='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4.99805C9.48178 4.99805 7.283 5.12616 5.73089 5.25202C4.65221 5.33949 3.81611 6.16352 3.72 7.23254C3.60607 8.4998 3.5 10.171 3.5 11.998C3.5 13.8383 3.60762 15.5204 3.72246 16.7909C3.81814 17.8485 4.63906 18.6614 5.70252 18.7467C7.17555 18.865 9.29769 18.9847 11.9427 18.9967C12.3569 18.9998 12.6902 19.3381 12.6872 19.7522C12.6841 20.1664 12.3458 20.4997 11.9317 20.4967C9.24539 20.4843 7.08632 20.3627 5.58204 20.2419C3.79557 20.0983 2.39027 18.7156 2.22854 16.9257C2.11076 15.6228 2 13.8943 2 11.998C2 10.1153 2.10918 8.39787 2.22603 7.09823C2.38831 5.29312 3.81206 3.90269 5.60965 3.75693C7.19232 3.62859 9.43258 3.49805 12 3.49805C14.5677 3.49805 16.8081 3.62861 18.3908 3.75696C20.1881 3.90272 21.6117 5.2926 21.7741 7.09759C21.8585 8.03701 21.967 10.7115 22 11.998C22.014 12.4119 21.6899 12.7589 21.2759 12.7729C20.862 12.787 20.5151 12.4628 20.501 12.0489C20.4689 10.7949 20.3626 8.14871 20.2801 7.23191C20.184 6.1632 19.3481 5.33953 18.2696 5.25205C16.7174 5.12618 14.5185 4.99805 12 4.99805Z" fill="white"/><path d="M6.03769 9.57774V10.1738C6.03769 10.4568 5.80824 10.6863 5.5252 10.6863C5.24215 10.6863 5.0127 10.4568 5.0127 10.1738V9.31524C5.0127 8.89412 5.35407 8.55274 5.7752 8.55274H10.8164C11.2375 8.55274 11.5789 8.89412 11.5789 9.31524V10.1738C11.5789 10.4568 11.3495 10.6863 11.0664 10.6863C10.7834 10.6863 10.5539 10.4568 10.5539 10.1738V9.57774H6.03769Z" fill="white"/><path d="M8.00416 7.87592C8.26547 7.76714 8.56548 7.89079 8.67426 8.15211L8.97241 8.86834C9.08118 9.12964 8.95753 9.42966 8.69623 9.53844C8.43492 9.64721 8.1349 9.52356 8.02612 9.26225L7.72797 8.54602C7.61919 8.2847 7.74285 7.9847 8.00416 7.87592Z" fill="white"/><path d="M5.19336 12.9568C5.19336 12.6738 5.42282 12.4443 5.70586 12.4443H10.886C11.1691 12.4443 11.3985 12.6738 11.3985 12.9568C11.3985 13.2399 11.1691 13.4693 10.886 13.4693H5.70586C5.42282 13.4693 5.19336 13.2399 5.19336 12.9568Z" fill="white"/><path d="M6.48828 10.6646C6.48828 10.3815 6.71773 10.1521 7.00078 10.1521H9.63199C9.82863 10.1521 10.008 10.2646 10.0934 10.4417C10.179 10.6187 10.1557 10.8291 10.0335 10.9831L9.06966 12.2007V15.232C9.06966 15.5151 8.8402 15.7445 8.55715 15.7445H7.48338C7.20033 15.7445 6.97088 15.5151 6.97088 15.232C6.97088 14.9489 7.20033 14.7195 7.48338 14.7195H8.04466V12.0221C8.04466 11.9065 8.08379 11.7942 8.15568 11.7036L8.57109 11.1771H7.00078C6.71773 11.1771 6.48828 10.9476 6.48828 10.6646Z" fill="white"/><path d="M12.0996 8.66307C12.0996 8.40763 12.3067 8.20057 12.5621 8.20057H18.4736C18.729 8.20057 18.9361 8.40763 18.9361 8.66307C18.9361 8.91849 18.729 9.12557 18.4736 9.12557H12.5621C12.3067 9.12557 12.0996 8.91849 12.0996 8.66307Z" fill="white"/><path d="M12.7485 10.13C12.7485 9.71579 13.0843 9.38001 13.4985 9.38001H17.5391C17.9533 9.38001 18.2891 9.71579 18.2891 10.13V10.8063C18.2891 11.0825 18.0652 11.3063 17.7891 11.3063C17.513 11.3063 17.2891 11.0825 17.2891 10.8063V10.38H13.7485V11.4081H15.2939C15.5701 11.4081 15.7939 11.632 15.7939 11.9081C15.7939 12.1843 15.5701 12.4081 15.2939 12.4081H13.4985C13.0843 12.4081 12.7485 12.0724 12.7485 11.6581V10.13Z" fill="white"/><path d="M12.8984 10.8939C12.8984 10.7006 13.0551 10.5439 13.2484 10.5439H16.5038C16.6971 10.5439 16.8538 10.7006 16.8538 10.8939C16.8538 11.0872 16.6971 11.2439 16.5038 11.2439H13.2484C13.0551 11.2439 12.8984 11.0872 12.8984 10.8939Z" fill="white"/><path d="M12.0996 13.0986C12.0996 12.8432 12.3067 12.6361 12.5621 12.6361H13.9455C14.201 12.6361 14.408 12.8432 14.408 13.0986C14.408 13.3541 14.201 13.5611 13.9455 13.5611H12.5621C12.3067 13.5611 12.0996 13.3541 12.0996 13.0986Z" fill="white"/><path d="M15.4284 11.6161C15.598 11.8071 15.5806 12.0995 15.3895 12.269L12.8692 14.5061C12.6781 14.6756 12.3858 14.6582 12.2162 14.4672C12.0467 14.2762 12.0641 13.9838 12.2551 13.8143L14.7755 11.5772C14.9665 11.4077 15.2588 11.4251 15.4284 11.6161Z" fill="white"/><path d="M14.1959 7.75501C14.4513 7.75501 14.6584 7.96208 14.6584 8.2175V9.45639C14.6584 9.71182 14.4513 9.91889 14.1959 9.91889C13.9405 9.91889 13.7334 9.71182 13.7334 9.45639V8.2175C13.7334 7.96208 13.9405 7.75501 14.1959 7.75501ZM16.8394 7.75501C17.0948 7.75501 17.3019 7.96208 17.3019 8.2175V9.45639C17.3019 9.71182 17.0948 9.91889 16.8394 9.91889C16.5839 9.91889 16.3769 9.71182 16.3769 9.45639V8.2175C16.3769 7.96208 16.5839 7.75501 16.8394 7.75501Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.0625 22.06C20.2716 22.06 22.0625 20.2691 22.0625 18.06C22.0625 15.8509 20.2716 14.06 18.0625 14.06C15.8534 14.06 14.0625 15.8509 14.0625 18.06C14.0625 20.2691 15.8534 22.06 18.0625 22.06ZM18.0625 20.7968C16.551 20.7968 15.3257 19.5715 15.3257 18.06C15.3257 17.5436 15.4687 17.0606 15.7173 16.6484L19.4745 20.4049C19.0623 20.6537 18.5791 20.7968 18.0625 20.7968ZM20.4075 19.4719C20.6562 19.0597 20.7993 18.5766 20.7993 18.06C20.7993 16.5485 19.574 15.3232 18.0625 15.3232C17.5457 15.3232 17.0624 15.4664 16.6501 15.7153L20.4075 19.4719Z" fill="white"/></svg>';function cn(e){D(e,"svelte-1aua55n",".subtitle.svelte-1aua55n.svelte-1aua55n{position:relative;line-height:17px}.panel.svelte-1aua55n.svelte-1aua55n{width:265px;padding:16px 12px}.panel.svelte-1aua55n .item.svelte-1aua55n{margin-bottom:15px;display:-webkit-box;display:-ms-flexbox;display:flex}.panel.svelte-1aua55n .item.svelte-1aua55n:last-of-type{margin-bottom:0}.panel.svelte-1aua55n .desc.svelte-1aua55n{margin-left:5px;margin-right:auto;color:#9499a0}")}function un(e){var t,n,i,r,o,a,s,l,c,u,h,d,f,p,v;return(s=new gt({props:{value:e[0]}})).$on("click",e[10]),(p=new gt({props:{value:e[1]}})).$on("click",e[11]),{c:function(){t=j("div"),n=j("div"),(i=j("span")).textContent="显示字幕",r=U(),(o=j("span")).textContent="自动生成实时字幕",a=U(),Le(s.$$.fragment),l=U(),c=j("div"),(u=j("span")).textContent="移动字幕",h=U(),(d=j("span")).textContent="开启后可进行字幕移动",f=U(),Le(p.$$.fragment),Z(i,"class","title"),Z(o,"class","desc svelte-1aua55n"),Z(n,"class","item svelte-1aua55n"),Z(u,"class","title"),Z(d,"class","desc svelte-1aua55n"),Z(c,"class","item svelte-1aua55n"),Z(t,"class","panel svelte-1aua55n")},m:function(m,y){$(m,t,y),A(t,n),A(n,i),A(n,r),A(n,o),A(n,a),Ie(s,n,null),A(t,l),A(t,c),A(c,u),A(c,h),A(c,d),A(c,f),Ie(p,c,null),e[12](t),v=!0},p:function(e,t){var n={};1&t&&(n.value=e[0]),s.$set(n);var i={};2&t&&(i.value=e[1]),p.$set(i)},i:function(e){v||(Se(s.$$.fragment,e),Se(p.$$.fragment,e),v=!0)},o:function(e){Ee(s.$$.fragment,e),Ee(p.$$.fragment,e),v=!1},d:function(n){n&&V(t),Ae(s),Ae(p),e[12](null)}}}function hn(e){var t,n,i,r,o,a,s=(e[0]?sn:ln)+"",l=e[2]&&un(e);return{c:function(){t=j("div"),l&&l.c(),n=U(),Z(i=j("span"),"class","icon"),Z(t,"class","subtitle svelte-1aua55n")},m:function(c,u){$(c,t,u),l&&l.m(t,null),A(t,n),A(t,i),i.innerHTML=s,e[13](t),r=!0,o||(a=[W(t,"mouseenter",e[14]),W(t,"mouseleave",e[15])],o=!0)},p:function(e,o){var a=f(o,1)[0];e[2]?l?(l.p(e,a),4&a&&Se(l,1)):((l=un(e)).c(),Se(l,1),l.m(t,n)):l&&(Ce(),Ee(l,1,1,(function(){l=null})),xe()),(!r||1&a)&&s!==(s=(e[0]?sn:ln)+"")&&(i.innerHTML=s)},i:function(e){r||(Se(l),r=!0)},o:function(e){Ee(l),r=!1},d:function(n){n&&V(t),l&&l.d(),e[13](null),o=!1,_(a)}}}function dn(e,t,n){var i,r,o,a=t.onChange,l=void 0===a?null:a,c=t.visible,u=void 0!==c&&c,h=t.draggable,d=void 0!==h&&h,f=!1,p=function(e,t){l?l(s({},e,t)):"visible"===e?n(0,u=t):"draggable"===e&&n(1,d=t)},v=rt(100),m=v.onEnter,y=v.onLeave;return e.$$set=function(e){"onChange"in e&&n(8,l=e.onChange),"visible"in e&&n(0,u=e.visible),"draggable"in e&&n(1,d=e.draggable)},e.$$.update=function(){if(540&e.$$.dirty&&f&&null!=o&&null!=(null==r?void 0:r.parentElement)){var t=(null===n(9,i=r.parentElement)||void 0===i?void 0:i.getBoundingClientRect().right)-o.getBoundingClientRect().right;t<0&&n(4,o.style.left="calc(50% + ".concat(t,"px)"),o)}},[u,d,f,r,o,p,m,y,l,i,function(){return p("visible",!u)},function(){return p("draggable",!d)},function(e){le[e?"unshift":"push"]((function(){n(4,o=e),n(2,f),n(3,r),n(9,i)}))},function(e){le[e?"unshift":"push"]((function(){n(3,r=e)}))},function(){return m((function(){n(2,f=!0),p("showPanel",!0)}))},function(){return y((function(){n(2,f=!1),p("showPanel",!1)}))}]}var fn=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,dn,hn,C,{onChange:8,visible:0,draggable:1},cn),i}return n}();function pn(e){D(e,"svelte-4rgwwa",".live-web-player-controller.svelte-4rgwwa.svelte-4rgwwa{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.live-web-player-controller.svelte-4rgwwa .control-area.svelte-4rgwwa{position:absolute;bottom:3px;left:0;right:0;padding:0 12px;color:#fff;height:36px;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.live-web-player-controller.svelte-4rgwwa .control-area .left-area.svelte-4rgwwa,.live-web-player-controller.svelte-4rgwwa .control-area .right-area.svelte-4rgwwa{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.live-web-player-controller .control-area .left-area > *,.live-web-player-controller .control-area .right-area > *{margin:0 2px;border-radius:6px}.live-web-player-controller .control-area .left-area > *:hover,.live-web-player-controller .control-area .right-area > *:hover{background-color:rgba(255, 255, 255, 0.1)}.live-web-player-controller .control-area .left-area > *:first-child{margin-left:0px}.live-web-player-controller .control-area .left-area > *:last-child{margin-right:0px}.live-web-player-controller .control-area .right-area > *:first-child{margin-right:0px}.live-web-player-controller .control-area .right-area > *:last-child{margin-left:0px}.live-web-player-controller.svelte-4rgwwa .control-area .right-area.svelte-4rgwwa{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.live-web-player-controller.svelte-4rgwwa .control-area .ext-nodes.svelte-4rgwwa{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:none}.live-web-player-controller.svelte-4rgwwa .panel{position:absolute;left:50%;-webkit-transform:translate(-50%, calc(-100% - 2px));transform:translate(-50%, calc(-100% - 2px));opacity:0.9;background-color:rgba(33, 33, 33, 0.9);color:rgba(255, 255, 255, 0.9);border-radius:6px;z-index:100}.live-web-player-controller.svelte-4rgwwa .icon{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;cursor:pointer}.live-web-player-controller.svelte-4rgwwa .icon svg{width:24px;height:24px}@-webkit-keyframes svelte-4rgwwa-hhh{50%{width:28px;height:28px}100%{width:24px;height:24px}}@keyframes svelte-4rgwwa-hhh{50%{width:28px;height:28px}100%{width:24px;height:24px}}.live-web-player-controller.svelte-4rgwwa .icon:hover svg{-webkit-animation:0.2s svelte-4rgwwa-hhh;animation:0.2s svelte-4rgwwa-hhh}.live-web-player-controller.svelte-4rgwwa .text{line-height:30px;padding:0 10px;color:rgba(255, 255, 255, 0.9);cursor:pointer}.live-web-player-controller.svelte-4rgwwa .text:hover{color:#fff}.live-web-player-controller.svelte-4rgwwa .time{font-size:14px}.live-web-player-controller.svelte-4rgwwa input[type='radio']{width:16px;height:16px;visibility:hidden;position:absolute;margin:0}.live-web-player-controller.svelte-4rgwwa input[type='radio']+label{position:relative;margin:0 20px;line-height:16px;cursor:pointer}.live-web-player-controller.svelte-4rgwwa input[type='radio']+label::before{display:inline-block;position:absolute;left:-20px;width:16px;height:16px;border-radius:50%;vertical-align:text-bottom;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(227, 232, 236, 0.1);border:1px solid #757575;content:''}.live-web-player-controller.svelte-4rgwwa input[type='radio']:checked+label::before{border:1px solid #ff6699;background-color:#ff6699}.live-web-player-controller.svelte-4rgwwa input[type='radio']:checked+label::after{content:'';position:absolute;width:16px;height:16px;border:4px solid #212121;-webkit-box-sizing:border-box;box-sizing:border-box;left:-20px;-webkit-transform:scale(0.8);transform:scale(0.8);border-radius:50%}.live-web-player-controller.svelte-4rgwwa input[type='checkbox']{width:12px;height:12px;visibility:hidden;position:absolute;margin:0}.live-web-player-controller.svelte-4rgwwa input[type='checkbox']+label{position:relative;margin-left:18px;cursor:pointer}.live-web-player-controller.svelte-4rgwwa input[type='checkbox']+label::before{content:'';position:absolute;top:50%;left:-18px;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:12px;width:12px;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:rgba(0, 0, 0, 0);border:1px solid rgba(255, 255, 255, 0.9);border-radius:2px}.live-web-player-controller.svelte-4rgwwa input[type='checkbox']:checked+label::before{background-color:#ff6699;border:none}.live-web-player-controller.svelte-4rgwwa input[type='checkbox']:checked+label::after{content:'';position:absolute;left:-17px;top:calc(50% - 2px);width:2px;height:6px;border:solid #2b2b2b;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg) translateY(-50%);transform:rotate(45deg) translateY(-50%);border-radius:2px}")}function vn(e){var t,n,i,r,o,a,s,l,c,u,h,d,f,p,v,m,y,g,w,b,_,k,C=e[17].playStatus&&mn(e),x=e[17].refresh&&yn(e),S=e[17].volume&&gn(e),E=e[17].time&&wn(e),M=e[17].leftSetting&&kn(e),T=e[17].dmSend&&Cn(e),P=e[17].fullScreen&&xn(e),L=e[17].webFullScreen&&En(e),I=e[17].danmaku&&Tn(e),D=e[17].subtitle&&In(e),O=e[17].rightSetting&&An(e),B=e[17].pip&&document.pictureInPictureEnabled&&Dn(e),R=e[17].mirror&&Rn(e),F=e[17].quality&&null!=e[9].value&&!e[15]&&Vn(e),H=e[17].quality&&null!=e[9].value&&e[15]&&Fn(e);return{c:function(){t=j("div"),n=j("div"),i=j("div"),C&&C.c(),r=U(),x&&x.c(),o=U(),S&&S.c(),a=U(),E&&E.c(),s=U(),M&&M.c(),l=U(),T&&T.c(),c=U(),u=j("div"),P&&P.c(),h=U(),L&&L.c(),d=U(),I&&I.c(),f=U(),D&&D.c(),p=U(),O&&O.c(),v=U(),B&&B.c(),m=U(),R&&R.c(),y=U(),F&&F.c(),g=U(),H&&H.c(),w=U(),b=j("div"),Z(i,"class","left-area svelte-4rgwwa"),Z(b,"class","ext-nodes svelte-4rgwwa"),Z(u,"class","right-area svelte-4rgwwa"),Z(n,"class","control-area svelte-4rgwwa"),Z(t,"class","live-web-player-controller svelte-4rgwwa"),Z(t,"style",e[16])},m:function(_,V){$(_,t,V),A(t,n),A(n,i),C&&C.m(i,null),A(i,r),x&&x.m(i,null),A(i,o),S&&S.m(i,null),A(i,a),E&&E.m(i,null),A(i,s),M&&M.m(i,null),A(n,l),T&&T.m(n,null),A(n,c),A(n,u),P&&P.m(u,null),A(u,h),L&&L.m(u,null),A(u,d),I&&I.m(u,null),A(u,f),D&&D.m(u,null),A(u,p),O&&O.m(u,null),A(u,v),B&&B.m(u,null),A(u,m),R&&R.m(u,null),A(u,y),F&&F.m(u,null),A(u,g),H&&H.m(u,null),A(u,w),A(u,b),e[42](b),k=!0},p:function(e,l){e[17].playStatus?C?C.p(e,l):((C=mn(e)).c(),C.m(i,r)):C&&(C.d(1),C=null),e[17].refresh?x?x.p(e,l):((x=yn(e)).c(),x.m(i,o)):x&&(x.d(1),x=null),e[17].volume?S?(S.p(e,l),131072&l[0]&&Se(S,1)):((S=gn(e)).c(),Se(S,1),S.m(i,a)):S&&(Ce(),Ee(S,1,1,(function(){S=null})),xe()),e[17].time?E?(E.p(e,l),131072&l[0]&&Se(E,1)):((E=wn(e)).c(),Se(E,1),E.m(i,s)):E&&(Ce(),Ee(E,1,1,(function(){E=null})),xe()),e[17].leftSetting?M?(M.p(e,l),131072&l[0]&&Se(M,1)):((M=kn(e)).c(),Se(M,1),M.m(i,null)):M&&(Ce(),Ee(M,1,1,(function(){M=null})),xe()),e[17].dmSend?T?(T.p(e,l),131072&l[0]&&Se(T,1)):((T=Cn(e)).c(),Se(T,1),T.m(n,c)):T&&(Ce(),Ee(T,1,1,(function(){T=null})),xe()),e[17].fullScreen?P?(P.p(e,l),131072&l[0]&&Se(P,1)):((P=xn(e)).c(),Se(P,1),P.m(u,h)):P&&(Ce(),Ee(P,1,1,(function(){P=null})),xe()),e[17].webFullScreen?L?(L.p(e,l),131072&l[0]&&Se(L,1)):((L=En(e)).c(),Se(L,1),L.m(u,d)):L&&(Ce(),Ee(L,1,1,(function(){L=null})),xe()),e[17].danmaku?I?(I.p(e,l),131072&l[0]&&Se(I,1)):((I=Tn(e)).c(),Se(I,1),I.m(u,f)):I&&(Ce(),Ee(I,1,1,(function(){I=null})),xe()),e[17].subtitle?D?(D.p(e,l),131072&l[0]&&Se(D,1)):((D=In(e)).c(),Se(D,1),D.m(u,p)):D&&(Ce(),Ee(D,1,1,(function(){D=null})),xe()),e[17].rightSetting?O?(O.p(e,l),131072&l[0]&&Se(O,1)):((O=An(e)).c(),Se(O,1),O.m(u,v)):O&&(Ce(),Ee(O,1,1,(function(){O=null})),xe()),e[17].pip&&document.pictureInPictureEnabled?B?(B.p(e,l),131072&l[0]&&Se(B,1)):((B=Dn(e)).c(),Se(B,1),B.m(u,m)):B&&(Ce(),Ee(B,1,1,(function(){B=null})),xe()),e[17].mirror?R?(R.p(e,l),131072&l[0]&&Se(R,1)):((R=Rn(e)).c(),Se(R,1),R.m(u,y)):R&&(Ce(),Ee(R,1,1,(function(){R=null})),xe()),e[17].quality&&null!=e[9].value&&!e[15]?F?(F.p(e,l),164352&l[0]&&Se(F,1)):((F=Vn(e)).c(),Se(F,1),F.m(u,g)):F&&(Ce(),Ee(F,1,1,(function(){F=null})),xe()),e[17].quality&&null!=e[9].value&&e[15]?H?(H.p(e,l),164352&l[0]&&Se(H,1)):((H=Fn(e)).c(),Se(H,1),H.m(u,w)):H&&(Ce(),Ee(H,1,1,(function(){H=null})),xe()),(!k||65536&l[0])&&Z(t,"style",e[16])},i:function(e){k||(Se(S),Se(E),Se(M),Se(T),Se(P),Se(L),Se(I),Se(D),Se(O),Se(B),Se(R),Se(F),Se(H),fe((function(){k&&(_||(_=Te(t,Re,{duration:200},!0)),_.run(1))})),k=!0)},o:function(e){Ee(S),Ee(E),Ee(M),Ee(T),Ee(P),Ee(L),Ee(I),Ee(D),Ee(O),Ee(B),Ee(R),Ee(F),Ee(H),_||(_=Te(t,Re,{duration:200},!1)),_.run(0),k=!1},d:function(n){n&&V(t),C&&C.d(),x&&x.d(),S&&S.d(),E&&E.d(),M&&M.d(),T&&T.d(),P&&P.d(),L&&L.d(),I&&I.d(),D&&D.d(),O&&O.d(),B&&B.d(),R&&R.d(),F&&F.d(),H&&H.d(),e[42](null),n&&_&&_.end()}}}function mn(e){var t,n,i,r=(e[2]?Ve:Fe)+"";return{c:function(){Z(t=j("span"),"class","icon")},m:function(o,a){$(o,t,a),t.innerHTML=r,n||(i=W(t,"click",e[26]),n=!0)},p:function(e,n){4&n[0]&&r!==(r=(e[2]?Ve:Fe)+"")&&(t.innerHTML=r)},d:function(e){e&&V(t),n=!1,i()}}}function yn(e){var t,n,i;return{c:function(){Z(t=j("span"),"class","icon")},m:function(r,o){$(r,t,o),t.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.75 20.5C12.75 20.9142 12.4142 21.25 12 21.25C6.89137 21.25 2.75 17.1086 2.75 12C2.75 9.64808 3.62821 7.50123 5.07312 5.86963H3.01001C2.5958 5.86963 2.26001 5.53384 2.26001 5.11963C2.26001 4.70542 2.5958 4.36963 3.01001 4.36963H7.01001C7.42422 4.36963 7.76001 4.70542 7.76001 5.11963V9.11963C7.76001 9.53384 7.42422 9.86963 7.01001 9.86963C6.5958 9.86963 6.26001 9.53384 6.26001 9.11963V6.7926C5.01041 8.16902 4.25 9.99568 4.25 12C4.25 16.2802 7.71979 19.75 12 19.75C12.4142 19.75 12.75 20.0858 12.75 20.5ZM17.75 17.1963V14.8799C17.75 14.4657 17.4142 14.1299 17 14.1299C16.5858 14.1299 16.25 14.4657 16.25 14.8799V18.8799C16.25 19.2941 16.5858 19.6299 17 19.6299H21C21.4142 19.6299 21.75 19.2941 21.75 18.8799C21.75 18.4657 21.4142 18.1299 21 18.1299H18.9273C20.372 16.4983 21.25 14.3517 21.25 12C21.25 6.89137 17.1086 2.75 12 2.75C11.5858 2.75 11.25 3.08579 11.25 3.5C11.25 3.91421 11.5858 4.25 12 4.25C16.2802 4.25 19.75 7.71979 19.75 12C19.75 13.999 18.9937 15.8212 17.75 17.1963Z" fill="white"/></svg>',n||(i=W(t,"click",e[27]),n=!0)},p:y,d:function(e){e&&V(t),n=!1,i()}}}function gn(e){var t,n;return t=new ft({props:{disabled:e[8].disabled,value:e[8].value,onChange:e[28]}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};256&n[0]&&(i.disabled=e[8].disabled),256&n[0]&&(i.value=e[8].value),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function wn(e){var t,n;return t=new et({props:{text:e[19].tips,$$slots:{default:[_n]},$$scope:{ctx:e}}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};524288&n[0]&&(i.text=e[19].tips),557056&n[0]|32768&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function bn(e){var t,n,i=e[19].value+"";return{c:function(){t=j("span"),n=H(i),Z(t,"class","text time")},m:function(e,i){$(e,t,i),A(t,n)},p:function(e,t){524288&t[0]&&i!==(i=e[19].value+"")&&G(n,i)},d:function(e){e&&V(t)}}}function _n(e){var t,n=!e[15]&&bn(e);return{c:function(){n&&n.c(),t=N()},m:function(e,i){n&&n.m(e,i),$(e,t,i)},p:function(e,i){e[15]?n&&(n.d(1),n=null):n?n.p(e,i):((n=bn(e)).c(),n.m(t.parentNode,t))},d:function(e){n&&n.d(e),e&&V(t)}}}function kn(e){var t,n;return t=new Ft({props:{onChange:e[21]}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:y,i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function Cn(e){var t,n,i;function r(t){e[31](t)}var o={foucsChange:e[29],onSend:e[30]};return void 0!==e[0]&&(o.dmMsg=e[0]),t=new Jt({props:o}),le.push((function(){return Pe(t,"dmMsg",r)})),{c:function(){Le(t.$$.fragment)},m:function(e,n){Ie(t,e,n),i=!0},p:function(e,i){var r={};!n&&1&i[0]&&(n=!0,r.dmMsg=e[0],pe((function(){return n=!1}))),t.$set(r)},i:function(e){i||(Se(t.$$.fragment,e),i=!0)},o:function(e){Ee(t.$$.fragment,e),i=!1},d:function(e){Ae(t,e)}}}function xn(e){var t,n;return t=new et({props:{text:e[15]?"":e[3]?"退出全屏模式":"全屏模式",style:"left: auto; right: -80%;",$$slots:{default:[Sn]},$$scope:{ctx:e}}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};32776&n[0]&&(i.text=e[15]?"":e[3]?"退出全屏模式":"全屏模式"),8&n[0]|32768&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function Sn(e){var t,n,i,r=(e[3]?He:je)+"";return{c:function(){Z(t=j("span"),"class","icon")},m:function(o,a){$(o,t,a),t.innerHTML=r,n||(i=W(t,"click",e[32]),n=!0)},p:function(e,n){8&n[0]&&r!==(r=(e[3]?He:je)+"")&&(t.innerHTML=r)},d:function(e){e&&V(t),n=!1,i()}}}function En(e){var t,n;return t=new et({props:{text:e[15]?"":"".concat(e[4]?"退出":"","网页模式"),$$slots:{default:[Mn]},$$scope:{ctx:e}}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};32784&n[0]&&(i.text=e[15]?"":"".concat(e[4]?"退出":"","网页模式")),16&n[0]|32768&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function Mn(e){var t,n,i,r=(e[4]?Ne:Ue)+"";return{c:function(){Z(t=j("span"),"class","icon")},m:function(o,a){$(o,t,a),t.innerHTML=r,n||(i=W(t,"click",e[33]),n=!0)},p:function(e,n){16&n[0]&&r!==(r=(e[4]?Ne:Ue)+"")&&(t.innerHTML=r)},d:function(e){e&&V(t),n=!1,i()}}}function Tn(e){var t,n,i,r=!e[15]&&e[17].danmakuPanel&&Pn(e);return n=new et({props:{text:e[15]?"":e[12].display?"关闭弹幕":"开启弹幕",$$slots:{default:[Ln]},$$scope:{ctx:e}}}),{c:function(){r&&r.c(),t=U(),Le(n.$$.fragment)},m:function(e,o){r&&r.m(e,o),$(e,t,o),Ie(n,e,o),i=!0},p:function(e,i){!e[15]&&e[17].danmakuPanel?r?(r.p(e,i),163840&i[0]&&Se(r,1)):((r=Pn(e)).c(),Se(r,1),r.m(t.parentNode,t)):r&&(Ce(),Ee(r,1,1,(function(){r=null})),xe());var o={};36864&i[0]&&(o.text=e[15]?"":e[12].display?"关闭弹幕":"开启弹幕"),4096&i[0]|32768&i[1]&&(o.$$scope={dirty:i,ctx:e}),n.$set(o)},i:function(e){i||(Se(r),Se(n.$$.fragment,e),i=!0)},o:function(e){Ee(r),Ee(n.$$.fragment,e),i=!1},d:function(e){r&&r.d(e),e&&V(t),Ae(n,e)}}}function Pn(e){var t,n;return t=new Kt({props:{options:e[12],onChange:e[34]}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};4096&n[0]&&(i.options=e[12]),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function Ln(e){var t,n,i,r=(e[12].display?Ke:Ge)+"";return{c:function(){Z(t=j("span"),"class","icon")},m:function(o,a){$(o,t,a),t.innerHTML=r,n||(i=W(t,"click",e[35]),n=!0)},p:function(e,n){4096&n[0]&&r!==(r=(e[12].display?Ke:Ge)+"")&&(t.innerHTML=r)},d:function(e){e&&V(t),n=!1,i()}}}function In(e){var t,n;return t=new fn({props:{visible:e[7].visible,draggable:e[7].draggable,onChange:e[36]}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};128&n[0]&&(i.visible=e[7].visible),128&n[0]&&(i.draggable=e[7].draggable),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function An(e){var t,n;return t=new Ft({props:{onChange:e[21]}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:y,i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function Dn(e){var t,n;return t=new et({props:{text:e[5]?"退出小窗模式":"小窗模式",$$slots:{default:[Bn]},$$scope:{ctx:e}}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};32&n[0]&&(i.text=e[5]?"退出小窗模式":"小窗模式"),32800&n[0]|32768&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function On(e){var t,n,i,r=(e[5]?We:ze)+"";return{c:function(){Z(t=j("span"),"class","icon")},m:function(o,a){$(o,t,a),t.innerHTML=r,n||(i=W(t,"click",e[37]),n=!0)},p:function(e,n){32&n[0]&&r!==(r=(e[5]?We:ze)+"")&&(t.innerHTML=r)},d:function(e){e&&V(t),n=!1,i()}}}function Bn(e){var t,n=!e[15]&&On(e);return{c:function(){n&&n.c(),t=N()},m:function(e,i){n&&n.m(e,i),$(e,t,i)},p:function(e,i){e[15]?n&&(n.d(1),n=null):n?n.p(e,i):((n=On(e)).c(),n.m(t.parentNode,t))},d:function(e){n&&n.d(e),e&&V(t)}}}function Rn(e){var t,n;return t=new et({props:{text:e[6]?"退出镜像模式":"镜像模式",$$slots:{default:[$n]},$$scope:{ctx:e}}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};64&n[0]&&(i.text=e[6]?"退出镜像模式":"镜像模式"),64&n[0]|32768&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function $n(e){var t,n,i,r=(e[6]?qe:Ze)+"";return{c:function(){Z(t=j("span"),"class","icon")},m:function(o,a){$(o,t,a),t.innerHTML=r,n||(i=W(t,"click",e[38]),n=!0)},p:function(e,n){64&n[0]&&r!==(r=(e[6]?qe:Ze)+"")&&(t.innerHTML=r)},d:function(e){e&&V(t),n=!1,i()}}}function Vn(e){var t,n;return t=new Ot({props:{qualityList:e[9].list,quality:e[9].value,lineList:e[10].list,line:e[10].value,videoEnhanceConf:e[11],onChange:e[39]}}),{c:function(){Le(t.$$.fragment)},m:function(e,i){Ie(t,e,i),n=!0},p:function(e,n){var i={};512&n[0]&&(i.qualityList=e[9].list),512&n[0]&&(i.quality=e[9].value),1024&n[0]&&(i.lineList=e[10].list),1024&n[0]&&(i.line=e[10].value),2048&n[0]&&(i.videoEnhanceConf=e[11]),t.$set(i)},i:function(e){n||(Se(t.$$.fragment,e),n=!0)},o:function(e){Ee(t.$$.fragment,e),n=!1},d:function(e){Ae(t,e)}}}function Fn(e){var t,n,i;function r(t){e[41](t)}var o={container:e[13],quality:e[9].value,qualityList:e[9].list,onChange:e[40]};return void 0!==e[1]&&(o.ref=e[1]),t=new an({props:o}),le.push((function(){return Pe(t,"ref",r)})),{c:function(){Le(t.$$.fragment)},m:function(e,n){Ie(t,e,n),i=!0},p:function(e,i){var r={};8192&i[0]&&(r.container=e[13]),512&i[0]&&(r.quality=e[9].value),512&i[0]&&(r.qualityList=e[9].list),!n&&2&i[0]&&(n=!0,r.ref=e[1],pe((function(){return n=!1}))),t.$set(r)},i:function(e){i||(Se(t.$$.fragment,e),i=!0)},o:function(e){Ee(t.$$.fragment,e),i=!1},d:function(e){Ae(t,e)}}}function jn(e){var t,n,i=e[14]&&vn(e);return{c:function(){i&&i.c(),t=N()},m:function(e,r){i&&i.m(e,r),$(e,t,r),n=!0},p:function(e,n){e[14]?i?(i.p(e,n),16384&n[0]&&Se(i,1)):((i=vn(e)).c(),Se(i,1),i.m(t.parentNode,t)):i&&(Ce(),Ee(i,1,1,(function(){i=null})),xe())},i:function(e){n||(Se(i),n=!0)},o:function(e){Ee(i),n=!1},d:function(e){i&&i.d(e),e&&V(t)}}}function Hn(e,t,n){var i,r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},o=t.onChange,a=t.container,l=t.show,c=t.isMobile,u=void 0!==c&&c,h=t.dmMsg,d=void 0===h?"":h,v=t.style,m=void 0===v?"":v,y=t.qualityPanelRef,g=t.ctrlItemVisibility,w=void 0===g?{playStatus:!0,volume:!0,time:!0,refresh:!0,leftSetting:!1,quality:!0,danmaku:!0,rightSetting:!1,fullScreen:!0,webFullScreen:!0,danmakuPanel:!0,pip:!0,mirror:!1,dmSend:!1,subtitle:!1}:g,b=t.playStatus,_=void 0!==b&&b,k=t.fullScreenStatus,C=void 0!==k&&k,x=t.webFullScreenStatus,S=void 0!==x&&x,E=t.pipStatus,M=void 0!==E&&E,T=t.mirrorStatus,P=void 0!==T&&T,L=t.subtitleStatus,I=void 0===L?{visible:!1,draggable:!1}:L,A=t.onRefresh,D=t.time,O=void 0===D?{value:"",tips:""}:D,B=t.volume,R=void 0===B?{disabled:!1,value:50}:B,$=t.quality,V=t.line,F=t.videoEnhanceConf,j=t.danmakuPanel,H=void 0===j||j,U=t.danmaku,N=void 0===U?{display:!0,opacity:100,fontScale:100,density:100,enableMask:!0,showMaskOption:!1,area:4}:U,W=t.playerType,z=void 0===W?"html5":W,q=new Map;function Z(){null!=i&&p(q.entries()).sort((function(e,t){return f(e,2)[1]-f(t,2)[1]})).map((function(e){return f(e,1)[0]})).forEach((function(e){i.appendChild(e)}))}var G=function(e,t){return r(void 0,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(e,t);case 2:if(i.t0=i.sent,!1!==i.t0){i.next=5;break}return i.abrupt("return");case 5:i.t1=e,i.next="playStatus"===i.t1?8:"volume"===i.t1?10:"quality"===i.t1?12:"line"===i.t1?14:"videoEnhance"===i.t1?16:"playerType"===i.t1?18:"danmaku"===i.t1?20:"fullScreenStatus"===i.t1?22:"webFullScreenStatus"===i.t1?24:"danmakuPanel"===i.t1?26:"pipStatus"===i.t1?28:"mirrorStatus"===i.t1?30:"subtitle"===i.t1?32:34;break;case 8:return n(2,_=t),i.abrupt("break",34);case 10:return n(8,R=Object.assign({},R,t)),i.abrupt("break",34);case 12:return n(9,$.value=t,$),i.abrupt("break",34);case 14:return n(10,V.value=t,V),i.abrupt("break",34);case 16:return n(11,F.status=t,F),i.abrupt("break",34);case 18:return n(23,z=t),i.abrupt("break",34);case 20:return n(12,N=Object.assign({},N,t)),i.abrupt("break",34);case 22:return n(3,C=t),i.abrupt("break",34);case 24:return n(4,S=t),i.abrupt("break",34);case 26:return n(22,H=t),i.abrupt("break",34);case 28:return n(5,M=t),i.abrupt("break",34);case 30:return n(6,P=t),i.abrupt("break",34);case 32:return n(7,I=Object.assign({},I,t)),i.abrupt("break",34);case 34:case"end":return i.stop()}}),i)})))};return e.$$set=function(e){"onChange"in e&&n(24,o=e.onChange),"container"in e&&n(13,a=e.container),"show"in e&&n(14,l=e.show),"isMobile"in e&&n(15,u=e.isMobile),"dmMsg"in e&&n(0,d=e.dmMsg),"style"in e&&n(16,m=e.style),"qualityPanelRef"in e&&n(1,y=e.qualityPanelRef),"ctrlItemVisibility"in e&&n(17,w=e.ctrlItemVisibility),"playStatus"in e&&n(2,_=e.playStatus),"fullScreenStatus"in e&&n(3,C=e.fullScreenStatus),"webFullScreenStatus"in e&&n(4,S=e.webFullScreenStatus),"pipStatus"in e&&n(5,M=e.pipStatus),"mirrorStatus"in e&&n(6,P=e.mirrorStatus),"subtitleStatus"in e&&n(7,I=e.subtitleStatus),"onRefresh"in e&&n(18,A=e.onRefresh),"time"in e&&n(19,O=e.time),"volume"in e&&n(8,R=e.volume),"quality"in e&&n(9,$=e.quality),"line"in e&&n(10,V=e.line),"videoEnhanceConf"in e&&n(11,F=e.videoEnhanceConf),"danmakuPanel"in e&&n(22,H=e.danmakuPanel),"danmaku"in e&&n(12,N=e.danmaku),"playerType"in e&&n(23,z=e.playerType)},e.$$.update=function(){e.$$.dirty[0],1064960&e.$$.dirty[0]&&l&&i&&Z()},[d,y,_,C,S,M,P,I,R,$,V,F,N,a,l,u,m,w,A,O,i,G,H,z,o,function(e,t){var n=t.xIndex;return q.set(e,n),Z(),function(){q.delete(e),e.remove()}},function(){return G("playStatus",!_)},function(){var e;return null===(e=A)||void 0===e?void 0:e()},function(e){return G("volume",e)},function(e){G("dmInputFocus",e)},function(e){G("dmSend",e)},function(e){n(0,d=e)},function(){return G("fullScreenStatus",!C)},function(){return G("webFullScreenStatus",!S)},function(e,t){return G("danmaku",s({},e,t))},function(){G("danmaku",{display:!N.display})},function(e){return G("subtitle",e)},function(){return G("pipStatus",!document.pictureInPictureElement)},function(){return G("mirrorStatus",!P)},function(e,t){return G(e,t)},function(e,t){return G(e,t)},function(e){n(1,y=e)},function(e){le[e?"unshift":"push"]((function(){n(20,i=e)}))}]}var Un=function(e){l(n,Oe);var t=d(n);function n(e){var i;return r(this,n),De(h(i=t.call(this)),e,Hn,jn,C,{onChange:24,container:13,show:14,isMobile:15,dmMsg:0,style:16,qualityPanelRef:1,ctrlItemVisibility:17,playStatus:2,fullScreenStatus:3,webFullScreenStatus:4,pipStatus:5,mirrorStatus:6,subtitleStatus:7,onRefresh:18,time:19,volume:8,quality:9,line:10,videoEnhanceConf:11,danmakuPanel:22,danmaku:12,playerType:23,appendCtrlItem:25},pn,[-1,-1]),i}return a(n,[{key:"onChange",get:function(){return this.$$.ctx[24]},set:function(e){this.$$set({onChange:e}),ge()}},{key:"container",get:function(){return this.$$.ctx[13]},set:function(e){this.$$set({container:e}),ge()}},{key:"show",get:function(){return this.$$.ctx[14]},set:function(e){this.$$set({show:e}),ge()}},{key:"isMobile",get:function(){return this.$$.ctx[15]},set:function(e){this.$$set({isMobile:e}),ge()}},{key:"dmMsg",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({dmMsg:e}),ge()}},{key:"style",get:function(){return this.$$.ctx[16]},set:function(e){this.$$set({style:e}),ge()}},{key:"qualityPanelRef",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({qualityPanelRef:e}),ge()}},{key:"ctrlItemVisibility",get:function(){return this.$$.ctx[17]},set:function(e){this.$$set({ctrlItemVisibility:e}),ge()}},{key:"playStatus",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({playStatus:e}),ge()}},{key:"fullScreenStatus",get:function(){return this.$$.ctx[3]},set:function(e){this.$$set({fullScreenStatus:e}),ge()}},{key:"webFullScreenStatus",get:function(){return this.$$.ctx[4]},set:function(e){this.$$set({webFullScreenStatus:e}),ge()}},{key:"pipStatus",get:function(){return this.$$.ctx[5]},set:function(e){this.$$set({pipStatus:e}),ge()}},{key:"mirrorStatus",get:function(){return this.$$.ctx[6]},set:function(e){this.$$set({mirrorStatus:e}),ge()}},{key:"subtitleStatus",get:function(){return this.$$.ctx[7]},set:function(e){this.$$set({subtitleStatus:e}),ge()}},{key:"onRefresh",get:function(){return this.$$.ctx[18]},set:function(e){this.$$set({onRefresh:e}),ge()}},{key:"time",get:function(){return this.$$.ctx[19]},set:function(e){this.$$set({time:e}),ge()}},{key:"volume",get:function(){return this.$$.ctx[8]},set:function(e){this.$$set({volume:e}),ge()}},{key:"quality",get:function(){return this.$$.ctx[9]},set:function(e){this.$$set({quality:e}),ge()}},{key:"line",get:function(){return this.$$.ctx[10]},set:function(e){this.$$set({line:e}),ge()}},{key:"videoEnhanceConf",get:function(){return this.$$.ctx[11]},set:function(e){this.$$set({videoEnhanceConf:e}),ge()}},{key:"danmakuPanel",get:function(){return this.$$.ctx[22]},set:function(e){this.$$set({danmakuPanel:e}),ge()}},{key:"danmaku",get:function(){return this.$$.ctx[12]},set:function(e){this.$$set({danmaku:e}),ge()}},{key:"playerType",get:function(){return this.$$.ctx[23]},set:function(e){this.$$set({playerType:e}),ge()}},{key:"appendCtrlItem",get:function(){return this.$$.ctx[25]}}]),n}();const Nn=Un},562:function(e){
/*!
* Bilibili Player Danmaku Websocket Component v1.4.5 (40)
*
* Copyright 2016 - 2023 Bilibili, Inc.
* Released in Fri May 12 2023 15:30:19 GMT+0800 (China Standard Time)
*/
"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";var i={WS_OP_HEARTBEAT:2,WS_OP_HEARTBEAT_REPLY:3,WS_OP_MESSAGE:5,WS_OP_USER_AUTHENTICATION:7,WS_OP_CONNECT_SUCCESS:8,WS_PACKAGE_HEADER_TOTAL_LENGTH:16,WS_PACKAGE_OFFSET:0,WS_HEADER_OFFSET:4,WS_VERSION_OFFSET:6,WS_OPERATION_OFFSET:8,WS_SEQUENCE_OFFSET:12,WS_BODY_PROTOCOL_VERSION_NORMAL:0,WS_BODY_PROTOCOL_VERSION_BROTLI:3,WS_HEADER_DEFAULT_VERSION:1,WS_HEADER_DEFAULT_OPERATION:1,WS_HEADER_DEFAULT_SEQUENCE:1,WS_AUTH_OK:0,WS_AUTH_TOKEN_ERROR:-101};t.a=i},function(e,t,n){var i=n(2).default;e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){return i(this,e),"development"===e.CONFIG.bundleType&&(console.clear(),console.dir(e.CONFIG)),this.initialize(t)}return e.prototype.initialize=function(t){var n=this;"development"===e.CONFIG.bundleType&&console.log("App Initialized.");var i=document.createElement("script");return i.src="//activity.hdslb.com/blackboard/static/20210425/d0411babbbf77c49ca42a3320eb804ae/0NCT06vruR.js",i.onload=function(){n.ws=new r.a(t)},window.document.head.append(i),this.getReturn()},e.prototype.getReturn=function(){return"development"===e.CONFIG.bundleType?this:{destroy:this.destroy.bind(this),send:this.send.bind(this),getAuthInfo:this.getAuthInfo.bind(this),getRetryCount:this.getRetryCount.bind(this),getState:this.getState.bind(this)}},e.prototype.destroy=function(){this.ws&&this.ws.destroy()},e.prototype.getState=function(){return this.ws&&this.ws.getState()},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.getAuthInfo=function(){return this.ws&&this.ws.getAuthInfo()},e.prototype.getRetryCount=function(){return this.ws&&this.ws.getRetryCount()},o(e,null,[{key:"CONFIG",get:function(){return{version:"1.4.5",gitHash:"cbde3454",build:"41",bundleType:"release"}}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=n(4),a=n(5),s=function(){function e(t){if(i(this,e),e.checkOptions(t)){var n={url:"",urlList:[],rid:0,aid:0,uid:0,from:-1,retry:!0,retryMaxCount:0,retryInterval:5,retryThreadCount:10,connectTimeout:5e3,retryConnectCount:3,retryconnectTimeout:1e4,retryRoundInterval:Math.floor(2*Math.random())+3,customAuthParam:[],fallback:function(){},heartBeatInterval:30,onReceivedMessage:function(){},onReceiveAuthRes:function(){},onHeartBeatReply:function(){},onInitialized:function(){},onOpen:function(){},onClose:function(){},onError:function(){},onListConnectError:function(){},onLogger:function(){}};this.options=a.a.extend({},n,t),this.wsBinaryHeaderList=a.a.extend([],o.a),this.authInfo={origin:"",encode:""},0!==this.options.urlList.length&&0!==this.options.retryMaxCount&&this.options.retryMaxCount<this.options.urlList.length&&(this.options.retryMaxCount=this.options.urlList.length-1),this.state={retryCount:0,listConnectFinishedCount:0,index:0,connectTimeoutTimes:0,url:""},this.callbackQueueList={onInitializedQueue:[],onOpenQueue:[],onCloseQueue:[],onErrorQueue:[],onReceivedMessageQueue:[],onHeartBeatReplyQueue:[],onRetryFallbackQueue:[],onListConnectErrorQueue:[],onReceiveAuthResQueue:[]},this.HEART_BEAT_INTERVAL=0,this.CONNECT_TIMEOUT=0,this.mixinCallback().initialize(this.options.urlList.length>0?this.options.urlList[0]:this.options.url)}}return e.prototype.initialize=function(e){var t=this,n="MozWebSocket"in window?window.MozWebSocket:window.WebSocket,i=this.options;try{this.state.url=e,this.ws=new n(e),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),a.a.callFunction(this.callbackQueueList.onInitializedQueue),this.callbackQueueList.onInitializedQueue=[];var r=this.state.connectTimeoutTimes>=3?i.retryconnectTimeout:i.connectTimeout;this.CONNECT_TIMEOUT=setTimeout((function(){t.state.connectTimeoutTimes+=1,t.options.onLogger("connect timeout "+t.state.connectTimeoutTimes),t.ws.close()}),r)}catch(e){"function"==typeof i.fallback&&i.fallback()}return this},e.prototype.onOpen=function(){return a.a.callFunction(this.callbackQueueList.onOpenQueue),this.state.connectTimeoutTimes=0,this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.userAuthentication(),this},e.prototype.userAuthentication=function(){var e=this,t=this.options,n=(/buvid3=(.+?)(;|\s|$)/.exec(document.cookie)||[])[1]||"",i={uid:parseInt(t.uid,10),roomid:parseInt(t.rid,10),protover:3,buvid:n},o="";t.aid&&(i.aid=parseInt(t.aid,10)),t.from>0&&(i.from=parseInt(t.from,10)||7);for(var a=0;a<t.customAuthParam.length;a++){var s=t.customAuthParam[a],l=s.type||"string";switch(void 0!==i[s.key]&&this.options.onLogger("Token has the same key already! 【"+s.key+"】"),s.key.toString()&&s.value.toString()||this.options.onLogger("Invalid customAuthParam, missing key or value! 【"+s.key+"】-【"+s.value+"】"),l){case"string":i[s.key]=s.value;break;case"number":i[s.key]=parseInt(s.value,10);break;case"boolean":i[s.key]=!!i[s.value];break;default:return void this.options.onLogger("Unsupported customAuthParam type!【"+l+"】")}}o=this.convertToArrayBuffer(JSON.stringify(i),r.a.WS_OP_USER_AUTHENTICATION),this.authInfo.origin=i,this.authInfo.encode=o,setTimeout((function(){e.ws.send(o)}),0)},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.getState=function(){return this.state},e.prototype.heartBeat=function(){var e=this;clearTimeout(this.HEART_BEAT_INTERVAL);var t=this.convertToArrayBuffer({},r.a.WS_OP_HEARTBEAT);this.ws.send(t),this.HEART_BEAT_INTERVAL=setTimeout((function(){e.heartBeat()}),1e3*this.options.heartBeatInterval)},e.prototype.onMessage=function(e){var t=this;try{var n=this.convertToObject(e.data);if(n instanceof Array)n.forEach((function(e){t.onMessage(e)}));else if(n instanceof Object)switch(n.op){case r.a.WS_OP_HEARTBEAT_REPLY:this.onHeartBeatReply(n.body);break;case r.a.WS_OP_MESSAGE:this.onMessageReply(n.body,n.seq);break;case r.a.WS_OP_CONNECT_SUCCESS:if(0!==n.body.length&&n.body[0])switch(n.body[0].code){case r.a.WS_AUTH_OK:this.heartBeat();break;case r.a.WS_AUTH_TOKEN_ERROR:this.options.retry=!1,"function"==typeof this.options.onReceiveAuthRes&&this.options.onReceiveAuthRes(n.body);break;default:this.onClose()}else this.heartBeat()}}catch(e){this.options.onLogger("WebSocket Error: ",e)}return this},e.prototype.onMessageReply=function(e,t){var n=this;try{e instanceof Array?e.forEach((function(e){n.onMessageReply(e,t)})):e instanceof Object&&"function"==typeof this.options.onReceivedMessage&&this.options.onReceivedMessage(e,t)}catch(e){this.options.onLogger("On Message Resolve Error: ",e)}},e.prototype.onHeartBeatReply=function(e){a.a.callFunction(this.callbackQueueList.onHeartBeatReplyQueue,e)},e.prototype.onClose=function(e){var t=this,n=this.options.urlList.length;return a.a.callFunction(this.callbackQueueList.onCloseQueue,e),clearTimeout(this.HEART_BEAT_INTERVAL),this.options.retry?(this.checkRetryState()?setTimeout((function(){t.options.onLogger("Danmaku Websocket Retry .",t.state.retryCount),t.state.index+=1,0===n||t.state.retryCount>t.options.retryThreadCount?setTimeout((function(){t.initialize(t.options.url)}),1e3*t.options.retryRoundInterval):0!==n&&t.state.index>n-1?(t.state.index=0,t.state.listConnectFinishedCount+=1,1===t.state.listConnectFinishedCount&&a.a.callFunction(t.callbackQueueList.onListConnectErrorQueue),setTimeout((function(){t.initialize(t.options.urlList[t.state.index])}),1e3*t.options.retryRoundInterval)):t.initialize(t.options.urlList[t.state.index])}),1e3*this.options.retryInterval):(this.options.onLogger("Danmaku Websocket Retry Failed."),a.a.callFunction(this.callbackQueueList.onRetryFallbackQueue)),this):this},e.prototype.onError=function(e){return this.options.onLogger("Danmaku Websocket On Error.",e),a.a.callFunction(this.callbackQueueList.onErrorQueue,e),this},e.prototype.destroy=function(){this.HEART_BEAT_INTERVAL&&clearTimeout(this.HEART_BEAT_INTERVAL),this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.options.retry=!1,this.ws&&this.ws.close(),this.ws=null},e.prototype.convertToArrayBuffer=function(e,t){this.encoder||(this.encoder=a.a.getEncoder());var n=new ArrayBuffer(r.a.WS_PACKAGE_HEADER_TOTAL_LENGTH),i=new DataView(n,r.a.WS_PACKAGE_OFFSET),o=this.encoder.encode(e);return i.setInt32(r.a.WS_PACKAGE_OFFSET,r.a.WS_PACKAGE_HEADER_TOTAL_LENGTH+o.byteLength),this.wsBinaryHeaderList[2].value=t,this.wsBinaryHeaderList.forEach((function(e){4===e.bytes?i.setInt32(e.offset,e.value):2===e.bytes&&i.setInt16(e.offset,e.value)})),a.a.mergeArrayBuffer(n,o)},e.prototype.convertToObject=function(e){var t=new DataView(e),n={body:[]};if(n.packetLen=t.getInt32(r.a.WS_PACKAGE_OFFSET),this.wsBinaryHeaderList.forEach((function(e){4===e.bytes?n[e.key]=t.getInt32(e.offset):2===e.bytes&&(n[e.key]=t.getInt16(e.offset))})),n.packetLen<e.byteLength&&this.convertToObject(e.slice(0,n.packetLen)),this.decoder||(this.decoder=a.a.getDecoder()),!n.op||r.a.WS_OP_MESSAGE!==n.op&&n.op!==r.a.WS_OP_CONNECT_SUCCESS)n.op&&r.a.WS_OP_HEARTBEAT_REPLY===n.op&&(n.body={count:t.getInt32(r.a.WS_PACKAGE_HEADER_TOTAL_LENGTH)});else for(var i=r.a.WS_PACKAGE_OFFSET,o=n.packetLen,s="",l="";i<e.byteLength;i+=o){o=t.getInt32(i),s=t.getInt16(i+r.a.WS_HEADER_OFFSET);try{if(n.ver===r.a.WS_BODY_PROTOCOL_VERSION_NORMAL){var c=this.decoder.decode(e.slice(i+s,i+o));l=0!==c.length?JSON.parse(c):null}else if(n.ver===r.a.WS_BODY_PROTOCOL_VERSION_BROTLI){var u=e.slice(i+s,i+o),h=window.BrotliDecode(new Uint8Array(u));l=this.convertToObject(h.buffer).body}l&&n.body.push(l)}catch(t){this.options.onLogger("decode body error:",new Uint8Array(e),n,t)}}return n},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.addCallback=function(e,t){return"function"==typeof e&&t instanceof Array&&t.push(e),this},e.prototype.mixinCallback=function(){var e=this.options,t=this.callbackQueueList;return this.addCallback(e.onReceivedMessage,t.onReceivedMessageQueue).addCallback(e.onHeartBeatReply,t.onHeartBeatReplyQueue).addCallback(e.onInitialized,t.onInitializedQueue).addCallback(e.onOpen,t.onOpenQueue).addCallback(e.onClose,t.onCloseQueue).addCallback(e.onError,t.onErrorQueue).addCallback(e.onRetryFallback,t.onRetryFallbackQueue).addCallback(e.onListConnectError,t.onListConnectErrorQueue).addCallback(e.onReceiveAuthRes,t.onReceiveAuthResQueue),this},e.prototype.getRetryCount=function(){return this.state.retryCount},e.prototype.checkRetryState=function(){var e=this.options,t=!1;return(0===e.retryMaxCount||this.state.retryCount<e.retryMaxCount)&&(this.state.retryCount+=1,t=!0),t},e.checkOptions=function(e){return e||e instanceof Object?e.url?null!=e.rid||(console.error("WebSocket Initialize options rid(cid) missing."),!1):(this.options.onLogger("WebSocket Initialize options url missing."),!1):(this.options.onLogger("WebSocket Initialize options missing or error.",e),!1)},e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=[{name:"Header Length",key:"headerLen",bytes:2,offset:i.a.WS_HEADER_OFFSET,value:i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH},{name:"Protocol Version",key:"ver",bytes:2,offset:i.a.WS_VERSION_OFFSET,value:i.a.WS_HEADER_DEFAULT_VERSION},{name:"Operation",key:"op",bytes:4,offset:i.a.WS_OPERATION_OFFSET,value:i.a.WS_HEADER_DEFAULT_OPERATION},{name:"Sequence Id",key:"seq",bytes:4,offset:i.a.WS_SEQUENCE_OFFSET,value:i.a.WS_HEADER_DEFAULT_SEQUENCE}];t.a=r},function(e,t,n){"use strict";var i={getDecoder:function(){return window.TextDecoder?new window.TextDecoder:{decode:function(e){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,new Uint8Array(e))))}}},getEncoder:function(){return window.TextEncoder?new window.TextEncoder:{encode:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t}}},mergeArrayBuffer:function(e,t){var n=new Uint8Array(e),i=new Uint8Array(t),r=new Uint8Array(n.byteLength+i.byteLength);return r.set(n,0),r.set(i,n.byteLength),r.buffer},callFunction:function(e,t){return e instanceof Array&&e.length?(e.forEach((function(e){return"function"==typeof e&&e(t)})),null):"function"==typeof e&&e(t)},extend:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=e||{};return r instanceof Object&&n.forEach((function(e){e instanceof Object&&Object.keys(e).forEach((function(t){r[t]=e[t]}))})),r}};t.a=i}])}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.m=r,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var r=Object.create(null);a.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(r,o),r},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"web-player.sisters.5ab565f8.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="@bilibili-live/web-player-biz:",a.l=(e,t,r,o)=>{if(n[e])n[e].push(t);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==i+r){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",i+r),s.src=e),n[e]=[t];var d=(t,i)=>{s.onerror=s.onload=null,clearTimeout(f);var r=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(i))),t)return t(i)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="//s1.hdslb.com/bfs/static/bilibili-live-player/",(()=>{var e={243:0};a.f.j=(t,n)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var o=a.p+a.u(t),s=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,r,[o,s,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(l)l(a)}for(t&&t(n);c<o.length;c++)r=o[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunk_bilibili_live_web_player_biz=self.webpackChunk_bilibili_live_web_player_biz||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0,(()=>{"use strict";var e=a(163),t=a(505),n=a(9626),i=(a(8166),a(5167)),r=a.n(i);const o=10;function s(e,t,n){for(var i,r=0,a=0;t<n&&r<o;){var s=e[t],l=127&s;if(a+=l<<=7*r,r++,t++,0==(128&s))return{bufPos:t,value:(i=a,i>>1^1+~(1&i))}}return{bufPos:-1,value:-1}}function l(e,t,n){return t+4>n?{bufPos:-1,value:-1}:{bufPos:t+4,value:e.getFloat32(t)}}class c{constructor(){this.currentTime=0,this.currentMask="",this.hasVideoInfo=!1,this.videoInfo={direction:"",padding:0},this._masks=[]}clear(){this._masks.splice(0,this._masks.length)}input(e,t){const n=function(e,t){var n=0,i=0,r=0,o=0,a=0,c=0,u=0,h="",d=0,f=0,p=0,v=0,m=0,y=0;const g=new DataView(e.buffer,0,t);for(;n<t;){var w=s(e,n,t);switch(n=w.bufPos,w.value){case 1:n=(w=s(e,n,t)).bufPos;break;case 2:n=(w=l(g,n,t)).bufPos,i=w.value,n=(w=l(g,n,t)).bufPos,r=w.value,n=(w=l(g,n,t)).bufPos,o=w.value,n=(w=l(g,n,t)).bufPos,a=w.value,n=(w=l(g,n,t)).bufPos,c=w.value,n=(w=l(g,n,t)).bufPos,u=w.value;break;case 3:h+="z ";break;case 4:n=(w=s(e,n,t)).bufPos,d=w.value,n=(w=s(e,n,t)).bufPos,f=w.value,h+="M"+d.toString()+" "+f.toString()+" ";break;case 5:n=(w=s(e,n,t)).bufPos,d=w.value,n=(w=s(e,n,t)).bufPos,f=w.value,h+="m"+d.toString()+" "+f.toString()+" ";break;case 6:n=(w=s(e,n,t)).bufPos,d=w.value,n=(w=s(e,n,t)).bufPos,f=w.value,h+="L"+d.toString()+" "+f.toString()+" ";break;case 7:n=(w=s(e,n,t)).bufPos,d=w.value,n=(w=s(e,n,t)).bufPos,f=w.value,h+="l"+d.toString()+" "+f.toString()+" ";break;case 8:n=(w=s(e,n,t)).bufPos,d=w.value,n=(w=s(e,n,t)).bufPos,f=w.value,n=(w=s(e,n,t)).bufPos,p=w.value,n=(w=s(e,n,t)).bufPos,v=w.value,n=(w=s(e,n,t)).bufPos,m=w.value,n=(w=s(e,n,t)).bufPos,y=w.value,h+="C"+d.toString()+" "+f.toString()+" "+p.toString()+" "+v.toString()+" "+m.toString()+" "+y.toString()+" ";break;case 9:n=(w=s(e,n,t)).bufPos,d=w.value,n=(w=s(e,n,t)).bufPos,f=w.value,n=(w=s(e,n,t)).bufPos,p=w.value,n=(w=s(e,n,t)).bufPos,v=w.value,n=(w=s(e,n,t)).bufPos,m=w.value,n=(w=s(e,n,t)).bufPos,y=w.value,h+="c"+d.toString()+" "+f.toString()+" "+p.toString()+" "+v.toString()+" "+m.toString()+" "+y.toString()+" "}}return 0===h.length?"":`<?xml version="1.0" standalone="no"?>\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n      width="${i}px" height="${r}px" viewBox="0 0 ${i} ${r}"\n      preserveAspectRatio="xMidYMid meet">\n      <g transform="translate(${o}, ${a}) scale(${c}, ${u})"\n      fill="#000000" stroke="none" shape-rendering="optimizeSpeed">\n      <path d="${h}"></path>\n      </g>\n  </svg>`}(t,t.length);""!==n&&this._addMask({timestamp:e,mask:n})}output(e){if(0===this._masks.length)return null;for(var t=0,n=e-this._masks[0].timestamp,i=Math.abs(n),r=1;r<this._masks.length;++r){var o=Math.abs(e-this._masks[r].timestamp),a=Math.abs(o);if(!(a<=i))break;t=r,n=o,i=a}const s=this._masks[t];return this._masks.splice(0,t),s}_addMask(e){if(0===this._masks.length)this._masks.push(e);else{for(var t=this._masks.length-1;t>=0;--t){if(this._masks[t].timestamp<e.timestamp){t+=1;break}}this._masks.splice(t,0,e),t>0&&this._masks[t].timestamp<this._masks[t-1].timestamp&&this._masks.splice(0,t)}}static equalsUuid(e,t){if(16!==e.length||16!==t.length)return!1;for(var n=0;n<16;++n)if(e[n]!==t[n])return!1;return!0}onUpdateMask(e,t){const n=e.currentTime;this.getVideoInfo(e);const i=this.output(n);if(null!=this.currentTime&&this.currentTime-n>1&&t.style.removeProperty("-webkit-mask-image"),null==i||null==i.mask||i.mask===this.currentMask)return this.currentMask="",void(this.currentTime=0);const r=i.mask;if(null===r||r===this.currentMask)return this.currentMask="",void(this.currentTime=0);if(i.timestamp-n<=1&&this.hasVideoInfo){const e="data:image/svg+xml;base64,"+btoa(r),n=`linear-gradient(\n        to ${this.videoInfo.direction},\n        rgb(0,0,0,1),\n        rgb(0,0,0,1) ${this.videoInfo.padding}%,\n        rgb(0,0,0,0) ${this.videoInfo.padding}%,\n        rgba(0,0,0,0) ${100-this.videoInfo.padding}%,\n        rgba(0,0,0,1) ${100-this.videoInfo.padding}%,\n        rgba(0,0,0,1)),\n        url(${e})`;t.style.cssText+=`\n        -webkit-mask-image: ${n};\n        -webkit-mask-size: contain;\n        mask-size: contain;\n        -webkit-mask-repeat: no-repeat;\n        mask-repeat: no-repeat;\n        -webkit-mask-position: center center;\n        mask-position: center center;\n      `,this.currentMask=r,this.currentTime=i.timestamp}}destroy(){this._masks=[]}getVideoInfo(e){const t=e.videoHeight,n=e.videoWidth,i=e.clientHeight,r=e.clientWidth,o=e.clientHeight,a=e.clientWidth;if(0===t||0===n)return!1;let s,l;n/t>r/i?(l="bottom",s=Math.ceil((i-t*r/n)/(2*o)*100*100)/100):(l="right",s=Math.ceil((r-n*i/t)/(2*a)*100*100)/100),this.hasVideoInfo=!0,this.videoInfo={direction:l,padding:s}}}var u,h,d,f,p,v,m,y,g,w,b,_,k,C,x,S=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},E=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},M=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const T=(0,e.Te)();var P;!function(e){e[e.Text=0]="Text",e[e.Emoji=1]="Emoji",e[e.Voice=2]="Voice"}(P||(P={}));const L="web-player-danmaku",I="danmaku-item-container";u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,w=new WeakMap,b=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap;const A=class{constructor(e,t){this.container=e,this.opts=t,u.set(this,void 0),h.set(this,void 0),d.set(this,[]),f.set(this,!1),p.set(this,void 0),v.set(this,void 0),m.set(this,void 0),y.set(this,void 0),g.set(this,null),w.set(this,[]),b.set(this,void 0),_.set(this,void 0),k.set(this,0),C.set(this,(e=>{const t=null!=e.dm_v2?{mode:e.mode,dm:e.dm_v2}:void 0;M(this,h,"f").add(e,t)})),x.set(this,(()=>{E(this,g,window.requestIdleCallback((e=>{if(null!=e.timeRemaining)for(;(e.timeRemaining()>0||e.didTimeout)&&M(this,d,"f").length>0&&M(this,w,"f").length<10;){const e=M(this,d,"f").shift(),t=100*M(this,w,"f").length,n=setTimeout((()=>{M(this,C,"f").call(this,e),M(this,w,"f").shift()}),t);M(this,w,"f").push(n)}if(M(this,d,"f").length>0)return M(this,x,"f").call(this);null!=M(this,g,"f")&&(window.cancelIdleCallback(M(this,g,"f")),E(this,g,null,"f"))}),{timeout:1e3}),"f")})),this.parseEmoticon=(e,t)=>S(this,void 0,void 0,(function*(){let n=!1;if(e.dmType===P.Emoji){const e=new Image,i=t.url;return e.style.width="100%",e.style.height="100%",e.src=`${i}${T?"@56h.webp":"@56h.png"}`,n=yield new Promise((t=>{e.onerror=()=>{t(!0)},e.onload=()=>{t(!1)}})),n?"":e.outerHTML}return""})),this.add=(e,t=!1)=>{if(null!=M(this,h,"f")){if(t)return M(this,C,"f").call(this,e);M(this,d,"f").length>20&&M(this,d,"f").shift(),M(this,d,"f").push(e),null==M(this,g,"f")&&M(this,x,"f").call(this)}},this.socketListener=e=>{M(this,h,"f").socketListener(e)},this.onPlay=e=>{E(this,p,e,"f")},this.onPause=e=>{E(this,v,e,"f")},this.offPlay=()=>{E(this,p,void 0,"f")},this.offPause=()=>{E(this,v,void 0,"f")},this.onSelect=e=>{this.offSelect(),E(this,m,e,"f"),E(this,y,(t=>{var n;const i=this.container.getBoundingClientRect(),r=Number(null!==(n=getComputedStyle(document.documentElement).zoom)&&void 0!==n?n:1),o=t.clientX/r-i.left,a=t.clientY/r-i.top,s=M(this,h,"f").searchAreaDanmaku(o,a);s.length>0&&(e(s.map((e=>e.textData))),t.preventDefault())}),"f"),this.container.addEventListener("contextmenu",M(this,y,"f"),!0)},this.offSelect=()=>{var e;null!=M(this,y,"f")&&(null===(e=this.container)||void 0===e||e.removeEventListener("contextmenu",M(this,y,"f"),!0),E(this,y,void 0,"f"))},this.play=()=>{var e;M(this,f,"f")||(E(this,f,!0,"f"),null===(e=M(this,h,"f"))||void 0===e||e.play(),null!=M(this,p,"f")&&M(this,p,"f").call(this))},this.pause=()=>{var e;M(this,f,"f")&&(E(this,f,!1,"f"),null===(e=M(this,h,"f"))||void 0===e||e.pause(),null!=M(this,v,"f")&&M(this,v,"f").call(this))},this.setRenderType=e=>{var t;null===(t=M(this,h,"f"))||void 0===t||t.setType(e),null!=M(this,u,"f")&&this.setBackGroundImage(M(this,u,"f")),null!=M(this,y,"f")&&(this.offSelect(),null!=M(this,m,"f")&&this.onSelect(M(this,m,"f")))},this.resize=()=>{var e;if(null==M(this,h,"f"))return this;const{container:t}=M(this,h,"f").config;return null!=t&&(t.style.width=`${M(this,b,"f").clientWidth}px`,t.style.height=`${M(this,b,"f").clientHeight}px`,null===(e=M(this,h,"f"))||void 0===e||e.resize()),this},this.show=()=>{var e;null===(e=M(this,h,"f"))||void 0===e||e.visible(!0)},this.hide=()=>{var e;null===(e=M(this,h,"f"))||void 0===e||e.visible(!1)},this.setBackGroundImage=e=>{if(null==M(this,b,"f"))throw new Error("danmakuWrapNode must be HTMLElement");e!==M(this,u,"f")&&E(this,u,e,"f"),M(this,b,"f").style.backgroundImage=`url(${e})`,M(this,b,"f").style.backgroundRepeat="no-repeat",M(this,b,"f").style.backgroundPosition="center",M(this,b,"f").style.backgroundSize="contain"},this.set=e=>{const t=M(this,h,"f");if(null!=t)for(let n in e){const i=e[n];switch(n){case"type":this.setRenderType(i);break;case"backgroundImage":this.setBackGroundImage(i);break;case"maxCount":n="danmakuNumber",t.option(n,i);break;default:t.option(n,i)}}},this.clear=()=>{var e;null===(e=M(this,h,"f"))||void 0===e||e.clear()},this.destroy=()=>{var e;M(this,b,"f").remove(),null===(e=M(this,h,"f"))||void 0===e||e.destroy(),E(this,h,null,"f"),M(this,_,"f").destroy(),null!=M(this,g,"f")&&(window.cancelIdleCallback(M(this,g,"f")),E(this,g,null,"f")),E(this,d,[],"f"),M(this,w,"f").forEach((e=>window.clearTimeout(e))),window.removeEventListener("resize",this.resize),cancelAnimationFrame(M(this,k,"f"))},this.addMaskSVG=e=>{M(this,_,"f").input(e[1],e[3])},this.clearMask=()=>{M(this,_,"f")._masks=[]},this.addMaskToWrap=e=>{const t=M(this,b,"f"),n=M(this,_,"f");cancelAnimationFrame(M(this,k,"f"));const i=r=>{r>performance.now()-5&&n.onUpdateMask(e,t),E(this,k,window.requestAnimationFrame(i),"f")};E(this,k,window.requestAnimationFrame(i),"f")},this.fullscreenDM=()=>{M(this,b,"f").style.position="fixed"},this.offsetDM=e=>{M(this,b,"f").style.transform=`translate3d(${e}px, ${e}px, 0)`},E(this,u,null==t?void 0:t.backgroundImage,"f"),E(this,b,document.createElement("div"),"f"),M(this,b,"f").classList.add(L),M(this,b,"f").style.cssText="\n        width: 100%;\n        height: 100%;\n        position: relative;\n        top: 0;\n        left: 0;\n        z-index: 7;\n        pointer-events: none;\n      ",e.appendChild(M(this,b,"f")),this.initialize(),E(this,_,new c,"f")}initialize(){var e,t;const n=document.createElement("div");n.classList.add(I);const i=document.createElement("style");i.innerHTML=`\n        .${L} .${I}{\n          width: ${M(this,b,"f").clientWidth}px;\n          height: ${M(this,b,"f").clientHeight}px;\n          position: relative;\n          overflow: hidden;\n        }`,document.getElementsByTagName("HEAD")[0].appendChild(i),M(this,b,"f").appendChild(n),E(this,h,new(r())({container:n,isLive:!0,type:"div",opacity:1,fontSize:1,duration:6,danmakuArea:100,danmakuNumber:150,isRecycling:!0,isMobile:null!==(t=null===(e=this.opts)||void 0===e?void 0:e.isMobile)&&void 0!==t&&t}),"f"),null!=M(this,u,"f")&&this.setBackGroundImage(M(this,u,"f")),window.addEventListener("resize",this.resize)}closeMask(e){cancelAnimationFrame(M(this,k,"f")),e||M(this,b,"f").style.removeProperty("-webkit-mask-image")}getDanmakuElement(){return M(this,b,"f")}};var D,O;!function(e){e[e.Preparing=0]="Preparing",e[e.Live=1]="Live",e[e.Round=2]="Round"}(D||(D={})),function(e){e[e.Web=1]="Web",e[e.Android=2]="Android",e[e.Ios=3]="Ios",e[e.H5=4]="H5"}(O||(O={}));var B=a(9459);let R=null;const $={isSupported(){var e,t;return"OffscreenCanvas"in window&&(null!=(e=navigator.hardwareConcurrency)?e:-1)>4&&(null!=(t=navigator.deviceMemory)?t:-1)>4},async start(e,t,n){let i=window.LiveShadow;if(null==i&&(null==R&&(R=async function(e){const t=document.createElement("script"),n=document.getElementsByTagName("head")[0],i=new Promise(((e,n)=>{t.onload=()=>{e()},t.onerror=n}));t.src=e,null!=n&&n.appendChild(t),await i}("//s1.hdslb.com/bfs/blive-engineer-pkg/live-shadow/detect-body-mask.473689a2.umd.js")),await R,i=window.LiveShadow,null==i))throw Error("LiveShadow load failed");let r=await i.detectBodyMask(e,t,n),o=!1;async function a(){r(),null!=i&&(r=await i.detectBodyMask(e,t,n),o&&r())}const s=function(e,t){let{width:n,height:i}=e.getBoundingClientRect();const r=new ResizeObserver(function(e,t){let n;return function(...i){void 0!==n&&window.clearTimeout(n),n=window.setTimeout((()=>{e.apply(this,i)}),t)}}((async e=>{const r=e[0].contentRect;r.width===n&&r.height===i||(n=r.width,i=r.height,t())}),1e3));return r.observe(e),()=>{r.disconnect()}}(e,a),l=function(e,t){if(!(e instanceof HTMLVideoElement))return()=>{};let n=e.videoWidth,i=e.videoHeight;const r=setInterval((async()=>{const{videoWidth:r,videoHeight:o}=e;r===n&&o===i||(n=r,i=o,t())}),1e3);return()=>{clearInterval(r)}}(e,a);return()=>{o||(o=!0,s(),l(),r())}}};const V=()=>{let e;self.onmessage=t=>{"start"===t.data.event&&(self.clearInterval(e),e=self.setInterval((()=>{self.postMessage({})}),16.7)),"stop"===t.data.event&&self.clearInterval(e)}},F=new Map;let j=1;const H=(()=>{const e=new Blob([`(${V.toString()})()`]),t=URL.createObjectURL(e);return new Worker(t)})();H.onmessage=()=>{j+=1;for(const[e,t]of F.entries())j%e==0&&t.forEach((e=>e()))};const U=new Image;U.src="https://i0.hdslb.com/bfs/activity-plat/static/20220801/6ad1a552c5f99f6be0ff1b0072d86e59/KhLcCEjHmx.png",U.crossOrigin="anymouse";var N,W,z,q,Z,G,K,Q,Y,X,J,ee,te,ne,ie,re,oe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},ae=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},se=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const le=1,ce=25,ue=16777215;class he{static supportMaskDanmaku(){return $.isSupported()}constructor(t,n){this.container=t,this.opts=n,N.set(this,void 0),W.set(this,[]),z.set(this,[]),q.set(this,{rank:!1,verify:!1,level:0}),Z.set(this,[]),G.set(this,[]),K.set(this,null),Q.set(this,!1),Y.set(this,{}),X.set(this,0),J.set(this,{mode:le,color:ue,length:20}),ee.set(this,{type:"level",level:0,second:0}),te.set(this,!0),this.bodyMaskDetectorStatus=!1,ne.set(this,[]),ie.set(this,!1),this.maskState=!1,this.isBlocked=e=>{var t;return!!se(this,Z,"f").includes(e.type)||(!!se(this,G,"f").includes(e.dmType)||(se(this,q,"f").level>e.user.level||(!!(se(this,q,"f").rank&&e.user.rank<1e4)||(!(!(null===(t=se(this,q,"f"))||void 0===t?void 0:t.verify)||e.user.verify)||(!!se(this,z,"f").some((t=>e.text.includes(t)))||!!se(this,W,"f").some((({id:t})=>t===e.uid)))))))},re.set(this,(e=>{if(null!=e&&(Array.isArray(e.keyword_list)&&e.keyword_list.forEach((e=>{this.blockKeyword(e,"add")})),Array.isArray(e.shield_user_list)&&e.shield_user_list.forEach((({uid:e,uname:t})=>{this.blockUser({uid:e,uname:t},"add")})),null!=(null==e?void 0:e.shield_rules))){const{shield_rules:t}=e;se(this,q,"f").level=Number(t.level),se(this,q,"f").rank=Boolean(t.rank),se(this,q,"f").verify=Boolean(t.verify)}})),this.getDanmakuElement=()=>se(this,N,"f").getDanmakuElement(),this.fullscreenDM=()=>{se(this,N,"f").fullscreenDM()},this.offsetDM=e=>{se(this,N,"f").offsetDM(e)},ae(this,N,new A(this.container,n),"f"),this.danmakuStateHandler=pe(this),(0,B.gT)(e.jP.getDanmaku(),this)}onSei(e){se(this,N,"f").addMaskSVG(e)}clearMask(){se(this,N,"f").clearMask()}changeMaskState(e,t,n=!1){this.maskState=t,t?se(this,N,"f").addMaskToWrap(e):se(this,N,"f").closeMask(n)}connectSocket(t,n){ae(this,K,function(t,n,i,{userId:r,rnd:o,isBlocked:a,emitDanmaku:s,isMobile:l}){t.clear(),t.play();const c=i.on("message",(i=>{var c,u,h,d,f,p;if("DANMU_TAG_CHANGE"===i.cmd&&n.updateDanmakuExtraConfig(i.data,l),!i.cmd.startsWith("DANMU_MSG"))return void t.socketListener(i);const{web:v,h5:m}=function(e){if(!e.includes(":"))return{h5:{danmaku:!0,panel:!0},web:{danmaku:!0,panel:!0}};const[,,,,t,n]=e.split(":");return{web:{panel:0==(1&Number(t)),danmaku:0==(Number(t)>>1&1)},h5:{panel:0==(1&Number(n)),danmaku:0==(Number(n)>>1&1)}}}(i.cmd),y=function(e){const t=e[0][12],n=e[0][14],i=e[0][13],r={stime:-1,mode:e[0][1],size:e[0][2],color:e[0][3],date:performance.now(),uid:e[2][0],dmid:e[0][5],text:e[1],uname:e[2][1],user:{level:e[4][0],rank:e[2][5],verify:Boolean(e[2][6])},checkInfo:{ts:e[9].ts,ct:e[9].ct},type:e[0][9],dmType:P.Text,modeInfo:e[0][15]};return t===P.Emoji?Object.assign({},r,{emoticonOptions:i,dmType:P.Emoji}):t===P.Voice?Object.assign({},r,{dmType:P.Voice,voiceConfig:n}):r}(i.info);y.dm_v2=i.dm_v2;const g=null!==(u=null===(c=y.modeInfo)||void 0===c?void 0:c.extra)&&void 0!==u?u:"{}";let w={is_audited:!1};try{w=JSON.parse(g)}catch(t){e.kg.error(t)}if(!w.is_audited&&y.uid===r&&y.dmid===o)return;if(a(y))return;const b=!0===l?m:v;if(b.danmaku&&(y.dmType!==P.Emoji||1===(null!==(d=null===(h=y.emoticonOptions)||void 0===h?void 0:h.in_player_area)&&void 0!==d?d:1))){let e=!1;3012===(null===(f=y.modeInfo)||void 0===f?void 0:f.mode)&&1===(null===(p=w.animation)||void 0===p?void 0:p.adhoc_type)&&(e=!0),t.add(y,e),n.danmakuStateHandler.dmMsg()}b.panel&&s(Object.assign(Object.assign({},i),{cmd:"DANMU_MSG"}))}));return c}(se(this,N,"f"),this,t,Object.assign(Object.assign({},this.opts),{isBlocked:this.isBlocked,emitDanmaku:n})),"f")}initDanmakuConfig(e){ae(this,Q,!0,"f"),null!=e.userBlockInfo&&se(this,re,"f").call(this,e.userBlockInfo),null!=e.danmakuInfo&&ae(this,J,Object.assign(se(this,J,"f"),e.danmakuInfo),"f"),null!=e.roomBlockInfo&&ae(this,ee,Object.assign(se(this,ee,"f"),e.roomBlockInfo),"f")}getBlockList(){return se(this,z,"f").concat(se(this,W,"f").map((({id:e,name:t})=>`${e}_${t}`)))}setBlockTypes(e){Array.isArray(e)&&ae(this,Z,e,"f")}setBlockSpecialDanmakuTypes(e){Array.isArray(e)&&ae(this,G,e,"f")}blockUser(e,t){"add"===t&&null!=e.uid&&null!=e.uname?(se(this,Y,"f")[se(this,X,"f")]={type:"user",value:e.uid},ae(this,X,se(this,X,"f")+1,"f"),se(this,W,"f").push({id:e.uid,name:e.uname})):"del"===t&&ae(this,W,se(this,W,"f").filter((({id:t})=>t!==e.uid)),"f")}supportMaskDanmaku(){return $.isSupported()}setDanmakuMask(e){const t=se(this,N,"f").getDanmakuElement();""!==e?(t.style.webkitMaskImage=`url(${e})`,t.style.webkitMaskSize="100%, 100%"):(t.style.webkitMaskImage="",t.style.webkitMaskSize="")}enableMaskDanmaku(t){var n;null===(n=this.stopBodyMaskDetector)||void 0===n||n.call(this),e.kg.debug("enable MaskDanmaku"),se(this,te,"f")&&(this.bodyMaskDetectorStatus=!0,$.start(t,(e=>{se(this,ie,"f")?this.setDanmakuMask(""):"string"==typeof e&&this.setDanmakuMask(e)}),{type:"base64"}).then((t=>{e.kg.info("stop resolved");const n=()=>{e.kg.info(`clear trigger, ${se(this,ne,"f").length}`),se(this,ne,"f").forEach((e=>null==e?void 0:e())),ae(this,ne,[],"f")};n(),se(this,ne,"f").push(t),this.stopBodyMaskDetector=()=>{e.kg.info("stop trigger"),this.setDanmakuMask(""),this.stopBodyMaskDetector=void 0,this.bodyMaskDetectorStatus=!1,n()},this.bodyMaskDetectorStatus||this.stopBodyMaskDetector()})).catch((t=>{this.setDanmakuMask(""),e.kg.error(t)})))}blockKeyword(e,t){"add"!==t||se(this,z,"f").includes(e)?"del"===t&&ae(this,z,se(this,z,"f").filter((t=>t!==e)),"f"):(se(this,Y,"f")[se(this,X,"f")]={type:"keyword",value:e},ae(this,X,se(this,X,"f")+1,"f"),se(this,z,"f").push(e))}findBlockKwOrUserByIdx(e){return se(this,Y,"f")[e]}blockBatchUsers(e,t){"level"===e?se(this,q,"f").level=t:["rank","verify"].includes(e)&&(se(this,q,"f")[e]=Boolean(t))}clear(){se(this,N,"f").clear()}userSendDanmaku(t){var n,i,r,o,a;return oe(this,void 0,void 0,(function*(){let s={stime:-1,mode:null!==(n=t.mode)&&void 0!==n?n:le,size:null!==(i=t.fontsize)&&void 0!==i?i:ce,color:null!==(r=t.color)&&void 0!==r?r:ue,date:performance.now(),uid:this.opts.userId,dmid:this.opts.rnd,text:t.msg,border:!0,borderColor:"66FFFF",uname:"",isMaster:!0,dmType:P.Text};return t.dm_type===P.Emoji&&(s=Object.assign({},s,{emoticonOptions:t.emoticonOptions,text:null===(o=t.emoticonOptions)||void 0===o?void 0:o.emoji,dmType:P.Emoji}),delete t.emoticonOptions),delete t.isIgnore,delete t.uniqueID,!0===t.localOnly?(se(this,N,"f").add(Object.assign(Object.assign({},s),{extra:null!==(a=t.extra)&&void 0!==a?a:{}}),!0),yield Promise.resolve(null)):yield new Promise(((n,i)=>{(()=>{(function(t,n){return oe(this,void 0,void 0,(function*(){return yield(0,e.hj)("/msg/send",{method:"POST",data:t,handleRes:n})}))})(Object.assign(Object.assign({},t),{color:s.color,fontsize:s.size,mode:s.mode,rnd:s.dmid,roomid:this.opts.roomId}),(e=>{var i,r,o;if(0===e.code&&se(this,te,"f")){const n=null===(i=e.data)||void 0===i?void 0:i.mode_info;s.modeInfo=n,s.dm_v2=e.data.dm_v2,s.dmType===P.Emoji&&1!==(null!==(o=null===(r=t.emoticonOptions)||void 0===r?void 0:r.inPlayerArea)&&void 0!==o?o:1)||se(this,N,"f").add(s,!0)}n(e)})).catch((e=>{i(e)}))})()}))}))}onSelect(e){se(this,N,"f").onSelect(e)}offSelect(){se(this,N,"f").offSelect()}getDanmakuConfig(){let e=se(this,J,"f").color.toString(16);return e=(Array(6).join("0")+e).slice(-6),{ready:se(this,Q,"f"),level:se(this,q,"f").level,shield_list:this.getBlockList(),shield_keyword:se(this,z,"f"),shield_users:se(this,W,"f").map((({id:e,name:t})=>`${e}_${t}`)),danmu_color:`0x${e}`,danmu_length:se(this,J,"f").length,danmu_mode:se(this,J,"f").mode,room_silent_type:se(this,ee,"f").type,room_silent_level:se(this,ee,"f").level,room_silent_second:se(this,ee,"f").second,user_silent_level:se(this,q,"f").level,user_silent_rank:se(this,q,"f").rank,user_silent_verify:se(this,q,"f").verify}}fetchBlockRules(){(0,e.hj)("/banned_service/v1/shield/get_shield_info").then((e=>{se(this,re,"f").call(this,e)})).catch((t=>{e.kg.error(t)}))}show(){ae(this,te,!0,"f"),se(this,N,"f").show(),this.danmakuStateHandler.dmSwitch(!0)}hide(){ae(this,te,!1,"f"),se(this,N,"f").hide(),this.danmakuStateHandler.dmSwitch(!1)}resize(){se(this,N,"f").resize()}set(...e){se(this,N,"f").set(...e)}destroy(){var e,t;null===(e=se(this,K,"f"))||void 0===e||e.call(this),se(this,N,"f").destroy(),null===(t=this.stopBodyMaskDetector)||void 0===t||t.call(this),this.danmakuStateHandler.destroy()}updateDanmakuExtraConfig(e,t=!1){var n,i,r;ae(this,ie,e.dm_tag>0&&e.platform.includes(t?O.H5:O.Web),"f"),this.set({extra:{type:se(this,ie,"f")?e.dm_tag:0,useMode:null!==(n=null==e?void 0:e.dm_mode)&&void 0!==n?n:[],config:null!==(i=null==e?void 0:e.dm_chronos_extra)&&void 0!==i?i:"",material:null!==(r=null==e?void 0:e.material_conf)&&void 0!==r?r:[]}})}}function de(t,n,i,r){if("block"!==t.component)return;const{action:o,data:a,callback:s}=t;switch(o){case"addShieldUser":n.blockUser(null!=a?a:{},"add"),r("addShieldList",{code:0,msg:`${a.uid}_${a.uname}]}`});break;case"addShieldWord":fe("add",a,(e=>{0===e.code?(n.blockKeyword(a,"add"),r("addShieldList",{code:0,msg:a})):r("addShieldList",Object.assign({},e,{msg:e.message}))}));break;case"deleteShieldId":Array.isArray(a)&&a.forEach((t=>{const{type:o,value:a}=n.findBlockKwOrUserByIdx(t);"keyword"===o?fe("del",a,(e=>{0===e.code?(n.blockKeyword(a,"del"),r("deleteShieldList",{code:0,msg:[t]})):r("deleteShieldList",Object.assign({},e,{msg:e.message}))})):"user"===o&&function(t,n,i,r){(0,e.hj)("/liveact/shield_user",{method:"POST",data:{uid:n,roomid:i,type:"add"===t?1:0},handleRes:r}).catch((t=>{e.kg.error(t)}))}("del",a,i,(e=>{0===e.code?(n.blockUser({uid:a},"del"),r("deleteShieldList",{code:0,msg:[t]})):r("deleteShieldList",e)}))}));break;case"blockDanmaku":n.setBlockTypes(a.type);break;case"blockSpecialDanmaku":n.setBlockSpecialDanmakuTypes(a.type);break;case"roomListShield":(function(t,n){return oe(this,void 0,void 0,(function*(){yield(0,e.hj)("/liveact/set_room_shield",{method:"POST",data:{roomid:n,type:t}})}))})(Boolean(a),i).then((()=>{r("roomListShield",Boolean(a))})).catch((t=>{e.kg.error(t)}));break;case"globalShield":if(null==(null==a?void 0:a.type))break;!function({type:t,level:n,minute:i},r,o){(0,e.hj)("/liveact/room_silent",{method:"POST",data:{room_id:r,type:t,level:n,minute:i},handleRes:o}).catch((t=>{e.kg.error(t)}))}({type:a.type,level:a.level,minute:a.minutes},i,(e=>{r("globalShield",e)}));break;case"setUserShield":(function({type:t,level:n,callback:i}){return oe(this,void 0,void 0,(function*(){yield(0,e.hj)("/liveact/user_silent",{method:"POST",data:{type:t,level:n},handleRes:i})}))})({type:a.type,level:a.level,callback:e=>{null==s||s(e),0===e.code&&n.blockBatchUsers(a.type,a.level)}}).catch((t=>{e.kg.error(t)}))}}function fe(t,n,i){let r="/xlive/web-ucenter/v1/banned/DelShieldKeyword";"add"===t&&(r="/xlive/web-ucenter/v1/banned/AddShieldKeyword"),(0,e.hj)(r,{method:"POST",data:{keyword:n},handleRes:i}).catch((t=>{e.kg.error(t)}))}N=new WeakMap,W=new WeakMap,z=new WeakMap,q=new WeakMap,Z=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,Y=new WeakMap,X=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,ie=new WeakMap,re=new WeakMap;const pe=e=>{let t=null,n=-1,i=!1,r=!1,o=!1,a=!0;const s=()=>{var n;r&&o&&i&&null!=t?a||(a=!0,e.enableMaskDanmaku(t)):(a=!1,null===(n=e.stopBodyMaskDetector)||void 0===n||n.call(e))};return{dmSwitch(e){i=e,s()},updateVideoEl(e){t=e,s()},maskSwitch(e){r=e,s()},dmMsg(){clearTimeout(n),o=!0,n=window.setTimeout((()=>{o=!1,s()}),2e4),s()},destroy(){clearTimeout(n)}}};var ve,me=a(7377),ye=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};let ge;function we(t,n,i,r,o){n.classList.add("web-player-ending-panel"),n.style.cssText="\n    z-index: 3;\n    color: #fff;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background: #000;\n  ",n.appendChild(function(t,n,i){const r=document.createElement("div"),o=document.createElement("div");return r.style.cssText="\n    width: 606px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate3d(-50%, -50%, 0);\n    -moz-transform: translate3d(-50%, -50%, 0);\n    -ms-transform: translate3d(-50%, -50%, 0);\n    -o-transform: translate3d(-50%, -50%, 0);\n    transform: translate3d(-50%, -50%, 0);\n  ",t.style.cssText="\n    font-size: 28px;\n    color: #aaa;\n    text-align: center;\n    line-height: 50px;\n    height: 50px;\n    margin-bottom: 20px;\n  ",r.appendChild(t),n.classList.add("web-player-ending-panel-recommendList"),i.forEach(((t,i)=>{i<6&&ge("info",{type:ve.recommendListShow,data:t}),n.appendChild(function(t){var n,i;const r=document.createElement("a"),o=document.createElement("div"),a=document.createElement("div");o.style.cssText="\n    position: relative;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  ",a.style.cssText="\n    width: 100%;\n    position: absolute;\n    height: 50px;\n    bottom: -20px;\n    z-index: 3;\n    background-image: linear-gradient(-180deg, rgba(0, 0, 0, 0) 0%, #000000 100%);\n    color: #fffff;\n    -webkit-transition: bottom 0.3s ease-in-out;\n    -moz-transition: bottom 0.3s ease-in-out;\n    -ms-transition: bottom 0.3s ease-in-out;\n    -o-transition: bottom 0.3s ease-in-out;\n    transition: bottom 0.3s ease-in-out;\n  ";const s=document.createElement("div");s.style.cssText="\n    margin-top: 8px;\n    height: 16px;\n    position: relative;\n    line-height: 16px;\n    color: '#fff\n  ";const l=document.createElement("div");l.innerText=t.title,l.style.cssText="\n    padding: 0 8px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    color: #fff;\n  ";const c=document.createElement("div");c.style.cssText="\n    padding: 6px 8px;\n    color: #969696;\n    height: 16px;\n    position: relative;\n    line-height: 16px;\n  ";const u=document.createElement("div");u.style.cssText="\n    width: 60%;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    float: left;\n  ",u.innerText=t.uname;const h=document.createElement("span");h.style.cssText="\n    float: right;\n  ","online"in t&&(t.online>1e4?h.innerHTML=Math.floor(t.online/1e4).toString()+"万":h.innerText=t.online.toString());!0===(null===(n=t.watched_show)||void 0===n?void 0:n.switch)&&null!=(null===(i=t.watched_show)||void 0===i?void 0:i.text_small)&&(h.innerText=t.watched_show.text_small);c.appendChild(u),c.appendChild(h),s.appendChild(l),a.appendChild(s),a.appendChild(c);const d=document.createElement("img");if(d.alt=t.title,d.src=`${t.cover}${(0,e.Te)()?"@384w_240h.webp":"@384w_240h.jpg"}`,d.style.cssText="\n    width: 100%;\n    height: 100%;\n    border: none;\n  ",o.appendChild(d),r.appendChild(o),r.appendChild(a),r.style.cssText="\n    width: 192px;\n    height: 108px;\n    -webkit-border-radius: 2px;\n    -moz-border-radius: 2px;\n    border-radius: 2px;\n    float: left;\n    overflow: hidden;\n    display: inline-block;\n    position: relative;\n    margin: 5px;\n    text-decoration: none;\n    outline: none;\n    color: #444;\n    font-size: 12px;\n    cursor: pointer;\n  ",r.href="javascript:void(0);",r.addEventListener("mouseover",(()=>{a.style.bottom="0px"})),r.addEventListener("mouseout",(()=>{a.style.bottom="-20px"})),r.onclick=()=>{let e="text"in t?`//www.bilibili.com/video/${t.bvid}`:`//live.bilibili.com/${t.roomid}`;e=`${e}?live_from=75001`,window.open(e),ge("info",{type:ve.recommendListClick,data:t}),ge("redirect",{type:ve.recommendListClick,data:e})},r.onmouseenter=()=>{ge("info",{type:ve.recommendListMoveEnter,data:t})},"text"in t){const e=document.createElement("div");e.innerText=t.text,e.style.cssText="\n      background: #4fc1e9;\n      position: absolute;\n      top: 4px;\n      right: 5px;\n      height: 16px;\n      line-height: 16px;\n      width: 48px;\n      padding: 1px 4px;\n      color: #fff;\n      border-radius: 2px;\n    ",o.appendChild(e)}return r}(t))})),n.style.cssText=`\n    display: ${i.length>0?"block":"none"};\n    height: 236px;\n    overflow: hidden;\n  `,o.innerText="闲置中",o.style.cssText="display: none;",r.appendChild(n),r.appendChild(o),r}(i,r,o))}function be(t,n,{roomId:i,rnd:r,showRecommend:o},a,s=""){ge=a;const l=document.createElement("div"),c=document.createElement("div");let u=o;if(o){const o=(0,e.V_)(t);(function(t,n){return ye(this,void 0,void 0,(function*(){const i=yield(0,e.hj)(`/xlive/web-room/v1/index/getOffLiveList?room_id=${t}&count=8&rnd=${n.toFixed(0)}`);null!=i&&Array.isArray(i.recommend)||ge("info",{type:ve.recommendListNull});const r=i.record_list.map((e=>Object.assign(Object.assign({},e),{roomid:e.rid,text:"主播推荐"})));return i.recommend=[...r,...i.recommend].sort(((e,t)=>e.global_order-t.global_order)),i}))})(i,r).then((e=>{if(o(),u){const{tips:t="主播已关播",recommend:i=[]}=e;c.innerText=t,""!==s&&(c.innerText=s),we(0,n,c,l,i)}else c.innerText="主播已关播",we(0,n,c,l,[])})).catch((t=>{e.kg.error(t),o()}))}else c.innerText="主播已关播",we(0,n,c,l,[]);return()=>{u=!1,c.innerText="主播已关播",l.style.display="none"}}!function(e){e.recommendListNull="nolive",e.recommendListClick="click",e.recommendListMoveEnter="move",e.recommendListShow="show"}(ve||(ve={}));const _e='\n  <svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 157 45">\n    <defs>\n      <style>\n        .cls-1,\n        .cls-2 {\n          fill: #fff;\n          opacity: 0.4;\n          filter: url(#shadow);\n        }\n\n        .cls-2 {\n          fill-rule: evenodd;\n        }\n      </style>\n    </defs>\n    <defs>\n      <filter id="shadow">\n        <feDropShadow dx="1" dy="2" stdDeviation="1" />\n      </filter>\n    </defs>\n    <path class="cls-1 xxx"\n      d="M124.92,10.08h-9.28l.86-2a.31.31,0,0,0-.28-.43h-4a.62.62,0,0,0-.56.38l-.88,2.07H99.8a.3.3,0,0,0-.3.31v1.23a.29.29,0,0,0,.3.3H110L108.66,15H102a.3.3,0,0,0-.31.3v23H99.8a.29.29,0,0,0-.3.3V39.8a.3.3,0,0,0,.3.31h25.12a.31.31,0,0,0,.31-.31V38.57a.3.3,0,0,0-.31-.3h-1.84V16.21A1.21,1.21,0,0,0,121.86,15h-8.3l1.3-3.07h10.06a.3.3,0,0,0,.31-.3V10.39A.31.31,0,0,0,124.92,10.08Zm-6.74,28.19H106.54V34.59h11.64Zm0-5.52H106.54V28.46h11.64Zm0-6.12H106.54V22.34h11.64Zm-.61-9.81a.61.61,0,0,1,.61.62V20.5H106.54V16.82Z" />\n    <path class="cls-1"\n      d="M137.06,26.83l-1.42.59V15.6h1.54a.3.3,0,0,0,.3-.31V14.07a.3.3,0,0,0-.3-.31h-1.54V7.94a.3.3,0,0,0-.3-.31h-4.29a.31.31,0,0,0-.31.31v5.82h-1.53a.31.31,0,0,0-.31.31v1.22a.31.31,0,0,0,.31.31h1.53V29.51l-1.46.62a.61.61,0,0,0-.38.56v1a.31.31,0,0,0,.43.28l1.41-.6v6.93a.61.61,0,0,1-.61.61h-.76a.3.3,0,0,0-.28.43l.44,1a.6.6,0,0,0,.56.37h4.33a1.22,1.22,0,0,0,1.22-1.23V29.26l1.47-.62a.61.61,0,0,0,.37-.56v-1A.3.3,0,0,0,137.06,26.83Z" />\n    <path class="cls-1"\n      d="M138.49,17.44h5.82v6.12a.31.31,0,0,0,.31.31h3.68a.3.3,0,0,0,.3-.31V17.44h5.82a.31.31,0,0,0,.31-.31V15.9a.31.31,0,0,0-.31-.3H148.6V10.7h4a1.25,1.25,0,0,0,1.13-.75l.8-1.89a.31.31,0,0,0-.28-.43h-3.42a.62.62,0,0,0-.57.38l-.2.48a.62.62,0,0,1-.56.37h-11a.3.3,0,0,0-.3.31v1.22a.3.3,0,0,0,.3.31h5.82v4.9h-5.82a.3.3,0,0,0-.3.3v1.23A.3.3,0,0,0,138.49,17.44Z" />\n    <path class="cls-1"\n      d="M154.36,11.62h-3.42a.59.59,0,0,0-.56.37l-1,2.26a.31.31,0,0,0,.29.43h3.62a.3.3,0,0,0,.28-.19l1-2.45A.3.3,0,0,0,154.36,11.62Z" />\n    <path class="cls-1"\n      d="M155.68,23.44l-2.08-4.9a.31.31,0,0,0-.28-.18H149.7a.31.31,0,0,0-.29.42l2.16,5.09h3.83A.3.3,0,0,0,155.68,23.44Z" />\n    <path class="cls-1"\n      d="M139.25,14.31a.63.63,0,0,0,.57.37h3.42a.3.3,0,0,0,.28-.43l-1-2.26a.61.61,0,0,0-.56-.37h-3.42a.31.31,0,0,0-.29.42Z" />\n    <path class="cls-1"\n      d="M143.52,18.78a.3.3,0,0,0-.28-.42h-3.62a.31.31,0,0,0-.29.18l-2.08,4.9a.31.31,0,0,0,.29.43h3.82Z" />\n    <path class="cls-1"\n      d="M153.2,25.4H138.8a.31.31,0,0,0-.31.31V39.8a.31.31,0,0,0,.31.31h15.32a.3.3,0,0,0,.3-.31V26.63A1.22,1.22,0,0,0,153.2,25.4Zm-8.89,12.87h-1.53v-4.9h1.53Zm0-6.74h-1.53V27.24h1.53Zm5.82,6.74H148.6v-4.9h1.53Zm0-6.74H148.6V27.24h.92a.61.61,0,0,1,.61.61Z" />\n    <path class="cls-1"\n      d="M32.47,5.09l4.14-.51a.23.23,0,0,1,.25.21l2.66,31.36a.22.22,0,0,1-.22.24h-3a.25.25,0,0,1-.24-.21L32.27,5.35A.24.24,0,0,1,32.47,5.09Z" />\n    <path class="cls-2"\n      d="M26.84,21.69l4.62-.57a.24.24,0,0,1,.27.2l2,16.42a.21.21,0,0,1-.19.24l-3.41.43a.21.21,0,0,1-.23-.17L26.64,22A.23.23,0,0,1,26.84,21.69Z" />\n    <path class="cls-2"\n      d="M41.21,21.44h4.55a.22.22,0,0,1,.22.22V38.25a.21.21,0,0,1-.21.21H42.48a.23.23,0,0,1-.23-.21L41,21.68A.22.22,0,0,1,41.21,21.44Z" />\n    <path class="cls-2"\n      d="M25.36,13.32l2-.24a.22.22,0,0,1,.25.19l.79,5.92a.22.22,0,0,1-.19.25l-1.56.19a.22.22,0,0,1-.25-.18l-1.18-5.89A.19.19,0,0,1,25.36,13.32Z" />\n    <path class="cls-2"\n      d="M28.44,13.16l.73,5.94a.22.22,0,0,0,.24.19l1.82-.23a.22.22,0,0,0,.19-.24l-.73-6a.21.21,0,0,0-.23-.18l-1.83.23A.21.21,0,0,0,28.44,13.16Z" />\n    <path class="cls-2"\n      d="M40.35,13.21l.46,6a.21.21,0,0,0,.2.19h1.61a.21.21,0,0,0,.21-.21l-.13-6a.22.22,0,0,0-.22-.21H40.56A.2.2,0,0,0,40.35,13.21Z" />\n    <path class="cls-2"\n      d="M43.5,13.21l.13,6a.22.22,0,0,0,.22.22h1.71a.22.22,0,0,0,.22-.22v-6a.21.21,0,0,0-.21-.21H43.71A.21.21,0,0,0,43.5,13.21Z" />\n    <path class="cls-2"\n      d="M52.21,40.3a.25.25,0,0,0,.22.23,26.47,26.47,0,0,0,17.13-3.72c2.65-1.63,6.3-5.58,1-8.59a24.15,24.15,0,0,0-14.72-3.06.25.25,0,0,1-.28-.22A138.25,138.25,0,0,1,54.67.58a.2.2,0,0,0-.27-.2L47.51,2.89a.23.23,0,0,0-.15.26A354.89,354.89,0,0,1,52.21,40.3Zm13.51-8.11a27.14,27.14,0,0,1-6,4.23.22.22,0,0,1-.32-.14c-.11-.55-.59-4-.87-6.63a.22.22,0,0,1,.25-.24,22.53,22.53,0,0,1,6.85,2.41C65.83,31.92,65.83,32.09,65.72,32.19Z" />\n    <path class="cls-2"\n      d="M6.14,40.3a.26.26,0,0,0,.23.23,26.44,26.44,0,0,0,17.12-3.72c2.65-1.63,6.3-5.58,1-8.59A24.14,24.14,0,0,0,9.81,25.16a.26.26,0,0,1-.28-.22A138.68,138.68,0,0,1,8.61.5.21.21,0,0,0,8.34.29L1.45,2.8a.23.23,0,0,0-.15.26A362.8,362.8,0,0,1,6.14,40.3Zm13.52-8.11a27.39,27.39,0,0,1-6,4.23.22.22,0,0,1-.32-.14c-.12-.55-.6-4-.88-6.63a.22.22,0,0,1,.26-.24,22.79,22.79,0,0,1,6.85,2.41A.22.22,0,0,1,19.66,32.19Z" />\n    <path class="cls-1"\n      d="M78.63,5.09l4.14-.51a.23.23,0,0,1,.25.21l2.66,31.36a.22.22,0,0,1-.22.24h-3a.25.25,0,0,1-.24-.21L78.43,5.35A.24.24,0,0,1,78.63,5.09Z" />\n    <path class="cls-2"\n      d="M73,21.69l4.62-.57a.24.24,0,0,1,.27.2l2,16.42a.21.21,0,0,1-.19.24l-3.41.43a.21.21,0,0,1-.23-.17L72.8,22A.23.23,0,0,1,73,21.69Z" />\n    <path class="cls-2"\n      d="M87.37,21.44h4.55a.22.22,0,0,1,.22.22V38.25a.21.21,0,0,1-.21.21H88.64a.23.23,0,0,1-.23-.21L87.15,21.68A.22.22,0,0,1,87.37,21.44Z" />\n    <path class="cls-2"\n      d="M71.52,13.32l2-.24a.22.22,0,0,1,.25.19l.79,5.92a.22.22,0,0,1-.19.25l-1.56.19a.22.22,0,0,1-.25-.18l-1.18-5.89A.2.2,0,0,1,71.52,13.32Z" />\n    <path class="cls-2"\n      d="M74.6,13.16l.73,5.94a.22.22,0,0,0,.24.19l1.82-.23a.22.22,0,0,0,.19-.24l-.73-6a.21.21,0,0,0-.23-.18l-1.83.23A.22.22,0,0,0,74.6,13.16Z" />\n    <path class="cls-2"\n      d="M86.51,13.21l.46,6a.21.21,0,0,0,.2.19h1.61a.21.21,0,0,0,.21-.21l-.13-6a.22.22,0,0,0-.22-.21H86.72A.2.2,0,0,0,86.51,13.21Z" />\n    <path class="cls-2"\n      d="M89.66,13.21l.13,6a.22.22,0,0,0,.22.22h1.71a.22.22,0,0,0,.22-.22v-6a.21.21,0,0,0-.21-.21H89.87A.21.21,0,0,0,89.66,13.21Z" />\n  </svg>\n',ke="https://i0.hdslb.com/bfs/activity-plat/static/20210309/d0411babbbf77c49ca42a3320eb804ae/xUd8TRdAk.png";function Ce(e,t=!1){const n=document.createElement("div");return n.className="web-player-icon-roomStatus",n.style.cssText="\n    position: absolute;\n    left: 10px;\n    top: 10px;\n    z-index: 2;\n    pointer-events: none;\n  ",e.appendChild(n),{destroy(){n.remove()},setRoomStatus(e){!function(e,t,n){t===D.Round?(e.innerHTML="",e.style.cssText+=`\n      background-size: 78px 50px;\n      width: 78px;\n      height: 50px;\n      opacity: 0.8;\n      background: url(${ke}) no-repeat 0 0;\n    `):(e.innerHTML=_e,e.style.cssText+=`\n      width: 122px;\n      height: 43px;\n      opacity: 0.4;\n      background: none;\n      ${n?"transform: scale(0.7);transform-origin: 0 0;":""}\n    `)}(n,e,t)},el:n}}function xe(e,t){const n=document.createElement("div");let i=0;function r(e){e.stopPropagation(),clearTimeout(i),i=0,n.style.opacity="1.0"}function o(){clearTimeout(i),i=window.setTimeout((()=>{n.style.opacity="0"}),1e3),n.style.opacity="0.8"}function a(){i=window.setTimeout((()=>{n.style.opacity="0"}),1e3)}return n.className="web-player-icon-feedback",n.innerHTML='\n  <svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">\n    <defs>\n      <style>\n        .feed-back-cls-1 {\n          fill: #fff;\n          fill-rule: evenodd;\n          filter: url(#shadow);\n        }\n      </style>\n    </defs>\n    <defs>\n      <filter id="shadow">\n        <feDropShadow dx="0.3" dy="0.3" stdDeviation="0.6" />\n      </filter>\n    </defs>\n    <path class="feed-back-cls-1"\n      d="M24,10H12a2,2,0,0,0-2,2V26l3-3H24a2,2,0,0,0,2-2V12A2,2,0,0,0,24,10ZM19,21H17V19h2Zm1.19-4.38a2,2,0,0,0-.18.15l-.37.31c-.49.4-.64.58-.64.92H17c0-1.84,2-1.76,2-3a1,1,0,0,0-1-1,1,1,0,0,0-.81.41.9.9,0,0,0-.11.24.5.5,0,0,1-.48.35h-1a.5.5,0,0,1-.5-.5.28.28,0,0,1,0-.09,3.17,3.17,0,0,1,.21-.72A3,3,0,0,1,21,15,2.14,2.14,0,0,1,20.19,16.62Z" />\n  </svg>\n',n.style.cssText="\n    position: absolute;\n    top: 0px;\n    right: 12px;\n    z-index: 100;\n    width: 36px;\n    height: 36px;\n    cursor: pointer;\n    transition: opacity 0.5s ease 0s;\n    opacity: 0;\n  ",e.appendChild(n),e.addEventListener("mousemove",o),e.addEventListener("mouseleave",a),n.addEventListener("click",t),n.addEventListener("mousemove",r),()=>{n.remove(),e.removeEventListener("mousemove",o),e.removeEventListener("mouseleave",a),n.removeEventListener("click",t),n.removeEventListener("mousemove",r),clearTimeout(i)}}var Se=a(7874);function Ee(t,n,i=300){e.kg.info("start round count down");const r=t.getElementsByClassName("web-player-video-round-counter");1===r.length&&r[0].remove();const o=document.createElement("div");o.innerHTML=`\n    <p style="${Te(20)}">\n      <span>${Me(i)}</span>\n      后\n      </p>\n    <p style="${Te(30)}">主播的投稿视频将轮流播放</p>\n  `,o.classList.add("web-player-video-round-counter"),o.style.cssText="\n    width: 400px;\n    position: absolute;\n    z-index: 10;\n    pointer-events: none;\n    left: 50%;\n    top: 50%;\n    margin-left: -200px;\n    margin-top: -66px;\n    color: #aaa;\n  ";const a=o.getElementsByTagName("span");a[0].style.fontSize="50px",t.append(o);const s=window.setInterval((()=>{i>1?a[0].innerText=Me(--i):(clearInterval(s),o.remove(),n().catch((t=>{e.kg.error(t)})))}),1e3);return()=>{clearInterval(s),o.remove()}}function Me(e){const t=Math.floor(e/60),n=Math.floor(e%60);return`0${t}:${n<10?"0"+n.toString():n}`}function Te(e){return`\n    text-align: center;\n    line-height: 50px;\n    letter-spacing: 3px;\n    font-weight: normal;\n    font-size: ${e}px;\n    line-height: 1;\n  `}var Pe=a(6062),Le=a.n(Pe),Ie=a(4036),Ae=a.n(Ie),De=a(6793),Oe=a.n(De),Be=a(7892),Re=a.n(Be),$e=a(1173),Ve=a.n($e),Fe=a(2464),je=a.n(Fe),He=a(4802),Ue={};Ue.styleTagTransform=je(),Ue.setAttributes=Re(),Ue.insert=Oe().bind(null,"head"),Ue.domAPI=Ae(),Ue.insertStyleElement=Ve();Le()(He.Z,Ue);const Ne=He.Z&&He.Z.locals?He.Z.locals:void 0;var We,ze=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},qe=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};We=new WeakMap;const Ze=class{constructor(){this.menuContainer=null,We.set(this,{})}show(e,t=!1){t?this.menuContainer.classList.add(Ne.leftSubMenu):this.menuContainer.classList.remove(Ne.leftSubMenu);const n=this.menuContainer.style;n.top=`${e.top}px`,n.left=`${e.left}px`,n.opacity="1"}hide(){const e=this.menuContainer.style;e.top="",e.left="",e.opacity="0"}initContextmenu(e){this.menuContainer=this.createMenuUl(Ne.webPlayerContextMenu);const t=this.createContextmenuList(e);this.menuContainer.appendChild(t)}prependMenuItem(e,t){const n=Object.assign(Object.assign({},t),{name:e}),i=this.createMenuElement(n);return this.menuContainer.prepend(i),()=>{i.remove()}}resetSubmenu(e,t,n,i=-1){var r;const o=ze(this,We,"f")[e];if(null!=o){const e=null!==(r=o.querySelector(Ne.contextSubMenu))&&void 0!==r?r:this.createMenuUl(Ne.contextSubMenu);e.innerHTML="";const a=t.map((e=>({label:e.label,value:e.value,disable:e.value===i,click:n.bind(null,e.value)}))),s=this.createSubmenuFragment(a);e.appendChild(s),o.appendChild(e)}}submenuActive(e,t){var n;const i=ze(this,We,"f")[e];if(null!=i){for(const e of i.getElementsByClassName(Ne.contextSubMenuItem))e.classList.remove(Ne.disabled);null===(n=i.getElementsByClassName(Ne.contextSubMenuItem)[t])||void 0===n||n.classList.add(Ne.disabled)}}createMenuUl(t=""){return(0,e.az)("ul",{classname:t})}createArrow(){return(0,e.az)("div",{classname:Ne.contextMenuRightArrow})}createMenuLi(t){const n=Object.assign({disable:!1,hr:!1,remove:!1},t),i=Ne.disabled,r=Ne.menuItemHr;return(0,e.az)("li",{classname:t.classname+(n.disable?` ${i}`:"")+(n.hr?` ${r}`:""),text:"",attributes:n.remove?[["data-auto-remove","1"]]:[]})}createSubmenuLi(t){const n=Object.assign({disable:!1,icon:""},t),i=Ne.disabled,r=(0,e.az)("li",{classname:n.classname+(n.disable?` ${i}`:""),text:n.text});if(""!==n.icon){const t=(0,e.az)("span",{classname:Ne[n.icon]});r.prepend(t)}return r.onclick=function(){!r.className.includes(Ne.disabled)&&n.click(n.index)},r}createContextmenuList(e){const t=document.createDocumentFragment();return e.forEach((e=>{t.appendChild(this.createMenuElement(e))})),t}createMenuElement(t){const{name:n,label:i,click:r,hr:o=!1,submenu:a=null,autoRemove:s=!1}=t,l=this.createMenuLi({text:i,classname:Ne.contextMenuItem,disable:"function"!=typeof r&&null==a,remove:s,hr:o}),c=(0,e.az)("span",{text:i,classname:Ne.contextMenuText});if(l.appendChild(c),null!=r&&l.addEventListener("click",(()=>{r(),this.hide()})),null!=a){l.appendChild(this.createArrow());const e=this.createMenuUl(Ne.contextSubMenu),t=this.createSubmenuFragment(a);e.appendChild(t),l.appendChild(e)}return s||(ze(this,We,"f")[n]=l),l}createSubmenuFragment(e){const t=document.createDocumentFragment();return e.forEach(((e,n)=>{var i;const r=this.createSubmenuLi({text:e.label,classname:Ne.contextSubMenuItem,disable:e.disable,icon:null!==(i=e.icon)&&void 0!==i?i:"",index:n,click:()=>{e.click(),this.hide()}});t.appendChild(r)})),t}removeMenuItems(){const e=this.menuContainer.querySelectorAll('[data-auto-remove="1"]');for(let t=e.length-1;t>=0;t--){const n=e[t];this.menuContainer.removeChild(n)}}destroy(){this.menuContainer.innerHTML="",qe(this,We,{},"f")}};var Ge;!function(e){e.DANMU="danmu",e.LINE="line",e.CODEC="codec",e.LOGGER="logger",e.VIDEO_INFO="videoInfo",e.VERSION="version",e.COPYRIGHT="copyright",e.CLOSE="close"}(Ge||(Ge={}));var Ke,Qe,Ye,Xe,Je,et,tt,nt,it=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},rt=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Ke=new WeakMap,Qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,Je=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap;const ot=class extends Ze{constructor(e,t){super(),Ke.set(this,void 0),Qe.set(this,void 0),Ye.set(this,[]),Xe.set(this,[]),Je.set(this,null),et.set(this,!1),tt.set(this,(e=>{e.preventDefault(),super.removeMenuItems(),this.danmuPreCheck(),this.showContextmenu(this.computePosition(e))})),nt.set(this,(e=>{this.menuContainer.contains(e.target)||(this.removeMenuItems(),super.hide())})),it(this,Qe,e,"f"),it(this,Ke,t,"f"),this.init()}setLines(e,t,n){var i;if(null===(i=rt(this,Je,"f"))||void 0===i||i.call(this),0===e.length)return;const r={label:"观看卡顿？切换备线试试",submenu:e.map((e=>({value:e.value,label:e.label,disable:e.value===t,click:n.bind(null,e.value)})))};it(this,Xe,e,"f"),it(this,Je,this.prependMenuItem(Ge.LINE,r),"f")}changeLine(e){const t=rt(this,Xe,"f").findIndex((t=>t.value===e));null!=t&&this.submenuActive(Ge.LINE,t)}updateDanmuInfo(e){it(this,Ye,e,"f")}setAdmin(){it(this,et,!0,"f")}destroy(){super.destroy(),this.removeListener(),rt(this,Qe,"f").removeChild(this.menuContainer)}init(){const e=this.getInitialConfig();super.initContextmenu(e),rt(this,Qe,"f").appendChild(this.menuContainer),this.addListener()}getInitialConfig(){const t=rt(this,Ke,"f");let{val:n,ts:i}=e.jP.get("selectedCodec");Date.now()-i>6048e5&&(n=null,e.jP.set("selectedCodec",{val:null,ts:Date.now()}));const r=(n,i)=>{e.jP.set("selectedCodec",{val:n,ts:Date.now()}),this.submenuActive(Ge.CODEC,i),t.click.handleCodec()};return[{name:Ge.CODEC,label:"画面异常？切换解码策略试试",submenu:[{value:1,label:"默认",disable:null===n,click:r.bind(null,null,0)},{value:2,label:"AV1",disable:n===e.gE.AV1,click:r.bind(null,e.gE.AV1,1)},{value:3,label:"HEVC",disable:n===e.gE.HEVC,click:r.bind(null,e.gE.HEVC,2)},{value:4,label:"AVC",disable:n===e.gE.AVC,click:r.bind(null,e.gE.AVC,3)}]},{name:Ge.LOGGER,label:"播放器日志信息",submenu:[{value:1,icon:"blpIconShow",label:"显示日志",click:t.click.handleLogger.bind(null,"show")},{value:2,icon:"blpIconCopy",label:"复制日志",click:t.click.handleLogger.bind(null,"copy")},{value:3,icon:"blpIconDownload",label:"下载日志",click:t.click.handleLogger.bind(null,"download")}]},{name:Ge.VIDEO_INFO,label:"视频统计信息",click:t.click.handleVideoInfo},{name:Ge.VERSION,label:`Bilibili HTML5 Live Player ${t.version}`},{name:Ge.COPYRIGHT,label:`Copyright bilibili ${(new Date).getFullYear()}`},{name:Ge.CLOSE,label:"关闭",click:()=>{}}]}showContextmenu(e){super.show({top:e.top,left:e.left},e.mainAxiosRight<160)}danmuPreCheck(){const e=rt(this,Ye,"f");e.length>0&&e.forEach(((e,t)=>{this.prependDanmu(e,0===t)})),it(this,Ye,[],"f")}getDanmuConfig(e,t){const n=e.text.trim(),i=e.uid,r=i===rt(this,Ke,"f").uid,o={hr:t,autoRemove:!0,label:n,submenu:[{value:1,label:"举报选中弹幕",disable:r,click:rt(this,Ke,"f").click.handleDanmu.bind(this,"report",e)},{value:2,label:"屏蔽此用户的弹幕",disable:r,click:rt(this,Ke,"f").click.handleDanmu.bind(this,"shield",e)},{value:4,label:"复制弹幕",click:()=>{var e;null===(e=navigator.clipboard)||void 0===e||e.writeText(n).catch((()=>{}))}},{value:5,label:"去TA的个人空间",click:()=>{const e=`//space.bilibili.com/${i}`;window.open(e),rt(this,Ke,"f").click.handleEvent(e)}}]};return rt(this,et,"f")&&o.submenu.splice(2,0,{value:3,label:"添加进黑名单",disable:r,click:rt(this,Ke,"f").click.handleDanmu.bind(this,"addBlackList",e)}),o}prependDanmu(e,t){const n=this.getDanmuConfig(e,t);super.prependMenuItem(Ge.DANMU,n)}computePosition(e){var t;const n=Number(null!==(t=getComputedStyle(document.documentElement).zoom)&&void 0!==t?t:1),i=rt(this,Qe,"f").getBoundingClientRect(),r=this.menuContainer.getBoundingClientRect(),{clientX:o,clientY:a}=e,s=Math.min(o/n-i.left,i.width-r.width);return{left:s,top:Math.min(a/n-i.top,i.height-r.height),mainAxiosRight:i.width-s-r.width}}addListener(){rt(this,Qe,"f").addEventListener("contextmenu",rt(this,tt,"f")),window.addEventListener("click",rt(this,nt,"f"))}removeListener(){rt(this,Qe,"f").removeEventListener("contextmenu",rt(this,tt,"f")),window.removeEventListener("click",rt(this,nt,"f"))}};var at,st,lt,ct,ut,ht,dt,ft=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},pt=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};at=new WeakMap,st=new WeakMap,lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,dt=new WeakMap;const vt=class{constructor(e){at.set(this,0),st.set(this,0),lt.set(this,[]),ct.set(this,[]),ut.set(this,0),ht.set(this,0),dt.set(this,0),ft(this,at,e.width,"f"),ft(this,st,e.height,"f"),this.initGraph()}updateGraph(t){pt(this,lt,"f").shift(),pt(this,lt,"f").push(t),ft(this,ct,[],"f"),ft(this,ht,pt(this,lt,"f").length>0?Math.max.apply(this,pt(this,lt,"f")):1,"f");try{ft(this,dt,pt(this,st,"f")/(pt(this,ht,"f")-pt(this,ut,"f")),"f")}catch(t){e.kg.error(t)}for(let e=0,t=pt(this,lt,"f").length;e<t;e++){const t=pt(this,lt,"f")[e];pt(this,ct,"f").push([2*e,pt(this,st,"f")-(t-pt(this,ut,"f"))*pt(this,dt,"f")])}}getGraph(){let e="";const t=pt(this,ct,"f");for(let n=0,i=t.length;n<i;n++)e+=t[n].join(",")+" ";return e.includes("NaN")&&(e="0"),`<svg width="${pt(this,at,"f")}" height="${pt(this,st,"f")}" viewBox="0 0 ${pt(this,at,"f")} ${pt(this,st,"f")}">\n                <g>\n                  <polyline stroke="white" fill="none" points="${e}">\n                  </polyline>\n                </g>\n              </svg>`}destroy(){ft(this,lt,[],"f"),ft(this,ct,[],"f"),ft(this,ut,0,"f"),ft(this,ht,0,"f"),ft(this,dt,0,"f"),this.initGraph()}initGraph(){for(let e=0,t=pt(this,at,"f")/2;e<t;e++)pt(this,lt,"f").push(0),pt(this,ct,"f").push([2*e,pt(this,st,"f")])}};var mt,yt,gt,wt,bt=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},_t=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const kt="web-player-show-videoinfo";mt=new WeakMap,yt=new WeakMap,gt=new WeakMap,wt=new WeakMap;const Ct=class{constructor(t,n){mt.set(this,void 0),yt.set(this,0),gt.set(this,{style:{},scope:null}),wt.set(this,(0,e.az)("div",{classname:"web-player-video-info-panel",attributes:[["style","display: none;\n        position: absolute;\n        padding: 15px 36px 15px 15px;\n        text-align: left;\n        color: #fff;\n        background-color: rgba(28, 28, 28, 0.8);\n        border-radius: 4px;\n        font-size: 12px;\n        z-index: 102;\n        cursor: text;\n        user-select: text;\n      "]]})),bt(this,mt,t,"f"),bt(this,gt,Object.assign(Object.assign({},_t(this,gt,"f")),n),"f"),this.initPanel(),t.appendChild(_t(this,wt,"f")),"1"===localStorage.getItem(kt)&&(this.status=1)}get status(){return _t(this,yt,"f")}set status(e){bt(this,yt,e,"f"),_t(this,wt,"f").style.display=1===e?"block":"none",localStorage.setItem(kt,`${e}`)}destroy(){_t(this,mt,"f").removeChild(_t(this,wt,"f"))}initPanel(){const e=_t(this,gt,"f").style;Object.keys(e).forEach((t=>{_t(this,wt,"f").style[t]=e[t]}));const t=this.createCloseBtn();_t(this,wt,"f").appendChild(t),null!=_t(this,gt,"f").scope&&_t(this,wt,"f").appendChild(_t(this,gt,"f").scope)}createCloseBtn(){const t=(0,e.az)("div",{text:"[x]",attributes:[["style","position: absolute;\n        top: 10px;\n        right: 10px;\n        width: 14px;\n        height: 14px;\n        line-height: 14px;\n        text-align: center;\n        cursor: pointer;"]]});return t.addEventListener("click",(e=>{e.stopPropagation(),this.status=0})),t}};var xt,St,Et,Mt,Tt,Pt=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},Lt=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const It="p-video-info-";xt=new WeakMap,St=new WeakMap,Et=new WeakMap,Mt=new WeakMap,Tt=new WeakMap;const At=class{constructor(t){xt.set(this,void 0),St.set(this,void 0),Et.set(this,void 0),Mt.set(this,0),Tt.set(this,void 0),this.videoTemplate={mimeType:{label:"Mime Type",data:""},playerCore:{label:"Player Core",data:""},videoInfo:{label:"Video Info",data:""},audioInfo:{label:"Audio Info",data:""},encoder:{label:"Encoder",data:""},streamHost:{label:"Stream Host",data:""},bufferLength:{label:"Buffer Length",data:""},droppedFrames:{label:"Decoded Frames",data:""},networkActivity:{label:"Download Bitrate",data:""}},this.template=Object.keys(this.videoTemplate).map((e=>({[e]:this.videoTemplate[e].data}))).reduce(((e,t)=>Object.assign(Object.assign({},e),t))),this.templateProxy=this.createTemplateProxy(),Pt(this,xt,t,"f"),Pt(this,Et,(0,e.az)("div"),"f"),Pt(this,Tt,new vt({width:180,height:14}),"f"),Lt(this,Et,"f").appendChild(this.combineDataElement()),Pt(this,St,new Ct(Lt(this,xt,"f"),{scope:Lt(this,Et,"f"),style:{top:"10px",left:"10px"}}),"f")}show(){Lt(this,St,"f").status=1,this.repaintGraph()}hide(){Lt(this,St,"f").status=0}destroy(){Pt(this,Et,null,"f");for(const e in this.templateProxy)this.templateProxy[e]="";Lt(this,St,"f").destroy(),Lt(this,Tt,"f").destroy()}updateVideoTemplate(t){if(0===Lt(this,St,"f").status)return;const{mediaInfo:n,realtimeInfo:i}=t,r=Math.floor(i.videoNetworkActivity/1024),o=this.templateProxy;o.mimeType=n.mimeType,o.playerCore=n.corePlayerType,o.videoInfo=`${n.width}x${n.height}, ${n.fps}FPS`,o.audioInfo=`${n.audioSampleRate/1e3}KHz, ${n.audioChannel}, ${this.computeBps(n.audioDataRate)}`,o.encoder=n.encoder,o.streamHost=n.videoSrc.split("://")[1].split("/")[0],o.networkActivity=`${(0,e.QV)(r/1024*8,2)}Mbps`,o.bufferLength=`${i.videoBufferLength}s, ${i.latency?i.latency/1e3+"s":"N/A"}`,o.droppedFrames=`${i.droppedFrames}/${i.decodedFrames}, ${i.decodedFrames-Lt(this,Mt,"f")<0?0:i.decodedFrames-Lt(this,Mt,"f")}FPS`,Pt(this,Mt,i.decodedFrames,"f"),i.decodedFrames>0&&Lt(this,Tt,"f").updateGraph(r),this.repaintGraph()}createTemplateProxy(){return new Proxy(this.template,{get:function(e,t,n){if(t in e)return e[t];throw new ReferenceError('Prop name "'+t+'" does not exist.')},set:function(e,t,n,i){var r;if(e[t]!==n){e[t]=n;const i=null===(r=document.getElementById(`${It}${t}`))||void 0===r?void 0:r.querySelector(".web-player-line-data");null!=i&&(i.textContent=n)}return!0}})}repaintGraph(){if(0===Lt(this,St,"f").status)return;const e=Lt(this,Tt,"f").getGraph(),t=document.querySelector(".web-player-info-graph");null!=t&&(t.innerHTML=e)}combineDataElement(){const e=document.createDocumentFragment();return Object.keys(this.videoTemplate).forEach((t=>{const n=document.createElement("div");n.id=`${It}${t}`,n.style.cssText+="\n          min-width: 290px;\n          line-height: 18px;\n          font-size: 12px;\n        ",n.innerHTML=`\n          <div style="display: inline-block;\n          white-space: nowrap;\n          width: 100px;\n          text-align: right;\n          font-weight: 500;\n          margin-right: 10px;">${this.videoTemplate[t].label}:</div>\n          ${"networkActivity"===t?'<div style="display: inline-block; margin-right: 10px;" class="web-player-info-graph">'+Lt(this,Tt,"f").getGraph()+"</div>":""}\n          <div style="display: inline-block; min-width: 58px" class="web-player-line-data">${this.videoTemplate[t].data}</div>\n        `,e.appendChild(n)})),e}computeBps(t){return t<1e3?`${(0,e.QV)(t,0)}Kbps`:`${(0,e.QV)(t/1e3,1)}Mbps`}};var Dt=a(2002),Ot={};Ot.styleTagTransform=je(),Ot.setAttributes=Re(),Ot.insert=Oe().bind(null,"head"),Ot.domAPI=Ae(),Ot.insertStyleElement=Ve();Le()(Dt.Z,Ot);Dt.Z&&Dt.Z.locals&&Dt.Z.locals;class Bt{constructor(e,t){this.container=e,this._snippet=['<div class="blp-plugin-modal-header"></div>','<div class="blp-plugin-modal-body"></div>','<div class="blp-plugin-modal-footer clearfix"></div>','<div class="blp-plugin-modal-close"><i class="live-icon-close"></i></div>'],this._opts=Object.assign({},Bt._DEFAULT_OPTIONS,t),this._initialize()}show(){const e=this._opts,t=this._template;this._freshPos(),t._container.classList.add("active"),"function"==typeof e.onShow&&e.onShow()}hide(){const e=this._opts;this._template._container.classList.remove("active"),"function"==typeof e.onHide&&e.onHide(),e.autoRemove&&this.destroy()}destroy(){this._template._container.remove()}_initialize(){this._create()._bindEvents(),this._opts.autoShow&&this.show()}_create(){const t=(0,e.az)("div",{classname:"blp-plugin-modal"});t.innerHTML=this._snippet.join(""),this._template={_container:t,_header:t.querySelector(".blp-plugin-modal-header"),_body:t.querySelector(".blp-plugin-modal-body"),_footer:t.querySelector(".blp-plugin-modal-footer"),_close:t.querySelector(".blp-plugin-modal-close")};const n=this._template,i=this._opts;return n._header.innerText=i.title,n._body.innerHTML=""!==i.html?i.html:i.text,this._createBtn(n._footer,i.btns,i),i.hideBtn&&n._close.classList.add("active"),this.container.appendChild(t),null!=i.width&&0!==i.width&&(t.style.width=`${i.width}px`),this}_createBtn(t,n,i){if(n instanceof Array)n.forEach((e=>{this._createBtn(t,e,i)}));else{let r=null;switch(n.type){case"submit":r=(0,e.az)("button",{classname:"blp-plugin-modal-btn submit-btn"}),r.innerHTML=n.text,"function"==typeof n.click&&r.addEventListener("click",(e=>{n.click(e),this.hide()}));break;case"cancel":r=(0,e.az)("button",{classname:"blp-plugin-modal-btn cancel-btn"}),r.innerHTML=n.text,"flex-report"===i.btnPostion&&r.classList.add("live-bilibili-player-report-cancel"),r.addEventListener("click",(()=>{var e;null===(e=n.click)||void 0===e||e.call(n),this.hide()}))}null!=r&&t.append(r)}}_bindEvents(){return this._opts.hideBtn&&this._template._close.addEventListener("click",(()=>{this.hide()})),this}_freshPos(){const e=this._opts,t=this._template._container,n=this._template._footer;let i="",r="",o=0,a=0;const s=t.style;if("flex-report"===e.btnPostion)n.style.cssText="\n          display: flex;\n          justify-content: space-around;\n          margin-top: 69px;\n        ",s.height="190px",s.padding="20px";if("center-center"===e.position)i="50%",r="50%",o=-1*parseInt(s.width)/2,a=-1*parseInt(s.height)/2;s.left=i,s.top=r,s.marginLeft=`${o}px`,s.marginTop=`${a}px`}}Bt._DEFAULT_OPTIONS={title:"Bilibili HTML5 Live Player Modal",theme:"white",text:"Are you confirm the operation?",html:"",btns:[{type:"submit",text:"Confirm",click:()=>{}},{type:"cancel",text:"Cancel",click:()=>{}}],mask:!0,position:"center-center",hideBtn:!0,autoShow:!1,autoRemove:!1};const Rt=Bt;var $t=a(7599),Vt={};Vt.styleTagTransform=je(),Vt.setAttributes=Re(),Vt.insert=Oe().bind(null,"head"),Vt.domAPI=Ae(),Vt.insertStyleElement=Ve();Le()($t.Z,Vt);$t.Z&&$t.Z.locals&&$t.Z.locals;var Ft,jt,Ht=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},Ut=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},Nt=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};const Wt="/xlive/web-ucenter/v1/dMReport/ForReason",zt="/xlive/web-ucenter/v1/dMReport/Report";class qt{constructor(e){Ft.set(this,null),jt.set(this,void 0),Ut(this,jt,e,"f")}static _createModalHtml(e,t){let n="";const i=t.reduce(((e,t)=>e+`<li>${t.reason}</li>`),'<li class="web-player-report-item-default" style="display: none">请选择举报理由喔~</li>');return n=`\n      <div class="web-player-report-wrap">\n        <div class="web-player-report-uname">${e.uname}</div>\n        <div class="web-player-report-msg">${encodeURIComponent(e.msg)}</div>\n        <div class="web-player-report-select-wrap">\n          <div class="web-player-report-select-input">\n            <div class="web-player-report-curt">请选择举报理由喔~</div>\n            <div class="web-player-report-icon"></div>\n          </div>\n          <ul class="web-player-report-ul">${i}</ul>\n        </div>\n      </div>\n    `,n}show(t){return Ht(this,void 0,void 0,(function*(){let n;try{const t=yield(0,e.hj)(Wt);n=null!=t?t.data:[{id:1,reason:"违法违规"},{id:2,reason:"低俗色情"},{id:3,reason:"垃圾广告"},{id:4,reason:"辱骂引战"},{id:5,reason:"政治敏感"},{id:6,reason:"青少年不良信息"},{id:7,reason:"其他"}]}catch(e){n=[{id:1,reason:"违法违规"},{id:2,reason:"低俗色情"},{id:3,reason:"垃圾广告"},{id:4,reason:"辱骂引战"},{id:5,reason:"政治敏感"},{id:6,reason:"青少年不良信息"},{id:7,reason:"其他"}]}this.handleReport(t,n)}))}resetReasonVisible(e){[...e.children].forEach((e=>{e instanceof HTMLElement&&(e.style.display="block")}))}checkReportState(){const e=document.querySelector(".live-bilibili-player-report-cancel");null==e||e.click()}handleReport(e,t){this.checkReportState();const n=qt._createModalHtml(e,t);null==Nt(this,Ft,"f")&&Ut(this,Ft,new Rt(Nt(this,jt,"f"),{title:"举报弹幕",html:n,btns:[{type:"submit",text:"警察叔叔就是他",click:()=>Ht(this,void 0,void 0,(function*(){yield this._submitFunction(e,t),f()}))},{type:"cancel",text:"饶他一命",click:()=>{f()}}],width:360,btnPostion:"flex-report"}),"f");const i=document.querySelector(".web-player-report-uname"),r=document.querySelector(".web-player-report-msg");i.innerText=e.uname,e.img_url.length>0?r.innerHTML=`<img src=${e.img_url}>`:r.innerText=e.msg,Nt(this,Ft,"f").show();const o=document.querySelector(".web-player-report-ul"),a=document.querySelector(".web-player-report-curt"),s=document.querySelector(".web-player-report-select-wrap"),l=document.querySelector(".blp-plugin-modal-btn"),c=document.querySelector(".web-player-report-item-default"),u=(e=>{this.resetReasonVisible(o);const t=e.target.innerText;l.disabled="请选择举报理由喔~"===t&&"获取不到举报理由，请尝试刷新后举报喔~"===t,a.innerText=t,o.style.display="none",c.style.display="block",e.target.style.display="none"}).bind(this),h=(()=>{o.style.display="none"}).bind(this),d=(()=>{o.style.display="block"}).bind(this),f=()=>{var e;a.innerText="请选择举报理由喔~",c.style.display="none",this.resetReasonVisible(o),o.removeEventListener("click",u),null==s||s.removeEventListener("mouseover",d),null==s||s.removeEventListener("mouseout",h),null===(e=Nt(this,Ft,"f"))||void 0===e||e.destroy(),Ut(this,Ft,null,"f")};l.disabled=!0,o.addEventListener("click",u),null==s||s.addEventListener("mouseover",d),null==s||s.addEventListener("mouseout",h)}_submitFunction(t,n){var i;return Ht(this,void 0,void 0,(function*(){const r=Nt(this,jt,"f").querySelector(".web-player-report-curt").innerText,o=t.checkInfo;let a=0;const s=n.filter((e=>e.reason===r));if(null!=s&&0!==s.length&&(a=s[0].id),""!==r)try{yield(0,e.hj)(zt,{method:"POST",data:{reason:r,roomid:t.roomid,msg:t.msg,tuid:t.uid,ts:o.ts,sign:o.ct,reason_id:a,dm_type:t.type,file_id:t.file_id,img_url:t.img_url,id_str:t.id_str}}),null===(i=Nt(this,Ft,"f"))||void 0===i||i.hide()}catch(t){e.kg.error(t)}}))}}Ft=new WeakMap,jt=new WeakMap;const Zt=qt;var Gt=a(1401),Kt={};Kt.styleTagTransform=je(),Kt.setAttributes=Re(),Kt.insert=Oe().bind(null,"head"),Kt.domAPI=Ae(),Kt.insertStyleElement=Ve();Le()(Gt.Z,Kt);const Qt=Gt.Z&&Gt.Z.locals?Gt.Z.locals:void 0;var Yt,Xt,Jt,en,tn=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},nn=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};const rn="web-player-show-log";Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,en=new WeakMap;const on=class{constructor(t){Yt.set(this,(0,e.az)("div",{classname:Qt.webPlayerLogPanel})),Xt.set(this,(0,e.az)("pre")),Jt.set(this,!1),en.set(this,null),this.initPanel(),t.appendChild(tn(this,Yt,"f")),"1"===localStorage.getItem(rn)&&this.show(),tn(this,Yt,"f").addEventListener("dblclick",(e=>{e.preventDefault(),e.stopPropagation()}))}show(){tn(this,Yt,"f").style.display="block",tn(this,Jt,"f")||nn(this,en,this.syncLogger(),"f"),localStorage.setItem(rn,"1")}destroy(){var e;null===(e=tn(this,en,"f"))||void 0===e||e.call(this),tn(this,Yt,"f").remove()}initPanel(){const e=this.createCloseBtn();tn(this,Yt,"f").appendChild(e)}createCloseBtn(){const t=(0,e.az)("div",{text:"[x]",classname:Qt.closeBtn});return t.addEventListener("click",(e=>{e.stopPropagation(),tn(this,Yt,"f").style.display="none",localStorage.setItem(rn,"0")})),t}syncLogger(){nn(this,Jt,!0,"f");const t=document.createDocumentFragment();return e.kg.history().forEach((e=>{t.appendChild(n(e))})),tn(this,Xt,"f").appendChild(t),tn(this,Yt,"f").appendChild(tn(this,Xt,"f")),e.kg.watch((e=>{tn(this,Xt,"f").appendChild(n(e))}));function n(t){const n=document.createElement("code");return n.classList.add(Qt[`log${t.level}`]),n.textContent=`${e.kg.stringify(t,{tag:!1,time:!1})}\n`,n}}};var an=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function sn(t){return an(this,void 0,void 0,(function*(){for(const e of["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"])if("function"==typeof t[e])return t[e]();if(e.ua.isIOS()){const e=t.querySelector("video");if("function"==typeof(null==e?void 0:e.webkitEnterFullScreen))return void e.webkitEnterFullScreen()}throw new Error("browser unsupported fullscreen")}))}function ln(){return an(this,void 0,void 0,(function*(){const t=cn();if(null!=t){for(const e of["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"])if("function"==typeof document[e])return document[e]();e.ua.isIOS()&&!0===t.webkitDisplayingFullscreen&&t.webkitExitFullScreen()}}))}function cn(){for(const e of["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"]){const t=document[e];if(null!=t)return t}if(e.ua.isIOS())for(const e of document.querySelectorAll("video"))if(!0===e.webkitDisplayingFullscreen)return e;return null}const un={onChange:function(e){const t=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];for(const n of t)document.addEventListener(n,e);return()=>{for(const n of t)document.removeEventListener(n,e)}},toggleFullScreen:function(e){return an(this,void 0,void 0,(function*(){const t=cn();e.contains(t)?yield ln():yield sn(e)}))},getFullscreenElement:cn,requestFullscreen:sn,exitFullscreen:ln};var hn=a(6861);const dn={[e.in.Error]:"red",[e.in.Info]:"blue",[e.in.Warn]:"orange",[e.in.Debug]:"gray"},fn="indexedDB"in window||"webkitIndexedDB"in window||"mozIndexedDB"in window,pn=new hn.sI({appName:"live-web-player"});let vn;function mn(e){fn&&pn.recieveMsg(e,{source:"socket-report",latestCount:20})}pn.formatter((e=>({content:e.$content,ts:e.$createTime,color:dn[e.$type]}))),fn&&e.kg.watch((e=>{pn.log({content:e.content,ts:e.ts,type:e.level})}));var yn=a(3007),gn={};gn.styleTagTransform=je(),gn.setAttributes=Re(),gn.insert=Oe().bind(null,"head"),gn.domAPI=Ae(),gn.insertStyleElement=Ve();Le()(yn.Z,gn);const wn=yn.Z&&yn.Z.locals?yn.Z.locals:void 0;function bn(e,t,n){const i=e.createShader(t);if(null==i)throw Error("Can't create shader");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(i);throw e.deleteShader(i),Error(null!=t?t:"An error occurred compiling the shaders")}return i}const _n=[-1,1,-1,-1,1,-1,1,-1,1,1,-1,1],kn=[0,1,0,0,1,0,1,0,1,1,0,1];function Cn(e,t,n){if(null==e)throw Error("Cant create gl context");const i=function(e,t,n){const i=bn(e,e.VERTEX_SHADER,t),r=bn(e,e.FRAGMENT_SHADER,n),o=e.createProgram();if(null==o)throw Error("Can't create shader program");if(e.attachShader(o,i),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error("Unable to initialize the shader program");return o}(e,En,Sn);e.useProgram(i),e.uniform1f(e.getUniformLocation(i,"srcWidth"),t),e.uniform1f(e.getUniformLocation(i,"srcHeight"),n),e.uniform1i(e.getUniformLocation(i,"frameTexture"),0);const r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array(_n),e.STATIC_DRAW);const o=e.getAttribLocation(i,"aPos");e.vertexAttribPointer(o,2,e.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0),e.enableVertexAttribArray(o);const a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array(kn),e.STATIC_DRAW);const s=e.getAttribLocation(i,"aTexCoord");e.vertexAttribPointer(s,2,e.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0),e.enableVertexAttribArray(s)}function xn(e){const t=document.createElement("canvas");if("VIDEO"!==e.tagName)return{canvas:t,supported:!1,stop:()=>{}};const n=function(e,t){function n(){e.width=t.videoWidth,e.height=t.videoHeight,["width","height","position","left","top","zIndex","overflow"].forEach((n=>{e.style[n]=t.style[n]}));const n=t.style.objectFit;e.style.objectFit=0===n.length?"contain":n}n();const i=new MutationObserver((e=>{e.some((e=>"style"===e.attributeName))&&n()}));return i.observe(t,{attributes:!0}),()=>{i.disconnect()}}(t,e),i=null!=e.requestVideoFrameCallback?e.requestVideoFrameCallback.bind(e):requestAnimationFrame,r=null!=e.cancelVideoFrameCallback?e.cancelVideoFrameCallback.bind(e):cancelAnimationFrame;let o=!0,a=0,s=null;const l=t.getContext("webgl2");function c(){n(),null==t||t.remove(),o=!1,r(a)}return null==l?c():(Cn(l,e.videoWidth,e.videoHeight),s=function(e){const t=e.createTexture();if(null==t)throw Error("Could not create texture");e.bindTexture(e.TEXTURE_2D,t);const n=e.RGBA,i=e.RGBA,r=e.UNSIGNED_BYTE,o=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,i,r,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),t}(l),function t(){if(null==l||null==s)return;(function(e,t,n){e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.drawArrays(e.TRIANGLES,0,6)})(l,s,e),a=i(t)}()),{canvas:t,supported:o,stop:c}}const Sn="#version 300 es\n// Copyright (c) 2023 Bilibili Inc. All rights reserved.\n// ======================================================================\n// Bili Mobile Super Resolution [BMSR] - scaling & sharpening & vibrance\n// v0.2.7\n// ======================================================================\nprecision highp float;\nout vec4 FragColor;\n\nin vec2 TexCoord;\n\nuniform sampler2D frameTexture;\nuniform float srcWidth; //input width\nuniform float srcHeight; //input height\nconst float usmCoeff = 1.2; // for usm v2, range [1.0, 1.5]\nconst float upperCoeff = 0.5; // range [0.0, 1.0]\nconst float lowerCoeff = 0.5; // range [0.0, 1.0]\nconst float vibCoeff = 0.2; // range [0.0, 0.5)\nconst float brightCoeff = 0.15; // range [0.0, 0.3]\n\nconst float lobe = 0.25; // default 0.25\nconst float eps = 1.0e-8;\n\nvoid calcMeanVar(\n    inout vec3 aMean,\n    inout vec3 aVar,\n    float w,\n    vec3 a, vec3 b, vec3 c, vec3 d, vec3 e\n) {\n    vec3 sum = a + b + c + d + e;\n    vec3 mean = sum / 5.0;\n    vec3 sum2 = a * a + b * b + c * c + d * d + e * e;\n    vec3 var = sum2 / 5.0 - mean * mean;\n    aMean += w * mean;\n    aVar += w * var;\n}\n\nvoid vibranceV2(\n    inout vec3 rgbUSM,\n    vec3 rgbRS\n) {\n    float rgbMax = max(rgbRS.r, max(rgbRS.g, rgbRS.b));\n    float rgbMin = min(rgbRS.r, min(rgbRS.g, rgbRS.b));\n    float delta = rgbMax - rgbMin;\n    float flag = step(eps, delta);\n    float value = rgbMax + rgbMin;\n    float L = value / 2.0;\n    float S = delta / abs(2.0 * step(0.5, L) - value);\n    float alpha = 1.0 / clamp(1.0 - vibCoeff, S, 1.0) - 1.0;\n    rgbUSM = rgbUSM + flag * alpha * (rgbUSM - L);\n}\n\nvoid lanczos2(\n    inout vec3 aC,\n    inout float aW,\n    vec2 off,\n    vec3 c\n) {\n    vec2 wA = 0.4 * off * off - 1.0;\n    wA = 1.5625 * wA * wA - 0.5625;\n    vec2 wB = lobe * off * off - 1.0;\n    wB *= wB;\n    wB *= wA;\n    float w = wB.x * wB.y;\n    aC += w * c;\n    aW += w;\n}\n\nvoid main() {\n    vec2 invSrc = vec2(1.0 / srcWidth, 1.0 / srcHeight);\n    vec2 pp = TexCoord * vec2(srcWidth, srcHeight) - 0.5; // output texture coordinate in the input pixel coordinate\n    vec2 fp = floor(pp); // fp is F in the pixel coordinate\n    pp -= fp; // offset to the top left f\n    fp = fp + 0.5; // make fp being the pixel coordinate corresponding to f in the texture coordinate\n    vec3 bC = texture(frameTexture, (fp + vec2(0.0, -1.0)) * invSrc).rgb;\n    vec3 cC = texture(frameTexture, (fp + vec2(1.0, -1.0)) * invSrc).rgb;\n    vec3 eC = texture(frameTexture, (fp + vec2(-1.0, 0.0)) * invSrc).rgb;\n    vec3 fC = texture(frameTexture, fp * invSrc).rgb;\n    vec3 gC = texture(frameTexture, (fp + vec2(1.0, 0.0)) * invSrc).rgb;\n    vec3 hC = texture(frameTexture, (fp + vec2(2.0, 0.0)) * invSrc).rgb;\n    vec3 iC = texture(frameTexture, (fp + vec2(-1.0, 1.0)) * invSrc).rgb;\n    vec3 jC = texture(frameTexture, (fp + vec2(0.0, 1.0)) * invSrc).rgb;\n    vec3 kC = texture(frameTexture, (fp + vec2(1.0, 1.0)) * invSrc).rgb;\n    vec3 lC = texture(frameTexture, (fp + vec2(2.0, 1.0)) * invSrc).rgb;\n    vec3 nC = texture(frameTexture, (fp + vec2(0.0, 2.0)) * invSrc).rgb;\n    vec3 oC = texture(frameTexture, (fp + vec2(1.0, 2.0)) * invSrc).rgb;\n    vec3 rgbRS = vec3(0.0);\n    float aW = 0.0;\n    lanczos2(rgbRS, aW, vec2(0.0, -1.0) - pp, bC);\n    lanczos2(rgbRS, aW, vec2(1.0, -1.0) - pp, cC);\n    lanczos2(rgbRS, aW, vec2(-1.0, 0.0) - pp, eC);\n    lanczos2(rgbRS, aW, vec2(0.0, 0.0) - pp, fC);\n    lanczos2(rgbRS, aW, vec2(1.0, 0.0) - pp, gC);\n    lanczos2(rgbRS, aW, vec2(2.0, 0.0) - pp, hC);\n    lanczos2(rgbRS, aW, vec2(-1.0, 1.0) - pp, iC);\n    lanczos2(rgbRS, aW, vec2(0.0, 1.0) - pp, jC);\n    lanczos2(rgbRS, aW, vec2(1.0, 1.0) - pp, kC);\n    lanczos2(rgbRS, aW, vec2(2.0, 1.0) - pp, lC);\n    lanczos2(rgbRS, aW, vec2(0.0, 2.0) - pp, nC);\n    lanczos2(rgbRS, aW, vec2(1.0, 2.0) - pp, oC);\n    rgbRS /= aW;\n    rgbRS = clamp(rgbRS, 0.0, 1.0);\n    vec3 mean = vec3(0.0);\n    vec3 var = vec3(0.0);\n    calcMeanVar(mean, var, (1.0 - pp.x) * (1.0 - pp.y), bC, eC, fC, gC, jC);\n    calcMeanVar(mean, var, pp.x * (1.0 - pp.y), cC, fC, gC, hC, kC);\n    calcMeanVar(mean, var, (1.0 - pp.x) * pp.y, fC, iC, jC, kC, nC);\n    calcMeanVar(mean, var, pp.x * pp.y, gC, jC, kC, lC, oC);\n    vec3 W = usmCoeff + 1.0 / (var + 1.0);\n    vec3 rgbUSM = mean + W * (rgbRS - mean);\n    vec3 diff = rgbUSM - rgbRS;\n    vec3 rgbRS2 = rgbRS * rgbRS;\n    vec3 maxDiff = 0.5 * rgbRS2 * rgbRS2 - 1.32 * rgbRS2 * rgbRS + 1.12 * rgbRS2 - 0.38 * rgbRS + 0.08;\n    vec3 minDiff = maxDiff - 0.08;\n    rgbUSM = rgbRS + min(max(diff, minDiff), maxDiff);\n    rgbUSM = clamp(rgbUSM, 0.0, 1.0);\n    vibranceV2(rgbUSM, rgbRS);\n    rgbUSM = -brightCoeff * rgbUSM * rgbUSM + (1.0 + brightCoeff) * rgbUSM;\n    FragColor = vec4(rgbUSM, 1.0);\n}",En="#version 300 es\nlayout (location = 0) in vec2 aPos;\nlayout (location = 1) in vec2 aTexCoord;\n\nout vec2 TexCoord;\n\nvoid main()\n{\n    gl_Position = vec4(aPos, 0.0, 1.0);\n    TexCoord = vec2(aTexCoord.x, 1.0 - aTexCoord.y);\n}";function Mn(n,i,r){var o;const a=Object.assign(Object.assign({},n),{status:null!==(o=e.jP.get("videoEnhance"))&&void 0!==o?o:n.status});i.ctrl.getCtrlUI().videoEnhanceConf=a;let s=a.status,l=()=>{};function c(e){if(l(),"click"!==e||s||r("close"),!s)return;const o=Number(i.getPlayerInfo().quality.replace(/\D/g,"")),a=Number.isNaN(o)||o>n.highestQuality;"click"===e&&r("open",a?0:1),a||(l=function(e){let n=()=>{},i=0,r=0;const o=()=>{const t=e.getVideoEl();if(null==t)return;i=t.videoWidth,r=t.videoHeight;const{canvas:o,supported:a,stop:s}=xn(t);a&&(n(),n=s,e.container.appendChild(o))};o();const a=e.on(t.pc.Destroyed,(()=>{n()}));let s=0;const l=e.on(t.Bs.MetaData,(()=>{let t=0;clearInterval(s),s=window.setInterval((()=>{if(t>15)return void clearInterval(s);t+=1;const a=e.getVideoEl();null!=a&&(a.videoWidth===i&&a.videoHeight===r||(clearInterval(s),n(),o()))}),1e3)}));return()=>{clearInterval(s),n(),a(),l()}}(i))}c();const u=i.ctrl.onChange(((t,n)=>{"qualityPanelShow"!==t||!0!==n?"videoEnhance"===t&&(s=n,e.jP.set("videoEnhance",s),c("click")):r("show")})),h=i.on(t.Bs.FirstFrame,c);return()=>{u(),h(),l()}}function Tn(e,t,n){return Math.max(t,Math.min(n,e))}var Pn=a(3124),Ln={};Ln.styleTagTransform=je(),Ln.setAttributes=Re(),Ln.insert=Oe().bind(null,"head"),Ln.domAPI=Ae(),Ln.insertStyleElement=Ve();Le()(Pn.Z,Ln);Pn.Z&&Pn.Z.locals&&Pn.Z.locals;var In,An,Dn,On,Bn,Rn,$n,Vn,Fn,jn,Hn,Un,Nn,Wn,zn,qn,Zn=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},Gn=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};class Kn{constructor(t,n){var i,r;In.add(this),An.set(this,{}),Dn.set(this,(0,e.az)("div",{attributes:[["id","web-player-subtitle"],["class","web-player-subtitle"],["style","position: releative"]]})),On.set(this,(0,e.az)("div",{attributes:[["class","web-player-subtitle-wrap"]]})),Bn.set(this,(()=>{})),Rn.set(this,(()=>{})),$n.set(this,!1),Vn.set(this,new e.Nd),Fn.set(this,Zn(this,Vn,"f").emit),this.on=Zn(this,Vn,"f").on,jn.set(this,{"#BFEDFA":null,"#FFB3CA":null,"#FFF5BF":null,"#FFC18F":null,"#89E1E1":null,"#D8B6FF":null}),Hn.set(this,(()=>{})),Un.set(this,!1),Nn.set(this,!1),Zn(this,Dn,"f").appendChild((0,e.az)("div")),Zn(this,Dn,"f").appendChild((0,e.az)("div")),i=Zn(this,Dn,"f"),null==(r=n.pos)?(i.style.left="50%",i.style.bottom="15%",i.style.transform="translateX(-50%)"):(i.style.left=r.x,i.style.bottom=r.y),Zn(this,On,"f").appendChild(Zn(this,Dn,"f")),t.appendChild(Zn(this,On,"f"))}get visible(){return Zn(this,Un,"f")}set visible(e){e||(Zn(this,Dn,"f").style.display="none"),Gn(this,Un,e,"f")}get pos(){return{x:Zn(this,Dn,"f").style.left,y:Zn(this,Dn,"f").style.bottom}}get draggable(){return Zn(this,Nn,"f")}set draggable(e){e?Zn(this,On,"f").classList.add("draggable"):Zn(this,On,"f").classList.remove("draggable"),Gn(this,Nn,e,"f"),Zn(this,Rn,"f").call(this),e&&Gn(this,Rn,function(e,t,n){let i=0,r=0,o=0,a=0,s=100,l=100,c=0,u=0,h=0;const d=({clientX:n,clientY:d})=>{o=n,a=d;const{x:f,y:p}=t.getBoundingClientRect();c=f,u=p;const{x:v,y:m,width:y,height:g}=e.getBoundingClientRect();i=v,r=m,h=g,s=(t.clientWidth-y)/t.clientWidth*100,l=100-g/t.clientHeight*100},f=({clientX:n,clientY:d})=>{const f=d,p=(i+n-o-c)/t.clientWidth*100,v=100-(r+f-a-u+h)/t.clientHeight*100;e.style.transform="",e.style.left=`${Tn(p,0,s)}%`,e.style.bottom=`${Tn(v,15,l)}%`},p=e=>{d(e.touches[0])},v=e=>{e.preventDefault(),f(e.touches[0])},m=e=>{e.preventDefault(),e.stopPropagation(),f(e)},y=e=>{d(e),window.addEventListener("mouseup",g),window.addEventListener("mousemove",m),n.onMouseDown()},g=e=>{e.preventDefault(),e.stopPropagation(),window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",m),n.onMouseUp()};return e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("touchmove",v,{passive:!1}),e.addEventListener("mousedown",y),()=>{e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",v),e.removeEventListener("mousedown",y),document.body.removeEventListener("mouseup",g),document.body.removeEventListener("mousemove",m)}}(Zn(this,Dn,"f"),Zn(this,On,"f"),{onMouseDown:()=>{Gn(this,$n,!0,"f"),Zn(this,Dn,"f").classList.add("dragging"),Zn(this,Fn,"f").call(this,"dragStart")},onMouseUp:()=>{Gn(this,$n,!1,"f"),Zn(this,Dn,"f").classList.remove("dragging"),Zn(this,Dn,"f").dataset.offsetBottom=Zn(this,Dn,"f").style.bottom,Zn(this,Fn,"f").call(this,"dragEnded",{x:Zn(this,Dn,"f").style.left,y:Zn(this,Dn,"f").style.bottom})}}),"f")}add(e){for(const t in Zn(this,An,"f"))e.id in Zn(this,An,"f")[t]&&delete Zn(this,An,"f")[t][e.id];const t=Zn(this,An,"f")[e.roleId],n=Zn(this,In,"m",Wn).call(this,e.roleId);null==t?(e.color=n,Zn(this,An,"f")[e.roleId]={[e.id]:e}):t[e.id]=Object.assign(Object.assign({},e),{color:n})}setVideoSource(e){Zn(this,Hn,"f").call(this);const t=new MutationObserver((t=>{if(t.some((e=>"style"===e.attributeName))){["width","height","left","top"].forEach((t=>{Zn(this,On,"f").style[t]=e.style[t]}))}}));t.observe(e,{attributes:!0}),Gn(this,Hn,t.disconnect.bind(t),"f"),Zn(this,In,"m",qn).call(this,e)}destroy(){Zn(this,Bn,"f").call(this),Gn(this,An,{},"f"),Zn(this,Dn,"f").remove(),Zn(this,Hn,"f").call(this)}}function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qn.apply(this,arguments)}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}An=new WeakMap,Dn=new WeakMap,On=new WeakMap,Bn=new WeakMap,Rn=new WeakMap,$n=new WeakMap,Vn=new WeakMap,Fn=new WeakMap,jn=new WeakMap,Hn=new WeakMap,Un=new WeakMap,Nn=new WeakMap,In=new WeakSet,Wn=function(e){if("0"===e)return"#FFFFFF";let t="";for(const[n,i]of Object.entries(Zn(this,jn,"f"))){if(i===e){t=n;break}null==i&&""===t&&(t=n)}return""!==t&&(Zn(this,jn,"f")[t]=e),t},zn=function(e){const t=1e3*e.currentTime;return Object.values(Zn(this,An,"f")).map((e=>Object.values(e))).filter((e=>e.length>0)).slice(0,2).map((e=>{let n=1/0,i=null;return e.forEach((e=>{if(e.offset+e.duration<t)return delete Zn(this,An,"f")[e.roleId][e.id],void(0===Object.keys(Zn(this,An,"f")[e.roleId]).length&&delete Zn(this,An,"f")[e.roleId]);if(t<e.offset)return;const r=Math.abs(t-e.offset);r<n&&(n=r,i=e)})),i})).filter(Boolean)},qn=function(e){const t=()=>{if(!Zn(this,Un,"f")||Zn(this,$n,"f"))return;const t=Zn(this,In,"m",zn).call(this,e);if(0===t.length)return void(Zn(this,Dn,"f").style.display="none");Zn(this,Dn,"f").childNodes.forEach(((e,n)=>{var i;e.textContent="";const r=t[n];null!=r&&(e.textContent=t[n].content,e.style.color=null!==(i=r.color)&&void 0!==i?i:"#fff")}));const n=Zn(this,Dn,"f").offsetTop,i=Zn(this,Dn,"f").style.bottom;if(n<0&&!i.startsWith("calc"))Zn(this,Dn,"f").style.bottom=`calc(${i} + ${Zn(this,Dn,"f").offsetTop}px)`;else if(n>=0){const e=Zn(this,Dn,"f").dataset.offsetBottom;null!=e&&(Zn(this,Dn,"f").style.bottom=e)}Zn(this,Dn,"f").style.display="block"};e.addEventListener("timeupdate",t),Zn(this,Bn,"f").call(this),Gn(this,Bn,(()=>{e.removeEventListener("timeupdate",t)}),"f")};var Xn,Jn,ei,ti,ni=2592e6;!function(e){e[e.NON_STRICT=0]="NON_STRICT",e[e.STRICT=1]="STRICT"}(Xn||(Xn={})),function(e){e.TEST="test",e.PROD="prod"}(Jn||(Jn={})),function(e){e.KEY="key",e.GROUP="group",e.APP="app"}(ei||(ei={})),function(e){e.PV="333.1334.kv-init.pv",e.ERROR="333.1334.kv-init.error"}(ti||(ti={}));var ii=new(function(){function e(){this.queue=[],this.reporter=void 0,this.loading=!1}var t=e.prototype;return t.loadScript=function(e,t){try{var n=document;return Promise.resolve(new Promise((function(i,r){var o,a=document.getElementById(e);a&&a.parentElement&&window.ReporterPb?i(""):((a=n.createElement("script")).onload=function(){return i("")},a.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||i("")},a.onerror=function(){return r("load report script error")},a.id=e,a.type="text/JavaScript",a.src=t,null==(o=n.querySelector("head"))||o.appendChild(a))})))}catch(e){return Promise.reject(e)}},t.init=function(){try{var e=this;return Promise.resolve(function(t,n){try{var i=function(){function t(){e.reporter=new window.ReporterPb({spmPrefix:"333.1334",sampleRate:1,autoPv:!1,retry:!1,feature:{tech:!0}}),e.loading=!1,e.reportQueue()}if(!e.reporter&&void 0!==typeof window&&!e.loading){e.loading=!0;var n=function(){if(!window.ReporterPb)return Promise.resolve(e.loadScript("kvReportDb","//s1.hdslb.com/bfs/seed/jinkela/short/reporter-pb/index.js")).then((function(){}))}();return n&&n.then?n.then(t):t()}}()}catch(e){return n(e)}return i&&i.then?i.then(void 0,n):i}(0,(function(t){e.loading=!1,console.error(t)})))}catch(e){return Promise.reject(e)}},t.reportQueue=function(){if(this.reporter)for(var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yn(e,t):void 0}}(e))){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.queue);!(e=t()).done;){var n=e.value;this.report(n.event,n.value)}},t.report=function(e,t){void 0===t&&(t={});try{if(!this.reporter)return this.queue.push({event:e,value:t}),void this.init();var n=Qn({type:e===ti.ERROR?"error":"custom"},t);this.reporter.tech(e,n)}catch(e){console.error(e)}},e}()),ri="KV_CONFIG_SDK",oi=function(){function e(e){var t=e.appKey,n=e.nscode;this.appKey=void 0,this.appKeyStorageName=void 0,this.appKey=t,this.appKeyStorageName=t+"_"+n,this.checkLocalStorage()}var t=e.prototype;return t.checkLocalStorage=function(){var t=e.getLocalStorage();if(t){for(var n in t){var i=(new Date).getTime();t[n].timestamp+t[n].expires<i&&delete t[n]}Object.keys(t).length>40&&Object.keys(t).sort((function(e,n){return t[e].lastUsed-t[n].lastUsed})).slice(40).forEach((function(e){delete t[e]})),e.setLocalStorage(t)}},t.getAppKey=function(){var t=e.getLocalStorage()||{};return t[this.appKeyStorageName]?(t[this.appKeyStorageName].lastUsed=(new Date).getTime(),e.setLocalStorage(t),t[this.appKeyStorageName]||{}):{}},t.setAppkey=function(t){var n=Qn({timestamp:(new Date).getTime(),lastUsed:(new Date).getTime()},t),i=e.getLocalStorage()||{};i[this.appKeyStorageName]=n,e.setLocalStorage(i)},e.getLocalStorage=function(){var e;try{(e=localStorage.getItem(ri))&&(e=JSON.parse(e))}catch(t){console.error("从本地获取"+ri+"的时候异常",t),e=void 0,ii.report(ti.ERROR,{message:"从本地获取"+ri+"的时候异常"+(t.message||"")})}return e},e.setLocalStorage=function(e){try{localStorage.setItem(ri,JSON.stringify(e))}catch(e){!function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t}(e)?(console.log("storage 更新失败",e),ii.report(ti.ERROR,{message:"storage 更新失败"+(e.message||"")})):(console.log("storage 超出浏览器限制",e),ii.report(ti.ERROR,{message:"storage 超出浏览器限制"+(e.message||"")}))}},e}();function ai(e,t,n){return new Promise((function(i,r){(function(e,t){return new Promise(((n,i)=>{let r=new XMLHttpRequest;function o(){if(!r)return;const e=r.responseType,t=function(e){const t=e.trim().split(/[\r\n]+/),n={};return t.forEach((e=>{const t=e.split(": "),i=t.shift(),r=t.join(": ");i&&(n[i]=r)})),n}(r.getAllResponseHeaders());!r.status||r.status>=200&&r.status<=299?n({data:e&&"text"!==e?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:t}):i(new Error(`Request Error: ${r.status} ${r.statusText}`)),r=null}if(r.open((null==t?void 0:t.method)||"GET",e,!0),r.timeout=(null==t?void 0:t.timeout)||2e3,r.responseType=(null==t?void 0:t.responseType)||"json",r.onreadystatechange=function(){r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&setTimeout(o)},r.onabort=function(){r&&(i(new Error(`Request aborted: ${e}`)),r=null)},r.onerror=function(){i(new Error(`Network Error: ${e}`)),r=null},r.ontimeout=function(){i(null!=t&&t.timeout?`Timeout exceeded: ${t.timeout}`:"Timeout exceeded"),r=null},r.withCredentials=(null==t?void 0:t.withCredentials)||!1,null!=t&&t.headers)for(const e in t.headers)r.setRequestHeader(e,t.headers[e]);r.send((null==t?void 0:t.data)||null)}))})(function(e,t,n){void 0===t&&(t={});var i=t?Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"):"";return""+function(e,t){if(e)return e;var n="api.YmlsaWJpbGk=.com".split(".").map((function(e,t){return 1===t?window.atob(e):e})).join(".");return t===Jn.PROD?n=n.replace(/^(?:pre-|uat-)/,""):t===Jn.TEST&&/^api/.test(n)&&(n="pre-"+n),window.location.protocol+"//"+n}(null==n?void 0:n.baseURL,null==n?void 0:n.env)+e+(i?"?"+i:"")}(e,t,n),{method:"GET"}).then((function(e){var t=e.data,n=void 0===t?{}:t;0===n.code?i(n):r(n)}),(function(e){r(e)})).catch((function(e){r(e)}))}))}function si(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var li=function(){function e(e){this.options={appKey:"",apiURL:"",nscode:0,expires:ni,strict:Xn.STRICT},this.storage=void 0,this.fetchPromise=void 0,this.flattenValue={},this.nestedValue={};var t=e.appKey,n=e.expires,i=void 0===n?ni:n;if(!t)return ii.report(ti.ERROR,{message:"no appkey passed"}),void console.warn("appKey is required");this.options=Qn({},this.options,e,{expires:Math.min(i,ni)}),this.storage=new oi({appKey:t,nscode:this.options.nscode});var r=this.storage.getAppKey(),o=r.versionId;this.updateValue(r.value||{}),(this.options.strict!==Xn.NON_STRICT||e.autoFetch)&&(this.fetchPromise=this.fetchAppKey(o)),this.report(ti.PV)}var t=e.prototype;return t.getAll=function(){try{return Promise.resolve(this.getBase(ei.APP))}catch(e){return Promise.reject(e)}},t.getGroup=function(e){try{return Promise.resolve(this.getBase(ei.GROUP,e))}catch(e){return Promise.reject(e)}},t.get=function(e){try{return Promise.resolve(this.getBase(ei.KEY,e))}catch(e){return Promise.reject(e)}},t.getBase=function(e,t){void 0===t&&(t="");try{var n=this,i=function(){if(e===ei.APP)return n.nestedValue;if(e===ei.GROUP)return n.nestedValue[t]||{};var i=t.split("."),r=i[0];return n.nestedValue[r]?n.nestedValue[r][i[1]]:""};if(n.options.strict===Xn.NON_STRICT||!n.options.appKey)return Promise.resolve(i());if(!n.fetchPromise){var r=n.storage.getAppKey();n.fetchPromise=n.fetchAppKey(r.versionId)}return Promise.resolve(n.fetchPromise.then((function(){return i()})))}catch(e){return Promise.reject(e)}},t.fetchAppKey=function(e){try{var t=this,n=t.options,i=n.appKey,r=n.nscode,o=si((function(){return Promise.resolve(ai("/x/kv-frontend/namespace/data",{appKey:i,versionId:e,nscode:r},{baseURL:t.options.apiURL,env:t.options.env})).then((function(e){var n=e.data;t.storage.setAppkey({value:n.data,versionId:n.versionId,appVersionId:n.appVersionId,nscode:r,appKey:t.options.appKey,expires:t.options.expires}),t.updateValue(n.data)}))}),(function(e){-304!==e.code&&t.report(ti.ERROR,{message:e.message||e.msg||"获取失败"})}));return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},e.updateLocalAppKey=function(e){try{return Promise.resolve(si((function(){var t=e.appKey,n=e.appVersionId,i=e.apiBaseURL,r=oi.getLocalStorage();if(r){var o=Object.keys(r).filter((function(e){return r[e].appKey===t&&r[e].appVersionId!==n})).map((function(e){return r[e]}));if(o.length)return Promise.resolve(ai("/x/kv-frontend/app/batchupdates",{appKey:t,batches:JSON.stringify(o.map((function(e){return{appVersionId:e.appVersionId,nscode:e.nscode}})))},{baseURL:i})).then((function(e){var n=e.data,i=oi.getLocalStorage()||{};n.forEach((function(e){var n=t+"_"+e.nscode;if(e.deleted)delete i[n];else if(e.updated){var r={timestamp:(new Date).getTime(),value:e.data,versionId:e.versionId,appVersionId:e.appVersionId,nscode:e.nscode,appKey:t};i[n]=Qn({},i[n]||{},r)}})),oi.setLocalStorage(i)}))}}),(function(e){-304!==e.code&&console.error(e)})))}catch(e){return Promise.reject(e)}},t.updateValue=function(e){var t=this;this.flattenValue=e;var n={};Object.keys(this.flattenValue).forEach((function(e){var i=e.split("."),r=i[0],o=i[1];n[r]||(n[r]={}),n[r][o]=t.flattenValue[e]})),this.nestedValue=n},t.report=function(e,t){void 0===t&&(t={}),ii.report(e,Qn({appKey:this.options.appKey,nscode:this.options.nscode,sdkVersion:"1.2.8"},t))},e}(),ci=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const ui=new li({appKey:"444.186",nscode:0,strict:Xn.STRICT}).getAll();var hi=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function di(e,{roomId:t,userId:n}){var i,r;return hi(this,void 0,void 0,(function*(){let o=null;const a=yield function(){return ci(this,void 0,void 0,(function*(){return yield ui}))}();if(null==(null===(i=a[e])||void 0===i?void 0:i.main))return null;const s=JSON.parse(a[e].main);o=null!==(r=s.global)&&void 0!==r?r:null;for(const e in s)(/^room:/.test(e)&&e.slice(5).split(",").map((e=>Number(e))).includes(t)||/^user:/.test(e)&&e.slice(5).split(",").map((e=>Number(e))).includes(n))&&(o=s[e]);return o}))}var fi,pi,vi,mi,yi,gi,wi,bi,_i,ki,Ci,xi,Si,Ei,Mi,Ti,Pi,Li,Ii,Ai,Di,Oi,Bi,Ri,$i,Vi,Fi,ji,Hi,Ui,Ni,Wi,zi,qi,Zi,Gi,Ki,Qi,Yi,Xi,Ji,er,tr,nr=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},ir=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},rr=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};e.kg.printToConsole=e.y3.Log2Console,(0,B.Yl)("RoomPlayer"),function(e){e[e.Click=1]="Click",e[e.Esc=2]="Esc",e[e.DBClick=3]="DBClick",e[e.Other=4]="Other"}(tr||(tr={}));class or{constructor(i,r){var o,a,s;this.container=i,this.opts=r,fi.set(this,void 0),pi.set(this,void 0),vi.set(this,void 0),mi.set(this,null),yi.set(this,void 0),gi.set(this,void 0),wi.set(this,void 0),bi.set(this,void 0),_i.set(this,void 0),ki.set(this,[]),Ci.set(this,null),xi.set(this,null),Si.set(this,!1),Ei.set(this,new e.Nd),Mi.set(this,[]),Ti.set(this,0),Pi.set(this,!1),Li.set(this,void 0),Ii.set(this,void 0),Ai.set(this,null),Di.set(this,(()=>{})),Oi.set(this,void 0),Bi.set(this,function(e){let t=null,n=null,i=()=>{};return{conf:r=>{r.is_enabled&&(t={title:r.title,visbility:r.is_enabled,status:1===r.default_switch_status,highestQuality:r.highest_quality,desc:r.desc},null!=n&&t.visbility&&(i=Mn(t,n,e)))},connect:r=>{n=r,null!=t&&t.visbility&&(i=Mn(t,n,e))},destroy:()=>{i()}}}(((t,n)=>{ir(this,Ei,"f").emit(e.n4.UserOperation,{path:`ctrl.quality.videoEnhance.${t}`,value:n})}))),Ri.set(this,void 0),$i.set(this,void 0),this.reload=()=>nr(this,void 0,void 0,(function*(){var t,n,i;if(!ir(this,Pi,"f")){rr(this,Pi,!0,"f"),null===(t=ir(this,Ai,"f"))||void 0===t||t.remove(),rr(this,Ai,null,"f");try{const t=ir(this,vi,"f");let r=ir(this,fi,"f");if(null==r&&(r=yield(0,B.vL)({roomId:t,isMobile:!1},this.container,this.opts.roomInfoProvider)),ir(this,Si,"f"))return;switch(ir(this,zi,"f").call(this),null===(n=ir(this,xi,"f"))||void 0===n||n.setRoomStatus(r.live_status),r.live_status){case D.Preparing:ir(this,Qi,"f").call(this,t),this.updateRoomStatus(D.Preparing);break;case D.Live:this.updateRoomStatus(D.Live),rr(this,mi,ir(this,ji,"f").call(this,r,ir(this,yi,"f")),"f");break;case D.Round:this.updateRoomStatus(D.Round),rr(this,mi,ir(this,Vi,"f").call(this),"f")}this.emit(e.n4.WebPlayerCreated),null!=ir(this,mi,"f")&&(ir(this,Xi,"f").call(this),ir(this,ki,"f").push((0,B.ur)(ir(this,mi,"f"),this)),!1===(null===(i=this.opts.UI)||void 0===i?void 0:i.danmaku)&&(0,B.wi)({danmakuBiz:ir(this,gi,"f"),ctrl:ir(this,mi,"f").ctrl})),ir(this,ki,"f").push(ir(this,Ui,"f").call(this,ir(this,yi,"f"))),rr(this,fi,void 0,"f")}finally{rr(this,Pi,!1,"f"),e.kg.info("room player is reload")}}})),Vi.set(this,(()=>{var n,i;const r=ir(this,vi,"f"),o=new t.fe(this.container,{roomId:r,userId:ir(this,pi,"f"),enableCtrlUI:null===(i=null===(n=this.opts.UI)||void 0===n?void 0:n.enableCtrlUI)||void 0===i||i});return me.default.event(me.$F.CreateRoundPlayer,{sample:.1}),o.on("failed",((e,n,i=me.default.ErrorCode.RoomRoundUnknow)=>{e===t.Dn.Preround?ir(this,ki,"f").push(Ee(this.container,this.reload,n)):e===t.Dn.Nonenabled?ir(this,Qi,"f").call(this,r,"系统维护中,轮播暂时不可用"):(me.default.error(i,`${e}`),ir(this,ki,"f").push((0,Se.J)(this.container,i)))})),o.on(t.Bs.FirstFrame,(()=>{var e;const t=o.getVideoEl();null!=t&&(ir(this,gi,"f").danmakuStateHandler.updateVideoEl(t),!0===(null===(e=this.opts.UI)||void 0===e?void 0:e.enableMaskDanmaku)&&ir(this,gi,"f").danmakuStateHandler.maskSwitch(!0))})),e.Nd.forwardEvent(o,this,[e.n4.StartPlayRound,e.n4.Reload,t.Bs.MutePlay,t.Bs.NotAutoPlay,[t.Bs.WaitEnd,e.n4.WaitEnd],[t.Bs.WaitStart,e.n4.WaitStart],[t.Bs.FirstFrame,e.n4.FirstFrame],[t.Bs.Play,e.n4.Playing],[t.Bs.Pause,e.n4.Paused]]),ir(this,ki,"f").push(ar(ir(this,gi,"f"),o.ctrl,ir(this,pi,"f")),sr(o.ctrl,this)),o})),Fi.set(this,(()=>{un.exitFullscreen().then((()=>{this.emit(e.n4.FeedBackClick)})).catch((t=>{e.kg.warn(t)}))})),ji.set(this,((n,i)=>{var r,o,a,s,l,c,u,h,d,f,p,v,m,y,g;const{rnd:w,UI:b}=this.opts,_=new t.Gf(this.container,{roomId:ir(this,vi,"f"),roomInfo:n,userId:ir(this,pi,"f"),rnd:w,enableCtrlUI:null===(r=null==b?void 0:b.enableCtrlUI)||void 0===r||r,roomInfoProvider:e=>nr(this,void 0,void 0,(function*(){return yield(0,B.Ei)(e,this.opts.roomInfoProvider)}))},i);ir(this,Mi,"f").push((0,B.L5)(_,ir(this,gi,"f")));const k=_.ctrl.getCtrlUI();return k.ctrlItemVisibility.mirror=null!==(a=null===(o=this.opts.UI)||void 0===o?void 0:o.showMirror)&&void 0!==a&&a,k.ctrlItemVisibility.pip=null===(l=null===(s=this.opts.UI)||void 0===s?void 0:s.pip)||void 0===l||l,k.ctrlItemVisibility.subtitle=null!==(u=null===(c=this.opts.UI)||void 0===c?void 0:c.subtitle)&&void 0!==u&&u,k.ctrlItemVisibility.webFullScreen=null===(d=null===(h=this.opts.UI)||void 0===h?void 0:h.webFullScreen)||void 0===d||d,k.ctrlItemVisibility.subtitle&&ir(this,Hi,"f").enable(_),_.ctrl.updateItemVisibility({playStatus:null===(p=null===(f=this.opts.UI)||void 0===f?void 0:f.playStatus)||void 0===p||p,volume:null===(m=null===(v=this.opts.UI)||void 0===v?void 0:v.volume)||void 0===m||m,refresh:null===(g=null===(y=this.opts.UI)||void 0===y?void 0:y.refresh)||void 0===g||g}),ir(this,Ri,"f").call(this,_),ir(this,$i,"f").call(this,_),_.on(t.pc.Failed,((e,t)=>{me.default.error(e,null!=t?t:""),ir(this,ki,"f").push((0,Se.J)(this.container,e,t)),_.destroy()})),_.on(t.pc.LiveStatusChange,(e=>{this.updateRoomStatus(D.Preparing),ir(this,Ji,"f").call(this),e===D.Round?ir(this,ki,"f").push(Ee(this.container,this.reload)):ir(this,Qi,"f").call(this,ir(this,vi,"f"))})),_.on(t.Bs.FirstFrame,(()=>{var t;const n=_.getVideoEl();if(null==n)return;ir(this,gi,"f").danmakuStateHandler.updateVideoEl(n);const i=!0===(null===(t=this.opts.UI)||void 0===t?void 0:t.enableMaskDanmaku);ir(this,gi,"f").danmakuStateHandler.maskSwitch(i),function(t){if(cr)return;if(cr=!0,Math.random()>.01)return;let n=0;const i=(0,e.K4)({type:"avg"},(e=>{n=e}));window.setTimeout((()=>{var r;i(),me.default.perf(me.default.PerfCode.DevicePerf,n,{params:{cpuCnt:navigator.hardwareConcurrency,mem:null!==(r=navigator.deviceMemory)&&void 0!==r?r:-1,gpuRenderer:(0,e.t$)(),dmSwitch:t.dmSwitch,maskDM:t.dmBiz.bodyMaskDetectorStatus},extFields:[]})}),1e4)}({dmBiz:ir(this,gi,"f"),dmSwitch:_.ctrl.getCtrlUI().danmaku.display})})),e.Nd.forwardEvent(_,this,[e.n4.SwitchLine,e.n4.SwitchQuality,e.n4.SwitchQualityNotLogin,e.n4.Reload,e.n4.SEIParseData,[t.Bs.WaitEnd,e.n4.WaitEnd],[t.Bs.WaitStart,e.n4.WaitStart],t.Bs.MutePlay,t.Bs.NotAutoPlay,[t.Bs.FirstFrame,e.n4.FirstFrame],[t.Bs.Destroyed,e.n4.VideoDestroyed],[t.Bs.Play,e.n4.Playing],[t.Bs.Pause,e.n4.Paused],[t.Bs.MetaData,e.n4.MetaDataChange],[t.pc.VideoError,e.n4.VideoError],[t.pc.Failed,e.n4.PlayFaild]]),ir(this,Bi,"f").connect(_),ir(this,ki,"f").push(ir(this,Bi,"f").destroy,ar(ir(this,gi,"f"),_.ctrl,ir(this,pi,"f")),sr(_.ctrl,this),function(t,n){var i,r;const{line:o}=n.ctrl.getCtrlUI(),a=o.list;"number"==typeof o.value&&t.setLines(a,o.value,n.switchLine.bind(n));const s=null===(i=n.replay)||void 0===i?void 0:i.on("timeShiftChange",(e=>{"number"==typeof o.value&&e>0&&t.setLines([],o.value,n.switchLine.bind(n))})),l=null===(r=n.replay)||void 0===r?void 0:r.on("backLive",(()=>{"number"==typeof o.value&&t.setLines(a,o.value,n.switchLine.bind(n))})),c=n.on(e.n4.SwitchLine,(e=>{t.changeLine(e)}));return()=>{null==s||s(),null==l||l(),c()}}(ir(this,wi,"f"),_)),_})),Hi.set(this,(()=>{let n=()=>{};return{enable:i=>{n(),n=function(n){const i=e.jP.get("subtitle"),r=new Kn(n.container,i);function o(){const e=n.getVideoEl();null!=e&&r.setVideoSource(e)}n.ctrl.getCtrlUI().subtitleStatus={visible:i.visible,draggable:i.draggable},r.visible=i.visible,r.draggable=i.draggable,o();const a=n.ctrl.onChange(((t,n)=>{var i,o;if("subtitle"!==t||null==n)return;const a=n;("draggable"in a||"visible"in a)&&(r.draggable=null!==(i=a.draggable)&&void 0!==i?i:r.draggable,r.visible=null!==(o=a.visible)&&void 0!==o?o:r.visible,e.jP.set("subtitle",{visible:r.visible,draggable:r.draggable}))})),s=n.on(e.n4.SEIParseData,((t,n,i)=>{if(t===e.Yw.BILILIVESUBTITLE)try{const e=JSON.parse(i);for(const t of e)r.add({id:t.sub_id,roleId:t.role,content:t.sub,duration:t.dt_ms+(1===t.type?5e3:0),offset:1e3*n+t.ot_ms,type:t.type})}catch(t){e.kg.error(t)}})),l=n.on(t.Bs.FirstFrame,o),c=n.on(t.pc.Destroyed,(()=>{d()})),u=r.on("dragStart",(()=>{n.ctrl.hide(!0)})),h=r.on("dragEnded",(t=>{n.ctrl.show(),e.jP.set("subtitle",{pos:t})})),d=()=>{s(),a(),u(),h(),l(),c(),r.destroy()};return d}(i)},disable:()=>{n()}}})()),Ui.set(this,(i=>{e.kg.info("room player listen socket message");const r=t=>{e.kg.warn(`refresh by socket ${t}`),this.reload().catch((t=>{e.kg.error(t)}))},o=ir(this,vi,"f"),a=i.on("message",(i=>{if(!i.cmd.startsWith("DANMU_MSG")){switch(i.cmd){case n.t.Live:if(ir(this,mi,"f")instanceof t.Gf)break;ir(this,ki,"f").push((0,e.Nl)(1e4,(()=>{r(i.cmd)})));break;case n.t.Round:if(ir(this,mi,"f")instanceof t.fe)break;r(i.cmd);break;case n.t.Preparing:ir(this,Ji,"f").call(this),1===i.round?ir(this,ki,"f").push(Ee(this.container,this.reload)):ir(this,Qi,"f").call(this,o),this.updateRoomStatus(D.Preparing);break;case n.t.End:case n.t.Close:case n.t.Block:ir(this,Qi,"f").call(this,o),this.updateRoomStatus(D.Preparing);break;case n.t.Refresh:r(i.cmd);break;case n.t.AreaBlock:break;case n.t.HotRoomNotify:if(!Array.isArray(i.data.random_delay_req_v2))break;(()=>{const t=performance.now()+1e3*Number(i.data.ttl);isNaN(t)?e.kg.error(`HotRoomNotify ttl error: ${String(i.data.ttl)}`):(e.kg.debug(`HotRoomNotify msg: ${JSON.stringify(i.data.random_delay_req_v2)}`),i.data.random_delay_req_v2.forEach((({path:n,delay:i})=>{e.hj.disperse(n,{scope:i,expiresTime:t})})))})();break;case n.t.LOG_IN_NOTICE:0===ir(this,pi,"f")&&ir(this,Oi,"f").call(this)}this.emit(e.n4.ReceiveMessage,i)}})),s=i.on("heartbeat",(t=>{this.emit(e.n4.ReceiveOnlineCount,t.count)}));return()=>{a(),s()}})),Ni.set(this,((e,n)=>{var i;if(ir(this,mi,"f")instanceof t.Gf){const t=null===(i=ir(this,mi,"f"))||void 0===i?void 0:i.getVideoEl();"danmaku"===e&&ir(this,gi,"f").changeMaskState(t,n.enableMask),"playStatus"===e&&!0!==n&&(clearTimeout(ir(this,Ti,"f")),ir(this,gi,"f").changeMaskState(t,!1,!0))}})),Wi.set(this,((t,n)=>nr(this,void 0,void 0,(function*(){var i,r,o,a,s,l;switch(t){case"report":yield ir(this,Li,"f").show({uid:n.uid,roomid:ir(this,vi,"f"),uname:n.uname,msg:n.text,checkInfo:n.checkInfo,type:n.dmType,file_id:null!==(a=null!==(r=null===(i=n.voiceConfig)||void 0===i?void 0:i.file_id)&&void 0!==r?r:null===(o=n.emoticonOptions)||void 0===o?void 0:o.emoticon_unique)&&void 0!==a?a:"",img_url:null!==(l=null===(s=n.emoticonOptions)||void 0===s?void 0:s.url)&&void 0!==l?l:"",id_str:n.id_str});break;case"shield":de({component:"block",action:"addShieldUser",data:{uid:n.uid,uname:n.uname}},ir(this,gi,"f"),ir(this,vi,"f"),((t,n)=>{this.emit(e.n4.Set,{component:"block",action:t,data:n})}));break;case"addBlackList":this.emit(e.n4.Set,{component:"block",action:"addBlackList",data:n.uname})}})))),zi.set(this,(()=>{ir(this,ki,"f").forEach((e=>e())),rr(this,ki,[],"f")})),qi.set(this,(()=>{const n=Object.assign(Object.assign({NAME:"BILIBILI HTML5 LIVE PLAYER",VERSION:B.Vi.VERSION},"development"===B.Vi.NODE_ENV?{socket:ir(this,yi,"f")}:{}),{play:()=>{var e;null===(e=ir(this,mi,"f"))||void 0===e||e.play()},pause:()=>{var e;null===(e=ir(this,mi,"f"))||void 0===e||e.pause()},volume:t=>{var n;e.jP.setVolume(Object.assign(Object.assign({},e.jP.getVolume()),{value:t})),null===(n=ir(this,mi,"f"))||void 0===n||n.volume(t/100)},setDanmaku:()=>{},reload:this.reload,destroy:this.destroy,getOperableElements:this.getOperableElements,freeze:()=>{var e;null===(e=ir(this,mi,"f"))||void 0===e||e.blockStream()},refresh:()=>{this.reload().catch((t=>{e.kg.error(t)}))},set:t=>{"block"===t.component&&de(t,ir(this,gi,"f"),ir(this,vi,"f"),((t,n)=>{this.emit(e.n4.Set,{component:"block",action:t,data:n})}))},setFullscreenDanmaku:e=>{null!=ir(this,mi,"f")&&function(e,t){e.on("danmuInputBlur",(()=>{t.ctrl.show(!1)})),e.on("danmuInputFocus",(()=>{t.ctrl.show(!0)}))}(e,ir(this,mi,"f"))},sendDanmaku:t=>nr(this,void 0,void 0,(function*(){return yield ir(this,gi,"f").userSendDanmaku(t).then((n=>{const i={uniqueID:t.uniqueID,response:n};return this.emit(e.n4.SendDanmaku,i),i}))})),setFullscreenStatus:e=>{if(null==ir(this,mi,"f"))return;ir(this,mi,"f").ctrl.setScreenStatus(e)},toast:t=>{(0,e.Am)(t,this.container)},setToastCssText:t=>{(0,e.Nt)(t)},notifyInOperation:e=>{const{mainElement:t}=this.getOperableElements();t.style.zIndex=""+(e?9:-1)},notifyAnnouncement:this.notifyAnnouncement,injectInitAPIData:this.injectInitAPIData,getVideoEl:()=>{var e,t;return null!==(t=null===(e=ir(this,mi,"f"))||void 0===e?void 0:e.getVideoEl())&&void 0!==t?t:null},supportMaskDanmaku:()=>ir(this,gi,"f").supportMaskDanmaku(),featSupport:t=>"MaskDanmaku"===t?ir(this,gi,"f").supportMaskDanmaku():"VideoEnhance"===t?!e.ua.isSafari()&&null!=document.createElement("canvas").getContext("webgl2"):void 0,switchAudioTrack:e=>{var n,i;return ir(this,mi,"f")instanceof t.Gf&&null!==(i=null===(n=ir(this,mi,"f"))||void 0===n?void 0:n.switchAudioTrack(e))&&void 0!==i?i:-1},getAudioTracks:()=>{var e;if(ir(this,mi,"f")instanceof t.Gf)return null===(e=ir(this,mi,"f"))||void 0===e?void 0:e.getAudioTracks()},changeUIStatus:n=>{var i,r,o,a,s,l,c,u,h,d,f,p;const v=null===(i=ir(this,mi,"f"))||void 0===i?void 0:i.getVideoEl();if(null!==(o=null===(r=JSON.stringify(this.opts.roomInitDataV2))||void 0===r?void 0:r.includes("全景"))&&void 0!==o&&o&&null!=n.showMirror&&(n.showMirror=!1),null!=v&&(!0===n.enableMaskDanmaku?(ir(this,gi,"f").bodyMaskDetectorStatus=!0,ir(this,gi,"f").danmakuStateHandler.maskSwitch(!0)):!1===n.enableMaskDanmaku&&(ir(this,gi,"f").bodyMaskDetectorStatus=!1,ir(this,gi,"f").danmakuStateHandler.maskSwitch(!1))),!1===n.feedback?null===(a=ir(this,Ci,"f"))||void 0===a||a.call(this):!0===n.feedback&&null==ir(this,Ci,"f")&&rr(this,Ci,xe(this.container,ir(this,Fi,"f")),"f"),!1===n.logo?null===(s=ir(this,xi,"f"))||void 0===s||s.destroy():!0===n.logo&&null==ir(this,xi,"f")&&rr(this,xi,Ce(this.container),"f"),!1===n.recommend&&ir(this,Di,"f").call(this),this.opts.UI=Object.assign({},this.opts.UI,n),null==ir(this,mi,"f"))return;!0===n.subtitle&&ir(this,mi,"f")instanceof t.Gf?ir(this,Hi,"f").enable(ir(this,mi,"f")):!1===n.subtitle&&ir(this,Hi,"f").disable();const m=ir(this,mi,"f").ctrl.getCtrlUI();if(ir(this,mi,"f").ctrl.updateItemVisibility({playStatus:null===(c=null===(l=this.opts.UI)||void 0===l?void 0:l.playStatus)||void 0===c||c,volume:null===(h=null===(u=this.opts.UI)||void 0===u?void 0:u.volume)||void 0===h||h,refresh:null===(f=null===(d=this.opts.UI)||void 0===d?void 0:d.refresh)||void 0===f||f}),null!=n.showMirror&&(m.ctrlItemVisibility.mirror=n.showMirror),m.ctrlItemVisibility.subtitle=null!==(p=this.opts.UI.subtitle)&&void 0!==p&&p,!1===n.webFullScreen&&(m.ctrlItemVisibility.webFullScreen=!1),null!=n.pip&&(m.ctrlItemVisibility.pip=n.pip),null!=n.pipStatus)if(m.pipStatus=n.pipStatus,n.pipStatus){const t=ir(this,mi,"f").getVideoEl();null==t||t.requestPictureInPicture().catch(e.kg.error)}else null!=document.pictureInPictureElement&&document.exitPictureInPicture().catch((t=>{e.kg.error(t)}));null!=n.showDanmakuSetting&&(m.ctrlItemVisibility=Object.assign(Object.assign({},m.ctrlItemVisibility),{danmakuPanel:n.showDanmakuSetting})),!1===n.danmaku&&(0,B.wi)({danmakuBiz:ir(this,gi,"f"),ctrl:ir(this,mi,"f").ctrl})},changeDanmakuExtraConfig:e=>{ir(this,gi,"f").updateDanmakuExtraConfig(e)},changeCtrlVisible:(e,t)=>{var n;const i=null===(n=ir(this,mi,"f"))||void 0===n?void 0:n.ctrl;if(null==i)return;const r=!1===t;e?i.show(r):i.hide()},capturePic:(e,t)=>{var n,i;return null!==(i=null===(n=ir(this,mi,"f"))||void 0===n?void 0:n.capturePic(e,t))&&void 0!==i?i:null},on:(t,n)=>{var i;if(t===e.n4.Initialized)return n({type:"html5"}),void e.kg.info("room player emit external event: Initialized");if(t===e.n4.InitDanmaku){const t=ir(this,gi,"f").getDanmakuConfig();return e.kg.info(`room player emit external event: InitDanmaku, data: ${JSON.stringify(t)}`),void n(Object.assign(Object.assign({},t),{room_shield:null===(i=ir(this,fi,"f"))||void 0===i?void 0:i.room_shield}))}return this.on(t,n)},once:(e,t)=>this.once(e,t),addLoadingPicture:e=>{var t;null===(t=ir(this,mi,"f"))||void 0===t||t.setTitlePageImg(e)},stopPlayback:t=>{var n;null!=ir(this,mi,"f")&&(ir(this,mi,"f").destroy(),ir(this,zi,"f").call(this),(0,e.d_)(null!==(n=null==t?void 0:t.url)&&void 0!==n?n:"//s1.hdslb.com/bfs/static/player/live/html5/images/error@1x.png",this.container),ir(this,ki,"f").push((()=>{(0,e.d_)(null,this.container)})))},getPlayerInfo:()=>{var n,i;const r=ir(this,mi,"f"),o={type:1,version:B.Vi.VERSION,playerType:"HTML5",liveStatus:D.Preparing,playerStatus:0,playingStatus:!1,playurl:"",guid:"",quality:"0",qualityCandidates:[],timeShift:0};if(null==r)return o;const a=r.getPlayerInfo(),s=null!==(n=r.ctrl.getCtrlUI().webFullScreenStatus)&&void 0!==n&&n?1:null!==(i=r.ctrl.getCtrlUI().fullScreenStatus)&&void 0!==i&&i?2:0;return Object.assign(Object.assign({},o),{liveStatus:r instanceof t.Gf?1:0,playerStatus:s,timeShift:a.timeShift,playingStatus:a.playingStatus,playurl:a.playSrc,guid:a.guid,quality:a.quality,streamName:a.streamName,qualityCandidates:a.qualityCandidates.map((({label:e,value:t})=>({qn:t,desc:e}))),volume:r.ctrl.getCtrlUI().volume,danmaku:e.jP.getDanmaku()})},switchQuality:e=>{ir(this,mi,"f")instanceof t.Gf&&ir(this,mi,"f").switchQuality(e)},updateDMSetting:t=>{null!=ir(this,gi,"f")&&(e.jP.setDanmaku(Object.assign(Object.assign({},e.jP.getDanmaku()),t)),(0,B.gT)(t,ir(this,gi,"f")))},init:(e,t)=>{"config"===e&&(null==t?void 0:t.isAdmin)?ir(this,wi,"f").setAdmin():"videoEnhanceConf"===e&&ir(this,Bi,"f").conf(t)},remainBufferLength:()=>ir(this,mi,"f")instanceof t.Gf?ir(this,mi,"f").remainBufferLength():0,discardFrame:e=>{if(ir(this,mi,"f")instanceof t.Gf){if(!ir(this,mi,"f").getPlayerInfo().playingStatus)return;ir(this,mi,"f").discardFrame(e)}},sendGift:()=>{},resize:()=>{var e;ir(this,gi,"f").resize(),null===(e=ir(this,mi,"f"))||void 0===e||e.ctrl.setMiniMode(this.container.clientWidth<=500)},noticeGift:()=>{},setChasingFrameThreshold:()=>{},loadVideo:()=>{},getP2PTransport:()=>{if(ir(this,mi,"f")instanceof t.Gf){const e=ir(this,mi,"f").getP2PTransport();return{downloadExtraFile:e.downloadExtraFile,shareExtraFile:e.shareExtraFile}}},changeCtrlIconVisible:ir(this,Zi,"f"),appendCtrlItem:(e,t)=>{var n;if(!(e instanceof Element))throw new Error("Illegal arguments, el not an Element");const i=null===(n=ir(this,mi,"f"))||void 0===n?void 0:n.ctrl.getCtrlUI();if(null==i)throw Error("Can't get controller instance");return i.appendCtrlItem(e,t)},userFeedback:(0,e.Ds)((e=>nr(this,void 0,void 0,(function*(){me.default.custom(me.default.CustomCode.UserFeedBack,e),yield function(e){return nr(this,void 0,void 0,(function*(){if(!["其他问题或建议","黑屏","播放卡顿"].includes(e.type))return;const t=5,n=36e5;try{yield pn.report({startTime:Date.now()-n,endTime:Date.now(),latestCount:t,source:`player-report[${e.type}]`})}catch(e){me.default.error(me.default.ErrorCode.ApiBiz,"LogReportFail")}}))}(Object.assign(Object.assign({},e),{mid:ir(this,pi,"f"),buvid:ir(this,Ii,"f")}))}))),400),setBottomBar:(t,n="normal",i)=>{let r=n,o=[];const a=document.createElement("div");a.id="web-player__bottom-bar__container",a.style.cssText=`\n          width: 100%;\n          position: absolute;\n          bottom: 0;\n          z-index: ${null!=i?i.toString():"auto"}\n        `,a.appendChild(t),this.container.appendChild(a);const s=ir(this,gi,"f").getDanmakuElement(),l=t=>{var n;null!=ir(this,mi,"f")?null===(n=ir(this,mi,"f"))||void 0===n||n.ctrl.setBottomDistance(t):o.push(this.on(e.n4.WebPlayerCreated,(()=>{var e;null===(e=ir(this,mi,"f"))||void 0===e||e.ctrl.setBottomDistance(t)})))},c=()=>nr(this,void 0,void 0,(function*(){return yield new Promise((t=>{var n;null==ir(this,mi,"f")?o.push(this.on(e.n4.FirstFrame,(()=>{var e;t(null===(e=ir(this,mi,"f"))||void 0===e?void 0:e.getVideoEl())}))):t(null===(n=ir(this,mi,"f"))||void 0===n?void 0:n.getVideoEl())}))})),u=()=>{c().then((e=>{null!=e&&(e.style.height="normal"===r?`calc(100% - ${a.clientHeight}px)`:"100%")})).catch((e=>{console.log(e)}))},h=(e,t)=>{r=e,u(),s.style.height="normal"===e?`calc(100% - ${a.clientHeight}px)`:"100%",ir(this,gi,"f").resize(),a.style.zIndex=null!=t?t.toString():"auto"};h(n,i),l(a.clientHeight);const d=null!=window.ResizeObserver?new ResizeObserver((e=>l(e[0].target.clientHeight))):null;null==d||d.observe(a),o.push(this.on(e.n4.FirstFrame,(()=>{null!=ir(this,mi,"f")&&u()})));return{remove:()=>{this.container.removeChild(a),c().then((e=>{null!=e&&(e.style.height="100%")})).catch((e=>console.log(e))),s.style.height="100%",ir(this,gi,"f").resize(),l(0),null==d||d.unobserve(a),o.forEach((e=>e())),o=[]},switchShowType:h}}});for(const t in n){const i=t;if("function"==typeof n[i]){if(["getPlayerInfo","notifyAnnouncement","notifyInOperation","on","set","getOperableElements","remainBufferLength","receiveOnlineCount"].includes(i))continue;const t=n[i];n[i]=(...n)=>(e.kg.debug(`external call player api: ${i}, args: ${JSON.stringify(n)}`),t(...n))}}return n})),Zi.set(this,(e=>{var t,n;if(null!=ir(this,mi,"f")){const i=ir(this,mi,"f").ctrl.getCtrlUI();i.ctrlItemVisibility=Object.assign(Object.assign({},i.ctrlItemVisibility),{playStatus:e.play,volume:e.volume,time:e.time,refresh:e.reload,quality:e.quality,rightSetting:e.setting,danmaku:e.danmaku,fullScreen:e.fullscreen,webFullScreen:e.webFullscreen}),e.danmaku?ir(this,gi,"f").fetchBlockRules():ir(this,gi,"f").destroy(),e.feedback||null===(t=ir(this,Ci,"f"))||void 0===t||t.call(this),e.logo||null===(n=ir(this,xi,"f"))||void 0===n||n.destroy()}})),Gi.set(this,!1),Ki.set(this,(n=>{var i,r;if(!(ir(this,mi,"f")instanceof t.Gf))return;const o=ir(this,mi,"f").ctrl.getCtrlUI().danmaku,a=null===(i=ir(this,mi,"f"))||void 0===i?void 0:i.getVideoEl();if(null==o||null==a)return;const s=null===(r=ir(this,mi,"f"))||void 0===r?void 0:r.ctrl.getCtrlUI().playStatus;e.ua.isChrome()?(ir(this,Gi,"f")||(rr(this,Gi,!0,"f"),me.default.custom(me.default.CustomCode.SVGDanmaku,{enableMask:o.enableMask,dmDisplay:o.display})),ir(this,gi,"f").onSei(n),o.enableMask&&(clearTimeout(ir(this,Ti,"f")),rr(this,Ti,window.setTimeout((()=>{s||(o.showMaskOption=!1,ir(this,gi,"f").changeMaskState(a,!1))}),1e4),"f")),o.showMaskOption=!0,!ir(this,gi,"f").maskState&&s&&ir(this,gi,"f").changeMaskState(a,o.enableMask)):(o.showMaskOption=!1,o.enableMask=!1,ir(this,gi,"f").changeMaskState(a,!1))})),this.notifyAnnouncement=(()=>{let e=!1;return(t=!0,n=100)=>{e!==t&&(e=t,ir(this,gi,"f").set({offsetTop:e?n:0}))}})(),this.updateRoomStatus=(()=>{let t=D.Preparing;return n=>{var i;ir(this,gi,"f").danmakuStateHandler.maskSwitch(!1),null===(i=ir(this,mi,"f"))||void 0===i||i.destroy(),rr(this,mi,null,"f"),t!==n&&(t=n,this.emit(e.n4.LiveStateChange,t))}})(),this.injectInitAPIData=e=>{ir(this,gi,"f").initDanmakuConfig(e)},this.on=(e,t)=>ir(this,Ei,"f").on(e,t),this.once=(e,t)=>ir(this,Ei,"f").once(e,t),this.emit=(t,...n)=>{[e.n4.ReceiveMessage,e.n4.ReceiveOnlineCount,e.n4.SEIParseData,e.n4.SEIData].includes(t)||e.kg.info(`room player emit external event: ${t}, data: ${JSON.stringify(n)}`);try{ir(this,Ei,"f").emit(t,...n)}catch(n){e.kg.error(`ExternalEventHandler error, event type: ${t}`)}},Qi.set(this,((t,n="")=>{var i,r,o;null===(i=ir(this,Ai,"f"))||void 0===i||i.remove(),rr(this,Ai,document.createElement("div"),"f"),this.container.appendChild(ir(this,Ai,"f")),rr(this,Di,be(this.container,ir(this,Ai,"f"),{roomId:t,rnd:this.opts.rnd,showRecommend:null===(o=null===(r=this.opts.UI)||void 0===r?void 0:r.recommend)||void 0===o||o},((t,n)=>{"info"===t&&this.emit(e.n4.Recommend,n),"redirect"===t&&this.emit(e.n4.UserRedirect,n.data)}),n),"f")})),this.destroy=()=>{var t,n,i,r;ir(this,Si,"f")||(rr(this,Si,!0,"f"),null===(t=ir(this,Ai,"f"))||void 0===t||t.remove(),rr(this,Ai,null,"f"),ir(this,Yi,"f").call(this).el.remove(),ir(this,Mi,"f").forEach((e=>e())),rr(this,Mi,[],"f"),e.kg.info("room player destroyed"),null===(n=ir(this,mi,"f"))||void 0===n||n.destroy(),ir(this,yi,"f").destroy(),ir(this,gi,"f").destroy(),ir(this,bi,"f").destroy(),ir(this,_i,"f").destroy(),ir(this,wi,"f").destroy(),ir(this,zi,"f").call(this),ir(this,Ei,"f").destroy(),null===(i=ir(this,Ci,"f"))||void 0===i||i.call(this),null===(r=ir(this,xi,"f"))||void 0===r||r.destroy())},this.getOperableElements=()=>{const{el:e}=ir(this,Yi,"f").call(this);return{mainElement:e}},Yi.set(this,(()=>{const t="web-player-inject-wrap";let n=this.container.querySelector(`.${t}`);return null==n&&(n=document.createElement("div"),n.classList.add(t),n.style.cssText="\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        z-index: -1;\n        pointer-events: none;\n      ",this.container.appendChild(n),this.on(e.n4.LiveStateChange,(e=>{null!=n&&(n.style.height=e===D.Round||e===D.Live?"auto":"100px")})),n.style.height=null==ir(this,mi,"f")?"100px":"auto"),{el:n}})),Xi.set(this,(()=>{var n;const i=ir(this,mi,"f");if(null==i)return;let r=0,o="";const a=(0,e.gR)(e.Yw.BILIMASK__SVGBIN);ir(this,ki,"f").push(function(e,t){const n=e.onChange(((e,n)=>{if("subtitle"===e)for(const e in n)t({path:`ctrl.subtitle.${e}`,value:n[e]})}));return()=>{n()}}(i.ctrl,(t=>{ir(this,Ei,"f").emit(e.n4.UserOperation,t)})),lr(i,this.container,null===(n=this.opts.UI)||void 0===n?void 0:n.enableAutoPlayTips),i.on(t.Bs.Destroyed,(()=>{if(ir(this,gi,"f").danmakuStateHandler.maskSwitch(!1),i instanceof t.Gf){const e=i.getVideoEl();ir(this,gi,"f").changeMaskState(e,!1),ir(this,gi,"f").clearMask()}})),i.ctrl.onChange(((t,n)=>{"volume"===t&&this.emit(e.n4.VolumeChange,n),ir(this,Ni,"f").call(this,t,n),"show"===t&&this.emit(e.n4.CtrlVisibleChange,n)})),i.on(t.Bs.SEIData,(e=>{a(e[2])&&ir(this,Ki,"f").call(this,e)})),i.on(t.Bs.VideoInfo,(t=>{ir(this,bi,"f").updateVideoTemplate(t),r=t.mediaInfo.videoDataRate;const{height:n,width:i}=t.mediaInfo,a=n>i?"vertical":"horizontal";a!==o&&(this.emit(e.n4.VideoDirectionChange,a),o=a)})),i.on(t.Bs.LoadStart,(0,e.rN)("VideoEventType.LoadStart",(()=>{this.emit(e.n4.FirstLoadStart)}))),i.on(t.Bs.MetaData,(0,e.rN)("VideoEventType.MetaData",(()=>{this.emit(e.n4.FirstLoadedMetaData)}))),i.on(t.Bs.Play,(0,e.rN)("VideoEventType.Play",(()=>{this.emit(e.n4.FirstPlaying)}))),i.on(t.Bs.WaitStart,(()=>{var t,n;const i=navigator.connection;e.kg.warn(`connect downlink is: ${null!==(t=null==i?void 0:i.downlink)&&void 0!==t?t:-1}Mbps,connect rtt is: ${null!==(n=null==i?void 0:i.rtt)&&void 0!==n?n:-1}ms,video bitRate is: ${(r/1024).toFixed(2)}Mbps`)})))})),Ji.set(this,(()=>{un.exitFullscreen().catch((()=>{e.kg.error("exit fullscreen error")})),this.emit(e.n4.WebFullscreen,!1,tr.Other),this.emit(e.n4.ScreenStateChange,"normal")})),er.set(this,(t=>{this.emit(e.n4.UserRedirect,t)}));const{cid:l,roomInitDataV2:c,rnd:u}=this.opts,h=!0===r.isActivity?B.cX.Activity:B.cX.Room,{userId:d,uvid:f}=(0,B.$F)(l,h);var p;return ir(this,Mi,"f").push(e.hj.watch(B.nb)),rr(this,pi,d,"f"),rr(this,Ii,f,"f"),me.default.event(me.default.EventCode.RoomPlayerInit,{offset:Math.round(performance.now())},{sampleRate:.5}),me.default.custom(me.default.CustomCode.CodecSupported,{av1:(0,e.Jw)(),hevc:(0,e.YI)()},{sampleRate:.5}),null!=c&&c.code>=0&&rr(this,fi,c.data,"f"),rr(this,vi,l,"f"),rr(this,yi,new n.Z({roomId:l,userId:d}),"f"),rr(this,gi,new he(this.container,{userId:d,rnd:u,roomId:l}),"f"),ir(this,gi,"f").connectSocket(ir(this,yi,"f"),(t=>{this.emit(e.n4.ReceiveMessage,t)})),!1===(null===(o=r.UI)||void 0===o?void 0:o.danmaku)&&(0,B.wi)({danmakuBiz:ir(this,gi,"f")}),p={roomId:l,socket:ir(this,yi,"f")},fn&&(pn.init({roomId:p.roomId,uid:(0,B.n5)(),ref:window.location.href,createTime:Date.now(),updateTime:Date.now()}),null!=p.socket&&(null!=vn&&vn(),vn=p.socket.on("message",mn))),rr(this,bi,new At(this.container),"f"),rr(this,_i,new on(this.container),"f"),rr(this,Li,new Zt(i),"f"),rr(this,wi,new ot(this.container,{uid:d,version:B.Vi.VERSION,click:Object.assign({handleEvent:ir(this,er,"f"),handleDanmu:ir(this,Wi,"f"),handleCodec:()=>{this.reload().catch(e.kg.error)}},(0,B.Sx)(ir(this,_i,"f"),ir(this,bi,"f")))}),"f"),rr(this,Oi,function(e,t){return e.onSelect((e=>t.updateDanmuInfo(e))),()=>{e.offSelect()}}(ir(this,gi,"f"),ir(this,wi,"f")),"f"),ir(this,Mi,"f").push(ir(this,Oi,"f"),(0,B.$J)(this.container)),!1!==(null===(a=r.UI)||void 0===a?void 0:a.feedback)&&rr(this,Ci,xe(i,ir(this,Fi,"f")),"f"),!1!==(null===(s=r.UI)||void 0===s?void 0:s.logo)&&rr(this,xi,Ce(this.container),"f"),rr(this,Ri,function(t,n){let i=null,r=null;return(()=>hi(this,void 0,void 0,(function*(){i=yield di("discard_frame",{roomId:t,userId:n}),null!=r&&null!=i&&r.setAutoDiscardFrameCfg(i)})))().catch(e.kg.error),e=>{r=e,!0===(null==i?void 0:i.enable)&&e.setAutoDiscardFrameCfg(i)}}(l,d),"f"),rr(this,$i,function(t,n){let i=null,r=null;return(()=>hi(this,void 0,void 0,(function*(){i=yield di("sync_progress",{roomId:t,userId:n}),null!=r&&null!=i&&r.setAutoSyncProgressCfg(i)})))().catch(e.kg.error),e=>{r=e,!0===(null==i?void 0:i.enable)&&e.setAutoSyncProgressCfg(i)}}(l,d),"f"),this.reload().catch((t=>{e.kg.error(t)})),ir(this,Mi,"f").push(function(){const e=()=>window.setTimeout((()=>{me.default.custom(me.default.CustomCode.HangUp,{time:Math.floor(performance.now()/1e3),visible:"visible"===document.visibilityState?1:0}),clearTimeout(t),t=e()}),18e5);let t=e();const n=()=>{clearTimeout(t),t=e()};return window.addEventListener("mousemove",n),()=>{window.removeEventListener("mousemove",n),clearTimeout(t)}}(),function(){const e=setInterval((()=>{var e,t;const n=navigator.connection;me.default.custom(me.default.CustomCode.NetSpeed,{downlink:null!==(e=null==n?void 0:n.downlink)&&void 0!==e?e:-1,rtt:null!==(t=null==n?void 0:n.rtt)&&void 0!==t?t:-1},{sampleRate:.1})}),18e4);return()=>{clearInterval(e)}}()),ir(this,qi,"f").call(this)}}function ar(t,n,i){const r=n.getCtrlUI();r.danmaku=e.jP.getDanmaku(),r.danmaku.showMaskOption=!1;let o=0;const a=n.onChange(((n,i)=>{if("webFullScreenStatus"===n)return clearTimeout(o),void(o=window.setTimeout((()=>{t.resize()}),10));"danmaku"===n&&(e.jP.setDanmaku(Object.assign(Object.assign({},r.danmaku),i)),(0,B.gT)(i,t)),"volume"===n&&e.jP.setVolume(Object.assign(Object.assign({},r.volume),i))})),s=un.onChange((()=>{clearTimeout(o),o=window.setTimeout((()=>{t.resize()}),300)}));return()=>{a(),s(),clearTimeout(o)}}function sr(t,n){let i=!1;const r=t.onChange(((r,o)=>nr(this,void 0,void 0,(function*(){const a=t.getCtrlUI();"fullScreenStatus"===r?(!1===o&&(i=!0),!0===a.webFullScreenStatus&&me.default.operation(me.default.OperationCode.WebFullScreenWay,0),a.webFullScreenStatus=!1,n.emit(e.n4.WebFullscreen,!1,tr.Other),a.fullScreenStatus=o,!0===o?n.container.contains(un.getFullscreenElement())||(yield un.requestFullscreen(n.container)):yield un.exitFullscreen(),n.emit(e.n4.ScreenStateChange,o?"full":"normal")):"webFullScreenStatus"===r&&(yield un.exitFullscreen(),i=!0,a.fullScreenStatus=!1,n.emit(e.n4.WebFullscreen,o,tr.Click),n.emit(e.n4.ScreenStateChange,o?"webFull":"normal"),!1===o&&t.hide())})))),o=un.onChange((()=>{const r=n.container===un.getFullscreenElement();r||i||(t.getCtrlUI().fullScreenStatus=!1,n.emit(e.n4.ScreenStateChange,"normal")),n.emit(e.n4.FullscreenChange,r,i?tr.Click:tr.Esc),i=!1}));return()=>{o(),r()}}fi=new WeakMap,pi=new WeakMap,vi=new WeakMap,mi=new WeakMap,yi=new WeakMap,gi=new WeakMap,wi=new WeakMap,bi=new WeakMap,_i=new WeakMap,ki=new WeakMap,Ci=new WeakMap,xi=new WeakMap,Si=new WeakMap,Ei=new WeakMap,Mi=new WeakMap,Ti=new WeakMap,Pi=new WeakMap,Li=new WeakMap,Ii=new WeakMap,Ai=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Bi=new WeakMap,Ri=new WeakMap,$i=new WeakMap,Vi=new WeakMap,Fi=new WeakMap,ji=new WeakMap,Hi=new WeakMap,Ui=new WeakMap,Ni=new WeakMap,Wi=new WeakMap,zi=new WeakMap,qi=new WeakMap,Zi=new WeakMap,Gi=new WeakMap,Ki=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,er=new WeakMap,or.isSupported=B.Gb,or.featSupport=t=>"MaskDanmaku"===t?he.supportMaskDanmaku():"VideoEnhance"===t&&(!e.ua.isSafari()&&null!=document.createElement("canvas").getContext("webgl2"));const lr=(n,i,r)=>{const o=null==r||r,a=[];return a.push(n.on(t.Bs.MutePlay,(()=>{if(!o)return;const r=function(e,n,i){const r=document.createElement("div"),o=document.createElement("img"),a=document.createElement("p");return o.src="//i0.hdslb.com/bfs/activity-plat/static/20211220/d0411babbbf77c49ca42a3320eb804ae/hDsUctDb2f.png",a.innerText="点击取消静音",r.classList.add(wn.mutePlayTipContainer),a.classList.add(wn.tipText),o.classList.add(wn.tipImg),r.appendChild(o),r.appendChild(a),e.appendChild(r),r.onclick=()=>{r.remove(),i()},n.on(t.R_.BottomDistanceChange,(e=>{const t=n.getCtrlUI().show;r.style.bottom=`${e+(t?50:10)}px`})),{destroy:()=>{r.remove()},change:e=>{r.style.bottom=`${parseInt(getComputedStyle(n.getCtrlEl()).bottom)+(e?50:10)}px`},show:e=>{r.style.display=e?"block":"none"}}}(i,n.ctrl,(()=>{const e=n.getVideoEl();null!=e&&(e.muted=!1)}));r.change(n.ctrl.getCtrlUI().show),a.push(n.on(t.Bs.Destroyed,r.destroy),n.ctrl.onRefresh(r.destroy),n.on(e.n4.SwitchLine,r.destroy),n.on(e.n4.SwitchQuality,r.destroy),r.destroy,n.ctrl.on(t.R_.CtrlItemVisibility,(e=>{"volume"in e&&r.show(e.volume)})),n.ctrl.onChange(((e,t)=>{if("show"===e&&r.change(t),"volume"===e){const{disabled:e,value:n}=t;(!e||n>0)&&r.destroy()}})))}))),a.push(n.on(t.Bs.NotAutoPlay,(()=>{if(!o)return;const r=function(e,t){const n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("p"),o=document.createElement("img");return n.classList.add(wn.notAutoPlayTipContainer),i.classList.add(wn.tipBtn),i.innerHTML="点击播放",r.classList.add(wn.tipText),r.innerHTML=`\n    你的浏览器<a class="${wn.textTipEmphasize}">不支持</a>自动播放\n  `,o.classList.add(wn.tipImg),o.src="//i0.hdslb.com/bfs/activity-plat/static/20211217/d0411babbbf77c49ca42a3320eb804ae/OqYjEF1uIM.png",i.onclick=()=>{n.remove(),t()},n.appendChild(o),n.appendChild(r),n.appendChild(i),e.appendChild(n),()=>{n.remove()}}(i,(()=>{const t=n.getVideoEl();null!=t&&(t.muted=!1,t.play().catch((t=>{e.kg.error("click btn to play failed")})))}));a.push(n.on(t.Bs.Destroyed,(()=>{r()})))}))),()=>{a.forEach((e=>{e()}))}};let cr=!1;window.Player=or})()})();